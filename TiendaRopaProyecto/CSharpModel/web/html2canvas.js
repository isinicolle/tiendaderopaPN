!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self);t.html2canvas=n()}}(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(t,i){(function(t,r){(function(){"use strict";function vt(n){return"function"==typeof n||"object"==typeof n&&null!==n}function w(n){return"function"==typeof n}function yt(n){return"object"==typeof n&&null!==n}function it(){}function pt(){return function(){t.nextTick(b)}}function wt(){var n=0,i=new ht(b),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function bt(){var n=new MessageChannel;return n.port1.onmessage=b,function(){n.port2.postMessage(0)}}function kt(){return function(){setTimeout(b,1)}}function b(){for(var t,i,n=0;v>n;n+=2)t=y[n],i=y[n+1],t(i),y[n]=void 0,y[n+1]=void 0;v=0}function l(){}function dt(){return new TypeError("You cannot resolve a promise with itself")}function gt(){return new TypeError("A promises callback cannot return that same promise.")}function ni(n){try{return n.then}catch(t){return d.error=t,d}}function ti(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function ii(n,t,i){p(function(n){var r=!1,e=ti(i,t,function(i){r||(r=!0,t!==i?a(n,i):f(n,i))},function(t){r||(r=!0,u(n,t))},"Settle: "+(n._label||" unknown promise"));!r&&e&&(r=!0,u(n,e))},n)}function ri(n,t){t._state===h?f(n,t._result):n._state===c?u(n,t._result):k(t,void 0,function(t){a(n,t)},function(t){u(n,t)})}function ui(n,t){if(t.constructor===n.constructor)ri(n,t);else{var i=ni(t);i===d?u(n,d.error):void 0===i?f(n,t):w(i)?ii(n,t,i):f(n,t)}}function a(n,t){n===t?u(n,dt()):vt(t)?ui(n,t):f(n,t)}function fi(n){n._onerror&&n._onerror(n._result);nt(n)}function f(n,t){n._state===s&&(n._result=t,n._state=h,0===n._subscribers.length||p(nt,n))}function u(n,t){n._state===s&&(n._state=c,n._result=t,p(fi,n))}function k(n,t,i,r){var u=n._subscribers,f=u.length;n._onerror=null;u[f]=t;u[f+h]=i;u[f+c]=r;0===f&&n._state&&p(nt,n)}function nt(n){var i=n._subscribers,e=n._state,r,u,f,t;if(0!==i.length){for(f=n._result,t=0;t<i.length;t+=3)r=i[t],u=i[t+e],r?ut(e,r,u,f):u(f);n._subscribers.length=0}}function rt(){this.error=null}function ei(n,t){try{return n(t)}catch(i){return tt.error=i,tt}}function ut(n,t,i,r){var e,l,o,v,y=w(i);if(y){if(e=ei(i,r),e===tt?(v=!0,l=e.error,e=null):o=!0,t===e)return void u(t,gt())}else e=r,o=!0;t._state!==s||(y&&o?a(t,e):v?u(t,l):n===h?f(t,e):n===c&&u(t,e))}function oi(n,t){try{t(function(t){a(n,t)},function(t){u(n,t)})}catch(i){u(n,i)}}function e(n,t,i,r){this._instanceConstructor=n;this.promise=new n(l,r);this._abortOnReject=i;this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?f(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&f(this.promise,this._result))):u(this.promise,this._validationError())}function si(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function hi(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function o(n){this._id=pi++;this._state=void 0;this._result=void 0;this._subscribers=[];l!==n&&(w(n)||si(),this instanceof o||hi(),oi(this,n))}var ft,ct,at,g;ft=Array.isArray?Array.isArray:function(n){return"[object Array]"===Object.prototype.toString.call(n)};var et,ot=ft,v=(Date.now||function(){return(new Date).getTime()},Object.create||function(n){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof n)throw new TypeError("Argument must be an object");return it.prototype=n,new it},0),p=function(n,t){y[v]=n;y[v+1]=t;v+=2;2===v&&et()},st="undefined"!=typeof window?window:{},ht=st.MutationObserver||st.WebKitMutationObserver,ci="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,y=new Array(1e3);et="undefined"!=typeof t&&"[object process]"==={}.toString.call(t)?pt():ht?wt():ci?bt():kt();var s=void 0,h=1,c=2,d=new rt,tt=new rt;e.prototype._validateInput=function(n){return ot(n)};e.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};e.prototype._init=function(){this._result=new Array(this.length)};ct=e;e.prototype._enumerate=function(){for(var t=this.length,i=this.promise,r=this._input,n=0;i._state===s&&t>n;n++)this._eachEntry(r[n],n)};e.prototype._eachEntry=function(n,t){var i=this._instanceConstructor;yt(n)?n.constructor===i&&n._state!==s?(n._onerror=null,this._settledAt(n._state,t,n._result)):this._willSettleAt(i.resolve(n),t):(this._remaining--,this._result[t]=this._makeResult(h,t,n))};e.prototype._settledAt=function(n,t,i){var r=this.promise;r._state===s&&(this._remaining--,this._abortOnReject&&n===c?u(r,i):this._result[t]=this._makeResult(n,t,i));0===this._remaining&&f(r,this._result)};e.prototype._makeResult=function(n,t,i){return i};e.prototype._willSettleAt=function(n,t){var i=this;k(n,void 0,function(n){i._settledAt(h,t,n)},function(n){i._settledAt(c,t,n)})};var li=function(n,t){return new ct(this,n,!0,t).promise},ai=function(n,t){function o(n){a(i,n)}function h(n){u(i,n)}var f=this,i=new f(l,t),e,r;if(!ot(n))return u(i,new TypeError("You must pass an array to race.")),i;for(e=n.length,r=0;i._state===s&&e>r;r++)k(f.resolve(n[r]),void 0,o,h);return i},vi=function(n,t){var r=this,i;return n&&"object"==typeof n&&n.constructor===r?n:(i=new r(l,t),a(i,n),i)},yi=function(n,t){var r=this,i=new r(l,t);return u(i,n),i},pi=0,lt=o;o.all=li;o.race=ai;o.resolve=vi;o.reject=yi;o.prototype={constructor:o,then:function(n,t){var u=this,i=u._state,r,f,e;return i===h&&!n||i===c&&!t?this:(r=new this.constructor(l),f=u._result,i?(e=arguments[i-1],p(function(){ut(i,r,e,f)})):k(u,r,n,t),r)},"catch":function(n){return this.then(null,n)}};at=function(){var n,t;n="undefined"!=typeof r?r:"undefined"!=typeof window&&window.document?window:self;t="Promise"in n&&"resolve"in n.Promise&&"reject"in n.Promise&&"all"in n.Promise&&"race"in n.Promise&&function(){var t;return new n.Promise(function(n){t=n}),w(t)}();t||(n.Promise=lt)};g={Promise:lt,polyfill:at};"function"==typeof n&&n.amd?n(function(){return g}):"undefined"!=typeof i&&i.exports?i.exports=g:"undefined"!=typeof this&&(this.ES6Promise=g)}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(n,t){function e(){var i,n,t;if(!f){for(f=!0,n=u.length;n;){for(i=u,u=[],t=-1;++t<n;)i[t]();n=u.length}f=!1}}function r(){}var i=t.exports={},u=[],f=!1;i.nextTick=function(n){u.push(n);f||setTimeout(e,0)};i.title="browser";i.browser=!0;i.env={};i.argv=[];i.version="";i.on=r;i.addListener=r;i.once=r;i.off=r;i.removeListener=r;i.removeAllListeners=r;i.emit=r;i.binding=function(){throw new Error("process.binding is not supported");};i.cwd=function(){return"/"};i.chdir=function(){throw new Error("process.chdir is not supported");};i.umask=function(){return 0}},{}],3:[function(t,i,r){(function(t){!function(u){function o(n){throw RangeError(wt[n]);}function b(n,t){for(var i=n.length;i--;)n[i]=t(n[i]);return n}function k(n,t){return b(n.split(pt),t).join(".")}function d(n){for(var t,u,r=[],i=0,f=n.length;f>i;)t=n.charCodeAt(i++),t>=55296&&56319>=t&&f>i?(u=n.charCodeAt(i++),56320==(64512&u)?r.push(((1023&t)<<10)+(1023&u)+65536):(r.push(t),i--)):r.push(t);return r}function g(n){return b(n,function(n){var t="";return n>65535&&(n-=65536,t+=a(n>>>10&1023|55296),n=56320|1023&n),t+a(n)}).join("")}function st(n){return 10>n-48?n-22:26>n-65?n-65:26>n-97?n-97:f}function nt(n,t){return n+22+75*(26>n)-((0!=t)<<5)}function tt(n,t,i){var r=0;for(n=i?e(n/at):n>>1,n+=e(n/t);n>w*l>>1;r+=f)n=e(n/w);return e(r+(w+1)*n/(n+lt))}function it(n){var r,i,u,v,b,s,c,a,k,d,y=[],it=n.length,t=0,nt=et,w=ft;for(i=n.lastIndexOf(ot),0>i&&(i=0),u=0;i>u;++u)n.charCodeAt(u)>=128&&o("not-basic"),y.push(n.charCodeAt(u));for(v=i>0?i+1:0;it>v;){for(b=t,s=1,c=f;v>=it&&o("invalid-input"),a=st(n.charCodeAt(v++)),(a>=f||a>e((h-t)/s))&&o("overflow"),t+=a*s,k=w>=c?p:c>=w+l?l:c-w,!(k>a);c+=f)d=f-k,s>e(h/d)&&o("overflow"),s*=d;r=y.length+1;w=tt(t-b,r,0==b);e(t/r)>h-nt&&o("overflow");nt+=e(t/r);t%=r;y.splice(t++,0,nt)}return g(y)}function rt(n){var r,u,v,rt,y,t,s,w,b,k,i,g,it,ut,st,c=[];for(n=d(n),g=n.length,r=et,u=0,y=ft,t=0;g>t;++t)i=n[t],128>i&&c.push(a(i));for(v=rt=c.length,rt&&c.push(ot);g>v;){for(s=h,t=0;g>t;++t)i=n[t],i>=r&&s>i&&(s=i);for(it=v+1,s-r>e((h-u)/it)&&o("overflow"),u+=(s-r)*it,r=s,t=0;g>t;++t)if(i=n[t],r>i&&++u>h&&o("overflow"),i==r){for(w=u,b=f;k=y>=b?p:b>=y+l?l:b-y,!(k>w);b+=f)st=w-k,ut=f-k,c.push(a(nt(k+st%ut,0))),w=e(st/ut);c.push(a(nt(w,0)));y=tt(u,it,v==rt);u=0;++v}++u;++r}return c.join("")}function ht(n){return k(n,function(n){return vt.test(n)?it(n.slice(4).toLowerCase()):n})}function ct(n){return k(n,function(n){return yt.test(n)?"xn--"+rt(n):n})}var v="object"==typeof r&&r,ut="object"==typeof i&&i&&i.exports==v&&i,c="object"==typeof t&&t;(c.global===c||c.window===c)&&(u=c);var s,y,h=2147483647,f=36,p=1,l=26,lt=38,at=700,ft=72,et=128,ot="-",vt=/^xn--/,yt=/[^ -~]/,pt=/\x2E|\u3002|\uFF0E|\uFF61/g,wt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=f-p,e=Math.floor,a=String.fromCharCode;if(s={version:"1.2.4",ucs2:{decode:d,encode:g},decode:it,encode:rt,toASCII:ct,toUnicode:ht},"function"==typeof n&&"object"==typeof n.amd&&n.amd)n("punycode",function(){return s});else if(v&&!v.nodeType)if(ut)ut.exports=s;else for(y in s)s.hasOwnProperty(y)&&(v[y]=s[y]);else u.punycode=s}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(n,t){function u(n,t,i){n.defaultView&&(t!==n.defaultView.pageXOffset||i!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(t,i)}function f(n,t){try{t&&(t.width=n.width,t.height=n.height,t.getContext("2d").putImageData(n.getContext("2d").getImageData(0,0,n.width,n.height),0,0))}catch(i){e("Unable to copy canvas content from",n,i)}}function i(n,t){for(var r=3===n.nodeType?document.createTextNode(n.nodeValue):n.cloneNode(!1),u=n.firstChild;u;)(t===!0||1!==u.nodeType||"SCRIPT"!==u.nodeName)&&r.appendChild(i(u,t)),u=u.nextSibling;return 1===n.nodeType&&(r._scrollTop=n.scrollTop,r._scrollLeft=n.scrollLeft,"CANVAS"===n.nodeName?f(n,r):("TEXTAREA"===n.nodeName||"SELECT"===n.nodeName)&&(r.value=n.value)),r}function r(n){if(1===n.nodeType){n.scrollTop=n._scrollTop;n.scrollLeft=n._scrollLeft;for(var t=n.firstChild;t;)r(t),t=t.nextSibling}}var e=n("./log"),o=n("./promise");t.exports=function(n,t,f,e,s,h,c){var a=i(n.documentElement,s.javascriptEnabled),l=t.createElement("iframe");return l.className="html2canvas-container",l.style.visibility="hidden",l.style.position="fixed",l.style.left="-10000px",l.style.top="0px",l.style.border="0",l.width=f,l.height=e,l.scrolling="no",t.body.appendChild(l),new o(function(t){var i=l.contentWindow.document;l.contentWindow.onload=l.onload=function(){var n=setInterval(function(){i.body.childNodes.length>0&&(r(i.documentElement),clearInterval(n),"view"===s.type&&(l.contentWindow.scrollTo(h,c),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.contentWindow.scrollY===c&&l.contentWindow.scrollX===h||(i.documentElement.style.top=-c+"px",i.documentElement.style.left=-h+"px",i.documentElement.style.position="absolute")),t(l))},50)};i.open();i.write("<!DOCTYPE html><html><\/html>");u(n,h,c);i.replaceChild(i.adoptNode(a),i.documentElement);i.close()})}},{"./log":15,"./promise":18}],5:[function(n,t){function i(n){this.r=0;this.g=0;this.b=0;this.a=null;this.fromArray(n)||this.namedColor(n)||this.rgb(n)||this.rgba(n)||this.hex6(n)||this.hex3(n)}var r,u,f,e,o;i.prototype.darken=function(n){var t=1-n;return new i([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])};i.prototype.isTransparent=function(){return 0===this.a};i.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b};i.prototype.fromArray=function(n){return Array.isArray(n)&&(this.r=Math.min(n[0],255),this.g=Math.min(n[1],255),this.b=Math.min(n[2],255),n.length>3&&(this.a=n[3])),Array.isArray(n)};r=/^#([a-f0-9]{3})$/i;i.prototype.hex3=function(n){var t=null;return null!==(t=n.match(r))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};u=/^#([a-f0-9]{6})$/i;i.prototype.hex6=function(n){var t=null;return null!==(t=n.match(u))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};f=/^rgb\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3})\)$/;i.prototype.rgb=function(n){var t=null;return null!==(t=n.match(f))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};e=/^rgba\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *, *(\d+\.?\d*)\)$/;i.prototype.rgba=function(n){var t=null;return null!==(t=n.match(e))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t};i.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"};i.prototype.namedColor=function(n){var t=o[n.toLowerCase()];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===n.toLowerCase())return this.r=this.g=this.b=this.a=0,!0;return!!t};i.prototype.isColor=!0;o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=i},{}],6:[function(n,t){function r(n,t){var e=tt++,s,l,r;return(t=t||{},t.logging&&(window.html2canvas.logging=!0,window.html2canvas.start=Date.now()),t.async="undefined"==typeof t.async?!0:t.async,t.allowTaint="undefined"==typeof t.allowTaint?!1:t.allowTaint,t.removeContainer="undefined"==typeof t.removeContainer?!0:t.removeContainer,t.javascriptEnabled="undefined"==typeof t.javascriptEnabled?!1:t.javascriptEnabled,t.imageTimeout="undefined"==typeof t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:o,t.strict=!!t.strict,"string"==typeof n)?"string"!=typeof t.proxy?u.reject("Proxy must be used when rendering url"):(s=null!=t.width?t.width:window.innerWidth,l=null!=t.height?t.height:window.innerHeight,g(y(n),t.proxy,document,s,l,t).then(function(n){return f(n.contentWindow.document.documentElement,n,t,s,l)})):(r=(void 0===n?[document.documentElement]:n.length?n:[n])[0],r.setAttribute(h+e,e),c(r.ownerDocument,t,r.ownerDocument.defaultView.innerWidth,r.ownerDocument.defaultView.innerHeight,e).then(function(n){return"function"==typeof t.onrendered&&(i("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(n)),n}))}function c(n,t,r,e,o){return d(n,n,r,e,t,n.defaultView.pageXOffset,n.defaultView.pageYOffset).then(function(s){var c,l;i("Document cloned");c=h+o;l="["+c+"='"+o+"']";n.querySelector(l).removeAttribute(c);var a=s.contentWindow,v=a.document.querySelector(l),y=u.resolve("function"==typeof t.onclone?t.onclone(a.document):!0);return y.then(function(){return f(v,s,t,r,e)})})}function f(n,t,r,u,f){var o=t.contentWindow,c=new p(o.document),y=new w(r,c),h=nt(n),k="view"===r.type?u:a(o.document),d="view"===r.type?f:v(o.document),s=new r.renderer(k,d,y,r,document),g=new b(n,s,c,y,r);return g.ready.then(function(){i("Finished rendering");var u;return u="view"===r.type?e(s.canvas,{width:s.canvas.width,height:s.canvas.height,top:0,left:0,x:0,y:0}):n===o.document.body||n===o.document.documentElement||null!=r.canvas?s.canvas:e(s.canvas,{width:null!=r.width?r.width:h.width,height:null!=r.height?r.height:h.height,top:h.top,left:h.left,x:o.pageXOffset,y:o.pageYOffset}),l(t,r),u})}function l(n,t){t.removeContainer&&(n.parentNode.removeChild(n),i("Cleaned up container"))}function e(n,t){var f=document.createElement("canvas"),r=Math.min(n.width-1,Math.max(0,t.left)),e=Math.min(n.width,Math.max(1,t.left+t.width)),u=Math.min(n.height-1,Math.max(0,t.top)),o=Math.min(n.height,Math.max(1,t.top+t.height));return f.width=t.width,f.height=t.height,i("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",e-r,"height:",o-u),i("Resulting crop with width",t.width,"and height",t.height," with x",r,"and y",u),f.getContext("2d").drawImage(n,r,u,e-r,o-u,t.x,t.y,e-r,o-u),f}function a(n){return Math.max(Math.max(n.body.scrollWidth,n.documentElement.scrollWidth),Math.max(n.body.offsetWidth,n.documentElement.offsetWidth),Math.max(n.body.clientWidth,n.documentElement.clientWidth))}function v(n){return Math.max(Math.max(n.body.scrollHeight,n.documentElement.scrollHeight),Math.max(n.body.offsetHeight,n.documentElement.offsetHeight),Math.max(n.body.clientHeight,n.documentElement.clientHeight))}function y(n){var t=document.createElement("a");return t.href=n,t.href=t.href,t}var u=n("./promise"),p=n("./support"),o=n("./renderers/canvas"),w=n("./imageloader"),b=n("./nodeparser"),k=n("./nodecontainer"),i=n("./log"),s=n("./utils"),d=n("./clone"),g=n("./proxy").loadUrlDocument,nt=s.getBounds,h="data-html2canvas-node",tt=0;r.Promise=u;r.CanvasRenderer=o;r.NodeContainer=k;r.log=i;r.utils=s;t.exports="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return u.reject("No canvas support")}:r},{"./clone":4,"./imageloader":13,"./log":15,"./nodecontainer":16,"./nodeparser":17,"./promise":18,"./proxy":19,"./renderers/canvas":23,"./support":25,"./utils":29}],7:[function(n,t){function i(n){if(this.src=n,r("DummyImageContainer for",n),!this.promise||!this.image){r("Initiating DummyImageContainer");i.prototype.image=new Image;var t=this.image;i.prototype.promise=new u(function(n,i){t.onload=n;t.onerror=i;t.src=f();t.complete===!0&&n(t)})}}var u=n("./promise"),r=n("./log"),f=n("./utils").smallImage;t.exports=i},{"./log":15,"./promise":18,"./utils":29}],8:[function(n,t){function i(n,t){var e,o,i=document.createElement("div"),u=document.createElement("img"),f=document.createElement("span"),s="Hidden Text";i.style.visibility="hidden";i.style.fontFamily=n;i.style.fontSize=t;i.style.margin=0;i.style.padding=0;document.body.appendChild(i);u.src=r();u.width=1;u.height=1;u.style.margin=0;u.style.padding=0;u.style.verticalAlign="baseline";f.style.fontFamily=n;f.style.fontSize=t;f.style.margin=0;f.style.padding=0;f.appendChild(document.createTextNode(s));i.appendChild(f);i.appendChild(u);e=u.offsetTop-f.offsetTop+1;i.removeChild(f);i.appendChild(document.createTextNode(s));i.style.lineHeight="normal";u.style.verticalAlign="super";o=u.offsetTop-i.offsetTop+1;document.body.removeChild(i);this.baseline=e;this.lineWidth=1;this.middle=o}var r=n("./utils").smallImage;t.exports=i},{"./utils":29}],9:[function(n,t){function i(){this.data={}}var r=n("./font");i.prototype.getMetrics=function(n,t){return void 0===this.data[n+"-"+t]&&(this.data[n+"-"+t]=new r(n,t)),this.data[n+"-"+t]};t.exports=i},{"./font":8}],10:[function(n,t){function i(t,i,r){this.image=null;this.src=t;var e=this,o=f(t);this.promise=(i?new u(function(n){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){n(t)}:n(t)}):this.proxyLoad(r.proxy,o,r)).then(function(t){var i=n("./core");return i(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(n){return e.image=n})}var r=n("./utils"),u=n("./promise"),f=r.getBounds,e=n("./proxy").loadUrlDocument;i.prototype.proxyLoad=function(n,t,i){var r=this.src;return e(r.src,n,r.ownerDocument,t.width,t.height,i)};t.exports=i},{"./core":6,"./promise":18,"./proxy":19,"./utils":29}],11:[function(n,t){function i(n){this.src=n.value;this.colorStops=[];this.type=null;this.x0=.5;this.y0=.5;this.x1=.5;this.y1=.5;this.promise=r.resolve(!0)}var r=n("./promise");i.prototype.TYPES={LINEAR:1,RADIAL:2};t.exports=i},{"./promise":18}],12:[function(n,t){function i(n,t){this.src=n;this.image=new Image;var i=this;this.tainted=null;this.promise=new r(function(r,u){i.image.onload=r;i.image.onerror=u;t&&(i.image.crossOrigin="anonymous");i.image.src=n;i.image.complete===!0&&r(i.image)})}var r=n("./promise");t.exports=i},{"./promise":18}],13:[function(n,t){function i(n,t){this.link=null;this.options=n;this.support=t;this.origin=this.getOrigin(window.location.href)}var u=n("./promise"),r=n("./log"),f=n("./imagecontainer"),e=n("./dummyimagecontainer"),s=n("./proxyimagecontainer"),h=n("./framecontainer"),o=n("./svgcontainer"),c=n("./svgnodecontainer"),l=n("./lineargradientcontainer"),a=n("./webkitgradientcontainer"),v=n("./utils").bind;i.prototype.findImages=function(n){var t=[];return n.reduce(function(n,t){switch(t.node.nodeName){case"IMG":return n.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return n.concat([{args:[t.node],method:t.node.nodeName}])}return n},[]).forEach(this.addImage(t,this.loadImage),this),t};i.prototype.findBackgroundImage=function(n,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(n,this.loadImage),this),n};i.prototype.addImage=function(n,t){return function(i){i.args.forEach(function(u){this.imageExists(n,u)||(n.splice(0,0,t.call(this,i)),r("Added image #"+n.length,"string"==typeof u?u.substring(0,100):u))},this)}};i.prototype.hasImageBackground=function(n){return"none"!==n.method};i.prototype.loadImage=function(n){if("url"===n.method){var t=n.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new f(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||this.options.allowTaint===!0||this.isSVG(t)?new f(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new f(t,!0):this.options.proxy?new s(t,this.options.proxy):new e(t):new o(t)}return"linear-gradient"===n.method?new l(n):"gradient"===n.method?new a(n):"svg"===n.method?new c(n.args[0],this.support.svg):"IFRAME"===n.method?new h(n.args[0],this.isSameOrigin(n.args[0].src),this.options):new e(n)};i.prototype.isSVG=function(n){return"svg"===n.substring(n.length-3).toLowerCase()||o.prototype.isInline(n)};i.prototype.imageExists=function(n,t){return n.some(function(n){return n.src===t})};i.prototype.isSameOrigin=function(n){return this.getOrigin(n)===this.origin};i.prototype.getOrigin=function(n){var t=this.link||(this.link=document.createElement("a"));return t.href=n,t.href=t.href,t.protocol+t.hostname+t.port};i.prototype.getPromise=function(n){return this.timeout(n,this.options.imageTimeout)["catch"](function(){var t=new e(n.src);return t.promise.then(function(t){n.image=t})})};i.prototype.get=function(n){var t=null;return this.images.some(function(i){return(t=i).src===n})?t:null};i.prototype.fetch=function(n){return this.images=n.reduce(v(this.findBackgroundImage,this),this.findImages(n)),this.images.forEach(function(n,t){n.promise.then(function(){r("Succesfully loaded image #"+(t+1),n)},function(i){r("Failed loading image #"+(t+1),n,i)})}),this.ready=u.all(this.images.map(this.getPromise,this)),r("Finished searching images"),this};i.prototype.timeout=function(n,t){var i,f=u.race([n.promise,new u(function(u,f){i=setTimeout(function(){r("Timed out loading image",n);f(n)},t)})]).then(function(n){return clearTimeout(i),n});return f["catch"](function(){clearTimeout(i)}),f};t.exports=i},{"./dummyimagecontainer":7,"./framecontainer":10,"./imagecontainer":12,"./lineargradientcontainer":14,"./log":15,"./promise":18,"./proxyimagecontainer":20,"./svgcontainer":26,"./svgnodecontainer":27,"./utils":29,"./webkitgradientcontainer":30}],14:[function(n,t){function i(n){r.apply(this,arguments);this.type=this.TYPES.LINEAR;var t=null===n.args[0].match(this.stepRegExp);t?n.args[0].split(" ").reverse().forEach(function(n){switch(n){case"left":this.x0=0;this.x1=1;break;case"top":this.y0=0;this.y1=1;break;case"right":this.x0=1;this.x1=0;break;case"bottom":this.y0=1;this.y1=0;break;case"to":var t=this.y0,i=this.x0;this.y0=this.y1;this.x0=this.x1;this.x1=i;this.y1=t}},this):(this.y0=0,this.y1=1);this.colorStops=n.args.slice(t?1:0).map(function(n){var t=n.match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)|\w+)\s*(\d{1,3})?(%|px)?/);return{color:new u(t[1]),stop:"%"===t[3]?t[2]/100:null}},this);null===this.colorStops[0].stop&&(this.colorStops[0].stop=0);null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1);this.colorStops.forEach(function(n,t){null===n.stop&&this.colorStops.slice(t).some(function(i,r){return null!==i.stop?(n.stop=(i.stop-this.colorStops[t-1].stop)/(r+1)+this.colorStops[t-1].stop,!0):!1},this)},this)}var r=n("./gradientcontainer"),u=n("./color");i.prototype=Object.create(r.prototype);i.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/;t.exports=i},{"./color":5,"./gradientcontainer":11}],15:[function(n,t){t.exports=function(){window.html2canvas.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-window.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}},{}],16:[function(n,t){function i(n,t){this.node=n;this.parent=t;this.stack=null;this.bounds=null;this.borders=null;this.clip=[];this.backgroundClip=[];this.offsetBounds=null;this.visible=null;this.computedStyles=null;this.colors={};this.styles={};this.backgroundImages=null;this.transformData=null;this.transformMatrix=null;this.isPseudoElement=!1;this.opacity=null}function e(n){var t=n.options[n.selectedIndex||0];return t?t.text||"":""}function o(n){if(n&&"matrix"===n[1])return n[2].split(",").map(function(n){return parseFloat(n.trim())});if(n&&"matrix3d"===n[1]){var t=n[2].split(",").map(function(n){return parseFloat(n.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function r(n){return-1!==n.toString().indexOf("%")}function s(n){return n.replace("px","")}function h(n){return parseFloat(n)}var f=n("./color"),u=n("./utils"),c=u.getBounds,l=u.parseBackgrounds,a=u.offsetBounds;i.prototype.cloneTo=function(n){n.visible=this.visible;n.borders=this.borders;n.bounds=this.bounds;n.clip=this.clip;n.backgroundClip=this.backgroundClip;n.computedStyles=this.computedStyles;n.styles=this.styles;n.backgroundImages=this.backgroundImages;n.opacity=this.opacity};i.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity};i.prototype.assignStack=function(n){this.stack=n;n.children.push(this)};i.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))};i.prototype.css=function(n){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[n]||(this.styles[n]=this.computedStyles[n])};i.prototype.prefixedCss=function(n){var t=this.css(n);return void 0===t&&["webkit","moz","ms","o"].some(function(i){return t=this.css(i+n.substr(0,1).toUpperCase()+n.substr(1)),void 0!==t},this),void 0===t?null:t};i.prototype.computedStyle=function(n){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,n)};i.prototype.cssInt=function(n){var t=parseInt(this.css(n),10);return isNaN(t)?0:t};i.prototype.color=function(n){return this.colors[n]||(this.colors[n]=new f(this.css(n)))};i.prototype.cssFloat=function(n){var t=parseFloat(this.css(n));return isNaN(t)?0:t};i.prototype.fontWeight=function(){var n=this.css("fontWeight");switch(parseInt(n,10)){case 401:n="bold";break;case 400:n="normal"}return n};i.prototype.parseClip=function(){var n=this.css("clip").match(this.CLIP);return n?{top:parseInt(n[1],10),right:parseInt(n[2],10),bottom:parseInt(n[3],10),left:parseInt(n[4],10)}:null};i.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=l(this.css("backgroundImage")))};i.prototype.cssList=function(n,t){var i=(this.css(n)||"").split(",");return i=i[t||0]||i[0]||"auto",i=i.trim().split(" "),1===i.length&&(i=[i[0],r(i[0])?"auto":i[0]]),i};i.prototype.parseBackgroundSize=function(n,t,i){var f,o,u=this.cssList("backgroundSize",i),s,e;if(r(u[0]))f=n.width*parseFloat(u[0])/100;else{if(/contain|cover/.test(u[0]))return s=n.width/n.height,e=t.width/t.height,e>s^"contain"===u[0]?{width:n.height*e,height:n.height}:{width:n.width,height:n.width/e};f=parseInt(u[0],10)}return o="auto"===u[0]&&"auto"===u[1]?t.height:"auto"===u[1]?f/t.width*t.height:r(u[1])?n.height*parseFloat(u[1])/100:parseInt(u[1],10),"auto"===u[0]&&(f=o/t.height*t.width),{width:f,height:o}};i.prototype.parseBackgroundPosition=function(n,t,i,u){var e,o,f=this.cssList("backgroundPosition",i);return e=r(f[0])?(n.width-(u||t).width)*(parseFloat(f[0])/100):parseInt(f[0],10),o="auto"===f[1]?e/t.width*t.height:r(f[1])?(n.height-(u||t).height)*parseFloat(f[1])/100:parseInt(f[1],10),"auto"===f[0]&&(e=o/t.height*t.width),{left:e,top:o}};i.prototype.parseBackgroundRepeat=function(n){return this.cssList("backgroundRepeat",n)[0]};i.prototype.parseTextShadows=function(){var r=this.css("textShadow"),u=[],t,i,n;if(r&&"none"!==r)for(t=r.match(this.TEXT_SHADOW_PROPERTY),i=0;t&&i<t.length;i++)n=t[i].match(this.TEXT_SHADOW_VALUES),u.push({color:new f(n[0]),offsetX:n[1]?parseFloat(n[1].replace("px","")):0,offsetY:n[2]?parseFloat(n[2].replace("px","")):0,blur:n[3]?n[3].replace("px",""):0});return u};i.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),n=this.prefixedCss("transformOrigin").split(" ").map(s).map(h);n[0]+=t.left;n[1]+=t.top;this.transformData={origin:n,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData};i.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var n=this.prefixedCss("transform"),t=n?o(n.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t?t:[1,0,0,1,0,0]}return this.transformMatrix};i.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?a(this.node):c(this.node))};i.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()};i.prototype.getValue=function(){var n=this.node.value||"";return"SELECT"===this.node.tagName?n=e(this.node):"password"===this.node.type&&(n=Array(n.length+1).join("•")),0===n.length?this.node.placeholder||"":n};i.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/;i.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;i.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;i.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/;t.exports=i},{"./color":5,"./utils":29}],17:[function(n,t){function i(n,t,i,u,f){var o,s;r("Starting NodeParser");this.renderer=t;this.options=f;this.range=null;this.support=i;this.renderQueue=[];this.stack=new nt(!0,1,n.ownerDocument,null);o=new d(n,null);(f.background&&t.rectangle(0,0,t.width,t.height,new e(f.background)),n===n.ownerDocument.documentElement)&&(s=new d(o.color("backgroundColor").isTransparent()?n.ownerDocument.body:n.ownerDocument.documentElement,null),t.rectangle(0,0,t.width,t.height,s.color("backgroundColor")));o.visibile=o.isElementVisible();this.createPseudoHideStyles(n.ownerDocument);this.disableAnimations(n.ownerDocument);this.nodes=k([o].concat(this.getChildren(o)).filter(function(n){return n.visible=n.isElementVisible()}).map(this.getPseudoElements,this));this.fontMetrics=new oi;r("Fetched nodes, total:",this.nodes.length);r("Calculate overflow clips");this.calculateOverflowClips();r("Start fetching images");this.images=u.fetch(this.nodes.filter(c));this.ready=this.images.ready.then(tt(function(){return r("Images loaded, starting parsing"),r("Creating stacking contexts"),this.createStackingContexts(),r("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),r("Render queue created with "+this.renderQueue.length+" items"),new si(tt(function(n){f.async?"function"==typeof f.async?f.async.call(this,this.renderQueue,n):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,n)):n():(this.renderQueue.forEach(this.paint,this),n())},this))},this))}function rt(n){return n.parent&&n.parent.clip.length}function ct(n){return n.replace(/(\-[a-z])/g,function(n){return n.toUpperCase().replace("-","")})}function ut(){}function ft(n,t,i,r){return n.map(function(u,f){if(u.width>0){var o=t.left,e=t.top,s=t.width,h=t.height-n[2].width;switch(f){case 0:h=n[0].width;u.args=v({c1:[o,e],c2:[o+s,e],c3:[o+s-n[1].width,e+h],c4:[o+n[3].width,e+h]},r[0],r[1],i.topLeftOuter,i.topLeftInner,i.topRightOuter,i.topRightInner);break;case 1:o=t.left+t.width-n[1].width;s=n[1].width;u.args=v({c1:[o+s,e],c2:[o+s,e+h+n[2].width],c3:[o,e+h],c4:[o,e+n[0].width]},r[1],r[2],i.topRightOuter,i.topRightInner,i.bottomRightOuter,i.bottomRightInner);break;case 2:e=e+t.height-n[2].width;h=n[2].width;u.args=v({c1:[o+s,e+h],c2:[o,e+h],c3:[o+n[3].width,e],c4:[o+s-n[3].width,e]},r[2],r[3],i.bottomRightOuter,i.bottomRightInner,i.bottomLeftOuter,i.bottomLeftInner);break;case 3:s=n[3].width;u.args=v({c1:[o,e+h+n[2].width],c2:[o,e],c3:[o+s,e+n[0].width],c4:[o+s,e+h]},r[3],r[0],i.bottomLeftOuter,i.bottomLeftInner,i.topLeftOuter,i.topLeftInner)}}return u})}function u(n,t,i,r){var h=4*((Math.sqrt(2)-1)/3),e=i*h,s=r*h,u=n+i,f=t+r;return{topLeft:o({x:n,y:f},{x:n,y:f-s},{x:u-e,y:t},{x:u,y:t}),topRight:o({x:n,y:t},{x:n+e,y:t},{x:u,y:f-s},{x:u,y:f}),bottomRight:o({x:u,y:t},{x:u,y:t+s},{x:n+e,y:f},{x:n,y:f}),bottomLeft:o({x:u,y:f},{x:u-e,y:f},{x:n,y:t+s},{x:n,y:t})}}function et(n,t,i){var r=n.left,f=n.top,e=n.width,o=n.height,v=t[0][0],y=t[0][1],s=t[1][0],p=t[1][1],h=t[2][0],c=t[2][1],w=t[3][0],l=t[3][1],a=e-s,b=o-c,k=e-h,d=o-l;return{topLeftOuter:u(r,f,v,y).topLeft.subdivide(.5),topLeftInner:u(r+i[3].width,f+i[0].width,Math.max(0,v-i[3].width),Math.max(0,y-i[0].width)).topLeft.subdivide(.5),topRightOuter:u(r+a,f,s,p).topRight.subdivide(.5),topRightInner:u(r+Math.min(a,e+i[3].width),f+i[0].width,a>e+i[3].width?0:s-i[3].width,p-i[0].width).topRight.subdivide(.5),bottomRightOuter:u(r+k,f+b,h,c).bottomRight.subdivide(.5),bottomRightInner:u(r+Math.min(k,e-i[3].width),f+Math.min(b,o+i[0].width),Math.max(0,h-i[1].width),c-i[2].width).bottomRight.subdivide(.5),bottomLeftOuter:u(r,f+d,w,l).bottomLeft.subdivide(.5),bottomLeftInner:u(r+i[3].width,f+d,Math.max(0,w-i[3].width),l-i[2].width).bottomLeft.subdivide(.5)}}function o(n,t,i,r){var u=function(n,t,i){return{x:n.x+(t.x-n.x)*i,y:n.y+(t.y-n.y)*i}};return{start:n,startControl:t,endControl:i,end:r,subdivide:function(f){var e=u(n,t,f),s=u(t,i,f),h=u(i,r,f),c=u(e,s,f),l=u(s,h,f),a=u(c,l,f);return[o(n,e,c,a),o(a,l,h,r)]},curveTo:function(n){n.push(["bezierCurve",t.x,t.y,i.x,i.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",i.x,i.y,t.x,t.y,n.x,n.y])}}}function v(n,t,i,r,u,f,e){var o=[];return t[0]>0||t[1]>0?(o.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(o)):o.push(["line",n.c1[0],n.c1[1]]),i[0]>0||i[1]>0?(o.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(o),o.push(["line",e[0].end.x,e[0].end.y]),e[0].curveToReversed(o)):(o.push(["line",n.c2[0],n.c2[1]]),o.push(["line",n.c3[0],n.c3[1]])),t[0]>0||t[1]>0?(o.push(["line",u[1].end.x,u[1].end.y]),u[1].curveToReversed(o)):o.push(["line",n.c4[0],n.c4[1]]),o}function f(n,t,i,r,u,f,e){t[0]>0||t[1]>0?(n.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(n),r[1].curveTo(n)):n.push(["line",f,e]);(i[0]>0||i[1]>0)&&n.push(["line",u[0].start.x,u[0].start.y])}function lt(n){return n.cssInt("zIndex")<0}function at(n){return n.cssInt("zIndex")>0}function ot(n){return 0===n.cssInt("zIndex")}function st(n){return-1!==["inline","inline-block","inline-table"].indexOf(n.css("display"))}function ht(n){return n instanceof nt}function vt(n){return n.node.data.trim().length>0}function yt(n){return/^(normal|none|0px)$/.test(n.parent.css("letterSpacing"))}function pt(n){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var r=n.css("border"+t+"Radius"),i=r.split(" ");return i.length<=1&&(i[1]=i[0]),i.map(ni)})}function wt(n){return n.nodeType===Node.TEXT_NODE||n.nodeType===Node.ELEMENT_NODE}function bt(n){var t=n.css("position"),i=-1!==["absolute","relative","fixed"].indexOf(t)?n.css("zIndex"):"auto";return"auto"!==i}function s(n){return"static"!==n.css("position")}function w(n){return"none"!==n.css("float")}function kt(n){return-1!==["inline-block","inline-table"].indexOf(n.css("display"))}function h(n){var t=this;return function(){return!n.apply(t,arguments)}}function c(n){return n.node.nodeType===Node.ELEMENT_NODE}function l(n){return n.isPseudoElement===!0}function b(n){return n.node.nodeType===Node.TEXT_NODE}function dt(n){return function(t,i){return t.cssInt("zIndex")+n.indexOf(t)/n.length-(i.cssInt("zIndex")+n.indexOf(i)/n.length)}}function gt(n){return n.getOpacity()<1}function ni(n){return parseInt(n,10)}function ti(n){return n.width}function ii(n){return n.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(n.node.nodeName)}function k(n){return[].concat.apply([],n)}function ri(n){var t=n.substr(0,1);return t===n.substr(n.length-1)&&t.match(/'|"/)?n.substr(1,n.length-2):n}function ui(n){for(var t,r=[],i=0,u=!1;n.length;)fi(n[i])===u?(t=n.splice(0,i),t.length&&r.push(y.ucs2.encode(t)),u=!u,i=0):i++,i>=n.length&&(t=n.splice(0,i),t.length&&r.push(y.ucs2.encode(t)));return r}function fi(n){return-1!==[32,13,10,9,45].indexOf(n)}function ei(n){return/[^\u0000-\u00ff]/.test(n)}var r=n("./log"),y=n("punycode"),d=n("./nodecontainer"),g=n("./textcontainer"),a=n("./pseudoelementcontainer"),oi=n("./fontmetrics"),e=n("./color"),si=n("./promise"),nt=n("./stackingcontext"),p=n("./utils"),tt=p.bind,hi=p.getBounds,ci=p.parseBackgrounds,li=p.offsetBounds,it;i.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(n){if(c(n)){l(n)&&n.appendToDOM();n.borders=this.parseBorders(n);var i="hidden"===n.css("overflow")?[n.borders.clip]:[],t=n.parseClip();t&&-1!==["absolute","fixed"].indexOf(n.css("position"))&&i.push([["rect",n.bounds.left+t.left,n.bounds.top+t.top,t.right-t.left,t.bottom-t.top]]);n.clip=rt(n)?n.parent.clip.concat(i):i;n.backgroundClip="hidden"!==n.css("overflow")?n.clip.concat([n.borders.clip]):n.clip;l(n)&&n.cleanDOM()}else b(n)&&(n.clip=rt(n)?n.parent.clip:[]);l(n)||(n.bounds=null)},this)};i.prototype.asyncRenderer=function(n,t,i){i=i||Date.now();this.paint(n[this.renderIndex++]);n.length===this.renderIndex?t():i+20>Date.now()?this.asyncRenderer(n,t,i):setTimeout(tt(function(){this.asyncRenderer(n,t)},this),0)};i.prototype.createPseudoHideStyles=function(n){this.createStyles(n,"."+a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')};i.prototype.disableAnimations=function(n){this.createStyles(n,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")};i.prototype.createStyles=function(n,t){var i=n.createElement("style");i.innerHTML=t;n.body.appendChild(i)};i.prototype.getPseudoElements=function(n){var t=[[n]],i,r;return n.node.nodeType===Node.ELEMENT_NODE&&(i=this.getPseudoElement(n,":before"),r=this.getPseudoElement(n,":after"),i&&t.push(i),r&&t.push(r)),k(t)};i.prototype.getPseudoElement=function(n,t){var i=n.computedStyle(t),o,s;if(!i||!i.content||"none"===i.content||"-moz-alt-content"===i.content||"none"===i.display)return null;for(var u=ri(i.content),h="url"===u.substr(0,3),r=document.createElement(h?"img":"html2canvaspseudoelement"),f=new a(r,n,t),e=i.length-1;e>=0;e--)o=ct(i.item(e)),r.style[o]=i[o];return(r.className=a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,h)?(r.src=ci(u)[0].args[0],[f]):(s=document.createTextNode(u),r.appendChild(s),[f,new g(s,f)])};i.prototype.getChildren=function(n){return k([].filter.call(n.node.childNodes,wt).map(function(t){var i=[t.nodeType===Node.TEXT_NODE?new g(t,n):new d(t,n)].filter(ii);return t.nodeType===Node.ELEMENT_NODE&&i.length&&"TEXTAREA"!==t.tagName?i[0].isElementVisible()?i.concat(this.getChildren(i[0])):[]:i},this))};i.prototype.newStackingContext=function(n,t){var i=new nt(t,n.getOpacity(),n.node,n.parent),r;n.cloneTo(i);r=t?i.getParentStack(this):i.parent.stack;r.contexts.push(i);n.stack=i};i.prototype.createStackingContexts=function(){this.nodes.forEach(function(n){c(n)&&(this.isRootElement(n)||gt(n)||bt(n)||this.isBodyWithTransparentRoot(n)||n.hasTransform())?this.newStackingContext(n,!0):c(n)&&(s(n)&&ot(n)||kt(n)||w(n))?this.newStackingContext(n,!1):n.assignStack(n.parent.stack)},this)};i.prototype.isBodyWithTransparentRoot=function(n){return"BODY"===n.node.nodeName&&n.parent.color("backgroundColor").isTransparent()};i.prototype.isRootElement=function(n){return null===n.parent};i.prototype.sortStackingContexts=function(n){n.contexts.sort(dt(n.contexts.slice(0)));n.contexts.forEach(this.sortStackingContexts,this)};i.prototype.parseTextBounds=function(n){return function(t,i,r){var u,f,e;if("none"!==n.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!n.parent.hasTransform())return u=r.slice(0,i).join("").length,this.getRangeBounds(n.node,u,t.length);if(n.node&&"string"==typeof n.node.data)return f=n.node.splitText(t.length),e=this.getWrapperBounds(n.node,n.parent.hasTransform()),n.node=f,e}else(!this.support.rangeBounds||n.parent.hasTransform())&&(n.node=n.node.splitText(t.length));return{}}};i.prototype.getWrapperBounds=function(n,t){var i=n.ownerDocument.createElement("html2canvaswrapper"),r=n.parentNode,f=n.cloneNode(!0),u;return i.appendChild(n.cloneNode(!0)),r.replaceChild(i,n),u=t?li(i):hi(i),r.replaceChild(f,i),u};i.prototype.getRangeBounds=function(n,t,i){var r=this.range||(this.range=n.ownerDocument.createRange());return r.setStart(n,t),r.setEnd(n,t+i),r.getBoundingClientRect()};i.prototype.parse=function(n){var r=n.contexts.filter(lt),i=n.children.filter(c),t=i.filter(h(w)),u=t.filter(h(s)).filter(h(st)),f=i.filter(h(s)).filter(w),e=t.filter(h(s)).filter(st),o=n.contexts.concat(t.filter(s)).filter(ot),l=n.children.filter(b).filter(vt),a=n.contexts.filter(at);r.concat(u).concat(f).concat(e).concat(o).concat(l).concat(a).forEach(function(n){this.renderQueue.push(n);ht(n)&&(this.parse(n),this.renderQueue.push(new ut))},this)};i.prototype.paint=function(n){try{n instanceof ut?this.renderer.ctx.restore():b(n)?(l(n.parent)&&n.parent.appendToDOM(),this.paintText(n),l(n.parent)&&n.parent.cleanDOM()):this.paintNode(n)}catch(t){if(r(t),this.options.strict)throw t;}};i.prototype.paintNode=function(n){ht(n)&&(this.renderer.setOpacity(n.opacity),this.renderer.ctx.save(),n.hasTransform()&&this.renderer.setTransform(n.parseTransform()));"INPUT"===n.node.nodeName&&"checkbox"===n.node.type?this.paintCheckbox(n):"INPUT"===n.node.nodeName&&"radio"===n.node.type?this.paintRadio(n):this.paintElement(n)};i.prototype.paintElement=function(n){var t=n.parseBounds();this.renderer.clip(n.backgroundClip,function(){this.renderer.renderBackground(n,t,n.borders.borders.map(ti))},this);this.renderer.clip(n.clip,function(){this.renderer.renderBorders(n.borders.borders)},this);this.renderer.clip(n.backgroundClip,function(){var i,u;switch(n.node.nodeName){case"svg":case"IFRAME":i=this.images.get(n.node);i?this.renderer.renderImage(n,t,n.borders,i):r("Error loading <"+n.node.nodeName+">",n.node);break;case"IMG":u=this.images.get(n.node.src);u?this.renderer.renderImage(n,t,n.borders,u):r("Error loading <img>",n.node.src);break;case"CANVAS":this.renderer.renderImage(n,t,n.borders,{image:n.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(n)}},this)};i.prototype.paintCheckbox=function(n){var r=n.parseBounds(),i=Math.min(r.width,r.height),t={width:i-1,height:i-1,top:r.top,left:r.left},u=[3,3],f=[u,u,u,u],o=[1,1,1,1].map(function(n){return{color:new e("#A5A5A5"),width:n}}),s=et(t,f,o);this.renderer.clip(n.backgroundClip,function(){this.renderer.rectangle(t.left+1,t.top+1,t.width-2,t.height-2,new e("#DEDEDE"));this.renderer.renderBorders(ft(o,t,s,f));n.node.checked&&(this.renderer.font(new e("#424242"),"normal","normal","bold",i-3+"px","arial"),this.renderer.text("✔",t.left+i/6,t.top+i-1))},this)};i.prototype.paintRadio=function(n){var t=n.parseBounds(),i=Math.min(t.width,t.height)-2;this.renderer.clip(n.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,i,new e("#DEDEDE"),1,new e("#A5A5A5"));n.node.checked&&this.renderer.circle(Math.ceil(t.left+i/4)+1,Math.ceil(t.top+i/4)+1,Math.floor(i/2),new e("#424242"))},this)};i.prototype.paintFormValue=function(n){var f=n.getValue(),u;if(f.length>0){var i=n.node.ownerDocument,t=i.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(i){try{t.style[i]=n.css(i)}catch(u){r("html2canvas: Parse: Exception caught in renderFormValue: "+u.message)}});u=n.parseBounds();t.style.position="fixed";t.style.left=u.left+"px";t.style.top=u.top+"px";t.textContent=f;i.body.appendChild(t);this.paintText(new g(t.firstChild,n));i.body.removeChild(t)}};i.prototype.paintText=function(n){n.applyTextTransform();var i=y.ucs2.decode(n.node.data),r=this.options.letterRendering&&!yt(n)||ei(n.node.data)?i.map(function(n){return y.ucs2.encode([n])}):ui(i),e=n.parent.fontWeight(),u=n.parent.css("fontSize"),f=n.parent.css("fontFamily"),t=n.parent.parseTextShadows();this.renderer.font(n.parent.color("color"),n.parent.css("fontStyle"),n.parent.css("fontVariant"),e,u,f);t.length?this.renderer.fontShadow(t[0].color,t[0].offsetX,t[0].offsetY,t[0].blur):this.renderer.clearShadow();this.renderer.clip(n.parent.clip,function(){r.map(this.parseTextBounds(n),this).forEach(function(t,i){t&&(this.renderer.text(r[i],t.left,t.bottom),this.renderTextDecoration(n.parent,t,this.fontMetrics.getMetrics(f,u)))},this)},this)};i.prototype.renderTextDecoration=function(n,t,i){switch(n.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+i.baseline+i.lineWidth),t.width,1,n.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,n.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+i.middle+i.lineWidth),t.width,1,n.color("color"))}};it={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};i.prototype.parseBorders=function(n){var t=n.parseBounds(),i=pt(n),r=["Top","Right","Bottom","Left"].map(function(t,i){var f=n.css("border"+t+"Style"),r=n.color("border"+t+"Color"),u;return"inset"===f&&r.isBlack()&&(r=new e([255,255,255,r.a])),u=it[f]?it[f][i]:null,{width:n.cssInt("border"+t+"Width"),color:u?r[u[0]](u[1]):r,args:null}}),u=et(t,i,r);return{clip:this.parseBackgroundClip(n,u,r,i,t),borders:ft(r,t,u,i)}};i.prototype.parseBackgroundClip=function(n,t,i,r,u){var o=n.css("backgroundClip"),e=[];switch(o){case"content-box":case"padding-box":f(e,r[0],r[1],t.topLeftInner,t.topRightInner,u.left+i[3].width,u.top+i[0].width);f(e,r[1],r[2],t.topRightInner,t.bottomRightInner,u.left+u.width-i[1].width,u.top+i[0].width);f(e,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,u.left+u.width-i[1].width,u.top+u.height-i[2].width);f(e,r[3],r[0],t.bottomLeftInner,t.topLeftInner,u.left+i[3].width,u.top+u.height-i[2].width);break;default:f(e,r[0],r[1],t.topLeftOuter,t.topRightOuter,u.left,u.top);f(e,r[1],r[2],t.topRightOuter,t.bottomRightOuter,u.left+u.width,u.top);f(e,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,u.left+u.width,u.top+u.height);f(e,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,u.left,u.top+u.height)}return e};t.exports=i},{"./color":5,"./fontmetrics":9,"./log":15,"./nodecontainer":16,"./promise":18,"./pseudoelementcontainer":21,"./stackingcontext":24,"./textcontainer":28,"./utils":29,punycode:3}],18:[function(n,t){t.exports=n("es6-promise").Promise},{"es6-promise":1}],19:[function(n,t,i){function u(n,t,i){var h="withCredentials"in new XMLHttpRequest,u,s;return t?(u=e(h),s=o(t,n,u),h?a(s):f(i,s,u).then(function(n){return p(n.content)})):r.reject("No proxy configured")}function h(n,t,i){var u="crossOrigin"in new Image,s=e(u),h=o(t,n,s);return u?r.resolve(h):f(i,h,s).then(function(n){return"data:"+n.type+";base64,"+n.content})}function f(n,t,i){return new r(function(r,u){var f=n.createElement("script"),e=function(){delete window.html2canvas.proxy[i];n.body.removeChild(f)};window.html2canvas.proxy[i]=function(n){e();r(n)};f.src=t;f.onerror=function(n){e();u(n)};n.body.appendChild(f)})}function e(n){return n?"":"html2canvas_"+Date.now()+"_"+ ++w+"_"+Math.round(1e5*Math.random())}function o(n,t,i){return n+"?url="+encodeURIComponent(t)+(i.length?"&callback=html2canvas.proxy."+i:"")}function c(n){return function(t){var i,f=new DOMParser,r,u;try{i=f.parseFromString(t,"text/html")}catch(e){s("DOMParser not supported, falling back to createHTMLDocument");i=document.implementation.createHTMLDocument("");try{i.open();i.write(t);i.close()}catch(o){s("createHTMLDocument write not supported, falling back to document.body.innerHTML");i.body.innerHTML=t}}return r=i.querySelector("base"),r&&r.href.host||(u=i.createElement("base"),u.href=n,i.head.insertBefore(u,i.head.firstChild)),i}}function l(n,t,i,r,f,e){return new u(n,t,window.document).then(c(n)).then(function(n){return y(n,i,r,f,e,0,0)})}var r=n("./promise"),a=n("./xhr"),v=n("./utils"),s=n("./log"),y=n("./clone"),p=v.decode64,w=0;i.Proxy=u;i.ProxyURL=h;i.loadUrlDocument=l},{"./clone":4,"./log":15,"./promise":18,"./utils":29,"./xhr":31}],20:[function(n,t){function i(n,t){var f=document.createElement("a"),i;f.href=n;n=f.href;this.src=n;this.image=new Image;i=this;this.promise=new u(function(u,f){i.image.crossOrigin="Anonymous";i.image.onload=u;i.image.onerror=f;new r(n,t,document).then(function(n){i.image.src=n})["catch"](f)})}var r=n("./proxy").ProxyURL,u=n("./promise");t.exports=i},{"./promise":18,"./proxy":19}],21:[function(n,t){function i(n,t,i){r.call(this,n,t);this.isPseudoElement=!0;this.before=":before"===i}var r=n("./nodecontainer");i.prototype.cloneTo=function(n){i.prototype.cloneTo.call(this,n);n.isPseudoElement=!0;n.before=this.before};i.prototype=Object.create(r.prototype);i.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node);this.parent.node.className+=" "+this.getHideClass()};i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node);this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")};i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]};i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before";i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after";t.exports=i},{"./nodecontainer":16}],22:[function(n,t){function i(n,t,i,r,u){this.width=n;this.height=t;this.images=i;this.options=r;this.document=u}var r=n("./log");i.prototype.renderImage=function(n,t,i,r){var f=n.cssInt("paddingLeft"),e=n.cssInt("paddingTop"),h=n.cssInt("paddingRight"),c=n.cssInt("paddingBottom"),u=i.borders,o=t.width-(u[1].width+u[3].width+f+h),s=t.height-(u[0].width+u[2].width+e+c);this.drawImage(r,0,0,r.image.width||o,r.image.height||s,t.left+f+u[3].width,t.top+e+u[0].width,o,s)};i.prototype.renderBackground=function(n,t,i){t.height>0&&t.width>0&&(this.renderBackgroundColor(n,t),this.renderBackgroundImage(n,t,i))};i.prototype.renderBackgroundColor=function(n,t){var i=n.color("backgroundColor");i.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,i)};i.prototype.renderBorders=function(n){n.forEach(this.renderBorder,this)};i.prototype.renderBorder=function(n){n.color.isTransparent()||null===n.args||this.drawShape(n.args,n.color)};i.prototype.renderBackgroundImage=function(n,t,i){var u=n.parseBackgroundImages();u.reverse().forEach(function(u,f,e){var o,s;switch(u.method){case"url":o=this.images.get(u.args[0]);o?this.renderBackgroundRepeating(n,t,o,e.length-(f+1),i):r("Error loading background-image",u.args[0]);break;case"linear-gradient":case"gradient":s=this.images.get(u.value);s?this.renderBackgroundGradient(s,t,i):r("Error loading background-image",u.args[0]);break;case"none":break;default:r("Unknown background-image type",u.args[0])}},this)};i.prototype.renderBackgroundRepeating=function(n,t,i,r,u){var f=n.parseBackgroundSize(t,i.image,r),e=n.parseBackgroundPosition(t,i.image,r,f),o=n.parseBackgroundRepeat(r);switch(o){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,e,f,t,t.left+u[3],t.top+e.top+u[0],99999,f.height,u);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,e,f,t,t.left+e.left+u[3],t.top+u[0],f.width,99999,u);break;case"no-repeat":this.backgroundRepeatShape(i,e,f,t,t.left+e.left+u[3],t.top+e.top+u[0],f.width,f.height,u);break;default:this.renderBackgroundRepeat(i,e,f,{top:t.top,left:t.left},u[3],u[0])}};t.exports=i},{"./log":15}],23:[function(n,t){function i(n,t){r.apply(this,arguments);this.canvas=this.options.canvas||this.document.createElement("canvas");this.options.canvas||(this.canvas.width=n,this.canvas.height=t);this.ctx=this.canvas.getContext("2d");this.taintCtx=this.document.createElement("canvas").getContext("2d");this.ctx.textBaseline="bottom";this.variables={};e("Initialized CanvasRenderer with size",n,"x",t)}function u(n){return n.length>0}var r=n("../renderer"),f=n("../lineargradientcontainer"),e=n("../log");i.prototype=Object.create(r.prototype);i.prototype.setFillStyle=function(n){return this.ctx.fillStyle="object"==typeof n&&n.isColor?n.toString():n,this.ctx};i.prototype.rectangle=function(n,t,i,r,u){this.setFillStyle(u).fillRect(n,t,i,r)};i.prototype.circle=function(n,t,i,r){this.setFillStyle(r);this.ctx.beginPath();this.ctx.arc(n+i/2,t+i/2,i/2,0,2*Math.PI,!0);this.ctx.closePath();this.ctx.fill()};i.prototype.circleStroke=function(n,t,i,r,u,f){this.circle(n,t,i,r);this.ctx.strokeStyle=f.toString();this.ctx.stroke()};i.prototype.drawShape=function(n,t){this.shape(n);this.setFillStyle(t).fill()};i.prototype.taints=function(n){if(null===n.tainted){this.taintCtx.drawImage(n.image,0,0);try{this.taintCtx.getImageData(0,0,1,1);n.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d");n.tainted=!0}}return n.tainted};i.prototype.drawImage=function(n,t,i,r,u,f,e,o,s){(!this.taints(n)||this.options.allowTaint)&&this.ctx.drawImage(n.image,t,i,r,u,f,e,o,s)};i.prototype.clip=function(n,t,i){this.ctx.save();n.filter(u).forEach(function(n){this.shape(n).clip()},this);t.call(i);this.ctx.restore()};i.prototype.shape=function(n){return this.ctx.beginPath(),n.forEach(function(n,t){"rect"===n[0]?this.ctx.rect.apply(this.ctx,n.slice(1)):this.ctx[0===t?"moveTo":n[0]+"To"].apply(this.ctx,n.slice(1))},this),this.ctx.closePath(),this.ctx};i.prototype.font=function(n,t,i,r,u,f){this.setFillStyle(n).font=[t,i,r,u,f].join(" ").split(",")[0]};i.prototype.fontShadow=function(n,t,i,r){this.setVariable("shadowColor",n.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",i).setVariable("shadowBlur",r)};i.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")};i.prototype.setOpacity=function(n){this.ctx.globalAlpha=n};i.prototype.setTransform=function(n){this.ctx.translate(n.origin[0],n.origin[1]);this.ctx.transform.apply(this.ctx,n.matrix);this.ctx.translate(-n.origin[0],-n.origin[1])};i.prototype.setVariable=function(n,t){return this.variables[n]!==t&&(this.variables[n]=this.ctx[n]=t),this};i.prototype.text=function(n,t,i){this.ctx.fillText(n,t,i)};i.prototype.backgroundRepeatShape=function(n,t,i,r,u,f,e,o,s){var h=[["line",Math.round(u),Math.round(f)],["line",Math.round(u+e),Math.round(f)],["line",Math.round(u+e),Math.round(o+f)],["line",Math.round(u),Math.round(o+f)]];this.clip([h],function(){this.renderBackgroundRepeat(n,t,i,r,s[3],s[0])},this)};i.prototype.renderBackgroundRepeat=function(n,t,i,r,u,f){var e=Math.round(r.left+t.left+u),o=Math.round(r.top+t.top+f);this.setFillStyle(this.ctx.createPattern(this.resizeImage(n,i),"repeat"));this.ctx.translate(e,o);this.ctx.fill();this.ctx.translate(-e,-o)};i.prototype.renderBackgroundGradient=function(n,t){if(n instanceof f){var i=this.ctx.createLinearGradient(t.left+t.width*n.x0,t.top+t.height*n.y0,t.left+t.width*n.x1,t.top+t.height*n.y1);n.colorStops.forEach(function(n){i.addColorStop(n.stop,n.color.toString())});this.rectangle(t.left,t.top,t.width,t.height,i)}};i.prototype.resizeImage=function(n,t){var i=n.image,u,r;return i.width===t.width&&i.height===t.height?i:(r=document.createElement("canvas"),r.width=t.width,r.height=t.height,u=r.getContext("2d"),u.drawImage(i,0,0,i.width,i.height,0,0,t.width,t.height),r)};t.exports=i},{"../lineargradientcontainer":14,"../log":15,"../renderer":22}],24:[function(n,t){function i(n,t,i,u){r.call(this,i,u);this.ownStacking=n;this.contexts=[];this.children=[];this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var r=n("./nodecontainer");i.prototype=Object.create(r.prototype);i.prototype.getParentStack=function(n){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(n):n.stack};t.exports=i},{"./nodecontainer":16}],25:[function(n,t){function i(n){this.rangeBounds=this.testRangeBounds(n);this.cors=this.testCORS();this.svg=this.testSVG()}i.prototype.testRangeBounds=function(n){var i,t,r,u,f=!1;return n.createRange&&(i=n.createRange(),i.getBoundingClientRect&&(t=n.createElement("boundtest"),t.style.height="123px",t.style.display="block",n.body.appendChild(t),i.selectNode(t),r=i.getBoundingClientRect(),u=r.height,123===u&&(f=!0),n.body.removeChild(t))),f};i.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin};i.prototype.testSVG=function(){var n=new Image,t=document.createElement("canvas"),i=t.getContext("2d");n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><\/svg>";try{i.drawImage(n,0,0);t.toDataURL()}catch(r){return!1}return!0};t.exports=i},{}],26:[function(n,t){function i(n){this.src=n;this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(n)?r.resolve(t.inlineFormatting(n)):u(n)}).then(function(n){return new r(function(i){window.html2canvas.svg.fabric.loadSVGFromString(n,t.createCanvas.call(t,i))})})}var r=n("./promise"),u=n("./xhr"),f=n("./utils").decode64;i.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?r.resolve():r.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))};i.prototype.inlineFormatting=function(n){return/^data:image\/svg\+xml;base64,/.test(n)?this.decode64(this.removeContentType(n)):this.removeContentType(n)};i.prototype.removeContentType=function(n){return n.replace(/^data:image\/svg\+xml(;base64)?,/,"")};i.prototype.isInline=function(n){return/^data:image\/svg\+xml/i.test(n)};i.prototype.createCanvas=function(n){var t=this;return function(i,r){var u=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=u.lowerCanvasEl;u.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(i,r)).renderAll();n(u.lowerCanvasEl)}};i.prototype.decode64=function(n){return"function"==typeof atob?window.atob(n):f(n)};t.exports=i},{"./promise":18,"./utils":29,"./xhr":31}],27:[function(n,t){function i(n,t){this.src=n;this.image=null;var i=this;this.promise=t?new r(function(t,r){i.image=new Image;i.image.onload=t;i.image.onerror=r;i.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(n);i.image.complete===!0&&t(i.image)}):this.hasFabric().then(function(){return new r(function(t){window.html2canvas.svg.fabric.parseSVGDocument(n,i.createCanvas.call(i,t))})})}var u=n("./svgcontainer"),r=n("./promise");i.prototype=Object.create(u.prototype);t.exports=i},{"./promise":18,"./svgcontainer":26}],28:[function(n,t){function i(n,t){r.call(this,n,t)}function u(n,t,i){if(n.length>0)return t+i.toUpperCase()}var r=n("./nodecontainer");i.prototype=Object.create(r.prototype);i.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))};i.prototype.transform=function(n){var t=this.node.data;switch(n){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,u);case"uppercase":return t.toUpperCase();default:return t}};t.exports=i},{"./nodecontainer":16}],29:[function(n,t,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};i.bind=function(n,t){return function(){return n.apply(t,arguments)}};i.decode64=function(n){for(var s,e,i,r,u,o,h,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=n.length,c="",t=0;l>t;t+=4)s=f.indexOf(n[t]),e=f.indexOf(n[t+1]),i=f.indexOf(n[t+2]),r=f.indexOf(n[t+3]),u=s<<2|e>>4,o=(15&e)<<4|i>>2,h=(3&i)<<6|r,c+=64===i?String.fromCharCode(u):64===r||-1===r?String.fromCharCode(u,o):String.fromCharCode(u,o,h);return c};i.getBounds=function(n){if(n.getBoundingClientRect){var t=n.getBoundingClientRect(),i=null==n.offsetWidth?t.width:n.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+i,left:t.left,width:i,height:null==n.offsetHeight?t.height:n.offsetHeight}}return{}};i.offsetBounds=function(n){var t=n.offsetParent?i.offsetBounds(n.offsetParent):{top:0,left:0};return{top:n.offsetTop+t.top,bottom:n.offsetTop+n.offsetHeight+t.top,right:n.offsetLeft+t.left+n.offsetWidth,left:n.offsetLeft+t.left,width:n.offsetWidth,height:n.offsetHeight}};i.parseBackgrounds=function(n){var t,i,o,h,u,f,e,a=" \r\n\t",l=[],r=0,s=0,c=function(){t&&('"'===i.substr(0,1)&&(i=i.substr(1,i.length-2)),i&&e.push(i),"-"===t.substr(0,1)&&(h=t.indexOf("-",1)+1)>0&&(o=t.substr(0,h),t=t.substr(h)),l.push({prefix:o,method:t.toLowerCase(),value:u,args:e,image:null}));e=[];t=o=i=u=""};return e=[],t=o=i=u="",n.split("").forEach(function(n){if(!(0===r&&a.indexOf(n)>-1)){switch(n){case'"':f?f===n&&(f=null):f=n;break;case"(":if(f)break;if(0===r)return r=1,void(u+=n);s++;break;case")":if(f)break;if(1===r){if(0===s)return r=0,u+=n,void c();s--}break;case",":if(f)break;if(0===r)return void c();if(1===r&&0===s&&!t.match(/^url$/i))return e.push(i),i="",void(u+=n)}u+=n;0===r?t+=n:i+=n}}),c(),l}},{}],30:[function(n,t){function i(n){r.apply(this,arguments);this.type="linear"===n.args[0]?this.TYPES.LINEAR:this.TYPES.RADIAL}var r=n("./gradientcontainer");i.prototype=Object.create(r.prototype);t.exports=i},{"./gradientcontainer":11}],31:[function(n,t){function i(n){return new r(function(t,i){var r=new XMLHttpRequest;r.open("GET",n);r.onload=function(){200===r.status?t(r.responseText):i(new Error(r.statusText))};r.onerror=function(){i(new Error("Network Error"))};r.send()})}var r=n("./promise");t.exports=i},{"./promise":18}]},{},[6])(6)})