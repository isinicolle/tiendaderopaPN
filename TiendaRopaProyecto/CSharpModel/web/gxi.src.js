var defaultConfig,GlobalEvents;gx.setGxObyCtx=function(n,t){var i;return n!=undefined&&(i=gx.getObj(n,t),i&&gx.setGxO(n,t)),gx.O};gx.parentGridRow=function(n,t){var r=gx.fn.currentGridRowImpl(n),i=t.getGridById(n,r);return i&&i.parentGrid?gx.fn.currentGridRow(i.parentGrid.gridId):undefined};gx.applyPicture=function(n,t,i){if(!gx.lang.emptyObject(n)&&!gx.lang.emptyObject(gx.rtPicture(n,i))&&!gx.lang.emptyObject(n.type))try{switch(n.type){case"int":case"decimal":return gx.num.formatNumber(t,n.dec,gx.rtPicture(n,i),n.len,n.sign,!0,n.emptyAsNull);case"char":return t;default:return t}}catch(r){}return t};gx.SetOld=function(n,t,i){var r=t,u=gx.fn.controlGridId(n);u>0&&(r=t+"_"+gx.fn.currentGridRow(u));gx.fn.setHidden(r,gx.getVar(i))};gx.Old=function(n,t){var i,u,r;try{return i=t,u=gx.fn.controlGridId(n),u>0&&(i=t+"_"+gx.fn.currentGridRow(u)),r=gx.fn.getHidden(i),typeof r=="undefined"&&gx.O.CmpContext!=""&&(r=gx.fn.getHidden(gx.O.CmpContext+i)),r}catch(f){gx.dbg.logEx(f,"gxapi.js","Old")}return""};gx.OldInteger=function(n,t){var i=parseInt(gx.Old(n,t),10);return isNaN(i)?0:i};gx.OldDecimal=function(n,t){var i=gx.num.parseFloat(gx.Old(n,t),gx.thousandSeparator,gx.decimalPoint);return isNaN(i)?0:i};gx.OldDate=function(n,t){var i=new gx.date.gxdate(gx.Old(n,t),"Y4MD");return i.getStringWithFmt(gx.dateFormat)};gx.OldDateTime=function(n,t){var i=new gx.date.gxdate(gx.Old(n,t),"Y4MD");return i.getStringWithFmt(gx.dateFormat)+" "+i.getTimeString(!0,!0)};gx.dom_i=function(n){return{el:function(n,t,i){if(n){if(typeof n=="string"){var r=this.byId(n);return r!=null?r:!i&&(r=this.byId("span_"+n),r!=null)?r:t?null:(r=this.byName(n),r!=null&&r.length>0)?(r[0].id||(r[0].id=n),r[0]):null}return n}return null},matchesSelector:function(){var t;return function(i,r){var u,i=gx.dom.byId(i);return(u=i.matches||i.matchesSelector||i.msMatchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector,t===undefined&&(t=gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=8),t||!u)?n(i).is(r):u?u.call(i,r):!1}}(),hasAttribute:function(n,t){return n.hasAttribute?n.hasAttribute(t):n[t]!==undefined},hasClass:function(n,t){var i=gx.dom.el(n,!0);if(i)return i.classList?i.classList.contains(t):t&&(" "+i.className+" ").indexOf(" "+t+" ")!=-1},addPrefixClass:function(t,i){var r,u;t&&(r=n(t),t.className&&!r.attr("data-gx-unprefixed-class")&&(r.attr("data-gx-unprefixed-class",t.className),u=t.className.split(" "),u.splice(0,0,""),t.className+=u.join(" "+i)))},removePrefixClass:function(t,i){var r,u;t&&(r=n(t),t.className.search(new RegExp("(^|\\s)"+i))>=0&&(u=r.attr("data-gx-unprefixed-class"),r.removeAttr("data-gx-unprefixed-class"),t.className=u||t.className.substring(i.length)))},addClass:function(n,t){var i=gx.dom.el(n,!0);i&&t&&(i.classList?t.indexOf(" ")>0?i.classList.add.apply(i.classList,t.split(" ")):i.classList.add(t):this.hasClass(n,t)||(i.className=i.className+(i.className?" ":"")+t))},classReCache:{},removeClass:function(n,t){var i=gx.dom.el(n,!0),r;i&&(i.classList?i.classList.remove(t):this.hasClass(n,t)&&(r=this.classReCache[t],r||(r=new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g"),this.classReCache[t]=r),i.className=i.className.replace(r," ")))},hasTransition:function(n){var i,t,r;return n&&Modernizr.csstransitions?(i=gx.util.browser,t="transitionDuration",i.isIE()&&(t="msTransitionDuration"),i.isWebkit()?t="webkitTransitionDuration":i.isFirefox()?t="MozTransitionDuration":i.isOpera()&&(t="OTransitionDuration"),r=parseFloat(gx.dom.getComputedStyle(n)[t],10),r!==0&&!isNaN(r)):!1},hasAnimation:function(n){var i,t,r;return n&&Modernizr.csstransitions?(i=gx.util.browser,t="animationName",i.isIE()&&(t="msAnimationName"),i.isWebkit()?t="webkitAnimationName":i.isFirefox()?t="MozAnimationName":i.isOpera()&&(t="OAnimationName"),r=gx.dom.getComputedStyle(n)[t],r&&r!="none"):!1},isMultimediaElement:function(n){return n.tagName=="SPAN"&&(gx.dom.hasClass(n,"gx-video-placeholder")||gx.dom.hasClass(n,"gx-audio-placeholder")||gx.dom.hasClass(n,"gx-download-placeholder"))},purgeElement:function(n,t){var r=t||n.attributes,i,f,u;if(r)for(f=r.length,i=0;i<f;i+=1)u=r[i].name||r[i],typeof n[u]=="function"&&(n[u]=null)},purge:function(n,t){var i,r,u;if(t||this.purgeElement(n),i=n.childNodes,i)for(r=0,u=i.length;r<u;r++)gx.dom.purge(i[r],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isOldIE()},form:function(){return this._form==null&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0])),this._form},indexElements:function(){var t,i,n;try{for(t=gx.fn.getFormElements(),i=t.length,n=0;n<i;n++)t[n].gxIndex=n}catch(r){gx.dbg.logEx(r,"gxapi.js","indexElements")}},setAttribute:function(n,t,i){var r=function(){var r,e,u,f;try{if(r=gx.dom.byName(n),r!=null&&r.length>0)for(e=r.length,u=0;u<e;u++)r[u].setAttribute(t,i);else f=gx.dom.byId(n),f!=null&&f.setAttribute(t,i)}catch(o){gx.dbg.logEx(o,"gxapi.js","setAttribute")}};document.gxReadyState=="loading"?gx.fx.obs.addObserver("gx.onload",this,r,{single:!0}):r.apply(this)},createInput:function(n,t){var i=document.createElement("input");return i.type=t,i.id=n,i.name=n,gx.dom.form().appendChild(i),i},hasSelectedFile:function(){var i=n('input[type="file"]'),r=i.length,t;if(!r)return!1;for(t=0;t<r;t++)if(!gx.lang.emptyObject(i[t].value))return!0;return!1},hasSubmitControl:function(){var i=this.byTag("input"),r=i.length,n,t;if(!r)return!1;for(n=0;n<r;n++)if(t=i[n].getAttribute("type"),t=="submit"||t=="image")return!0;return!1},styles:function(){var t=document.styleSheets,i,u,n,r;if(typeof t!="undefined"){for(i=[],u=t.length,n=0;n<u;n++)r=t[n].href,gx.lang.emptyObject(r)||i.push(r);return i}return[]},getComputedStyle:function(n){try{return n.nodeName=="#document"?null:typeof getComputedStyle=="function"?window.getComputedStyle(n):typeof n.currentStyle!="undefined"?n.currentStyle:n.style}catch(t){return gx.dbg.logEx(t,"gxapi.js","getComputedStyle"),null}},getStyle:function(n,t){var i="",r;try{i=typeof getComputedStyle=="function"?window.getComputedStyle(n,null)[t]:typeof n.currentStyle!="undefined"?n.currentStyle[t]:n.style[t];r=parseInt(i);isNaN(r)||(i=r)}catch(u){gx.dbg.logEx(u,"gxapi.js","getStyle")}return i},CSS_URL_REGEXP:/url\(["\']?(?!(?:https?:|\/))([^"\)]+)["\']?\)/ig,CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,cacheStyleSheet:function(n,t){var i,e=n.href?n.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,r,u,f;this.cssRules||(this.cssRules=[]);try{if(r=n.cssRules||n.rules,r)for(u=0,f=r.length;u<f;u++)i=r[u].cssText,t&&(i=i.replace(this.CSS_URL_REGEXP,'url("'+e+'$1")')),this.cssRules.push(i)}catch(o){}},getCssRules:function(n,t){var r=document.styleSheets,i,u;if(this.cssRules===null||n)for(this.cssRules=[],i=0,u=r.length;i<u;i++)try{r[i].disabled||this.cacheStyleSheet(r[i],t)}catch(f){}return this.cssRules},setStyleElement:function(n,t,i){try{n.innerHTML=(i?n.innerHTML:"")+t}catch(r){n.styleSheet.cssText=(i?n.styleSheet.cssText:"")+t}},isButton:function(n){return n!=undefined&&n!=null?n.type=="submit"||n.type=="button":!1},isRadio:function(n){return n&&n.tagName=="INPUT"&&n.type=="radio"},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0,month:!0,week:!0},isEditControl:function(n){return n&&n.tagName=="INPUT"?this.editControls[n.type]||!1:!1},isTextControl:function(n){return n&&n.tagName==="INPUT"&&n.type==="text"},isDateControl:function(n){return n.type=="date"||n.type=="datetime"||n.type=="datetime-local"},isButtonLike:function(n){return n?this.isButton(n)||gx.dom.hasAttribute(n,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR)?!0:n&&n.nodeName==="INPUT"?n.type==="file"||(n.type==="image"||n.type==="checkbox")&&typeof n.onclick=="function":!1:!1},iFrameDoc:function(n){try{if(n.contentDocument)return n.contentDocument;if(n.contentWindow)return n.contentWindow.document}catch(t){}return null},forEachChild:function(n,t,i){var u,r;if(n&&n.childNodes&&typeof i=="function")for(u=n.childNodes.length,r=0;r<u;r++)if(i.call(t,n.childNodes[r])===!1)break},isTextWithLink:function(n){if(n!=null&&n.tagName=="A"&&n.childNodes&&n.childNodes.length>0){var t=n.firstChild;if(this.innerChildIsText(t))return!0}return!1},isImageWithLink:function(n){var t;return n&&n.tagName==="A"&&n.href&&(t=n.firstElementChild,!gx.dom.hasClass(t,"gx-prompt")&&t&&t.tagName==="IMG")?!0:!1},isChildNode:function(n,t){if(n.frameElement&&(n=n.frameElement),n==t)return!0;while(n.parentNode){if(n==t||n.parentNode==t)return!0;n=n.parentNode}return!1},NodeLevel:function(n){for(var t=0;n.parentNode;)(n.id||n.name)&&t++,n=n.parentNode;return t},findParentByTagName:function(n,t,r){var u=n.parentNode;for(t=t.toUpperCase(),i=0;u;){if(r&&i==r)return;if(i++,u.tagName==t)return u;u=u.parentNode}},innerChildIsText:function(n){while(n!=null){if(n.nodeName&&n.nodeName=="#text")return!0;n=n.firstChild}return!1},allChildrenAreText:function(n){for(var t=n.firstChild,i;t;){if(i=t.nodeName.toLowerCase(),i!=="#text"&&i!=="pre"&&t.offsetParent!=null)return!1;t=t.nextSibling}return!0},position:function(t){var i=n(t).offset();return{x:Math.floor(i.left),y:Math.floor(i.top)}},dimensions:function(t){var i=n(t);return{w:i.outerWidth(),h:i.outerHeight()}},windowDimensions:function(n){var i=n.documentElement,t=n.body;if(i&&i.scrollHeight){var r=Math.max(i.scrollHeight,t.scrollHeight),u=Math.max(i.scrollWidth,t.scrollWidth),f=Math.max(i.clientHeight,t.clientHeight),e=Math.max(i.clientWidth,t.clientWidth);return{scrollWidth:u,scrollHeight:r,clientHeight:f,clientWidth:e}}return{scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,clientHeight:t.clientHeight,clientWidth:t.clientWidth}},documentScroll:function(n){var n=n||document,t=-1,i=-1;try{t=n.documentElement.scrollTop||n.body.scrollTop;i=n.documentElement.scrollLeft||n.body.scrollLeft}catch(r){}return{scrollTop:t,scrollLeft:i}},documentScrollable:function(n){var n=n||document,i={x:!1,y:!1},t=gx.dom.windowDimensions(n);return t.scrollHeight>t.clientHeight&&(i.x=!0),t.scrollWidth>t.clientWidth&&(i.x=!0),i},autofitIFrame:function(n){var e=window.event||n,t=gx.evt.source(e),r=window.frames[t.name].document;if(r&&t.width==""&&t.height==""){var i=gx.dom.windowDimensions(r),u=i.scrollWidth?i.scrollWidth+10:null,f=i.scrollHeight?i.scrollHeight+10:null;u&&f&&(t.style.width=u+"px",t.style.height=f+"px")}},fitToParent:function(n){var t,u,i,r;if(!gx.util.browser.isIE()&&n&&n.childNodes){for(t=null,u=n.childNodes.length,i=0;i<u;i++)if(r=n.childNodes[i],r.nodeName=="TABLE"){t=r;break}t!=null&&(t.style.width.indexOf("%")!=-1&&(n.style.width=gx.dom.addUnits(t.style.width)),t.style.height.indexOf("%")!=-1&&(n.style.height=gx.dom.addUnits(t.style.height)))}},redrawControl:function(n){!gx.util.browser.isIE()||gx.util.browser.ieVersion()>=6?gx.html.setOuterHtml(n,n.outerHTML):setTimeout(function(){gx.html.setOuterHtml(n,n.outerHTML)},100)},setCaretPosition:function(n,t){if(n!=null)if(n.createTextRange){var i=n.createTextRange();i.move("character",t);i.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(t,t)):n.focus()},replaceAtCaretPosition:function(n,t){var i=n.selectionStart,r=n.selectionEnd,u;document.selection?(u=document.selection.createRange().getBookmark(),n.selection=n.createTextRange(),n.selection.moveToBookmark(u),n.selectLeft=n.createTextRange(),n.selectLeft.collapse(!0),n.selectLeft.setEndPoint("EndToStart",n.selection),i=n.selectLeft.text.length+1,r=n.selectLeft.text.length+(n.selection.text.length==0?1:n.selection.text.length)):(i=n.selectionStart,r=n.selectionEnd);n.setRangeText?n.setRangeText(t,i,r,"end"):(n.value=n.value.substr(0,i)+t+n.value.substr(i,n.value.length),gx.dom.setCaretPosition(n,i+t.length))},spanValue:function(n){var t=n.nodeValue;return gx.lang.emptyObject(t)&&(t=n.innerText||n.textContent),gx.lang.emptyObject(t)&&(t=""),t},removeControlSafe:function(n){gx.dom.shouldPurge()?(this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV")),this._avoidLeaksDiv.appendChild(n),gx.dom.purge(this._avoidLeaksDiv),this.removeControl(this._avoidLeaksDiv),this._avoidLeaksDiv=null):this.removeControl(n)},removeControl:function(n){if(document.createRange==null)n.removeNode(!0);else{var t=document.createRange();n&&(t.selectNode(n),t.deleteContents())}},radioToObj:function(t){var r={s:"",v:[]},u,f,i,e,o;if(!t)return r;if(gx.dom.isRadio(t))for(r.s=t.value,u=gx.dom.byName(t.name),f=u.length,i=0;i<f;i++)e=n(u[i]),o=n("label[for='"+u[i].id+"']").first(),r.v.push([e.val(),o.text().trim()]);return r},comboBoxToObj:function(t,i){var r,e,u,f,o;try{if(r={s:"",v:[]},!t)return r;if(t.tagName==="SELECT")for(r.s=t.value,e=t.options.length,u=0;u<e;u++)f=n(t.options[u]),r.v.push([f.val(),f.text()]);else if(t.tagName==="SPAN"){if(t.hasAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR))return gx.json.evalJSON(t.getAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR));o=gx.fn.getControlValue_span(t);r.v.push([i,o]);r.s=i}return r}catch(s){gx.dbg.logEx(s,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,addUnits:function(n,t){return n===""||n=="auto"?n:n===undefined?"":typeof n=="number"||!this.unitPattern.test(n)?n+(t||"px"):n},getActiveElement:function(n){n=n||document;var t;try{t=n.activeElement;t&&t.nodeName||(t=n.body)}catch(i){t=n.body}return t},getCaretOffset:function(n){return n&&n.tagName==="INPUT"&&n.type==="text"&&typeof n.selectionStart!="undefined"?{s:n.selectionStart,e:n.selectionEnd}:{s:0,e:0}},setCaretOffset:function(n,t){n&&n.tagName=="INPUT"&&n.type=="text"&&n.setSelectionRange&&n.setSelectionRange(t.s,t.e)},write:function(n,t){t=t||document;t.write(n)},writeError:function(n,t,i,r){gx.dbg.write(n);r=r||document;r.head.innerHTML="";var u=r.body;u.innerHTML=n},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASKED_CLASS:"gx-masked",isMaskElement:function(n){return this.hasClass(n,this.MASK_CLASS)},mask:function(t){var u,e,f,o;if(t=this.el(t),t&&!this.hasClass(t,this.MASK_RELATIVE_CLASS)){var i,r=gx.util.browser,s=r.ieVersion(),h=s==6||r.isIE&&r.isCompatMode(),c=!!t.style.setExpression,u=n(t);if(u.css("caret-color","transparent"),u.is("body")&&this.getComputedStyle(t).position=="static"||this.addClass(t,this.MASK_RELATIVE_CLASS),i=document.createElement("div"),i.className=this.MASK_CLASS,t.tagName=="TABLE"?(f=n(i),u=n(t),f.width(u.width()),f.insertAfter(u),f.parent().addClass(this.MASK_RELATIVE_CLASS)):t.appendChild(i),this.addClass(t,this.MASKED_CLASS),h&&c)try{i.style.setExpression("height","this.parentNode."+(t==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(l){}else e=this.getComputedStyle(t).height,!r.isIE||r.ieVersion==7&&!r.isCompatMode()||e!="auto"||(i.style.height=e);return r.isIE()&&(s<=7||r.isCompatMode())&&(f=n(i),o=this.getComputedStyle(i).opacity,o&&n(i).css("opacity",o)),i}},unmask:function(t){var i,u,r,o,f,e;if(t=this.el(t),n(t).css("caret-color",""),t.tagName=="TABLE")u=t.nextSibling,u&&u.tagName=="DIV"&&this.hasClass(u,this.MASK_CLASS)&&(i=u);else for(r=0,o=t.childNodes.length;r<o;r++)if(t.childNodes[r].tagName=="DIV"&&this.hasClass(t.childNodes[r],this.MASK_CLASS)&&!this.hasClass(t.childNodes[r],this.UNMASK_CLASS)){i=t.childNodes[r];break}i&&!i.removed?(i.removed=!0,i.style.clearExpression&&(i.style.clearExpression("width"),i.style.clearExpression("height")),this.removeClass(t,this.MASKED_CLASS),f=gx.dom.hasTransition(i)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(i)?gx.dom.ANIMATION_END_EVENT:!1,e=function(){t.tagName=="TABLE"?i.parentNode&&(gx.dom.removeClass(i.parentNode,this.MASK_RELATIVE_CLASS),i.parentNode.removeChild(i)):i.parentNode==t&&t.removeChild(i);gx.dom.removeClass(t,this.MASK_RELATIVE_CLASS)}.closure(this),f?gx.evt.attach(i,f,e,!1,{single:!0,useCapture:!0,timeout:300}):e(),this.addClass(i,this.UNMASK_CLASS)):(this.removeClass(t,this.MASKED_CLASS),this.removeClass(t,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(n,t,i){var i=i||{},p=i.enteringClass||"entering",at=i.leavingClass||"leaving",nt=i.enterDurationClass||"enter-fx-duration",vt=i.leaveDurationClass||"leave-fx-duration",w=i.transitioningClass||"transitioning",b=i.transitionTimeout||1500,tt=function(n){return n.childNodes.length>0&&(gx.dom.hasAnimation(n)||gx.dom.hasTransition(n))&&!gx.dom.hasClass(n.parentNode,w)},it=function(n){return gx.dom.hasAnimation(n)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(n)?gx.dom.TRANSITION_END_EVENT:!1},lt,y;n.tagName=="BODY"&&(gx.dom.addClass(n,n.className+"-fx"),n.style.position="static");t.tagName=="BODY"&&gx.dom.addClass(t,t.className+"-fx");var u=n.parentNode,a=tt(n),o=tt(t),k=n.tagName!="BODY";if(a||o){var f=document.createElement("iframe"),s=document.createElement("div"),r,rt,v,ut=this.getComputedStyle(n),ft=ut.width,et=ut.height,h,ot,yt=it(n),st=it(t),d,c,l,ht,g,e=0,ct=0;if(gx.dom.addClass(u,w),n.tagName!="BODY"&&t.tagName!="BODY")if(a){f.setAttribute("scrolling","no");f.setAttribute("frameborder","0");f.style.width=gx.dom.addUnits(window.innerWidth);f.style.height=gx.dom.addUnits(window.innerHeight);f.style.display="none";s.appendChild(f);s.style.width=ft;s.style.height=et;s.style.overflow="hidden";gx.spa.dettachContent(n);n.insertBefore(s,n.firstChild);r=f.contentDocument;try{r.open();r.write(this.getDocTypeDeclaration(document));r.write("<html>");r.write("<head><\/head>");r.write("<body><div><\/div><\/body>");r.write("<\/html>");r.close()}catch(pt){gx.dbg.logEx(pt,"gxapi.js","replaceWithFx");lt=r.createElement("div");r.body.appendChild(lt)}for(r.documentElement&&(r.documentElement.className="gx-fx-iframe"),r.body.style.margin="0",r.body.className=gx.dom.form().className,r.head.appendChild(document.createElement("style")),rt=r.styleSheets[0],v=gx.dom.getCssRules(!0,!0),h=0,ot=v.length;h<ot;h++)try{rt.insertRule(v[h],ct);ct++}catch(pt){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+v[h])}for(r.body.firstChild.style.width=ft,r.body.firstChild.style.height=et;n.childNodes[1];)r.body.firstChild.appendChild(n.childNodes[1]);f.style.display="block"}else o&&(n.style.display="none");gx.dom.addClass(t,p);gx.dom.addClass(t,nt);gx.dom.addClass(n,vt);i.domAdd!==!1&&u.appendChild(t);y=function(){l=function(){e===2?(gx.dom.removeClass(u,w),k&&(i.transitionEndCallback&&(t=i.transitionEndCallback(n,t)),i.domRemove!==!1&&n.parentNode==u&&u.removeChild(n)),gx.dom.removeClass(t,nt)):k||(i.transitionEndCallback&&(t=i.transitionEndCallback(n,t)),gx.dom.removeClass(t,p),o&&(g=setTimeout(c,b)))};a?(d=function(){clearTimeout(ht);e++;i.leavingTransCallback&&i.leavingTransCallback(n,t);l()},gx.evt.attach(n,yt,d,!1,{single:!0,useCapture:!0})):(e++,l());o?(c=function(){if(e>=2){gx.evt.detach(t,st,c);return}clearTimeout(g);e++;i.enteringTransCallback&&i.enteringTransCallback(n,t);l()},gx.evt.attach(t,st,c,!1,{single:!0,useCapture:!0})):(e++,l());gx.lang.requestAnimationFrame(function(){gx.dom.addClass(n,at);k&&(gx.dom.removeClass(t,p),o&&(g=setTimeout(c,b)));a&&(ht=setTimeout(d,b))})};i.beforeTransitionStart?i.beforeTransitionStart(y)!==!0&&y():y()}else i.domRemove!==!1&&u.removeChild(n),i.domAdd!==!1&&(n.parentNode==u?u.replaceChild(t,n):u.appendChild(t)),i.beforeTransitionStart&&i.beforeTransitionStart(),i.leavingTransCallback&&i.leavingTransCallback(n,t),i.enteringTransCallback&&i.enteringTransCallback(n,t),i.transitionEndCallback&&(t=i.transitionEndCallback(n,t))},getDocTypeDeclaration:function(n){n=n||document;var t=n.doctype;return(parts=["!DOCTYPE"],!t)?"":(parts.push(t.name||"html"),t.publicId&&(parts.push("PUBLIC"),parts.push('"'+t.publicId+'"')),t.systemId&&parts.push('"'+t.systemId+'"'),"<"+parts.join(" ")+">")},createShadowRoot:function(n){return(n=this.el(n),n.createShadowRoot)?n.createShadowRoot():n.webkitCreateShadowRoot?n.webkitCreateShadowRoot():!1},fixes:function(){var f="gx-dom-fixes",e="gx-tab-padding-fix-",o="gx-tab-spacing-fix-",c=new RegExp(e+"\\d+","ig"),l=new RegExp(o+"\\d+","ig"),s={},h={},i,r,u,t={center:{marginLeft:"auto",marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{resetFixesStyleElement:function(){s={};h={};n("#"+f).empty()},getFixesStyleElement:function(){var t=n("#"+f)[0],i;return t||(t=document.createElement("style"),t.id=f,i=gx.getThemeElement(),n("head")[0].insertBefore(t,i),gx.util.browser.isIE()&&n(i).insertAfter(t)),t},html5:function(i){var f=gx.util.browser,s=f.isIE(),e=[],o,r;if(n("TABLE",i||document.body).each(function(){var t=n(this);t.attr({align:t.data("align")})}),!i){if(!u){for(r in t)gx.lang.apply(t[r],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});u=".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}";Mustache.parse(u)}for(r in t)e.push(Mustache.render(u,t[r]));o=this.getFixesStyleElement();gx.dom.setStyleElement(o,e.join(""),!0)}(s||f.isOpera())&&n("td[data-align]",i||document.body).each(function(){var i=n(this),r=i.attr("data-align").toLowerCase(),u=t[r].className,f=i.attr("class")||"";f&&(f=" "+f);i.attr("align",r);i.hasClass(u)||i.attr("class",u+f);i.children("div."+t[r].contHolderClassName).children("div."+t[r].contHolderBodyClassName).addClass(u);i.children("div."+t[r].wcClassName).children("div."+t[r].wcBodyClassName).addClass(u)})},setPopupMinWidth:function(){var t=gx.popup.getPopup(),i;t&&(gx.runtimeTemplates&&(i=this.getPopupMinWidth(),n(document.documentElement).css("min-width",gx.dom.addUnits(i)),n(document.documentElement).addClass("gx-popup-document")),(t.autoresize||t.autoresize===undefined)&&n(document.documentElement).css("height","auto"))},getPopupMinWidth:function(){var i=gx.popup.getPopup(),t=u;if(i&&(t=i.width,i.autoresize||i.autoresize===undefined)){var u=600,f=768,r=n(i.window).width();t=800;r>=1200&&(t=900);r>=f&&r<992&&(t=u);r<f&&(t=r-20)}return t},fixTableResets:function(t){var u=[],f=[],v=this.getFixesStyleElement(),a;i||(i="{{#.}}."+e+"{{.}}{padding:{{.}}px}{{/.}}",Mustache.parse(i));r||(r="{{#.}}."+o+"{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}",Mustache.parse(r));a=n("table[data-cellpadding], table[data-cellspacing]",t||document.body);a.each(function(){var i=this.getAttribute("data-cellpadding"),t;i!==undefined&&(s[i]||(s[i]=i,u.push(i)),n("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className=e+i+" "+this.className.replace(c,"").trim()}));t=this.getAttribute("data-cellspacing");t!==undefined&&(h[t]||(h[t]=t,f.push(t)),this.className=o+t+" "+this.className.replace(l,"").trim())});gx.dom.setStyleElement(v,Mustache.render(i,u)+Mustache.render(r,f),!0)},createLegacyNotification:function(){n("div#gx_ajax_notification").length||n('<div id="gx_ajax_notification" style="display:none;"><\/div>').appendTo(document.body)}}}(),_deinit:function(){this._form=null;this._avoidLeaksDiv!=null&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(t,i){var r=n(i)[0].offsetTop-n(t)[0].offsetTop-n(t).scrollTop();return t&&n(i)[0]?r<n(t).height():!1}}}(gx.$);$.extend(gx.dom,gx.dom_i);gx.evt_i=function(n){return{eachKeyAutorefreshType:function(n){return!gx.lang.isNumericType(n)&&!gx.lang.isDateType(n)},waitGridRefresh:function(n){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(n):n.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){while(gx.evt.refreshGridCallback.length>0){var n=gx.evt.refreshGridCallback.pop();typeof n=="function"&&n.call()}gx.evt.refreshGridCallback=undefined}},clearHooks:function(){for(var n,i=this.hooks.length,t=0;t<i;t++){n=this.hooks[t];try{this.detach(n.c,n.e,n.f);n.c=null;n.f=null}catch(r){gx.dbg.logEx(r,"gxapi.js","clearHooks")}this.hooks[t]=null;n=null}this.hooks=[]},source:function(n){return n.target||n.currentTarget||n.srcElement},createEvent:function(n,t,i,r){var u;return t=t===undefined?!0:t,i=i===undefined?!0:i,r=r||{},window.CustomEvent?u=new CustomEvent(n,{bubbles:t,cancelable:i,detail:r}):(u=document.createEvent("CustomEvent"),u.initCustomEvent(n,t,i,r)),u},dispatch:function(n,t){return n.dispatchEvent?n.dispatchEvent(t):n.fireEvent("on"+t.type,t)},fireEvent:function(n,t){gx.evt.dispatch(n,gx.evt.createEvent(t))},detach:function(n,t,i,r){try{if(r=r||{},typeof t=="string")n.removeEventListener?n.removeEventListener(t,i,r.useCapture||!1):n.detachEvent?n.detachEvent("on"+t,i):n["on"+t]=null;else if(gx.lang.isArray(t))for(var u=0,f=t.length;u<f;u++)this.detach(n,t[u],i,r)}catch(e){gx.dbg.logEx(e,"gxapi.js","detach")}},stopPropagation:function(n){n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},cancel:function(n,t){if(t&&gx.util.browser.isIE()&&typeof(n.keyCode!="undefined"))try{n.keyCode=0}catch(i){}typeof n.preventDefault=="undefined"?(n.cancelBubble=t,n.returnValue=!t):t&&(n.preventDefault(),n.stopPropagation())},checkCtrlFocus:function(n){try{gx.evt.fixWebKitOnFocus()&&n.type=="button"&&gx.fn.isAccepted(n)&&n.onfocus!=undefined&&n.onfocus()}catch(t){gx.dbg.logEx(t,"gxapi.js","checkCtrlFocus")}},doClick:function(n,t){var r,i;gx.isInputEnabled()&&(r=gx.evt.source(t),r.type!="button"&&r.type!="submit"&&(i=gx.dom.el(n),gx.fn.isAccepted(i)&&(i.onfocus!=undefined&&i.onfocus(),i.onclick!=undefined&&i.onclick(),i.nodeName=="INPUT"&&i.type=="submit"&&gx.dom.form().submit())))},executeOnblur:function(n,t){var i=gx.csv.lastId,r=gx.O.focusControl;gx.O.focusControl=n;this.onblur(t,gx.O.focusControl);gx.O.focusControl=r;gx.csv.lastId=i},onblur:function(n,t){var e,i,r,u,f,o;if(gx.O&&gx.csv.IgnoreBlur!==!0){e=gx.fn.controlRowId(n);gx.csv.lastId=t;try{i=gx.fn.validStruct(t);i&&i.gxgrid!=null&&i.gxgrid.updateControlValue(i,!1,e);r=gx.csv.lastControl;r&&(u=r.getAttribute("maxlength"),u>0&&r.value.length>u&&(r.value=r.value.substring(0,u)),i&&i.type=="bits"&&i.ro==0&&(f=gx.fn.getControlGridRef(i.fld,i.gxgrid?i.gxgrid.gridId:""),gx.util.browser.isWebkit()&&r.id.indexOf(i.fld)<0&&(r=f),o=gx.html.multimediaUpload.getContainer(f),gx.html.multimediaUpload.refreshPreviewImg(o,r)))}catch(s){gx.dbg.logEx(s,"gxapi.js","onblur")}}},onfocus:function(){var t=function(){var t=n.Deferred();return gx.fx.obs.notify("gx.onbeforefocus",arguments),gx.evt.onfocus_impl.apply(gx.evt,arguments).then(function(){gx.fx.obs.notify("gx.onafterfocus");t.resolve()}),t.promise()};gx.evt.is_button_mouse_event===!0||gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,t.closure(this,arguments),{single:!0,"async":!0}):t.apply(gx.evt,arguments)},onfocus_impl:function(t,i,r,u,f,e,o){var h=n.Deferred(),w,a,b,k,y,c,p;gx.csv.deferredOnchange&&gx.lang.doExecTimeout(gx.csv.deferredOnchange);f=gx.fn.controlRowIndex(t)||f;try{if(gx.grid.clearActiveGrid(),gx.spa.isNavigating())return h.resolve(!1).promise();if(gx.evt.setReady(!1,"onfocus_impl"),!gx.fn.checkPopupFocus(t))return gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!1).promise();w=!1;gx.csv.cmpCtx!=r&&(w=!0,gx.O.fromValid=0);gx.setGxO(r,u);gx.fn.refreshControlOldValue(t);w&&gx.fn.changeCmpContext();gx.fn.initOld(t);try{gx.grid.lastFocusCtrl!=null&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(v){gx.dbg.logEx(v,"gxapi.js","onfocus")}if(gx.csv.rowChanged=!1,gx.csv.lastControl=t,(e==0||f!="")&&gx.fn.setCurrentGridRow(e,f),gx.fx.installSuggest(t),a=!1,gx.csv.lastGrid!=e&&(gx.csv.lastRow[e]=null,o||(gx.csv.lastGrid<e&&(b=gx.fn.firstGridControl(e),gx.O.fromValid>b&&(gx.O.fromValid=b)),gx.csv.lastGrid=e),a=!0),i>0&&(gx.O.focusControl=i),!gx.csv.onloadFocus)try{gx.fx.ctx.notify(t)}catch(v){gx.dbg.logEx(v,"gxapi.js","onfocus")}if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise();try{if((k=gx.fn.getControlValue("Mode"),k=="DLT"||k=="DSP")||gx.O.isTransaction()&&gx.dom.isButton(t)&&!gx.evt.isEnterEvtCtrl(t)&&!gx.evt.isCheckEvtCtrl(t)&&!o)return gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise()}catch(v){gx.dbg.logEx(v,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&t.gxdisabled&&gx.csv.lastControl!=null)return(cn=gx.fn.getControlIndex(t)+1,cn!=-1&&(NextFocus=gx.fn.searchFocusFwd(cn),NextFocus!=null))?(gx.fn.setFocus(NextFocus),gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise()):(gx.fn.setFocus(gx.csv.lastControl),gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise());if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise();if(gx.csv.invalidControl!=null&&gx.csv.invalidControl!=t&&gx.O.focusControl>=gx.csv.invalidId&&gx.csv.invalidControl==t)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,!1,gx.O,f).done(function(n){n&&(gx.csv.invalidControl=null,gx.evt.setReady(!0,"onfocus_impl"));h.resolve(!0)}),h.promise();o?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));gx.csv.lastRow[e]==undefined||gx.csv.lastRow[e]==f||a||gx.O.fromValid==gx.O.toValid&&(gx.csv.lastId=gx.O.fromValid);y=gx.fn.controlIds();y.length>0&&gx.O.fromValid<y[0]&&(gx.O.fromValid=y[0]);gx.lang.emptyObject(gx.csv.lastRow[e])&&e!=0&&(gx.csv.rowChanged=!0,gx.csv.lastRow[e]=f);var s=gx.O,l=gx.csv.lastId,d=gx.fn.validStruct(l,s);return d&&(c=gx.csv.lastRow[d.grid]),gx.csv.checkRowChange(l,a,s,c).done(function(n){var u=!1,i=!1,o=function(){gx.csv.invalidControl==null&&(t.nodeName==="SELECT"||!gx.util.browser.isSafari()||gx.dom.isTextControl(t)&&t.selectionEnd===0)&&gx.fn.setSelection(t);gx.csv.disableFocusCondition();h.resolve(!0)},v,y,r;!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(f)&&c.length>f.length&&(v=f.length,y=c.substring(c.length-v),u=parseInt(y)<parseInt(f));gx.csv.backwardGridValidation&&(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(f)&&c.length==f.length&&parseInt(c)>parseInt(f)&&(i=s.focusControl>gx.fn.firstGridControl(e)),!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(f)&&c.length==f.length&&parseInt(c)<parseInt(f)&&(i=s.focusControl<l&&s.focusControl>gx.fn.firstGridControl(e)));n&&gx.csv.invalidControl==null&&i?(s.fromValid=gx.fn.firstGridControl(e),gx.csv.validControls(s.fromValid,s.focusControl,!0,gx.O)):(!n||a)&&(s.focusControl>=l||u)?(gx.fn.lastMainLevelCtrlId(l,e)&&(r=gx.fn.getControlRefById(l),r&&r.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)===1&&(s.fromValid=l+1)),gx.csv.validateAll(s).done(o)):(s.toValid=s.focusControl,o())}),e&&f&&(p=gx.O.getGridById(e,f),p&&p.allowSelection&&p.setSelection(parseInt(f,10)-1)),gx.evt.setReady(!0,"onfocus_impl"),h.promise()}catch(v){gx.dbg.logEx(v,"gxapi.js","onfocus")}return gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!1).promise()},userOnload:function(){try{typeof GXOnloadUsr=="function"&&GXOnloadUsr()}catch(n){gx.dbg.logEx(n,"gxapi.js","userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(n,t,i){gx.pO.MasterPage&&n.req.setRequestHeader(i,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(n,t,i,r,u,f){gx.reinit(!f)},oncontentreplace:function(n,t,i,r,u,f,e,o){var h=gx.lang.getType(r),c=f==e?f:e,l=c?gx.lang.getType(c.toLowerCase()):!1,s=gx.ajax.getJsonResponse();s&&gx.fn.setJsonHiddens(null,s.gxHiddens,!1);h.prototype=new gx.GxObject;gx.setParentObj(new h);o?gx.setMasterPage(u):l&&gx.setMasterPage(new l);gx.ajax.clearJsonResponse();s?gx.ajax.setJsonResponse({response:s,isPostBack:!1,afterCmpLoaded:function(){o&&(u.restoreTargetComponents(),u.restoreExoEventHandlers());gx.objectLoad(s.gxGrids,s.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}):gx.objectLoad()}}});gx.livePrevWS._init()})},onunload:function(n){gx.objectUnload(n);gx.spa.stop()},onclick:function(n){var t={event:n};(gx.fx.obs.notify("gx.onclick",[t]),t.cancel)||(gx.evt.setReady(!1,"onclick"),gx.isInputEnabled(n)||gx.evt.cancel(n,!0),gx.evt.mouse.update(n),setTimeout(function(){gx.fx.ctx.notify()},10),gx.evt.setReady(!0,"onclick"))},ontouchstart:function(n){var t=gx.evt.onmousedown.closure(this,[n]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(t,150):t()},onmousedown:function(t){var r=window.event||t,f=gx.evt.source(r),u,i;if(f&&gx.util.browser.ieVersion()<=8&&n(f).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(f);gx.evt.mouse.update(t);u=gx.fx.dnd;u.deleteClonControl();i=u.getSource(r);gx.dom.isMaskElement(r.target)||i==null||(gx.evt.cancel(r,!0),gx.setGxO(i.obj),u.drag(i.obj,i.types,i.hdl))},onmousemove:function(n){var t,f,i,r,u;if(gx.evt.mouse.update(n),t=gx.fx.dnd,f=gx.util.browser.isIE(),gx.popup.ispopup()&&gx.popup.ext.compatMode()&&(i=gx.popup.ext,i.movepopup(),i.currIDb!=null||i.currRS!=null))return!1;t.obj!=null&&(r=window.event||n,gx.evt.cancel(r,!0),u=gx.fx.dnd.getTarget(r,t.obj.gxDragTypes),u!=null&&t.over(),t.moveControl(t.dragCtrl))},onmouseup:function(n){var t,i,r;window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(n);t=gx.fx.dnd;t.dragCtrl!=null&&(r=window.event||n,i=t.getTarget(r,t.obj.gxDragTypes),i!=null?(t.deleteClonControl(),gx.setGxO(i.obj),t.drop(t.dropCtrl,i.obj,i.hdl)):t.restoreControl(),r=window.event||n,gx.evt.cancel(r,!0));t.out();t.dragCtrl=null;t.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(n){gx.evt.mouse.update(n);var t=window.event||n;(gx.util.browser.isOldIE()||!gx.fx.dom.delayedDispatch(n))&&gx.fx.dom.raiseEvent("dblclick",t)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(n,t,i){var u=window.event||i,f=gx.util.browser.isIE(),r=u.keyCode;if(f){if(u.type=="keydown"&&r==229)return n.value.length<=t?(n.ImeKey=!0,!0):!1;if(u.type=="keyup"&&r==8&&n.ImeKey&&n.value.length+1>=t)return n.value=n.value.substring(0,n.value.length-1),n.ImeKey=!1,!0}if(u.type=="keyup"||f)return n.value.length+1<=t||r==8||r==9||r==46||r>=35&&r<=40},fireControlValueChange:function(t,i,r){var f=n.Deferred(),u;return!t||!i?f.resolve():(u=t.getValidStructFld(i),u&&u.evt_cvc)?(gx.evt.startValidation(u.gxgrid),gx.evt.stopPropagation(r),u.grid&&gx.evt.setEventRow(t,i),gx.fn.disableKeys(),t[u.evt_cvc].call(t).always(function(){gx.evt.endValidation(u.gxGrid,gx.evt.types.VALUECHANGED);gx.fn.enableKeys()})):n.Deferred().resolve()},fireControlValueChanging:function(t){var r=gx.fn.getControlContext(t)||gx.O,f=n.Deferred(),i,e,u,o;return!r||!t?f.resolve():(i=r.getValidStructFld(t),i&&(e=i.gxgrid&&i.gxgrid.isFreestyle,u=i.evt_cvcing&&!i.gxsgprm,u&&gx.evt.startValidation(i.gxgrid),(u||e)&&(o=gx.O,gx.setGxO(r),typeof i.c2v=="function"&&i.c2v(),typeof i.v2bc=="function"&&i.v2bc.call(r),gx.setGxO(o)),u))?(i.grid&&gx.evt.setEventRow(r,t),r[i.evt_cvcing].call(r).always(function(){gx.evt.endValidation(i.gxGrid,gx.evt.types.VALUECHANGING)})):f.resolve()},oncontrolvaluechanging:function(n){var t=n.keyCode,i;t!=8&&t<32||t>=33&&t<46||t>=112&&t<=123||(i=gx.evt.source(n),i)&&gx.evt.fireControlValueChanging(i)},onkeypress:function(t,i,r){var f,h,u,c,l;if(t=t||window.event,t){f=t.keyCode===13;t.keyCode===27&&gx.evt.shouldIgnoreEscKey()&&gx.evt.cancel(t,!0);var e=gx.fn,o=gx.util.browser,s={event:t,hasEnter:i,skipOnEnter:r,cancel:!1};if(t.keyCode===27&&gx.popup.ispopup()){e.cancelWindow();return}if(gx.fx.obs.notify("gx.keypress",[s]),!s.cancel){if(f&&!gx.isInputEnabled()&&this.cancel(t,!0),!gx.O||gx.O.isTransaction()&&gx.O.Gx_mode=="DSP"&&this.invalidDSPKey(t))return this.cancel(t,!0),!1;if((this.lastKey=t.keyCode,this.shiftPressed=t.shiftKey,h=t.ctrlKey,u=gx.evt.source(t)||gx.dom.getActiveElement()||gx.csv.lastControl,gx.evt.validKeypressForCtrl(u,t)||this.cancel(t,!0),t.keyCode!==9&&gx.csv.invalidateCtrl(u,t),!this.isEnterEvtCtrl(u)||!this.isTriggerKey(t)||!this.cancelAndRefresh(t))&&(this.checkFuncKey(t,u),(t.charCode==32||t.keyCode==32||f&&!r)&&gx.dom.hasClass(u,"gx_newrow")&&n(u).find("span").trigger("click"),f&&r||!gx.grid.handleKeyPressEvt(t)))switch(t.keyCode){case 13:if(c=this.triggersEvt(u),r){if(e.enterHasFocus())return;if(this.shiftPressed&&u.nodeName==="TEXTAREA")return;if(h&&u.nodeName==="TEXTAREA"){gx.dom.replaceAtCaretPosition(u,"\n");this.cancel(t,!0);return}o.isIE()&&u.type!="file"?(gx.evt.isEnterEvtCtrl(u)&&gx.O.executeEnterEvent(t,u),this.lastKey=9,t.keyCode=this.lastKey,this.cancel(t,!0),e.skipFocus(r,u)):(u.value&&o.isIE()&&u.tagName!="SELECT"&&(l=u.value,u.value="",u.value=l),e.skipFocus(r),this.cancel(t,!0));this.enter=!1}else c||gx.O.executeEnterEvent(t,u)}}}},onkeyup:function(n){var r=window.event?window.event:n,t=gx.evt.source(r),e=t.getAttribute("maxlength")||(t.getAttribute("max")?t.getAttribute("max").length:0),h=typeof t.value=="undefined"?"":t.value,u,o,f,i,s;if(t.type==""&&r.keyCode==9||this.autoSkip&&t.type!=""&&!this.isControlKey(this.lastKey)&&h.length>=e&&e>0){if(!this.skipPromptCtrl)return;if(gx.dom.isTextWithLink(t)||gx.dom.isImageWithLink(t)){if(u=t.id||(t.tagName=="A"&&t.parentNode?t.parentNode.id:""),u){o=gx.O.getValidStructId(u);gx.evt.onfocus(t,o,"",!1,"",0)}return}if(f=t.getAttribute("gxfocusable"),f!=null&&f=="1")return;if(i=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl),i==-1)return!0;s=gx.fn.searchFocus(this.shiftPressed?i-1:i+1,!this.shiftPressed);gx.fn.setFocus(s)}gx.grid.handleKeyUpEvt(r)},shouldIgnoreEscKey:function(){var n=gx.popup.getPopup();return gx.evt.processing||n&&n.state=="opening"},validKeypressForCtrl:function(n,t){var c=function(n){return n.selectionStart!==null&&n.selectionStart!==undefined?n.selectionEnd-n.selectionStart:window.getSelection?window.getSelection().toString().length:undefined},r=gx.O.getValidStructFld(n),u,h;if(r){var f=gx.rtPicture(r,n),e=gx.numericLenDec(f),o=e.Decimals,l=e.Integers,s=r.type,i=n.value;if(s=="int"||s=="decimal"){if(t.key==="e")return!1;if(u=c(n),u===undefined)return!0;if(gx.util.browser.isFirefox()&&n.type=="number"&&o===0)!n.gxoninput&&n.max&&n.min&&(n.gxoninput=!0,h=function(n){if(n.max&&n.min){var t=Number(n.value);(t>n.max||t<n.min)&&(n.value=n.value.substr(0,n.max.length))}},gx.evt.attach(n,"input",h.closure(this,[n])));else if(!isNaN(Number(t.key)))return digits=i.split("").filter(function(n){return n>="0"&&n<="9"}).length,i=gx.num.normalize_decimal_sep(f,gx.thousandSeparator,gx.decimalPoint,i),picinputs=l+(i.indexOf(gx.decimalPoint)==-1?0:o),digits-u<picinputs}}return!0},setEventRow:function(n,t){var i=gx.fn.rowGridId(t),r=i&&(gx.fn.controlRowId(t)||gx.fn.currentGridRowImpl(i)||"0001");i&&r&&(t.gxGridName!=undefined&&gx.fn.setHidden(n.CmpContext+t.gxGridName.toUpperCase()+"_ROW",r),gx.evt.setCurrentGridRows(i,r));gx.csv.lastEvtRow=r},ctrlOnchange:function(n,t,i,r){gx.csv.pkDirty=i;n.value=="UPD"?t.value=="1"?(i?r!=null&&(r.value=gx.getMessage("GXM_captionadd")):r!=null&&(r.value=gx.getMessage("GXM_captionupdate")),t.value="0"):i&&r!=null&&(r.value=gx.getMessage("GXM_captionadd")):n.value=="INS"&&t.value=="1"&&(r!=null&&(r.value=gx.getMessage("GXM_captionadd")),t.value="0")},onchange:function(){var n=function(){return gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,n.closure(this,arguments),{single:!0,"async":!0}):n.apply(gx.evt,arguments)},onchange_impl:function(t,i,r){var h=n.Deferred(),o,s;gx.evt.setReady(!1,"onchange_impl");gx.evt.lastControl=t;var c=gx.fn.getControlValue(t.type=="radio"?t.name:gx.dom.id(t)),f=gx.fn.getControlContext(t)||gx.O,v=gx.evt.fixWebKitOnFocus()&&t.type==="radio";v&&t.onfocus();var u=f.getValidStructFld(t),l=!1,e=gx.O.focusControl,a=function(){var i,n,o;delete gx.fx.delayedValidation;gx.evt.setReady(!0,"onchange_impl");i=gx.util.browser.isWebkit()&&(t.type=="radio"||t.type=="checkbox"||t.type=="file");n=!1;l&&u&&(gx.fn.lastMainLevelCtrlId(e,u.grid)||u.gxsgprm)&&(i=!0,n=!0);r&&(n=!1);i&&t.onblur&&t.onblur();o=function(){gx.evt.execUsrOnchange(t);gx.fx.obs.notify("gx.validation");h.resolve()};n&&(typeof t.GXFormatError=="undefined"||t.GXFormatError==!1)?gx.csv.validControls(e,e+1,!0,f).then(o):o()};if(gx.csv.controlValueHasChanged(t,c,u)){l=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");gx.csv.invalidateGXCtrl(t);o=!0;u&&(s=u.grid?gx.fn.controlRowIndex(t):undefined,typeof u.c2v=="function"&&u.c2v(s),typeof u.v2bc=="function"&&u.v2bc.call(f,s));r||gx.fn.setControlOldValue(t,c);var y=function(){var i=n.Deferred(),r;return(t.type=="select-one"||t.type=="checkbox"||t.type=="radio")&&(o=!1,gx.evt.setReady(!1,"validationCallback"),r=u?gx.fn.currentGridRowImpl(u.grid):null,gx.csv.validate(t,u.id||e,!0,f,r).done(function(n){n&&gx.csv.invalidControl==t&&(gx.csv.invalidControl=null);gx.evt.execOnchange(t,n);gx.evt.setReady(!0,"validationCallback");i.resolve()}).fail(function(){gx.evt.setReady(!0,"validationCallback");i.resolve()})),o&&(gx.evt.execOnchange(t,!1),i.resolve()),i.promise()},p=function(){y.call(this).then(a.closure(this))},w=p.closure(this);gx.csv.deferredOnchange=gx.lang.doCallTimeout(function(){delete gx.csv.deferredOnchange;gx.evt.fireControlValueChange(f,t,i).always(w)},this,[],100)}else a.call(this);return h.promise()},execOnchange:function(n,t,i){var r="";if(n.attributes["data-gxoch1"])try{r+=n.attributes["data-gxoch1"].value+";"}catch(u){gx.dbg.logEx(u,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(n)&&n.attributes["data-gxoch2"])try{r+=n.attributes["data-gxoch2"].value+";"}catch(u){gx.dbg.logEx(u,"gxapi.js","execOnchange")}try{r!=""&&eval(r)}catch(u){gx.dbg.logEx(u,"gxapi.js","execOnchange")}t||gx.fn.setControlGxValid(n,"0");i||(n.setAttribute("gxctrlchanged","1"),gx.fn.setControlValue("IsModified","1"));i!==!0&&gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(n){var t="",i,r;try{t=n.attributes["data-gxoch0"].value}catch(u){return!0}return i=new Function(t),r=i.call(n),r},jsEvent:function(n){if(!gx.isInputEnabled())return!1;var t=n.getAttribute?n.getAttribute("data-jsevent")||n.getAttribute("jsevent"):n.jsevent;return gx.lang.emptyObject(t)?!0:eval(t)},isEnterEvtCtrl:function(n){var t,r,f,i,e,u;if(gx.O.EnterCtrl){if(t=gx.dom.id(n),t||n.tagName!="A"||(t=n.parentNode.id),t&&t.indexOf("span_")==0&&(t=t.substring(5)),!t)return!1;for(r=gx.O.EnterCtrl,f=gx.fn.rowGridId(n),i=0,e=r.length;i<e;i++)if((u=gx.csv.ctxControlId(r[i]),f&&t.search(new RegExp(".*"+u+"_[0-9]{4}$"))!=-1)||u==t)return!0}return!1},isCheckEvtCtrl:function(n){var t,i;if(!gx.lang.emptyObject(gx.O.CheckCtrl)){t=gx.dom.id(n);for(i in gx.O.CheckCtrl)if(gx.O.CheckCtrl[i]==t||gx.O.CmpContext+gx.O.CheckCtrl[i]==t)return!0}return!1},isTriggerKey:function(n){for(var i=this.triggerKeys.length,t=0;t<i;t++)if(n.keyCode==this.triggerKeys[t]||n.charCode==this.triggerKeys[t])return!0;return!1},isControlKey:function(n){for(var i=this.controlKeys.length,t=0;t<i;t++)if(n==this.controlKeys[t])return!0;return!1},invalidDSPKey:function(n){var t=n.keyCode-111;return(n.shiftKey&&(t+=12),this.keyListeners[t]&&this.keyListeners[t][gx.O.CmpContext]=="ENTER")?!0:n.keyCode==13?!0:!1},addKeyListener:function(n,t,i){t==1&&(document.body.onhelp=gx.falseFn);this.keyListeners[t]==undefined&&(this.keyListeners[t]=[]);this.keyListeners[t][n]=i},setEvtName:function(n){gx.fn.setHidden("_EventName",n)},cancelAndRefresh:function(n){var t=gx.O;if(t&&t.conditionsChanged){if(this.cancel(n,!0),t.autoRefresh||this.resetGridsPagingVarsIfConditionsChanged(t.Grids||[]),t.autoRefresh||t.hasEnterEvent||t.anyGridBaseTable)t.executeServerEvent("RFR",!1);else return!1;return!0}return!1},resetGridsPagingVarsIfConditionsChanged:function(t){var i=!1;return n.each(t,function(n,t){t.conditionsChanged&&t.conditionsChanged()&&(t.setPagingVars(0,0),i=!0)}),i},setGridEvt:function(n,t){if(gx.isInputEnabled()&&!gx.lang.emptyObject(n)){if(gx.lang.emptyObject(t)){var i=gx.fn.getGridObj(n);i&&(t=gx.fn.getHidden(gx.O.CmpContext+i.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",n);gx.fn.setHidden("_EventRowId",t);t&&gx.fn.setCurrentGridRow(n,t)}},checkFuncKey:function(n,t){var i=this.lastKey-111,r,u,f;if(n.shiftKey&&(i+=12),i>0&&i<=24&&this.keyListeners[i]!=undefined)if(r=this.keyListeners[i][gx.O.CmpContext],typeof r!="undefined")this.execFnKeyEvt(n,gx.O,r,t);else for(u in this.keyListeners[i])if(r=this.keyListeners[i][u],typeof r!="undefined"&&(f=gx.getObj(u,!1),f!=null)){this.execFnKeyEvt(n,f,r,t);break}},execFnKeyEvt:function(n,t,i,r){var u,e,f,c,o,s,l,r,h;if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(n,!0),i=="PROMPT"){if(u=t.getValidStructFld(r),u&&u.attachedCtrls)for(e=u.attachedCtrls,f=0,c=e.length;f<c;f++)o=e[f],o&&o.info&&o.info.isPrompt&&(s=e[f].id,typeof t.promptKeyHandlers[s]=="function"&&(l=u.grid>0?"_"+gx.fn.currentGridRowImpl(u.grid):"",r=gx.dom.el(t.CmpContext+s+l),t.promptKeyHandlers[s].call(t,r)))}else t.isTransaction()&&i=="SELECT"?(h=gx.dom.byId(t.CmpContext+"BTN_SELECT"),h&&typeof h.click=="function"&&h.click()):t.executeEvent(i,!1)},keyModifiesValue:function(n){var t=window.event?n.keyCode:n.which;return t>=32&&t<=127||t==229?!0:!1},triggersEvt:function(n){if(!gx.lang.emptyObject(n)){if(n==gx.evt.dummyCtrl)return!0;var t=gx.config.evt.triggersEvtNodes||{};if(n.nodeName==="A"||n.nodeName==="TEXTAREA"||t[n.nodeName])return!0;if(n.nodeName==="INPUT"){if(n.type==="button"||n.type==="image")return!0}else if(n.tagName==="IMG"&&gx.dom.hasAttribute(n,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR))return!0}return!1},setProcessing:function(n){var i=n.status,t=n.cond,r=n.ctx;(typeof t=="undefined"||t)&&(gx.evt.redirecting||(gx.evt.processing=i,gx.dbg.enabled&&(console.groupCollapsed("setProcessing ${ctx} ${gx.evt.processing}"),console.trace(),console.groupEnd()),gx.evt.setReady(!gx.evt.processing,"setProcessing"),gx.evt.processing||gx.fx.obs.notify("gx.endprocessing")))},doAfterProcessing:function(n,t){gx.evt.processing?gx.fx.obs.addObserver("gx.endprocessing",t,n,{single:!0}):n.call(t)},startValidation:function(n,t){(n||t)&&(gx.csv.validatingGrid=n,gx.csv.validating+=1)},endValidation:function(n,t){n&&n!==gx.csv.validatingGrid||(gx.csv.validating-=1,gx.csv.validating===0&&(gx.csv.validatingGrid=null),gx.csv.validating<0&&gx.dbg.logMsg("WARNING! endValidation unexpected condition (gx.csv.validating < 0)"),gx.fx.obs.notify("gx.onaftervalidate",[t]))},userReadyThresholdWait:function(){return gx.evt.userReadyTStamp||(gx.evt.userReadyTStamp=Date.now()),Date.now()>gx.evt.userReadyTStamp+gx.evt.userReadyThreshold},setReady:function(n){gx.evt.userReadyCnt+=n?-1:1;gx.evt.userReadyCnt=gx.evt.userReadyCnt<0?0:gx.evt.userReadyCnt;gx.evt.userReadyCnt==0?(gx.evt._userReady=!0,gx.evt.userReadyTStamp=Date.now()):gx.evt._userReady=!1;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0);gx.dbg.enabled&&(console.groupCollapsed("setReady ${Context} ${gx.evt.userReadyCnt}"),console.trace(),console.groupEnd())},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,setCurrentGridRows:function(n,t){for(var r,u,i;n>0&&t&&t.length&&t.length>=4;)r=t.substr(0,4),u=t.substr(4),gx.fn.setCurrentGridRow(n,r),i=gx.O.getGridById(n,u),i&&(i=i.parentGrid),n=i?i.gridId:0,t=t.substr(4,t.length)},canExecuteEvent:function(n,t){return!(!t&&(gx.spa.isNavigating()||gx.evt.redirecting||!gx.csv.isvalidating()&&(gx.lang.emptyObject(n)||gx.evt.processing)))},execEvt:function(n,t,i,r,u,f,e,o,s,h,c,l){var p,w;if(gx.dbg.logPerf("execEvt"),gx.text.contains(i,"EENTER")&&gx.ajax.saveFormForAutoComplete(),p=function(){c&&c.call()},!this.canExecuteEvent(i,h)){p();return}var b=gx.setGxObyCtx(n,t),v=u,y=this.EVT_ROW_ID_REGEXP.exec(i),a=y&&y.length>1?y[1]:null;y&&y.length>2&&gx.evt.setCurrentGridRows(v,a);a||(a=gx.fn.currentGridRowImpl(v));w=function(){gx.fx.obs.notify("gx.validation",null,function(){var c,y;if(!h&&b&&b.inputHasFormatErrors(i,u,a)){p();return}if(gx.setGxObyCtx(n,t),e&&(gx.evt.srvCommand=!0,r&&(v=gx.fn.rowGridId(r),a=gx.fn.controlRowId(r),gx.lang.emptyObject(v)||gx.lang.emptyObject(a)||(gx.csv.lastGrid=v,gx.fn.setCurrentGridRow(v,a)))),gx.csv.lastId>0&&!gx.csv.validatingAll){var w=gx.O.getValidStruct(gx.csv.lastId),k=gx.evt.isEnterEvtCtrl(r)&&r.id>0?gx.O.getValidStructId(r.id):gx.O.focusControl,d=k<gx.csv.lastId;(d&&(gx.evt.isEnterEvtCtrl(r)||w&&w.isuc)||l)&&(gx.csv.validatingAll=!0,gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=!1)}this.setEvtName(i,r);this.lastEvent=i;!e&&(gx.grid.drawAtServer||r&&r.nodeName=="INPUT"&&r.type=="submit")?this.execEvtSubmit(i,r):(gx.evt.setProcessing({status:!0,ctx:"notifyValidation"}),c=function(){gx.evt.setProcessing({status:!1,ctx:"notifyValidation"})},y=function(){gx.ajax.doPost((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),f,o,s);c()},gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(i,gx.O,v,a,!0,undefined,o).done(function(n){n||p();s&&s(n);c()}).fail(y):gx.evt.execNonFullAjaxEvent(y))}.closure(this))};gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(r)&&r!=gx.csv.lastControl&&r.onfocus!=undefined?(gx.fx.obs.addObserver("gx.onafterfocus",this,w,{single:!0}),r.onfocus()):w.call(this)},execEvtSubmit:function(n,t){var i,u,r,f,e;gx.isInputEnabled()&&(gx.evt.setProcessing({status:!0,ctx:"execEvtSubmit"}),gx.O.startFeedback(),gx.fx.obs.notify("gx.onbeforeevent",[n,t]),gx.fn.objectOnpost(),gx.http.saveState(),gx.fn.forceEnableControls(!1),i=gx.dom.form(),u=gx.popup.getPopup(),u!=null&&(r=i.action,f=u.window.gx.popup.lvl,f!=-1&&(e=gx.http.urlParameterPrefix(r),e+=encodeURIComponent("gxPopupLevel="+f+";"),r+=e,i.action=r)),i.submit())},execCliEvt:function(t,i,r,u,f,e){var s=n.Deferred(),o,h,c,l,a,v;return this.canExecuteEvent(!0,!1)?(gx.fx.obs.notify("gx.validation"),e=e!=undefined?e:[],o=gx.getObj(t,i),o!=null)?(gx.setGxO(t,i),typeof u=="string"&&u!=""&&arguments.length>4&&(c=o.getGrid(u),c.instanciateRow(f),h=c.gridId),o.inputHasFormatErrors(o.getServerEventName(r),h,f))?s.reject():(l=o.isServerEvent(r),gx.evt.setProcessing({status:!0,cond:!l,ctx:"execCliEvt"}),o.execC2VFunctions(),a=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing({status:!1,cond:!l,ctx:"execCliEvt"})});o.conditionsChanged?o.executeServerEvent("RFR",!0):gx.fx.obs.notify("gx.onafterevent",[]);s.resolve()},v=function(){o[r](e);a();gx.fx.obs.notify("gx.afterNonFullajax")},gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(o.getServerEventName(r),o,h,f,!1,e).done(a).fail(v):gx.evt.execNonFullAjaxEvent(v),s.promise()):s.reject():s.reject()},execNonFullAjaxEvent:function(n){gx.evt.NonFullAjaxserialRunner=gx.evt.NonFullAjaxserialRunner||gx.evt.serialRunner();gx.fx.obs.addObserver("gx.afterNonFullajax",gx.evt,function(){gx.evt.NonFullAjaxserialRunner.signalEndTask()},{single:!0});gx.evt.NonFullAjaxserialRunner.addTask(n)},fixWebKitOnFocus:function(){var n=gx.util.browser;return n.isWebkit()&&!n.isChrome()?!0:n.isChrome()&&n.chromeVersion()<30?!0:!1},dispatcherTimeout:30,dispatcher:function(){var t=function(n){for(var r=[],u,t,f={},e,i=0;i<n.length;i++)t=n[i],f[t.eventName]||(f[t.eventName]=[]),f[t.eventName].push(t.deferred),(r.length===0||t.eventName!==r[r.length-1].eventName)&&r.push(t);for(i=0;i<r.length;i++)for(t=r[i],e=f[t.eventName],u=0;u<e.length;u++)t.deferred!==e[u]&&t.deferred.done(function(){this.resolve.apply(this,arguments)}.closure(e[u]));return r};return{dispatchedEvents:{},serialRunner:gx.evt.serialRunner(),getContextKey:function(n,t,i,r){return r+(n.CmpContext+n.ServerClass)+(t||"")+(i||"")},getEventParmsMetadata:function(n,t,i){return t.EvtParms[n][i=="input"?0:1]},eventDepends:function(n,t,i){for(var r,h,f=this.getEventParmsMetadata(t,i,"output"),e=this.getEventParmsMetadata(n,i,"input"),o,s,u=0,c=f.length;u<c;u++)for(o=gx.ajax.resolveParmKey(f[u]),r=0,h=e.length;r<h;r++)if(s=gx.ajax.resolveParmKey(e[r]),o==s)return!0;return!1},initialize:function(){this.t&&clearTimeout(this.t);this.serialRunner=gx.evt.serialRunner();this.dispatchedEvents={}},beforeDispatch:function(n){var t=gx.ajax.getSecurityToken(n);t&&(n.InternalParms[t.id]=t.value)},types:{event:"event",validation:"validation"},dispatch:function(t,i,r,u,f,e,o,s){var h,y,c,l;if(s=s||gx.evt.dispatcher.types.event,f=f===undefined||f,h=n.Deferred(),typeof t=="object"&&(y=t.fn,t=t.eventName),c=i.cleanEventName(t),l=i.getClientEventName(t),s===gx.evt.dispatcher.types.validation?(c=t.toUpperCase(),l=t):(c=i.cleanEventName(t),l=i.getClientEventName(t)),this.beforeDispatch(i),!i.EvtParms[c])return h.reject(),h.promise();var v=this.getContextKey(i,r,u,s),a=this.dispatchedEvents[v],p={eventName:c,clientSideEventName:l,clientSideFunction:f?null:(y||i[l]).closure(i,e||[]),serverSide:f,deferred:h,arguments:e,disableForm:o};return a?a.events.push(p):(a={gxO:i,grid:r,row:u,type:s,events:[p]},this.dispatchedEvents[v]=a,this.t=setTimeout(this.serialRunner.addTask.closure(this.serialRunner,[this.dispatchTimeoutCallback.closure(this,[v])]),gx.evt.dispatcherTimeout)),h.promise()},dispatchTimeoutCallback:function(n){var u=this.dispatchedEvents[n],s=u.type,d=u.gxO,nt=u.grid,tt=u.row,g=[],h=[],r,f,p,e=[],c,w,l={},o,v,i,a,y,b,k;if(delete this.dispatchedEvents[n],s!==gx.evt.dispatcher.types.validation)for(i=0,a=u.events.length;i<a;i++)if(f=u.events[i],f.serverSide)h.push(f);else{for(p=!0,v=0;v<i;v++)if(this.eventDepends(f.eventName,u.events[v].eventName,d)){p=!1;break}p?g.push(f):h.push(f)}else h=u.events;for(r=t(g,s).concat(t(h,s)),w=!1,i=0,a=r.length;i<a;i++)o=r[i].eventName,l[o]||(l[o]=[]),l[o].push(r[i].deferred),w&&r[i].serverSide?c.addMethod(o):(c=this.createMessage(s,o,d,nt,tt,r[i].serverSide,r[i].disableForm),r[i].serverSide||(c.callback=r[i].clientSideFunction),e.push(c)),w=r[i].serverSide;y=function(n,t,i){for(var e,u,f,r=0,o=n.methods.length;r<o;r++)for(e=l[n.methods[r]],u=0;u<e.length;u++)f=e[u],f&&(t?f.resolve(i):f.reject(i))};runCount=0;b=this.serialRunner;k=function(){if(runCount<e.length){var n=e[runCount++],t=runCount==e.length;n.call().done(function(i){y(n,!0,i);k();t&&b.signalEndTask()}).fail(function(t){y(n,!1,t);for(var i=runCount;i<e.length;i++)y(e[i],!1,t);b.signalEndTask()})}};k()},createMessage:function(n,t,i,r,u,f,e){return n===gx.evt.dispatcher.types.validation?new gx.ajax.validationMessage(t,i,r,u,f,e):new gx.ajax.message(t,i,r,u,f,e)}}}(),mouse:{x:-1,y:-1,update:function(n){try{gx.lang.emptyObject(n.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=n.pageX,this.y=n.pageY):n.touches.length>0&&(this.x=n.touches[0].pageX,this.y=n.touches[0].pageY)}catch(t){gx.dbg.logEx(t,"gxapi.js","mouse update")}}},_deinit:function(){this.lastControl=null;this.lastEvent=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}}}(gx.$);gx.csv_i=function(n){var t=function(t,i,r){for(var f=[],u=0;u<t.length;u++)f.push(i.validControl.apply(i,t[u]));n.when.apply(n,f).done(r)};return{GX_OLD_VALUE_ATTRIBUTE:"data-gxoldvalue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:0,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],resetRow:function(){gx.csv.lastEvtRow=null;gx.csv.validatingGrid=null;gx.csv.instanciatedRowGrid=null},isvalidating:function(){return gx.csv.validating>0},validateAll:function(t){var i=n.Deferred();return t=t||gx.O,this.validControls(t.fromValid,t.toValid,!1,t).done(function(){try{this.invalidControl!=null&&gx.csv.stopOnError||(t.fromValid=t.toValid)}catch(n){gx.dbg.logEx(n,"gxapi.js","validateAll")}i.resolve()}.closure(this)),i.promise()},validControls:function(i,r,u,f,e){var w=n.Deferred(),l=!0,k=-1,h=[],d=0,g=0,b=0,nt=gx.csv.fullGridValidation&&r-i>=1&&gx.O.isTransaction(),o,a,v,s,tt,ft,y,p;f=f||gx.O;f.startFeedback();a=function(n){f.endFeedback();w.resolve(n)};v=function(n,t){if(gx.csv.stopOnError)if(t!=-1){var r=gx.fn.validStruct(t,f),i=gx.fn.getControlGridRef(r.fld,r.grid);gx.csv.disableFocus=document.activeElement!==i;gx.fn.isAccepted(i,f)?gx.fn.setFocus(i):gx.fn.setFocus(gx.evt.lastControl)}else gx.dom.isButton(gx.csv.lastControl)||gx.csv.validActivatedControl==null||gx.fn.setFocus(gx.csv.validActivatedControl)};try{if(gx.csv.validActivatedControl=null,gx.csv.invalidControl=null,gx.csv.invalidId=0,o=null,r>i){for(nt&&(o=gx.fn.validStruct(i),o!=undefined&&o.lvl!=undefined&&(d=o.lvl),o=gx.fn.validStruct(r),o!=undefined&&o.lvl!=undefined&&(g=o.lvl)),h=[],s=i;s<r;s++)if(o=gx.fn.validStruct(s),o&&(tt=gx.fn.currentGridRowImpl(o.grid)),h.push([s,u,f,tt,e]),nt&&s>i&&s<r&&o!=undefined&&o.lvl!=undefined&&(b=o.lvl,b!=d&&b!=g&&o&&o.grid)){var it=gx.fn.getGridObj(o.grid),et=it.grid.rows.length,rt=gx.fn.currentGridRowImpl(o.grid),ut=gx.fn.lastGridControl(o.grid);if(s==ut)for(ft=gx.fn.firstGridControl(o.grid),y=0;y<et;y++){var c=it.grid.rows[y],ot=c.gxDeleted(),st=c.gxExists(),ht=c.gxIsMod();if(!ot&&(st||ht)&&c.gxId!=rt)for(p=ft;p<=ut;p++)h.push([p,u,f,rt,c.gxId])}}if(h.length>0)return gx.evt.setProcessing({status:!0,ctx:"validControls"}),t(h,this,function(){for(var r,n=!0,i=-1,t=0,u=arguments.length;t<u;t++)if(r=arguments[t].ret,n&&!r){i=arguments[t].ctrl;n=!1;break}v(n,i);gx.evt.setProcessing({status:!1,ctx:"validControls"});a(n)}),w.promise();v(l,k);a(l)}else v(l,k),a(l)}catch(ct){gx.dbg.logEx(ct,"gxapi.js","validControls")}return w.promise()},validControl:function(t,i,r,u,f){var h=n.Deferred(),r=r||gx.O,e=gx.fn.validStruct(t,r),s,c=!0,l,o;if(e!=undefined){e.grid!=0&&(s=u?u:gx.fn.currentGridRowImpl(e.grid),gx.lang.emptyObject(s)||gx.fn.setCurrentGridRow(e.grid,s));e.isuc==!0?(s=e.grid!=0?u?u:gx.fn.currentGridRowImpl(e.grid):null,l=e.getUCInstance(s)||e.uc,e.uc.execC2VFunctions()):typeof e.c2v=="function"&&e.c2v();typeof e.v2bc=="function"&&e.v2bc.call(r);try{if((e.lvl==0||e.grid!=0&&gx.fn.gridRowIsMod(e.lvl,gx.fn.currentGridRow(e.grid))||!r.isTransaction())&&(o=null,o=e.isuc==!0?e.uc.getRealControl():gx.fn.getControlGridRef(e.fld,e.grid),o))return this.validate(o,t,i,r,u,f).done(function(n){try{var i=!1,r=!0,u=-1;e.grid!=0&&(i=gx.fn.rowIsRemoved(e.grid,gx.fn.currentGridRow(e.grid)));n||i||(gx.csv.invalidControl=o,gx.csv.invalidId=t,r=!1,u=t);gx.csv.lastId=t;gx.fn.isAccepted(o)==!1&&(gx.evt.executeOnblur(t,o),o.getAttribute("data-gxhiddenonchange")!=o.value&&(o.setAttribute("data-gxhiddenonchange",o.value),gx.evt.execOnchange(o,!1,!0)))}catch(f){gx.dbg.logEx(f,"gxapi.js","validControl - callback")}h.resolve({ret:r,ctrl:u})}),c=!1,h.promise()}catch(a){gx.dbg.logEx(a,"gxapi.js","validControl")}}return c&&h.resolve({ret:!0,ctrl:-1}),h.promise()},validate:function(t,i,r,u,f,e){var s=n.Deferred(),u=u||gx.O,a=!0,o,v,l,y,h,p,c;if(gx.csv.anyError=!1,o=gx.fn.validStruct(i,u),o==undefined)return s.resolve(!0),s.promise();if(gx.csv.refreshVars(o,u),o.fnc==null&&o.isvalid==null){if(t.tagName!="SELECT"&&t.type!="checkbox"&&!gx.evt.eachKeyAutorefreshType(o.type)&&!gx.lang.emptyObject(o.rgrid))for(v=o.rgrid.length,l=0;l<v;l++)o.rgrid[l].filterVarChanged();return s.resolve(!0),s.promise()}try{y="";i!=-1&&(r||t.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)!="1")&&(gx.csv.currentId=i,gx.evt.startValidation(o.gxgrid,!0),gx.csv.refreshVars(o),h=function(n){var a,c,l,r,v,h,y,p,w;if(u.AnyError==1&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=t),gx.csv.anyError=!0,u.AnyError=0),gx.csv.anyError&&(n=!gx.csv.anyError),!n)return gx.evt.endValidation(),s.resolve(!1),s.promise();if(gx.csv.refreshControls(o,u,f),gx.csv.invalidateDeps(i,u),!gx.lang.emptyObject(o.rgrid)&&!gx.lang.emptyObject(o.hc))for(a=o.rgrid.length,c=0;c<a;c++)o.rgrid[c].filterVarChanged();if(l=gx.fn.isAccepted(t,!1,u),r=function(){s.resolve(!0);try{if(!e){var n=gx.dom.byId(t.id);l?gx.fn.setControlGxValid(n,"1"):gx.fn.setControlGxValid(n,"0")}gx.evt.endValidation()}catch(i){gx.dbg.logEx(i,"gxapi.js","validate")}},o.isvalid!=null&&l&&t.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)!="1"&&!e){if(v=o.gxgrid?o.gxgrid:null,h=o.isvalid,gx.pO.supportAjaxEvents){y=o.gxgrid?o.gxgrid.gridId:!1;p=u.isServerEvent(h);h?gx.evt.dispatcher.dispatch(u.getServerEventName(h),u,y,f,p).done(r).fail(r):u[h]().then(r);return}w=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=v;u[h]().then(function(){gx.csv.instanciatedRowGrid=w;r()})}else r()},a=!1,p=!1,o.isuc?h.call(this,o.fnc.call(o.uc)):o.fnc!=null?(c=o.fnc.call(u),c&&c.done?c.done(h.closure(this)):h.call(this,c)):h.call(this,!0))}catch(w){gx.dbg.logEx(w,"gxapi.js","validate")}return a&&s.resolve(!0),s.promise()},invalidateForm:function(){var i,r,t,n,u;if(gx.O.AnyError!=1)for(i=gx.fn.controlIds(),r=i.length,t=0;t<r;t++)n=gx.fn.validStruct(i[t]),n&&n.fld&&!n.isuc&&(u=gx.fn.getControlGridRef(n.fld,n.grid),this.invalidateGXCtrl(u,!1))},invalidateGXCtrl:function(n,t){typeof t=="undefined"&&(t=!0);n&&n.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)==1&&(!t||gx.csv.controlValueHasChanged(n))&&gx.fn.setControlGxValid(n,"0")},invalidateCtrl:function(n,t){var i,r;try{this.invalidateGXCtrl(n);i=gx.fn.validStruct(gx.O.focusControl);i&&i.grid!=0&&(t===!0||gx.evt.keyModifiesValue(t))&&(r=gx.fn.controlRowId(n)||gx.fn.currentGridRowImpl(i.grid)||"0001",i.gxgrid.setRowModified(r))}catch(u){gx.dbg.logEx(u,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(n,t){for(var h,i,l,f,u,a,e,r,c=gx.fn.controlIds(t),v=c.length,s=0;s<v;s++)if(h=c[s],h>n)for(i=gx.fn.validStruct(h,t),l=i.ip?i.ip.length:0,f=0;f<l;f++)if(i.ip[f]==n)if(i.grid==0)r=gx.fn.getControlGridRef(i.fld,i.grid),r&&gx.fn.setControlGxValid(r,"0");else if(u=gx.fn.getGridObj(i.grid),u)for(a=u.grid.rows.length,e=0;e<a;e++){var o=u.grid.rows[e],y=o.gxDeleted(),p=o.gxExists();!y&&p&&(u.setRowModified(o.gxId),r=gx.fn.getControlRef(i.fld+"_"+o.gxId),r&&gx.fn.setControlGxValid(r,"0"))}},controlValueHasChanged:function(n,t,i){if(!n)return!1;typeof t=="undefined"&&(t=n.value);var r=n.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE),u=gx.applyPicture(i,r,n);return r===null||u!==gx.applyPicture(i,t,n)||gx.evt.fixWebKitOnFocus()&&n.type==="radio"},setFormatError:function(n,t){n=gx.dom.el(n);n.id&&(t||typeof t=="undefined"?(this.gxFormatErrors[n.id]=!0,n.GXFormatError=!0):(delete this.gxFormatErrors[n.id],n.GXFormatError=!1))},anyFormatError:function(){return gx.lang.emptyObj(this.gxFormatErrors)===!1},disableFocusCondition:function(){var t,n,i;if(typeof gx.fn.validStruct(gx.O.focusControl)=="undefined")return!1;try{if(t=gx.getVar("Gx_mode"),gx.csv.lastGrid>0&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),n=gx.fn.validStruct(gx.O.focusControl),n&&n.nac&&n.nac.call(gx.O)==!0)return cn=gx.fn.getControlIndex(gx.csv.lastControl)+1,i=gx.fn.searchFocusFwd(cn),i!=null&&gx.fn.setFocus(i),gx.setVar("Gx_mode",t),!0;gx.setVar("Gx_mode",t)}catch(r){}return!1},loadScreen:function(n){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0,undefined,undefined,n,!1))}catch(t){gx.dbg.logEx(t,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(n,t){var r,f=t||gx.O,i,u,e;return f&&f.IsMasterPage&&n.indexOf("MP")!=0&&(i=this.CTRL_ROW_INDEX_REGEXP.exec(n),i&&i.length>1)?(u=i[1],e=i.length>2?"_"+i[2]:"",u+(u.indexOf("_MPAGE")===-1?"_MPAGE":"")+e):(r=(t?t.CmpContext:this.cmpCtx)||"",r&&n.indexOf(r)==0)?n:n.search(gx.GxObject.CONTROL_CMP_REGEX)>=0?n:r+n},isProperty:function(n){return n instanceof Array&&n.length==2?!0:typeof n=="object"&&typeof n[0]!="undefined"&&typeof n[1]!="undefined"?!0:!1},checkGridChange:function(n,t,i,r){if(n){var u=n.gridId,f=gx.fn.currentGridRowImpl(u);gx.csv.validGridRowChange(u,f,i,f).done(function(){var n=i.getGridById(u,r);gx.csv.checkGridChange(n.parentGrid,!0,i,r)})}},checkRowChange:function(t,i,r,u){var o=n.Deferred(),s,e,f,h;try{s=gx.fn.validStruct(t,r);typeof s!="undefined"?(e=s.grid,e!=0?(f=gx.fn.currentGridRowImpl(e),f&&(f!=u||i)&&f.length>1&&u&&u.length>1?(gx.csv.rowChanged=!0,h=r.Gx_BScreen,r.Gx_BScreen=1,gx.csv.validGridRowChange(e,f,r,u).done(function(n){if(n){var t=r.getGridById(e,u);t&&(t.instanciateRow(f),t.parentGrid&&gx.csv.checkGridChange(t.parentGrid,!0,r,u))}r.Gx_BScreen=h;o.resolve(!0)})):o.resolve(!1),f!=undefined&&gx.fn.setCurrentGridRow(e,f)):o.resolve(!1)):o.resolve(!1)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","checkRowChange")}return o.promise()},validGridRow:function(n,t){t!=undefined&&gx.fn.setCurrentGridRow(n,t);var i=gx.fn.firstGridControl(n),r=gx.fn.lastGridControl(n);gx.csv.validControls(i,r+1,!0,gx.O)},validGridRowChange:function(t,i,r,u){var f=n.Deferred();u!=undefined&&gx.fn.setCurrentGridRow(t,u);var e=gx.fn.firstGridControl(t,r),o=gx.fn.lastGridControl(t,r),s=!gx.lang.emptyObject(u)&&!gx.lang.emptyObject(i)&&u.length==i.length&&parseInt(u)>parseInt(i);return gx.csv.validControls(e,o+1,!0,r,s).done(function(n){(n||!gx.csv.stopOnError)&&gx.csv.changeGridRow(t,e,i);f.resolve(n)}),f.promise()},changeGridRow:function(n,t,i){gx.csv.lastId=t;gx.O.fromValid>t&&(gx.O.fromValid=t);gx.csv.lastRow[n]=i;Gx_BScreen=1},targetRowIsMod:function(n){var t=gx.fn.validStruct(n);return t?gx.fn.gridRowIsMod(t.lvl,gx.fn.currentGridRow(t.grid)):!1},refreshVars:function(n,t){for(var r=n.ip?n.ip.length:0,i=0;i<r;i++)try{typeof gx.fn.validStruct(n.ip[i],t).c2v=="function"&&gx.fn.validStruct(n.ip[i],t).c2v()}catch(u){gx.dbg.logEx(u,"gxapi.js","refreshVars")}},refreshControls:function(n,t,i){for(var r,f,o,e=n.op?n.op.length:0,u=0;u<e;u++)try{r=gx.fn.validStruct(n.op[u],t);f=null;r.grid==0?(gx.fn.v2c(r),f=gx.dom.el(gx.csv.ctxControlId(r.fld))):(o=gx.fn.currentGridRowImpl(r.grid),gx.text.endsWith(i,o)&&(gx.fn.v2c(r),f=gx.fn.getControlGridRef(r.fld,r.grid)));f&&gx.fn.setControlGxValid(f,"0")}catch(s){gx.dbg.logEx(s,"gxapi.js","refreshControls")}for(e=n.ucs?n.ucs.length:0,u=0;u<e;u++)try{gx.fn.validStruct(n.ucs[u],t).uc.execV2CFunctions(!0)}catch(s){gx.dbg.logEx(s,"gxapi.js","refreshControls")}},setValidValues:function(n,t,i){var b=[],c,s,l,a,k,o,f,r,u,e,v,y,p,w;if(i.length-t.length>1){c=gx.json.evalJSON(i[i.length-1]);for(h in c)gx.fn.setHidden(h,c[h]);b=gx.json.evalJSON(i[i.length-2])}if(s={},l={fields:n,msgs:b},gx.O.cmpCtx?s[gx.O.cmpCtx]=l:s.MAIN=l,gx.fn.setErrorViewer(s),!gx.O.AnyError)for(a=!1,k=t.length,o=0;o<k;o++)if(f=t[o],r=i[o],this.isProperty(f))u=gx.fn.vStructForVar(f[0])||gx.O.getValidStructFld(f[0]),u!=null&&gx.fn.setCtrlProperty(u.fld,f[1],r);else if(u=gx.fn.validStruct(this.currentId),gx.lang.emptyObject(u)||gx.lang.emptyObject(u.hc)||(u.hc==f?(gx.O[u.hc]=r,gx.fn.setHidden(this.cmpCtx+"GXH_"+u.fld,r)):u.hd==f&&(gx.O[u.hd]=r)),u=gx.fn.vStructForVarWId(f,this.currentId),gx.lang.emptyObject(u))if(u=gx.fn.vStructForHC(f),u!=null&&(p="",u.grid!=0&&(p="_"+gx.fn.currentGridRow(u.grid)),gx.fn.setHidden(this.cmpCtx+"GXHC"+u.fld+p,r)),w=gx.fn.gridObjFromGxO(f),w!=undefined)a=!0,w.loadGrid({rowProps:r});else{if(!gx.fn.saveLvlOldParm(f,r))continue;gx.setVar(f,r);gx.fn.setGridHidden(f,r)}else e=gx.fn.screen_CtrlRef(u.fld),gx.lang.emptyObject(e)||r instanceof Object&&(e.tagName=="SELECT"?(e.selectedIndex!=-1&&gx.fn.invalidEmptyValue(r)&&(r.s=e.options[e.selectedIndex].value),v=gx.dom.id(e),gx.fn.loadComboBox(v,r.v),gx.fn.setComboBoxValue(v,r.s)):gx.lang.emptyObject(r.s)||(r.s=gx.fn.trimSelectValue(r.s,u.type)),y=gx.fn.selectedDescription(r,u.type),r=gx.lang.emptyObject(r.s)&&!gx.lang.emptyObject(e.value)?e.value:e.tagName!="SPAN"||gx.lang.emptyObject(r.s)||gx.lang.emptyObject(y)?r.s:y,gx.fn.setControlValue_span_safe(this.cmpCtx+u.fld,r,0)),u.v2v&&(u.v2v(r),gx.fn.v2c(u,r,u.type=="bits"));gx.O.refreshOlds();gx.fn.enableDisableDelete();a&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.gxFormatErrors=[];this.lastControl=null;this.lastActiveControl=null;this.userFocus=null;this.focusControl=null;this.invalidControl=null;this.invalidForcedCtrl=null;this.validActivatedControl=null;this.validatingUC=null;this.validatingGrid=null;this.lastEvtResponse=null;this.lastEvtRow=null}}}(gx.$);gx.http_i=function(n){var t="GXState",i="GXAjaxMultipart",r="X-GXAUTH-TOKEN";return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(n,t){return t[0]!="{"&&n.status==200&&n.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")!=0?(gx.dbg.logEx('Unexpected AJAX respose format "'+n.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(n,t,i){var r=gx.dom.el(n,!1,!0,!0);r!=null?gx.fn.setControlValue_impl(n,t):i&&(gx.dom.createInput(n,"hidden"),gx.fn.setControlValue_impl(n,t))},clearMultipartHidden:function(){this.saveHidden(i,"",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;n(gx.dom.el(t)).val("{}")},applyWellKnownPtys:function(){gx.wpo(function(){this.viewState.FORM_Caption&&gx.fn.setCtrlPropertyImpl(document,"Caption",this.viewState.FORM_Caption)},this)},loadState:function(){var n,i,r;gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;n=gx.dom.el(t);n&&(i=n.value,r=i,this.useBase64State&&(r=gx.base64.decode(i)),this.viewState=gx.json.evalJSON(r),this.viewStateLoaded=!0,this.applyWellKnownPtys());gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(n){var r,i,u;this.viewState&&(r=gx.json.serializeJson(this.viewState,n),i=r,this.useBase64State&&(i=gx.base64.encode(r)),u=gx.dom.el(t),u==null?gx.dom.createInput(t,"hidden"):this.oldState=u.value,gx.fn.setControlValue_impl(t,i),this.useStateSignature&&(gx.http.setStateHsh(i),gx.http.setHsh()))},setStateHsh:function(n){var t="GXHSH12",r=gx.dom.el(t),i;r==null&&gx.dom.createInput(t,"hidden");i=gx.MD5.getHsh(n);gx.fn.setControlValue_impl(t,i)},setHsh:function(){for(var t=gx.pO.WebComponents.length,n=0;n<t;n++)gx.http.setObjectHsh(gx.pO.WebComponents[n]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(n){var u=n.getControlIdsh(),i,t,r,f;if(u!=null){for(i="",n.IsComponent&&n.CmpContext!=null&&(i=n.CmpContext),t="",r=0;r<u.length;r++)validStruct=n.getValidStruct(u[r]),validStruct&&typeof validStruct.val=="function"&&(f=gx.fn.getControlValue_impl(i+validStruct.fld),t=validStruct.ctrltype=="checkbox"&&gx.text.trim(f)==""?t+validStruct.val():t+f);gx.http.createHsh(i+"GXHSH11",t)}},createHsh:function(n,t){var r=gx.dom.el(n),i;r==null&&gx.dom.createInput(n,"hidden");i=gx.MD5.getHsh(t);gx.fn.setControlValue_impl(n,i)},refreshState:function(){if(this.oldState!=null){var n=gx.dom.el("GXState");n.value=this.oldState;this.oldState=null}},getCookie:function(n){var r,u,i,t;for(n=n+"=",r=document.cookie.split(";"),u=r.length,i=0;i<u;i++){for(t=r[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(n)==0)return t.substring(n.length,t.length)}return null},setCookie:function(n,t,i,r,u){i=i||1;var f=[],e=new Date((new Date).getTime()+864e5*i);return f.push(n+"="+escape(t)),u&&f.push("path="+u),f.push(r?"session":"expires="+e.toGMTString()),location.protocol==="https:"&&(f.push("secure"),f.push("samesite=none")),document.cookie=f.join(";"),this.getCookie(n)==t},checkResponseStatus:function(n,t){return n.status==this.STATUS_FORBIDDEN?!1:n.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(t),!0):this.isBadResponse(n)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",n.status)),!0):n.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.timeoutActions.warn&&gx.http.reloadOnTimeout(t),!0):!1},isSessionTimeoutError:function(n,t){return!gx.gen.isDotNet()&&t&&n&&gx.pO.AjaxSecurity&&n.readyState==this.STATE_DONE&&(t.name=="NS_ERROR_FAILURE"&&t.result==2147500037||t.name=="Error"&&t.number==-2146697209||t.name=="NETWORK_ERR"&&t.code==101)?!0:!1},reloadOnTimeout:function(n){return(n||gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired"))?(gx.http.reload(),!0):(gx.ajax.enableForm(),!1)},reload:function(n){document.location.hash==""?this.redirect(location.href,!1,n):document.location.reload()},redirect:function(n,t,i,r){var u,f,e;r=r||gx.O;u=gx.popup.getPopup();u!=null&&gx.util.sameAppUrl(n)&&(f=u.window.gx.popup.lvl,f!=-1&&(e=gx.http.urlParameterPrefix(n),e+=encodeURIComponent("gxPopupLevel="+f+";"),n+=e));gx.isabsoluteurl(n)||(n=gx.absoluteurl(n));t?gx.evt.redirecting=!0:setTimeout(function(){gx.pO!=r?r.endFeedback():gx.ajax.enableForm()},200);gx.spa.started&&!i?(gx.spa.redirect(n),gx.pO!=r?r.endFeedback():gx.ajax.enableForm()):location.href=n},getRequest:function(){var n=null;if(window.XMLHttpRequest&&(n=new XMLHttpRequest),!n)try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}return n},postDataFormat:{HTTP:0,JSON:1},getPostData:function(t,i){var r,f,u;if(i=i||gx.http.postDataFormat.HTTP,r=i==gx.http.postDataFormat.HTTP?[]:{},t.reqData)r=t.reqData;else{var e=t.formNode,o=e.tagName=="Form"?e.elements:n("input[type!=file],textarea,select"),s=o.length;for(f=0;f<s;f++)u=gx.http.elementPostData(o[f],i),u!=null&&(i==gx.http.postDataFormat.HTTP?r.push(u):r[u[0]]=u[1])}return gx.lang.isArray(r)&&i==gx.http.postDataFormat.HTTP&&(r=r.join("&")+"&"),r},elementPostData:function(n,t){var i,u,r;if(gx.json.isNonSerializable(n.name)||n.tagName=="FIELDSET")return null;if(i="",n.type=="select-multiple")for(u=n.options.length,r=0;r<u;r++)n.options[r].selected&&(i=n.options[r].value);else if(n.type=="radio"||n.type=="checkbox"){if(n.checked)i=n.value;else if(n.type=="radio")return null}else i=n.type==="image"?n.src:this.element_gxvalue(n);return t==gx.http.postDataFormat.HTTP?encodeURIComponent(n.name)+"="+encodeURIComponent(i):[n.name,i]},element_gxvalue:function(n){return n.gxtype&&n.gxtype.type=="dtime"?(dt=new gx.date.gxdate(n.value,gx.dateFormat),dt.HasTimePart=n.gxtype.dec>0,dt.HasDatePart=n.gxtype.len>0,gx.date.dttoc(dt,n.gxtype.len,n.gxtype.dec)):n.value},doHandleRequest:function(n,t){if(n.readyState==this.STATE_DONE){if(n.status==this.STATUS_OK||t.handleAllStatusCodes){var i=new gx.util.Url(n.responseURL);if(gx.text.endsWith(i.path,".html")){window.location.href=n.responseURL;return}this.isOffline(n)&&(this.handleOffline(n),t.offline&&t.offline.call(t.obj||window,n,t));this.doCallHandler(n,t)}else gx.http.checkResponseStatus(n,t.warnOnTimeout)||gx.lang.doCallTimeout(gx.dom.writeError,document,[n.responseText,gx.getMessage("GXM_runtimeappsrv"),n.status],50);t.always&&t.always.call(t.obj||window,n,t);window.gx&&(gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog())}},onRequestError:function(n,t){t.error&&t.error.call(t.obj||window,n,t);t.always&&t.always.call(t.obj||window,n,t);gx.evt.setProcessing({status:!1,cond:!gx.csv.isvalidating(),ctx:"onRequestError"});n.readyState==this.STATE_DONE?gx.http.checkResponseStatus(n,t.warnOnTimeout):this.isBadResponse(n)&&gx.http.reloadOnTimeout(t.warnOnTimeout)},isBadResponse:function(n){return n.status==this.STATE_UNSENT&&gx.lang.emptyObject(n.responseText)?!0:!1},doCall:function(n){var t,i,u,r,f;if(n.gxInitiator=gx.util.executionContext.getContext(),gx.util.alert.hide(),n.handler||typeof n.load!="function"||(n.handler=n.load),typeof n.sync!="boolean"&&(n.sync=!1),n.method||(n.method="POST"),n.multipart&&n.method=="POST")this.doMultipartPost(n);else if(t=this.getRequest(),t!=null){typeof n.handler!="function"||n.sync||(i=gx.http.doHandleRequest.closure(this,[t,n]),u=gx.http.onRequestError.closure(this,[t,n]),gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=9?t.onreadystatechange=i:(t.onload=i,t.onerror=u));r=null;n.method=="POST"&&(r=gx.http.getPostData(n));f=n.avoidCache!==!1?this.uncache(n.url):n.url;t.open(n.method,f,!n.sync);n.ajaxHeader!==!1&&t.setRequestHeader(gx.ajax.reqHeader,"1");n.method=="POST"&&t.setRequestHeader("Content-Type",n.contentType?n.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&gx.AjaxSecurity&&gx.OnSessionTimeout==gx.timeoutActions.ignore&&t.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(t,n.gxO);n.beforeSend&&n.beforeSend.call(n.obj||window,t);try{t.send(r)}catch(e){gx.dbg.logEx(e,"gxapi.js","doCall")}return typeof n.handler=="function"&&n.sync&&gx.http.doHandleRequest(t,n),t}return null},doCallHandler:function(n,t){t.gxInitiator&&gx.util.executionContext.changedContext(t.gxInitiator)||(t.obj?t.handler.call(t.obj,null,n.responseText,n):t.handler(null,n.responseText,n),window.gx&&typeof t.onReady=="function"&&t.onReady())},doMultipartPost:function(n){var r,t;gx.http.saveState(!0);r=this.getPostIFrame();r.gxPostInfo=n;t=n.formNode;n.oldAction=t.getAttribute("action");t.setAttribute("action",n.url);n.oldTarget=t.getAttribute("target");t.setAttribute("target",this.iframeName);n.reqData&&(gx.http.saveHidden(i,n.reqData,!0),this.setSecurityToken(null,n.gxO));t.submit()},setSecurityToken:function(n,t){var i=gx.ajax.getSecurityToken(t);i&&(gx.dom.hasSelectedFile()?gx.http.saveHidden(r,i.value,!0):n.setRequestHeader(r,i.value))},useReadyStateEvent:function(){return gx.util.browser.isIE()&&gx.util.browser.ieVersion()<11},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var t=this.iframeName,n=gx.dom.byId(t),i;return n&&n.frameElement&&(n=n.frameElement),n||(i=document.createElement("div"),i.innerHTML='<iframe id="'+t+'" name="'+t+'" src="about:blank">',document.body.appendChild(i),n=i.firstChild,document.body.appendChild(n),window[t]=n,n.name=t,n.setAttribute("name",t),n.id=t,n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.height="1px",n.style.width="1px",n.style.visibility="hidden"),gx.evt.attach(n,this.iFrameloadEventName(),gx.http.iframeOnload),n},iFrameJsonResponse:function(t){return n(t).find("input[data-response-content-type='application/json']").val()},captureIframeHTTPStatusCode:function(n){var i=0,t;return n.title&&(t=/HTTP Status (\d\d\d)/gi.exec(n.title),t.length>0&&(i=Number(t[1]))),{status:i}},iframeOnload:function(){var n=gx.dom.byId(gx.http.iframeName),t,u,i,o,s;if((!gx.http.useReadyStateEvent()||n.readyState=="complete")&&(n||(n=window.frames[gx.http.iframeName]),n&&n.frameElement&&(n=n.frameElement),n&&(gx.http.useReadyStateEvent()&&(n.src="about:blank",gx.evt.detach(n,gx.http.iFrameloadEventName(),gx.http.iframeOnload)),t=n.gxPostInfo,u=t.formNode,u.setAttribute("action",t.oldAction),u.setAttribute("target",t.oldTarget),i=n.contentDocument?n.contentDocument:n.contentWindow.document,i))){var f=i.body,e=gx.http.iFrameJsonResponse(f),r=!gx.lang.emptyObject(e);r||(r=gx.dom.allChildrenAreText(f),r&&(e=gx.http.multipartResponse(f)));r?(o=gx.base64.decode(e),gx.http.clearMultipartHidden(),t.handler(null,o,t),window.gx&&typeof t.onReady=="function"&&t.onReady(),t.always&&t.always.call(t.obj||window,null,t)):(s=gx.http.captureIframeHTTPStatusCode(i),gx.http.checkResponseStatus(s,t.warnOnTimeout)||document.write(i.documentElement.innerHTML))}},multipartResponse:function(t){var i="";try{i=n(t).text()}catch(r){gx.dbg.logEx(r,"gxapi.js","multipartResponse")}return i},uncache:function(n){var t=new Date,i=t.getTime();return n+gx.http.urlParameterPrefix(n)+"gx-no-cache="+i},callBackend_simple:function(n,t,i,r,u,f,e,o){gx.http.callBackend_impl(undefined,n,t,gx.http.modes.none,i,r,u,f,e,o)},callBackend:function(n,t,i,r,u,f,e,o,s,h,c){gx.http.callBackend_impl(n,t,r,u,f,e,o,s,h,c)},callBackend_impl:function(n,t,i,r,u,f,e,o,s,h,c){var l=this.getRequest(),h=h||{},v,p,a;if(l){try{v=gx.O;u||v.startFeedback();var w=typeof f!="undefined"?f:"GET",k=typeof e!="undefined"?e:null,y=typeof s!="undefined"?s:!1;o||(t=this.uncache(t));l.open(w,t,y);l.setRequestHeader(gx.ajax.reqHeader,"2");for(p in h)l.setRequestHeader(p,h[p]);try{w=="POST"?l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.timeoutActions.ignore&&l.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken)}catch(b){gx.dbg.logEx(b,"gxapi.js","callBackend_impl: gx.O cannot be null")}a=function(){if(u||v.endFeedback(),this.lastStatus=l.status,this.lastResponse=l.responseText,l.readyState!=this.STATE_DONE||l.status!=this.STATUS_OK)gx.http.checkResponseStatus(l)||(window.status="GXAjax HTTP error: ("+l.status+") - "+l.statusText,gx.dbg.logEx(l.responseText),c&&c());else if(r!=this.modes.none)if(this.lastResponse&&this.lastResponse.length>0&&this.lastResponse.charAt(0)!="<"){this.lastStatus=0;try{if(r==this.modes.full)this.handleFull(this.lastResponse);else if(r==this.modes.call)return this.handleCall(this.lastResponse,n);return this.handleRetVal(this.lastResponse,n,i)}catch(t){gx.dbg.logEx(t,"gxapi.js","callBackend");c&&c()}}else window.status="GXAjax HTTP error: (bad response format)",c&&c()}.closure(this);y&&(gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=9?l.onreadystatechange=a:l.onload=a);l.send(k);y||a()}catch(b){window.status="GXAjax HTTP error: "+b.message}window.status=""}},handleFull:function(n){var t={};t.status=200;t.responseText="";gx.http.postHandler(null,n,t)},handleCall:function(t,i){if(i){var r=n.parseJSON(t);if(gx.lang.isArray(r))return i(r);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+t)}},handleRetVal:function(t,i,r){var f=gx.json.evalJSON(t),o=f[0],u;if(this.lastStatus=f[1],this.lastStatus==undefined&&(this.lastStatus=0),i&&(r||this.lastStatus==null||this.lastStatus==0)){if(u=n.parseJSON(t),gx.lang.isArray(u))return i(u);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+t)}else return o},postHandler:function(n,t,i,r){try{if(gx.csv.lastEvtResponse=null,i.status<200||i.status>299)gx.dom.writeError(i.responseText,gx.getMessage("GXM_runtimeappsrv"),i.status);else if(gx.http.validJsonResponse(i,t)){var u=gx.json.evalJSON(t);u==null?gx.dom.writeError(t.toString(),gx.getMessage("GXM_runtimeappsrv"),i.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=u,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(u,gx.O,r).done(function(n){n||(gx.fx.obs.notify("gx.onafterevent",[u]),gx.fx.obs.notify("gx.afterNonFullajax"))}))}}catch(f){gx.dbg.logEx(f,"gxapi.js","postHandler")}},encodeUriSegment:function(n){return encodeURIComponent(n).replace(/%20/g,"+")},formatLink:function(n,t,i){var u,f,e,r;if(n=gx.ajax.objectUrl(n),t&&t.length>0)for(u=",",f="",i&&(u="&"),n+="?",e=t.length,r=0;r<e;r++)r>0&&(n+=u),i&&(f=i[r]+"="),n+=f+gx.http.encodeUriSegment(typeof t[r].getUrlVal=="function"?t[r].getUrlVal():t[r]);return n},loadScripts:function(n,t,i,r){typeof i=="undefined"&&(i=0);i>=n.length?t():gx.http.loadScript(n[i],function(n,t,i){gx.http.loadScripts(n,t,i+1,r)}.closure(this,[n,t,i]),r)},loadStyle:function(t,i,r,u){var f=u?gx.dom.byId(u):null,o,e;f?f.href=t:(o=gx.dom.byTag("head")[0],f=document.createElement("link"),!1&&f.as!=undefined?(f.rel="preload",f.as="style"):f.rel="stylesheet",f.type="text/css",f.href=t,typeof i=="function"&&(f.onload=i),r?(e=gx.getThemeElement(),n(f).insertBefore(e),gx.util.browser.isIE()&&n(e).insertAfter(f)):o.appendChild(f))},applyDeferredStyles:function(){n("link[rel='preload'][as='style']").each(function(n,t){t.rel="stylesheet"})},loadStyles:function(){var i=gx.fn.getHidden("GX_STYLE_FILES"),t,n;if(!gx.lang.emptyObject(i))for(t=0;t<i.length;t++)n=i[t],n=gx.util.resolveUrl(n),gx.cache.fileLoaded(n)||(gx.cache.addRemoteFile(n),this.loadStyle(n))},doCommands:function(){var n=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(n)||gx.ajax.dispatchCommands(n)},isOffline:function(n){return n.getResponseHeader("X-GX-OFFLINE")==="1"},handleOffline:function(){gx.util.alert.showError(gx.getMessage("GXM_OfflineUnsupported"))},useNamedParameters:function(n){return gx.csv.useNamedParameters===!1?!1:n.indexOf("=")>-1},urlParameterSeparator:function(n){return this.useNamedParameters(n)?"&":","},urlParameterPrefix:function(n){var t=n.indexOf("?");return t>-1?t==n.length-1?"":this.urlParameterSeparator(n):"?"}}}(gx.$);gx.$.extend(gx.evt,gx.evt_i);gx.$.extend(gx.csv,gx.csv_i);gx.$.extend(gx.http,gx.http_i);defaultConfig={popup:{ignoreCmdsOnCancel:!1},websocket:{},timezone:{reload:!0},evt:{dblclick:{delay:450}},csv:{scrollTopOnError:!1}};gx.config=gx.$.extend({},defaultConfig,window.gxCustomConfig||{});GlobalEvents=function(){return{executeMethod:function(n,t){gx.fx.obs.notify(n,t);try{for(var i=window;i!=null&&i.parent!==i;)i=i.parent,i!=window&&i.gx&&i.gx.fx.obs.notify(n,t)}catch(r){}}}}(jQuery);gx.util.browser.isIE()&&function(){function n(n,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i}if(typeof window.CustomEvent=="function")return!1;n.prototype=window.Event.prototype;window.CustomEvent=n}();gx.fx.obs.addObserver("gx.onload",gx,function(){var n={};gx.serviceWorkerUrl&&"serviceWorker"in navigator&&(gx.staticDirectory&&gx.basePath&&(n={scope:gx.util.resourceUrl(gx.basePath,!1)+"/"}),navigator.serviceWorker.register(gx.serviceWorkerUrl,n).then(function(n){console.log("Service Worker Registered:",gx.serviceWorkerUrl,"scope: ",n.scope)}))}),function(n){function v(t,i){var r=n(t),u=r.is("SPAN,DIV");return r.attr(i)||(u?r.find("> a").first().attr(i):"")}var t=gx.GxObject.prototype,e,y,i,s,h,c;t.sPrefix=function(){return this.CmpContext};t.declareDomainHdlr=function(n,t){this.GXValidFnc[n].dom_hdl=t};t.setVCMap=function(n,t,i,r,u,f){this.VarControlMap[n]={id:t,grid:i,type:r,length:u,decimals:f}};t.setSDTMapping=function(n,t){var r,i;this.SDTMap=this.SDTMap||{};this.SDTMap[n]=t;r={};for(i in t)t[i].extr&&(r[t[i].extr]=i);t.extrn=r};t.applySDTVarMapping=function(n,t){var i;return this.VarControlMap[t]&&this.VarControlMap[t].type&&(i=this.VarControlMap[t].type),this.applySDTMapping(n,i,!0)};t.applySDTMapping=function(n,t,i){var u,r,e,f;if(n&&t&&(u=this.SDTMap?this.SDTMap[t]:undefined,u)){for(r in u.extrn)i?(n[u.extrn[r]]=n[r],delete n[r]):(n[r]=n[u.extrn[r]],delete n[u.extrn[r]]);for(r in u)if(u[r].sdt)if(e=n[r]?n[r].length:0,e)for(f=0;f<e;f++)this.applySDTMapping(n[r][f],u[r].sdt,i);else this.applySDTMapping(n[r],u[r].sdt,i)}return n};t.Initialize=function(){this.InitStandaloneVars();gx.wpo(function(){this.initTargets()},this)};t.InitStandaloneVars=function(){var n=gx.O;gx.setGxO(this);this.SetStandaloneVars();n!=null&&gx.setGxO(n)};t.getCmpType=function(n){var t=this.cmpRegex.exec(n);return this.cmpRegex.lastIndex=0,t};t.getContainer=function(){if(this.containerControl)return gx.dom.byId(this.containerControl);if(!this.CmpContext&&!this.IsMasterPage)return n(".gx-content-placeholder").get(0)||document.body;var i,t=this.getCmpType(this.CmpContext);return t&&(i=gx.dom.byId(t[1]+"gxHTMLWrp"+t[2]+(t[3]||""))),i?i:void 0};t.setContainer=function(n){this.containerControl=n};t.setObjectType=function(n){this.ObjectType=n};t.getObjectType=function(){return this.ObjectType};t.isTransaction=function(){return this._isTrn!=null?this._isTrn:(this._isTrn=this.getObjectType()=="trn",this._isTrn)};t.setAjaxSecurity=function(n){this.AjaxSecurity=n};t.setOnAjaxSessionTimeout=function(n){switch(n){case"Warn":this.OnSessionTimeout=gx.timeoutActions.warn;break;case"CallObj":this.OnSessionTimeout=gx.timeoutActions.callObj}};t.addKeyListener=function(n,t){gx.evt.addKeyListener(this.CmpContext,n,t)};t.clearMessages=function(){this.MsgList.length=0};t.addMessage=function(n){this.MsgList.push(n)};t.showMessages=function(n){for(var u,i,f,r=[],e=this.MsgList.length,t=0;t<e;t++)u=this.MsgList[t],typeof u=="string"?r.push({att:"",type:2,text:this.MsgList[t]}):r.push(u);i={};f=this.CmpContext==""?"MAIN":this.CmpContext;i[f]=r;n?gx.fn.setErrorViewer(i,!1):gx.fn.setErrorViewer(i);this.clearMessages()};t.setPrompt=function(n,t){gx.fn.attachCtrl(this.CmpContext+n,{id:n,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:t,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[n]=function(t){var f=t||gx.dom.el(n),r=f.parentNode,i,u;if(r&&r.href&&(i=r.href.match("javascript:(.+)"),i&&i.length>1)){u=decodeURIComponent(i[1]);try{eval(u)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","setPrompt")}}}};t.readServerVars=function(){var n,t;if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){var i=[],r=gx.csv.lastEvtResponse.gxValues,u=r.length;for(n=0;n<u;n++)if(t=r[n],t.CmpContext==this.CmpContext&&gx.lang.booleanValue(t.IsMasterPage)==this.IsMasterPage){i.push(t);break}gx.fn.setJsonValues(i)}};t.call=function(n,t,i,r){gx.nav.willRedirect(n)?(gx.csv.useNamedParameters===!1&&(r=undefined),this.postEventRedirect={url:gx.http.formatLink(n,t,r),forceDisableFrm:!1}):gx.nav.call.apply(gx.nav,arguments)};t.callUrl=function(n){gx.nav.willRedirectByUrl(n)?this.postEventRedirect={url:n,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,arguments)};t.popupOpen=function(n){this.postEventPopupCommands.push({popup:gx.lang.clone(n)})};t.popupOpenUrl=function(n,t){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(n,t)})};t.refreshInputs=function(n){for(var r,t,u=n.length,i=0;i<u;i++)r=n[i],t=this.getValidStructFld(r[1]),t!=null&&typeof t.c2v=="function"&&t.c2v()};t.refreshOutputs_impl=function(n){for(var r,o,u,s,h,t,f=[],i=0,e=n.length;i<e;i++)t=n[i],t.fld?(r=this.getValidStructFld(t.fld),r!=null?(gx.fn.v2c(r),o=gx.fn.getControlGridRef(r.fld,r.grid),gx.csv.invalidateGXCtrl(o),gx.fn.setControlOldValue(o,r.val())):(u=this.getVariable(t.av),u!=null&&typeof u=="object"&&(s=this.getFormBCForVar(t.av),s!=null&&this.bcToScreen(s,u),h=this.getGridForColl(t.av),h&&h.refreshCollection(u)),gx.fn.setHidden(gx.csv.ctxControlId(t.fld,this),u))):t.ctrl&&f.push(t);for(gx.uc.StartRender(),i=0,e=f.length;i<e;i++)t=f[i],gx.uc.isUserControl(t.ctrl)&&(t.ctrl.execV2CFunctions(!1),t.ctrl.execShowFunction());gx.uc.EndRender()};t.OnClientEventEnd=function(){gx.fn.usrSetFocus_commit()};t.refreshOutputs=function(n){var t=this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(t.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);t.length>0&&gx.ajax.dispatchCommands(t);this.refreshOutputs_impl(n);this.showMessages()};t.refreshRowOutputs=function(n){this.refreshOutputs_impl(n)};t.refreshServerOutputs=function(n){for(var u,t,i,f=n.length,r=0;r<f;r++)u=n[r],t=gx.fn.getHidden(this.CmpContext+u.fld),t!=undefined&&(i=this.getValidStructFld(u.fld),i&&i.v2v?(i.v2v(t),gx.fn.v2c(i,t)):this.setVariable(n[r].av,t))};t.getContextObject=function(n){var i=this.getValidStructFld(n),t;return i!=null&&(t=gx.fn.getControlValue_impl(this.CmpContext+n),t!=null)?t:""};t.getValidStructId=function(n){var i,t,r;if(!gx.lang.emptyObject(n))for(i=this.getControlIds(),t=0;t<i.length;t++)if(r=this.getValidStruct(i[t]),this.isSameField(r,n))return i[t];return-1};t.getValidStructFld=function(n){var r,u,f,t,i;if((typeof n=="function"||typeof n=="object"&&n.tagName)&&(n=typeof n=="object"&&n.type==="radio"&&n.name?n.name:gx.dom.id(n)),r=this.getValidStructFld_cache[n],r)return r;if(!gx.lang.emptyObject(n))for(u=this.getControlIds(),f=u.length,t=0;t<f;t++)if(i=this.getValidStruct(u[t]),this.isSameField(i,n))return this.getValidStructFld_cache[n]=i,i;return this.getValidStructFld_cache[n]=null,null};t.isSameField=function(n,t){var i=n.fld,r;return i==t?!0:(this.IsComponent&&(r=t.indexOf(this.CmpContext),r==0&&(t=t.substring(this.CmpContext.length))),n.grid!=0&&(t=t.replace(this.rowPatternRegex,"")),this.IsMasterPage&&(i=i.replace(/_MPAGE$/,""),t=t.replace(/_MPAGE$/,"")),i==t)};t.getUserFocus=function(){var n=gx.fn.getHidden(this.CmpContext+"GX_FocusControl"),t,f,e,r,i,u;if(gx.lang.emptyObject(n)||n=="notset"||(t=gx.dom.byId(n),gx.lang.emptyObject(t)||gx.fn.isAccepted(t)||(f=gx.csv.cmpCtx,gx.csv.cmpCtx=this.CmpContext,e=gx.O,gx.O=this,t=gx.fn.firstAcceptedControl(gx.popup.ispopup()),gx.O=e,gx.csv.cmpCtx=f,n=gx.lang.emptyObject(t)?"":t.id)),gx.lang.emptyObject(n)){if(this.hasMasterPage()&&(n=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(n)))return n;for(r=[],i=0;i<this.WebComponents.length;i++)if(this.WebComponents[i].CmpContext.indexOf("MP")==0)r.push(this.WebComponents[i]);else if(n=this.WebComponents[i].getUserFocus(),!gx.lang.emptyObject(n))return n;for(u=0;u<r.length;u++)if(n=r[u].getUserFocus(),!gx.lang.emptyObject(n))return n}return n};t.getGridColumn=function(n,t){var r=null,i=null,u=gx.fn.controlGridId(n);return u!=0&&(i=gx.O.getGridById(u,t),i&&(r=i.grid.getColumnByHtmlName(n))),r};t.hasMasterPage=function(){return this.MasterPage!=null};t.setComponent=function(n){this.CmpControls[n.id.toLowerCase()]=n};t.getComponentByPrefix=function(t){var i=n.map(this.CmpControls,function(n){return n.Prefix==t?n:null});return i.length==1?i[0]:null};t.refreshGrid=function(n){var t=this.getGrid(n);t&&t.doRefresh()};t.refreshComponent=function(n){var t=this.getWebComponent(this.CmpContext+this.getComponentData(n).Prefix),i;t?gx.evt.dispatcher.dispatch("REFRESH",t):(i=gx.fn.controlGridId(n),i!==0&&(t=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(n).Prefix+gx.fn.currentGridRow(i)),t&&gx.evt.dispatcher.dispatch("REFRESH",t)))};t.getComponentPrefix=function(n){var t=this.getComponentData(n);return t?t.Prefix||"":""};t.getComponentData=function(n){return this.CmpControls[n.toLowerCase()]};t.createWebComponent=function(n,t,i,r,u,f,e){var s,h,o,c;f=f||this.getComponentPrefix(n);r||(s=gx.fn.controlGridId(n),r=s!==0?gx.fn.currentGridRow(s):"");u=u||this.CmpContext+"gxHTMLWrp"+f+r;f=this.CmpContext+f;o=gx.getObj(f,!1);o?o.startFeedback():(h=gx.dom.byId(u),h.firstChild&&gx.dom.mask(u));c=gx.gen.isJava()&&gx.pO.PackageName&&!gx.text.startsWith(t,"/")?gx.pO.PackageName+".":"";gx.ajax.dynComponent(c+t,i,f,r).done(function(n){n.DynComponentMap||(n.DynComponentMap={});n.DynComponentMap[f+r]=u;gx.ajax.setJsonResponse({response:n,isPostBack:!0,gxObject:o||gx.O,afterCmpLoaded:function(){e&&e(f)}});o?o.endFeedback():gx.dom.unmask(u)})};t.registerComponent=function(n){this.WebComponents[n.CmpContext]=n;this.WebComponents.push(n)};t.setWebComponent=function(n,t){this.deleteComponent(n.CmpContext,n,!1);t&&this.restoreComponentHiddens(n.CmpContext,t);this.registerComponent(n);n.JustCreated=!0;gx.fn.setHidden(n.CmpContext,n.ServerClass);gx.fx.obs.notify("webcom.render",[n])};t.getWebComponent=function(n){return this.WebComponents[n]};t.deleteComponent=function(n,t,i){var r,o,s,u,f,h,c,e;if(i=typeof i=="undefined"?!0:i,r=this.getWebComponent(n),r){for(o=gx.gen.isJava()&&r.PackageName?r.PackageName+".":"",gx.cache.deleteInlineCode(n+o+r.ServerClass.toLowerCase()),i&&this.deleteComponentHiddens(n),gx.lang.emptyObject(t)||gx.fn.setHidden(t.CmpContext,t.ServerClass),r.ondestroy(),delete this.WebComponents[n],s=this.WebComponents.length,u=0;u<s;u++)if(this.WebComponents[u].CmpContext==n){this.WebComponents.splice(u,1);break}for(f=gx.attachedControls.length;f--;)h=gx.attachedControls[f],h.info.wc===n&&gx.attachedControls.splice(f,1);c=this.WebComponents;for(e in c)isNaN(parseInt(e))&&e.indexOf(n)===0&&this.deleteComponent(e)}};t.deleteComponentHiddens=function(n){var t,r,i;if(gx.lang.isArray(n)){if(n.length==0)return;t=gx.fn.getCmpRegex("("+n.join("|")+")")}else t=gx.fn.getCmpRegex(n);r=gx.fn.filterHiddens(t,gx.http.viewState);for(i in r)i&&gx.fn.deleteHidden(i)};t.restoreComponentHiddens=function(n,t){var u=gx.fn.getCmpRegex(n),r=gx.fn.filterHiddens(u,t);for(var i in r)i&&gx.fn.setHidden(i,r[i])};t.setCmpContext=function(n){n!=undefined&&(this.IsTypeComponent=!0,n!==""&&(this.IsComponent=!0),this.CmpContext=n)};t.getOldLvl=function(n){var i,r,u,t;for(i in this.LvlOlds)for(r=this.LvlOlds[i],u=r.length,t=0;t<u;t++)if(r[t]==n)return i;return-1};t.refreshDependantGrids=function(n){for(var t,f=this.Grids.length,i=0;i<f;i++){var r=this.Grids[i],u=r.refreshVars,e=u.length;for(t=0;t<e;t++)if(u[t].fld==n.fld){r.filterVarChanged();break}}};t.getCtrlPropertyValue=function(n,t){var i=gx.fn.getCtrlProperty(n,t);return i===undefined&&(i=gx.fn.getHidden(n+"_"+t)),i};t.setGrid=function(n){this.Grids[n.gridName]=n;this.GridsUpper[n.gridName.toUpperCase()]=n;var t=this.getGridIdxByName(n.gridName);t!=-1?this.Grids[t]=n:this.Grids.push(n)};t.getGrid=function(n){return n=n||"",this.Grids[n]||this.GridsUpper[n.toUpperCase()]};t.getGridIdxByProp=function(n){for(var i,r=this.Grids.length,t=0;t<r;t++)if(i=this.Grids[t],n(i))return t;return-1};t.getGridIdxByName=function(n){return this.getGridIdxByProp(function(t){return t.gridName===n})};t.getGridByBaseName=function(n){var t=this.getGridIdxByProp(function(t){return t.gridName===n||t.grid.GridBaseName===n});return t===-1?null:this.Grids[t]};t.getGridIdx=function(n){for(var i,r=this.Grids.length,t=0;t<r;t++)if(i=this.Grids[t],i.gridId==n)return t;return-1};t.getGridById=function(n,t){for(var i,t=t||"",u=this.Grids.length,r=0;r<u;r++)if(i=this.Grids[r],i.gridId==n&&(!i.parentRow||gx.text.endsWith(t,i.parentRow.gxId)))return i;return null};t.getGridForColl=function(n){for(var i,r=this.Grids.length,t=0;t<r;t++)if(i=this.Grids[t],i.boundedCollName==n)return i;return null};t.getFormBCForVar=function(n){var i,t;for(i in this.FormBCs)if(t=this.FormBCs[i],t&&t.gxvar==n)return t;return null};t.getGridBC=function(n){var t=n,i;return this.IsComponent&&(i=n.indexOf(this.CmpContext),i===0&&(t=n.substring(this.CmpContext.length))),this.GridBCs[t]};t.getFormBC=function(n){var t=n,i;return this.IsComponent&&(i=n.indexOf(this.CmpContext),i===0&&(t=n.substring(this.CmpContext.length))),this.FormBCs[t]};t.addGridBCProperty=function(n,t,i,r){var u=this.getGridBC(n);typeof u=="undefined"&&(u={},u.gxvar=r,this.GridBCs[n]=u);this.addBCProperties(u,t,i,r)};t.addBCProperty=function(n,t,i,r){var u=this.getFormBC(n);typeof u=="undefined"&&(u={},u.gxvar=r,this.FormBCs[n]=u);this.addBCProperties(u,t,i,r)};t.addBCProperties=function(t,i,r,u){var f;if(t)if(i instanceof Array){var e=t,o=i.length,s=function(t){var f=this[r.gxvar],o,e;gx.lang.emptyObject(r.hc)||(f=this[r.hc]);r.type=="date"?(o=new gx.date.gxdate(f),f=o.getString("Y4MD")):r.type==="bitstr"&&gx.pO.fullAjax&&(e=gx.fn.getControlGridRef(r.fld,r.grid,t),e&&n(e).val()&&(f="gxformdataref:"+e.id));this.valueToBCProp(this[u],i,r,f,t)};for(f=0;f<o;f++){if(typeof e[i[f]]=="undefined")if(f<o-1)e[i[f]]={};else{e[i[f]]=r;typeof this[u]=="object"&&(r.v2bc=s);break}e=e[i[f]]}}else typeof i=="string"&&(t[i]=r)};t.valueToBCProp=function(n,t,i,r,u){try{if(n){for(var f=n,l=t.length,o=u||"",e=0,h=0,s,c=function(n){if(gx.lang.isArray(n)&&i&&i.grid){var t=gx.fn.getGridObj(i.grid,o&&o.length===4?o:undefined),r=t&&t.grid&&!t.InfiniteScrolling?t.grid.firstRecordOnPage:0;s=o?o:gx.fn.currentGridRow(i.grid);s.length>3&&(h+=1,s=s.substr(-4*h,4),n=n[Number(r||0)+Number(s)-1])}return n},f=c(f);f&&e<l-1;e++)f=c(f[t[e]]);f&&(e=t.length-1,f[t[e]]=r,f[t[e]+"_N"]!==undefined&&(f[t[e]+"_N"]=0))}}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","valueToBCProp")}};t.bcToScreen=function(n,t){var i,r;for(i in n)if(i!="gxvar")try{typeof t[i]=="object"?this.bcToScreen(n[i],t[i]):(r=n[i],(r.grid==0||gx.csv.validatingGrid&&r.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(r.hc)&&t[i]!=undefined&&r.v2v&&(r.v2v(t[i]),gx.fn.v2c(r,t[i])))}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","bcToScreen")}};t.addGridUCEventHandler=function(n,t,i){gx.lang.emptyObject(this.GridUCsEvts[n])&&(this.GridUCsEvts[n]=[]);this.GridUCsEvts[n].push({e:t,h:i})};t.getGridUCEventHandlers=function(n){var t=this.GridUCsEvts[n];return gx.lang.emptyObject(t)?[]:t};t.setGridUCDynProp=function(n,t,i,r,u){this.setGridUCProp(n,t,i,r,u)};t.setGridUCProp=function(n,t,i,r,u){gx.lang.emptyObject(this.GridUCsProps[n])&&(this.GridUCsProps[n]=[]);this.GridUCsProps[n].push({p:t,h:i,v:r,t:u});t=="InternalTitle"&&(this.GridUCsProps[n].title=r)};t.getGridUCProperties=function(n){var t=this.GridUCsProps[n];return gx.lang.emptyObject(t)?[]:t};t.addUsercontrolBinding=function(n,t,i){this.UCBindings[n]||(this.UCBindings[n]={fld:t,uc:[]},this.UCBindingsHiddens[t]=this.UCBindings[n]);gx.util.inArray(i,this.UCBindings[n].uc)||this.UCBindings[n].uc.push(i)};t.setUserControl=function(n){n.ContainerName&&(this.UserControls[n.ContainerName]=n)};t.getUserControl=function(n){var t=this.UserControls[n];return t||this.CmpContext==""||(t=this.UserControls[this.CmpContext+n]),t};t.getUserControlGrids=function(){return n.map(this.Grids,function(n){if(n.grid&&n.isUsercontrol)return n.grid})};t.execV2CFunctions=function(t,i,r,u){r=r===undefined||r;i||(i=this.UserControls);var f=this;gx.uc.StartRender();n.each(i,function(n,i){i&&f==i.ParentObject&&(r||!i.GridId||i instanceof gx.ui.grid)&&(!u||u(i))&&i.updateAndShow(t)});gx.uc.EndRender()};t.execC2VFunctions=function(){n.each(this.UserControls,function(n,t){try{t.execC2VFunctions()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","execC2VFunctions")}try{t.saveProperties()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","execC2VFunctions")}})};t.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};t.setVariable=function(n,t){var r,i,u;this[n]=t;r=t;n.indexOf(this.CmpContext)!=0&&gx.fn.setHidden(this.CmpContext+n,t);this.VarControlMap[n]!=undefined&&(i=this.VarControlMap[n].type,(i=="date"||i=="dtime")&&(typeof t=="string"&&(t=new gx.date.gxdate(t),this[n]=t),i=="date"?r=t.getStringWithFmt("Y4MD"):(u=this.VarControlMap[n].decimals,r=t.getStringWithFmt("Y4MD")+" "+t.getTimeString(!0,!0,u>1,u>=12))),i=="decimal"&&gx.decimalPoint!="."?(r=t.toString().replace(".",gx.decimalPoint),typeof t=="string"&&(this[n]=gx.num.parseFloat(t))):i=="int"&&typeof t=="string"&&(this[n]=gx.num.parseInt(t)),gx.fn.setHidden(this.CmpContext+this.VarControlMap[n].id,r));n=="Gx_mode"&&this.setMode();this.UCBindings[n]!=undefined&&gx.fn.setHidden(this.CmpContext+this.UCBindings[n].fld,t)};t.getVariable=function(n){return this[n]};t.isServerEvent=function(n){return this.Events[n][1]||!1};t.getServerEventName=function(n){return this.Events[n][0]||""};t.getClientEventName=function(n){for(var t in this.Events)if(this.Events[t][0]==n)return t;return""};var w={RFR:"REFRESH",RFR_MPAGE:"REFRESH"},l=[".CONTROLVALUECHANGED",".CONTROLVALUECHANGING"],b=function(n){for(var t=0;t<l.length;t++)if(n.indexOf(l[t])>=0)return!1;return!0};t.cleanEventName=function(n){n=n.replace(new RegExp("^"+this.CmpContext),"");var r=gx.pO.fullAjax?/^E('?(.*)\.?'?)/:/^E('?(\w+)\.?([^\.]*)'?)/,t=r.exec(n),i=t&&t.length&&t.length>1?t[1].replace(/\.\d*$/,""):n;return w[i]||i};t.inputHasFormatErrors=function(n,t,i){var o,h,c=this.cleanEventName(n),r,u,f=!1,l=gx.csv.anyFormatError(),v,y,a,e,s,p;if(!this.fullAjax&&l)return!0;if(!l||!this.EvtParms[c]||!b(c))return!1;for(h=this.EvtParms[c][0],y=this,a=function(n){if(n)if(t&&i&&n.grid==t){if(r=gx.fn.getControlGridRef(n.fld,t,i),r&&r.id&&gx.csv.gxFormatErrors[r.id])return!0}else if(r=gx.fn.getControlGridRef(n.fld,n.grid),r&&r.id)for(v in gx.csv.gxFormatErrors)if(n==y.getValidStructFld(v))return!0;return!1},o=0,len=h.length;o<len&&!f;o++){if(e=h[o],e.postForm)return l;if(e.fld)if(u=this.getValidStructFld(e.fld),u)f=f||a(u);else if(s=this.getFormBCForVar(e.av),s!=null)for(p in s)u=s[p],typeof u=="object"&&(f=f||a(u))}return f};t.setEventParameters=function(n,t){var o,u,c,i,h,r;for(gx.csv.lastEvtRow=null,gx.O=this,o=!0,u=-1,gx.csv.cmpCtx=this.CmpContext,c=n.length,i=0;i<c;i++){var a=n[i][0],l=n[i][1],f=n[i][2],s=!1;if(t instanceof e)this.setVariable(f,t.parms[i]),s=!0;else for(h in t)if(h.toLowerCase()==a.toLowerCase()){this.setVariable(f,t[h]);s=!0;break}s||this.setVariable(f,t);r=this.getValidStructFld(l);r!=null?(r.grid!=0&&u==-1?u=r.grid:r.grid!=0&&r.grid!=u&&(o=!1),gx.fn.v2c(r)):gx.fn.setHidden(this.CmpContext+l,this.getVariable(f))}o&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(u))};t.executeEvent=function(n,t,i,r,u){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var f=this.getClientEventName(n),s=f?this.isServerEvent(f):!0,e,o;return s?(u?(o=this.getGrid(u),o&&i?o.instanciateRow(i):gx.csv.instanciatedRowGrid=null):gx.csv.instanciatedRowGrid=null,e=this.executeServerEvent(n,t,i,r,this.fullAjax&&!i&&!u)):e=gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,f,u,i,""),gx.csv.instanciatedRowGrid=null,e};t.executeServerEvent=function(t,i,r,u,f){var h=n.Deferred(),c,e,s,o;gx.O=this;gx.csv.cmpCtx=this.CmpContext;c=!0;i!=undefined&&i==!1&&(c=!1);e=gx.csv.validatingGrid||gx.csv.instanciatedRowGrid;e&&e.parentObject!=this&&(e=null);s=gx.lang.emptyObject(e)?!1:e.gridId;o=r||gx.csv.lastEvtRow||"";f?(o="",s=null):(o==""&&s&&(o=gx.csv.lastRow[s]),typeof o=="undefined"&&(o=gx.fn.currentGridRowImpl(e.gridId)));var l=this.CmpContext+"E"+t+"."+(o||""),a=function(){h.resolve()},v=function(){h.resolve()};return gx.evt.execEvt(this.CmpContext,this.IsMasterPage,l,gx.evt.dummyCtrl,s,c,null,null,a,u,v,!1),h.promise()};t.executeEnterEvent=function(n,t,i){var r=this.gxOWithEnter(t),f=!1,u,e,o;if(t&&t.onblur&&t.onblur(),(gx.pO.fullAjax||r==null)&&n&&gx.evt.cancelAndRefresh(n)){if(r==null||r.autoRefresh||!r.hasEnterEvent||r.anyGridBaseTable)return;f=!0}n?(gx.dom.hasSubmitControl()&&gx.evt.cancel(n,!0),t&&t.nodeName=="INPUT"&&gx.dom.isEditControl(t)&&gx.evt.cancel(n,!0)):f=!0;r!=null&&(u="ENTER",r.IsMasterPage&&(u=u+"_MPAGE"),u=r.CmpContext+"E"+u+".",t&&gx.evt.isEnterEvtCtrl(t)&&(e=gx.fn.controlRowId(t),o=gx.fn.controlGridId(t.id),e&&(u+=e)),gx.evt.execEvt(r.CmpContext,r.IsMasterPage,u,gx.evt.dummyCtrl,o,!1,null,i,null,f,undefined,r!=null),n&&gx.evt.cancel(n,!0))};t.gxOWithEnter=function(n){var t;if(n&&(t=gx.fn.getControlContext(n),t&&t.hasEnterEvent))return t;if(this.hasEnterEvent)return this;if(this.IsComponent){var i=this.getCmpType(this.CmpContext),u=i[1]==""&&i[0].indexOf("MP")==0,r=gx.getObj(i[1],u);if(!gx.lang.emptyObject(r))return r.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();return null};t.getLastControlId=function(){return this.GXLastCtrlId};t.getValidStruct=function(n){return this.GXValidFnc[n]};t.getControlIds=function(){return this.GXCtrlIds};t.getControlIdsh=function(){return this.GXCtrlIdsh};t.getUsercontrolFromChild=function(t){return n.each(this.UserControls,function(n,i){var r=i.getContainerControl();if(gx.dom.isChildNode(t,r))return i}),null};t.installFlatLevelDatePickers=function(){for(var r,n=null,i=this.getControlIds(),u=i.length,t=0;t<u;t++)n=this.getValidStruct(i[t]),n!=undefined&&n.grid==0&&n.dp!=undefined&&(r=this.CmpContext+n.fld,gx.fn.installDatePicker(r,n,this,n.dp.f,n.dp.st,n.dp.wn,n.dp.mf,gx.fn.datePickerFormat(n.dp.pic,n.dp.dec,n.len),n.len,n.dp.dec))};t.installImageControls=function(){for(var t=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),n=0,i=t.length;n<i;n++)gx.html.multimediaUpload.createControl(t[n]);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};t.initControlsEnabledFlag=function(n){var t,i;n.type!="bits"&&n.type!="audio"&&n.type!="video"&&(t=gx.fn.getControlRef(n.fld),t&&(i=gx.http.viewState[gx.dom.id(t)+"_Enabled"],i!==undefined&&gx.fn.setEnabledProperty(t,gx.lang.gxBoolean(i),!1)))};t.initControlsBehaviour=function(){var t=this;n.each(gx.O.GXValidFnc,function(n,i){if(i&&i.fld&&(t.initControlsEnabledFlag(i),i.gxsgprm)){var r=gx.fn.getControlRef(i.fld);r&&gx.fx.installSuggest(r)}})};var r=function(n){if(gx.lang.emptyObject(n))return!1;var t;try{t=new Function("return "+n)}catch(i){return gx.lang.doEval(n)}try{return t()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","evaluateCode")}return!1},k=function(t){var i=t.tagName.toLowerCase();return i=="img"||i=="input"?n(t).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR):n("a["+gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR+"]",t).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR)},u=function(){var n={select:!0,textarea:!0},t=gx.lang.apply({radio:!0,checkbox:!0,file:!0},gx.dom.editControls);return function(i){if(!i)return!1;var r=i.tagName.toLowerCase();return r=="input"?t[i.type.toLowerCase()]:n[r]}}(),d=function(n){var t,i;return n&&n.tagName.toLowerCase()=="label"&&(t=n.getAttribute("for"),t)?(i=gx.dom.el(t),u(i)&&gx.fn.isVisible(i,0)):!1},a=function(t){var o;if(t.type!=="keypress"||t.keyCode===13||t.keyCode===32&&gx.dom.isButton(t)){var i=t.target,e=n(i),r=n(t.currentTarget),f=gx.fn.getControlContext(r);if(!i||i.tagName.toUpperCase()!=="A"||n(i).attr(gx.GxObject.GX_EVENT_DATA_ATTR)!==undefined||!i.href){if(!f){t.preventDefault();return}r.hasClass("gx-disabled")||(u(i)||d(i))&&!n(i).is(r)||gx.dom.hasAttribute(i,gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS)||(t.stopPropagation(),o=function(){var n=r.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR);g()?tt.apply(this,[t,e,f,n]):nt.apply(this,[t,e,f,n])},gx.evt.doAfterProcessing(o,this))}}},g=function(){return gx.util.browser.isOldIE()&&!gx.util.browser.isWinCE()},nt=function(n,t,i,r){var u=function(){gx.csv.resetRow();var n=i.getValidStructFld(r);n&&n.grid&&gx.evt.setEventRow(i,t.get(0))},f=function(){u();t.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);i.handleControlEvent(n,r,this)}.closure(this),e;if(gx.fx.dom.delayedDispatch(n)){if(t.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)){u();gx.fx.dom.raiseEvent("dblclick",n);return}e=setTimeout(f,gx.config.evt.dblclick.delay);t.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,e)}else f.call()},tt=function(n,t,i,r){var u,f;t.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)||(u=function(){gx.csv.resetRow();var u=i.getValidStructFld(r);u&&u.grid&&gx.evt.setEventRow(i,t.get(0));t.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);i.handleControlEvent(n,r,this)}.closure(this),gx.fx.dom.delayedDispatch(n)?(f=setTimeout(u,gx.config.evt.dblclick.delay),t.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,f)):u.call())},f=function(n,t,i){try{i&&n.preventDefault();t&&n.stopPropagation()}catch(r){}};t.handleControlEvent=function(t,i,u){var o=this.controlEventMap;if(o[i]){var e=o[i],h=o[i].evt,g=this.Events[h],c=g?this.Events[h][0]:o[i].std,nt=v(u,gx.GxObject.GX_EVENT_DATA_ATTR),l=v(u,gx.GxObject.GX_EVENT_CODE_DATA_ATTR),s=k(u),a=e.grid>0?gx.fn.controlRowId(t.currentTarget):null,y=this.getGridById(e.grid,a),p,w=!0,b=!1,d=n(t.target);if(e.ctrltype!="combo")switch(nt){case"1":f(t,!0,!0);(!s||r(s))&&gx.fn.closeWindow();break;case"3":case"4":f(t,!0,!0);l&&r(l);break;case"8":gx.ajax.doRefresh(this);break;default:if((!s||r(s))&&(y&&(p=y.gridName),e.ctrltype==="checkbox"&&(gx.fn.checkboxClick(e,u,e.values[0],e.values[1]),w=!1,b=!0),c&&(d.attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,!0),this.executeEvent(c,!1,a,!1,p).always(function(t){if(!gx.evt.redirecting){var i=function(){n(t).attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,null)};gx.spa.isNavigatingRaw()?gx.spa.addObserver("onnavigate",this,i,{single:!0}):i()}}.closure(this,[d]))),b))gx.evt.onchange(u);f(t,!0,w)}}};t.registerCtrlsEventHandlers=function(){var r,c,l=this.GXCtrlIds,w=this.GXValidFnc,t,e=this.IsMasterPage,o=this.CmpContext,b=e?"_MPAGE":"",k="["+gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR+"]",s,h,v,i,d=!o&&!e,f,g=gx.GxObject.GX_EVENT_EXCLUDED_CTRLTYPES,y,p;for(this.listeningControlEvents===undefined&&(this.listeningControlEvents=!1),this.controlEventMap||(this.controlEventMap={}),y=this.controlEventMap,r=0,c=l.length;r<c;r++)t=w[l[r]],f=gx.fn.controlFiresEvent(t),p=this.hasEnterEvent&&!gx.lang.emptyObject(t.ctrltype)||t.evt_cvc||t.evt_cvcing,!gx.util.inArray(t.ctrltype,g)&&(f||p)&&(f&&(y[t.fld]=t),t.grid===0&&(s=o+t.fld+(t.gxvar?"":b),h="#span_"+s,v="#"+s,i=t.gxvar&&n(h).length>0?n(h):n(v),f&&(i.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),i.is("img")&&i.attr("tabindex","0"),u(i.get(0))||i.attr("tabindex","0")),i.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,gx.json.serializeJson([o,e]))));if(d&&!this.listeningControlEvents){this.listeningControlEvents=!0;n(document.body).on("click keypress",k,a)}};t.unregisterCtrlsEventHandlers=function(){this.listeningControlEvents&&n(document.body).off("click keypress",a);this.listeningControlEvents=!1};t.clearMultimediaValue=function(n){var t=gx.html.multimediaUpload.getElements(n);t.fileField.onchange(t.fileField);gx.fn.setHidden(t.fileField.id,"");gx.fn.setHidden(t.uriField.id,"");gx.fn.setHidden(t.fileField.id+"_gxBlob","")};t.refreshOlds=function(){var e,i,o,r,h,u;for(e in this.LvlOlds)if(i=this.LvlOlds[e],typeof i!="function"){if(o=gx.fn.lvlGrid(parseInt(e,10)),o!=0&&(r=gx.fn.currentGridRow(o),r==="9999"))continue;for(h=i.length,u=0;u<h;u++){var s=i[u],f=s,t="",n=gx.fn.vStructForOld(f);n?(!n.gxgrid||n.gxgrid.grid.rows.length>0)&&(t=gx.typedOld(n.fld,f,n.type)):(gx.lang.emptyObject(r)||(s+="_"+r),t=gx.fn.getHidden(this.CmpContext+s));typeof t!="undefined"&&(n||(window[f]=t),this[f]=t)}}};e=function(n){return this.parms=n,this};t.addExoEventHandler=function(n,t){var i=function(){var n=gx.O;gx.setGxO(this);t.call(this,null,null,new e(Array.prototype.slice.call(arguments,0)));gx.setGxO(n)};gx.fx.obs.addObserver(n,this,i);this.exoEventHandlers=this.exoEventHandlers||{};this.exoEventHandlers[n]=i};t.deleteExoEventHandlers=function(){for(var n in this.exoEventHandlers)this.exoEventHandlers.hasOwnProperty(n)&&gx.fx.obs.deleteObserver(n,this,this.exoEventHandlers[n])};t.restoreExoEventHandlers=function(){for(var n in this.exoEventHandlers)gx.fx.obs.addObserver(n,this,this.exoEventHandlers[n])};t.deleteEventHandlers=function(){try{this.unregisterCtrlsEventHandlers();gx.fx.ctx.deleteHandlers(this);gx.fx.dnd.deleteHandlers(this);this.deleteExoEventHandlers();gx.fx.dom.deleteEventHandlers(this)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","deleteEventHandlers")}};t.ondestroy=function(){try{this.endFeedback();this.deleteEventHandlers();n.each(this.UserControls,function(n,t){if(!gx.lang.emptyObject(t.destroy))try{t.destroy()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","ondestroy")}});this.UserControls=[];delete this.containerControl}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","ondestroy")}};t.onpost=function(){var t=gx.O,i,n;for(gx.setGxO(this),this.hasMasterPage()&&this.MasterPage.onpost(),i=this.WebComponents.length,n=0;n<i;n++)this.WebComponents[n].onpost();this.ReadonlyForm&&this.IsComponent&&t!=this&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(t)};t.roControlsAsHidden=function(){for(var n,t,r,u=this.getControlIds(),f=u.length,i=0;i<f;i++)n=this.getValidStruct(u[i]),n.grid==0&&typeof n.val=="function"&&(t=this.CmpContext+n.fld,r=gx.dom.el(t),r&&!gx.fn.isAccepted(r)&&gx.fn.setHidden(t,gx.fn.getControlValue(t)))};t.onload=function(t,i){var o=n.Deferred(),f=[],u,r,e;if(gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass),gx.setGxO(this),this.screenToVars(),gx.wmp(function(){this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this))},this),u=this.Grids.length,t!==!1)for(r=0;r<u;r++)f.push(this.Grids[r].loadGrid());for(u=this.WebComponents.length,r=0;r<u;r++)f.push(this.WebComponents[r].onload(t));i?this.afterLoad():gx.wr(this.afterLoad.closure(this),this);gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);e=this;n.when.apply(n,f).done(function(){e.execV2CFunctions(!0,undefined,!1,function(n){return n.ownerGrid&&n.ownerGrid.parentGrid});e.onLoadDeferred.resolve()})};t.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0,undefined,!1);this.JustCreated=!1;this.registerCtrlsEventHandlers();gx.$.map(gx.$("input[data-gx-disable], select[data-gx-disable]",this.getContainer()),function(n){gx.fn.disableCtrl(n.getAttribute("data-gx-disable"));n.removeAttribute("data-gx-disable")});this===gx.pO&&(gx.ui.controls.actionGroup.init(),gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.goOnload()};t.onunload=function(n){var i,t;for(this.hasMasterPage()&&n!==!1&&this.MasterPage.onunload(),i=this.Grids.length,t=i-1;t>=0;t--)delete this.Grids[this.Grids[t].gridName],this.Grids[t].cleanup(),this.Grids.splice(t,1);for(i=this.WebComponents.length,t=i-1;t>=0;t--)delete this.WebComponents[this.WebComponents[t].CmpContext],this.WebComponents[t].onunload(),this.WebComponents.splice(t,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};t.clean=function(n){this.cleanHiddens();this.onunload(n)};t.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};t.screenToVars=function(){var i,r,t,n;try{for(i=this.getControlIds(),r=i.length,t=0;t<r;t++)n=this.getValidStruct(i[t]),n&&n.lvl==0&&typeof n.c2v=="function"&&n.c2v()}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","screenToVars")}};t.postbackLoad=function(n,t){var r=this.IsComponent&&this.JustCreated,u,i;for(this.hasMasterPage()&&this.MasterPage.postbackLoad(n),u=this.WebComponents.length,i=0;i<u;i++)this.WebComponents[i].postbackLoad(n);r&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());this.execV2CFunctions(!0,r?!1:n);this.JustCreated=!1;this.conditionsChanged=!1;this===gx.pO&&gx.fn.doAttachs(t);gx.goOnload();this.onLoadDeferred.resolve()};t.addDragSource=function(n,t,i,r){gx.fx.dnd.addSource(this,n,t,i,r)};t.addDropTarget=function(n,t,i,r){gx.fx.dnd.addTarget(this,n,t,i,r)};t.addContextSetter=function(n,t,i,r){gx.fx.ctx.addSetter(this,n,t,i,r)};t.addContextTracker=function(n,t,i,r){gx.fx.ctx.addTracker(this,i,r)};t.addOnMessage=function(n,t,i,r,u){gx.fx.notifications.addTracker(this,n,t,i,r,u)};t.addEventHandler=function(n,t,i){gx.fx.dom.addEventHandler(this,n,t,i)};t.updateBitmapValue=function(n,t,i,r){var u=gx.html.multimediaUpload.getContainer(n),f=gx.html.multimediaUpload.getOptionValue(u);f=="file"?this[t]=r:this[i]=r};y=function(){return gx.NotificationDelay===undefined?1e3:gx.NotificationDelay};t.getFeedbackContainer=function(){return this==gx.pO?document.body:this.getContainer()};t.startFeedback=function(n,t){this.feedbackCallCounter++;t&&gx.fn.disableKeys();var i=n===!0?0:y(),r,u=function(){var n=this.getFeedbackContainer();n&&gx.dom.mask(n)};if(this.feedbackCallCounter==1)if(i===0)u.call(this);else{if(this.feedbackTimeoutId)return;r=gx.lang.doCallTimeout(u,this,arguments,i);this.feedbackTimeoutId=r.t}};t.endFeedback=function(){if(gx.fn.enableKeys(),this.feedbackCallCounter>0&&this.feedbackCallCounter--,this.feedbackCallCounter==0){this.feedbackTimeoutId&&(clearTimeout(this.feedbackTimeoutId),this.feedbackTimeoutId=!1);var n=this.getFeedbackContainer();n&&gx.dom.unmask(n)}};t.isFeedbackOn=function(){return this.feedbackCallCounter>0};var it="gx-center-target",p="gx-blocking",ft=function(){var i=9996,t=this;return function(r){var u="MPW"+i++,f=t.CmpContext+"gxHTMLWrp"+u;return t.setComponent({id:o(r),GXClass:null,Prefix:u,lvl:1}),n('<div class="gx-call-target '+r+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+f+'"><\/div><\/div>')}}.call(this),rt=function(){var i=n(gx.dom.form()),t=i.children("[data-abstract-form]").first();return t.length||(t=n("<div><\/div>"),t.append(i.children()),i.append(t)),t.addClass("gx-center-target")},o=function(n){return"GX-"+n.toUpperCase()+"-TARGET"},ut=function(t,i,r,u,f){n('<div id="gx-column-targets"><\/div>').insertBefore(t).append(f).append(t).append(r).before(i).after(u)};t.initSingleTarget=function(t){var i="MPW"+this.targetsCounter++,r=this.CmpContext+"gxHTMLWrp"+i;return this.setComponent({id:o(t),GXClass:null,Prefix:i,lvl:1}),n('<div class="gx-call-target '+t+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+r+'"><\/div><\/div>')};t.initTargets=function(){var n,t,i,r,u;gx.pO&&gx.pO.fullAjax&&this.IsMasterPage&&(n=rt(),t=this.initSingleTarget("top"),i=this.initSingleTarget("right"),r=this.initSingleTarget("bottom"),u=this.initSingleTarget("left"),ut(n,t,i,r,u))};t.createObjectInTarget=function(t,r,u){t=t.toLowerCase();var f=i(t);this.createWebComponent(o(t),r,u,undefined,undefined,undefined,function(n){this.targetComponents=this.targetComponents||{};var i=gx.pO.getWebComponent(n);i&&(this.targetComponents[t]=i)});n(f.selector).removeClass("empty")};t.restoreTargetComponents=function(){var n;this.targetComponents=this.targetComponents||{};for(n in this.targetComponents)targetComponents.hasOwnProperty(n)&&gx.pO.registerComponent(this.targetComponents[n])};i=function(n){return{selector:".gx-call-target."+n,centerSelector:"."+it}};h={useCapture:!0};t.showTarget=function(t,r){t=t.toLowerCase();var f=i(t),u=f.selector,o=f.centerSelector,e;n(f.selector).removeClass("empty");n(u).removeClass("off");n(o).addClass("slideout "+t);n(document.documentElement).addClass(p);gx.fx.obs.notify("gx.targetshown",[t]);r!==!1&&(s=function(t){n(t.target).closest(u).length||n(t.target).is(u)||n(u).is(":visible")&&(e.call(this),t.stopImmediatePropagation(),t.preventDefault())}.closure(this),e=function(){this.hideTarget(t)},gx.evt.attach(document,"click",s,!1,h),gx.spa.addObserver("onnavigate",this,e))};t.hideTarget=function(t){t=t.toLowerCase();var r=i(t),u=r.selector,f=r.centerSelector;n(u).addClass("off");n(f).removeClass("slideout "+t);n(document.documentElement).removeClass(p);gx.evt.detach(document,"click",s,h);gx.fx.obs.notify("gx.targethidden",[t])};t.collapseTarget=function(t){t=t.toLowerCase();var r=i(t),u=r.selector,f=r.centerSelector;this.showTarget(t,!1);n(u).addClass("collapsed");n(f).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",[t])};t.expandTarget=function(t){t=t.toLowerCase();var r=i(t),u=r.selector,f=r.centerSelector;this.showTarget(t,!1);n(u).removeClass("collapsed");n(f).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[t])};c=function(n,t){var n=Array.prototype.slice.call(n,0);return n.push(t),n};t.validSrvEvt=function(){return gx.ajax.validSrvEvt.apply(gx.ajax,c(arguments,this))};t.validCliEvt=function(){return gx.ajax.validCliEvt.apply(gx.ajax,c(arguments,this))}}(gx.$);gx.lang.apply(gx.GxObject.prototype,new gx.util.Observable);gx.printing=function(n){return{IFrameId:"gxprintHelper_Iframe",print:function(n){this.printDirect(n)},printDirect:function(t){t&&(gx.printing._deinit(),$iframe=n("<iframe>"),$iframe.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"}),n(document.body).append($iframe),$iframe[0].onload=function(){this.contentWindow.print()},$iframe.attr("src",t.reportFile))},_deinit:function(){n("#"+gx.printing.IFrameId).remove()}}}(gx.$);gx.thread={Map:function(){this.map={};this.add=function(n,t){this.map[n]=t};this.remove=function(n){delete this.map[n]};this.get=function(n){return n==null?null:this.map[n]};this.first=function(){return this.get(this.nextKey())};this.next=function(n){return this.get(this.nextKey(n))};this.nextKey=function(n){for(i in this.map){if(!n)return i;n==i&&(n=null)}return null}},Command:function(n,t,i){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){t.apply(n,i)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(n,t,i,r){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(n,t){gx.thread.Mutex.Wait.get(n).attempt(gx.thread.Mutex.Wait.get(t))};this.attempt=function(t){for(var i=t;i;i=gx.thread.Mutex.Wait.next(i.c.id))if(i.enter||i.number&&(i.number<this.number||i.number==this.number&&i.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+i.c.id+")",10);try{retVal=this.c.execute()}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","Mutex Call")}if(this.number=0,gx.thread.Mutex.Wait.remove(this.c.id),typeof r=="function")try{r.call(n,retVal)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(n,t,i);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};gx.sec={key:null,iv:null,keyName:"GX_AJAX_KEY",ivName:"GX_AJAX_IV",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var n=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(n)?null:n;this.key!=null&&this.loadSecToken();this.iv=gx.fn.getHidden(this.ivName)},loadSecToken:function(){var n=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(n)?null:n},encrypt:function(n,t){var i,r;try{if(t=t==null?this.key:t,t!=null)return i=this.rijndael,t=i.hexToByteArray(t),r=this.iv!=null?i.rijndaelEncrypt(n,t,"CBC",i.hexToByteArray(this.iv)):i.rijndaelEncrypt(n,t),i.byteArrayToHex(r)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","encrypt")}return n},decrypt:function(n,t){var i,r,u;try{if(t=t==null?this.key:t,t!=null)return i=this.rijndael,t=i.hexToByteArray(t),r=i.hexToByteArray(n),u=i.rijndaelDecrypt(r,t,"CBC"),i.byteArrayToString(u)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","decrypt")}return n},_init:function(){this.rijndael._init()}};gx.MD5={RotateLeft:function(n,t){return n<<t|n>>>32-t},AddUnsigned:function(n,t){var f,e,r,u,i;return(r=n&2147483648,u=t&2147483648,f=n&1073741824,e=t&1073741824,i=(n&1073741823)+(t&1073741823),f&e)?i^2147483648^r^u:f|e?i&1073741824?i^3221225472^r^u:i^1073741824^r^u:i^r^u},F:function(n,t,i){return n&t|~n&i},G:function(n,t,i){return n&i|t&~i},H:function(n,t,i){return n^t^i},I:function(n,t,i){return t^(n|~i)},FF:function(n,t,i,r,u,f,e){return n=gx.MD5.AddUnsigned(n,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(t,i,r),u),e)),gx.MD5.AddUnsigned(gx.MD5.RotateLeft(n,f),t)},GG:function(n,t,i,r,u,f,e){return n=gx.MD5.AddUnsigned(n,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(t,i,r),u),e)),gx.MD5.AddUnsigned(gx.MD5.RotateLeft(n,f),t)},HH:function(n,t,i,r,u,f,e){return n=gx.MD5.AddUnsigned(n,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(t,i,r),u),e)),gx.MD5.AddUnsigned(gx.MD5.RotateLeft(n,f),t)},II:function(n,t,i,r,u,f,e){return n=gx.MD5.AddUnsigned(n,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(t,i,r),u),e)),gx.MD5.AddUnsigned(gx.MD5.RotateLeft(n,f),t)},ConvertToWordArray:function(n){for(var r,u=n.length,o=u+8,s=(o-o%64)/64,e=(s+1)*16,i=Array(e-1),f=0,t=0;t<u;)r=(t-t%4)/4,f=t%4*8,i[r]=i[r]|n.charCodeAt(t)<<f,t++;return r=(t-t%4)/4,f=t%4*8,i[r]=i[r]|128<<f,i[e-2]=u<<3,i[e-1]=u>>>29,i},WordToHex:function(n){for(var i="",r="",u,t=0;t<=3;t++)u=n>>>t*8&255,r="0"+u.toString(16),i=i+r.substr(r.length-2,2);return i},Utf8Encode:function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},getHsh:function(n){var e=Array(),f,it,rt,ut,ft,t,i,r,u,o=7,s=12,h=17,c=22,l=5,a=9,v=14,y=20,p=4,w=11,b=16,k=23,d=6,g=10,nt=15,tt=21,et;for(n=gx.MD5.Utf8Encode(n),e=gx.MD5.ConvertToWordArray(n),t=1732584193,i=4023233417,r=2562383102,u=271733878,f=0;f<e.length;f+=16)it=t,rt=i,ut=r,ft=u,t=gx.MD5.FF(t,i,r,u,e[f+0],o,3614090360),u=gx.MD5.FF(u,t,i,r,e[f+1],s,3905402710),r=gx.MD5.FF(r,u,t,i,e[f+2],h,606105819),i=gx.MD5.FF(i,r,u,t,e[f+3],c,3250441966),t=gx.MD5.FF(t,i,r,u,e[f+4],o,4118548399),u=gx.MD5.FF(u,t,i,r,e[f+5],s,1200080426),r=gx.MD5.FF(r,u,t,i,e[f+6],h,2821735955),i=gx.MD5.FF(i,r,u,t,e[f+7],c,4249261313),t=gx.MD5.FF(t,i,r,u,e[f+8],o,1770035416),u=gx.MD5.FF(u,t,i,r,e[f+9],s,2336552879),r=gx.MD5.FF(r,u,t,i,e[f+10],h,4294925233),i=gx.MD5.FF(i,r,u,t,e[f+11],c,2304563134),t=gx.MD5.FF(t,i,r,u,e[f+12],o,1804603682),u=gx.MD5.FF(u,t,i,r,e[f+13],s,4254626195),r=gx.MD5.FF(r,u,t,i,e[f+14],h,2792965006),i=gx.MD5.FF(i,r,u,t,e[f+15],c,1236535329),t=gx.MD5.GG(t,i,r,u,e[f+1],l,4129170786),u=gx.MD5.GG(u,t,i,r,e[f+6],a,3225465664),r=gx.MD5.GG(r,u,t,i,e[f+11],v,643717713),i=gx.MD5.GG(i,r,u,t,e[f+0],y,3921069994),t=gx.MD5.GG(t,i,r,u,e[f+5],l,3593408605),u=gx.MD5.GG(u,t,i,r,e[f+10],a,38016083),r=gx.MD5.GG(r,u,t,i,e[f+15],v,3634488961),i=gx.MD5.GG(i,r,u,t,e[f+4],y,3889429448),t=gx.MD5.GG(t,i,r,u,e[f+9],l,568446438),u=gx.MD5.GG(u,t,i,r,e[f+14],a,3275163606),r=gx.MD5.GG(r,u,t,i,e[f+3],v,4107603335),i=gx.MD5.GG(i,r,u,t,e[f+8],y,1163531501),t=gx.MD5.GG(t,i,r,u,e[f+13],l,2850285829),u=gx.MD5.GG(u,t,i,r,e[f+2],a,4243563512),r=gx.MD5.GG(r,u,t,i,e[f+7],v,1735328473),i=gx.MD5.GG(i,r,u,t,e[f+12],y,2368359562),t=gx.MD5.HH(t,i,r,u,e[f+5],p,4294588738),u=gx.MD5.HH(u,t,i,r,e[f+8],w,2272392833),r=gx.MD5.HH(r,u,t,i,e[f+11],b,1839030562),i=gx.MD5.HH(i,r,u,t,e[f+14],k,4259657740),t=gx.MD5.HH(t,i,r,u,e[f+1],p,2763975236),u=gx.MD5.HH(u,t,i,r,e[f+4],w,1272893353),r=gx.MD5.HH(r,u,t,i,e[f+7],b,4139469664),i=gx.MD5.HH(i,r,u,t,e[f+10],k,3200236656),t=gx.MD5.HH(t,i,r,u,e[f+13],p,681279174),u=gx.MD5.HH(u,t,i,r,e[f+0],w,3936430074),r=gx.MD5.HH(r,u,t,i,e[f+3],b,3572445317),i=gx.MD5.HH(i,r,u,t,e[f+6],k,76029189),t=gx.MD5.HH(t,i,r,u,e[f+9],p,3654602809),u=gx.MD5.HH(u,t,i,r,e[f+12],w,3873151461),r=gx.MD5.HH(r,u,t,i,e[f+15],b,530742520),i=gx.MD5.HH(i,r,u,t,e[f+2],k,3299628645),t=gx.MD5.II(t,i,r,u,e[f+0],d,4096336452),u=gx.MD5.II(u,t,i,r,e[f+7],g,1126891415),r=gx.MD5.II(r,u,t,i,e[f+14],nt,2878612391),i=gx.MD5.II(i,r,u,t,e[f+5],tt,4237533241),t=gx.MD5.II(t,i,r,u,e[f+12],d,1700485571),u=gx.MD5.II(u,t,i,r,e[f+3],g,2399980690),r=gx.MD5.II(r,u,t,i,e[f+10],nt,4293915773),i=gx.MD5.II(i,r,u,t,e[f+1],tt,2240044497),t=gx.MD5.II(t,i,r,u,e[f+8],d,1873313359),u=gx.MD5.II(u,t,i,r,e[f+15],g,4264355552),r=gx.MD5.II(r,u,t,i,e[f+6],nt,2734768916),i=gx.MD5.II(i,r,u,t,e[f+13],tt,1309151649),t=gx.MD5.II(t,i,r,u,e[f+4],d,4149444226),u=gx.MD5.II(u,t,i,r,e[f+11],g,3174756917),r=gx.MD5.II(r,u,t,i,e[f+2],nt,718787259),i=gx.MD5.II(i,r,u,t,e[f+9],tt,3951481745),t=gx.MD5.AddUnsigned(t,it),i=gx.MD5.AddUnsigned(i,rt),r=gx.MD5.AddUnsigned(r,ut),u=gx.MD5.AddUnsigned(u,ft);return et=gx.MD5.WordToHex(t)+gx.MD5.WordToHex(i)+gx.MD5.WordToHex(r)+gx.MD5.WordToHex(u),et.toLowerCase()}};gx.base64={b64:[],f64:[],decode:function(n){try{if(window.atob)return decodeURIComponent(atob(n).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(t){}return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(n)))},encode:function(n){try{if(window.btoa)return btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(n,t){return String.fromCharCode("0x"+t)}))}catch(i){}return this.encodeImpl(this.UTF8BytesFromString(n))},bytesFromUTF8Bytes:function(n){for(var r=[],t=0,i=c1=c2=0,u=n.length;t<u;)i=n[t],i<128?(r.push(i),t++):i>191&&i<224?(c2=n[t+1],r.push((i&31)<<6|c2&63),t+=2):(c2=n[t+1],c3=n[t+2],r.push((i&15)<<12|(c2&63)<<6|c3&63),t+=3);return r},UTF8BytesFromString:function(n){var i,u,r,t;for(n=n.replace(/\r\n/g,"\n"),i=[],u=n.length,r=0;r<u;r++)t=n.charCodeAt(r),t<128?i.push(t):t>127&&t<2048?(i.push(t>>6|192),i.push(t&63|128)):(i.push(t>>12|224),i.push(t>>6&63|128),i.push(t&63|128));return i},bytesToString:function(n){for(var t=gx.util.browser.isChrome()?32765:5e4,i=[];n.length>=t;)i.push(eval("String.fromCharCode("+n.slice(0,t).join(",")+");")),n=n.slice(t);return n.length!=0&&i.push(eval("String.fromCharCode("+n.join(",")+");")),i.join("")},decodeImpl:function(n){var r=this.f64,t=[],i=0,u;for(n=n.replace(/\n|\r/g,""),n=n.replace(/=/g,""),u=n.length;i<u;)t[t.length]=r[n.charAt(i)]<<2|r[n.charAt(i+1)]>>4,t[t.length]=(r[n.charAt(i+1)]&15)<<4|r[n.charAt(i+2)]>>2,t[t.length]=(r[n.charAt(i+2)]&3)<<6|r[n.charAt(i+3)],i+=4;return n.length%4==2&&(t=t.slice(0,t.length-2)),n.length%4==3&&(t=t.slice(0,t.length-1)),t},encodeImpl:function(n){var r=this.b64,t=[],i=0,u=n.length,f;for(u%3==1&&(n[n.length]=0,n[n.length]=0),u%3==2&&(n[n.length]=0),f=n.length;i<f;)t[t.length]=r[n[i]>>2],t[t.length]=r[(n[i]&3)<<4|n[i+1]>>4],t[t.length]=r[(n[i+1]&15)<<2|n[i+2]>>6],t[t.length]=r[n[i+2]&63],i+=3;return u%3==1&&(t[t.length-1]=t[t.length-2]="="),u%3==2&&(t[t.length-1]="="),t.join("")},_init:function(){for(var t,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=i.length,n=0;n<r;n++)t=i.charAt(n),this.b64[n]=t,this.f64[t]=n}};gx.webSocket=function(n){var i=1e4,r,t,u;this.reconnect=!0;this.opened=!1;this.initialized=!1;this.retryCount=0;this.maxRetries=n.maxRetries||3;this.retryDelay=n.retryDelay||i;r=function(){return"WebSocket"in window};this._init=function(n){var n,t;if(!this.initialized&&r()){n=n||{};n.clientId=n.clientId||"";n.basePath=n.basePath||"";this.namespace="."+n.namespace;try{t=n.wsProtocol+n.host+n.basePath+n.resourceUrl+n.clientId;this.create(n.wsURL||t);this.initialized=!0;this.wsOpts=n}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","Could not initialize WebSocket")}}};t=this;u=function(){this.opened=!1;this.initialized=!1;this.reconnect&&(this.maxRetries==-1||this.retryCount<this.maxRetries)&&(this.retryCount++,gx.lang.doCallTimeout(this._init,this,[this.wsOpts],i))};this.create=function(n){try{this.ws=new WebSocket(n);this.ws.onopen=function(){t.opened=!0;t.retryCount=0;gx.fx.obs.notify("gx.ws.onOpen"+t.namespace,[])};this.ws.onerror=function(n){gx.dbg.logDebug("gx.webSocket - Error: "+n.data);gx.fx.obs.notify("gx.ws.onError"+t.namespace,[n.data])};this.ws.onmessage=function(n){gx.dbg.logDebug("gx.webSocket - New Message: "+n.data);gx.fx.obs.notify("gx.ws.onMessage"+t.namespace,[n.data])};this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");t.opened&&(t.retryCount=0,u.apply(t))}}catch(i){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+t.namespace,[i]],100)}};window.onbeforeunload=function(){t.opened&&t.ws.close()};this.close=function(){t.opened&&(t.opened=!1,t.ws.close())};this.send=function(n){this.ws?this.ws.send(n):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};this._init(n)};gx.util.alert=function(n){var u=!1,t="#gx-main-error",i=!1,e=function(){u&&n(t).length!=0||(n(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'><\/div>"),u=!0);r()},f=function(u){var u=u||{},s=u.message||"",h=u.cssClass||"",c=u.cssDisBtnClass||"",l=u.dataDisAtt,o=u.dismissmitAt,f;e();f=n(t);f.html('<div class="'+h+'"><button type="button" class="'+c+'" data-dismiss="'+l+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;<\/button><span>'+s+"<\/span><\/div>");f.slideDown();i=!0;o&&window.setTimeout(function(){r()},o)},r=function(){i&&(n(t).fadeOut(500,function(){n(this).empty()}),i=!1)};return{showMessage:function(i,r){var u=n(t);f(n.extend({message:i,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},r))},showError:function(i,r){var u=n(t);f(n.extend({message:i,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},r))},hide:r}}(gx.$);gx.geolocation=function(n){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(t){t.attachedCtrl=n("#"+t.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(t);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(n){var i=attachedCtrls.shift(),t=gx.fn.validStruct(gx.O.getValidStructId(i.attachedCtrl.id)),r=n.coords.latitude+","+n.coords.longitude;gx.evt.setEventRow(gx.pO,i.attachedCtrl);t.v2v&&(t.v2v(r),t.v2c());t.gxgrid&&t.gxgrid.updateControlValue(t,!0)},handle_errors:function(n){var i=attachedCtrls.shift(),t;switch(n.code){case n.PERMISSION_DENIED:t="user did not share geolocation data";break;case n.POSITION_UNAVAILABLE:t="could not detect current position";break;case n.TIMEOUT:t="retrieving position timed out";break;default:t="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(t);gx.pO.refreshOutputs([])}}}(gx.$);gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(n,t){var i=n.slice(0,t);return n.slice(t).concat(i)},xtime:function(n){return n<<=1,n&256?n^283:n},mult_GF256:function(n,t){for(var r=0,i=1;i<256;i*=2,t=this.xtime(t))n&i&&(r^=t);return r},byteSub:function(n,t){for(var r,u=t=="encrypt"?this.SBox:this.SBoxInverse,i=0;i<4;i++)for(r=0;r<this.Nb;r++)n[i][r]=u[n[i][r]]},shiftRow:function(n,t){for(var i=1;i<4;i++)n[i]=t=="encrypt"?this.cyclicShiftLeft(n[i],this.shiftOffsets[this.Nb][i]):this.cyclicShiftLeft(n[i],this.Nb-this.shiftOffsets[this.Nb][i])},mixColumn:function(n,t){for(var i,u=[],r=0;r<this.Nb;r++){for(i=0;i<4;i++)u[i]=t=="encrypt"?this.mult_GF256(n[i][r],2)^this.mult_GF256(n[(i+1)%4][r],3)^n[(i+2)%4][r]^n[(i+3)%4][r]:this.mult_GF256(n[i][r],14)^this.mult_GF256(n[(i+1)%4][r],11)^this.mult_GF256(n[(i+2)%4][r],13)^this.mult_GF256(n[(i+3)%4][r],9);for(i=0;i<4;i++)n[i][r]=u[i]}},addRoundKey:function(n,t){for(var i=0;i<this.Nb;i++)n[0][i]^=t[i]&255,n[1][i]^=t[i]>>8&255,n[2][i]^=t[i]>>16&255,n[3][i]^=t[i]>>24&255},keyExpansion:function(n){var r=[],i,t;for(this.Nk=this.keySizeInBits/32,this.Nb=this.blockSizeInBits/32,this.Nr=this.roundsArray[this.Nk][this.Nb],t=0;t<this.Nk;t++)r[t]=n[4*t]|n[4*t+1]<<8|n[4*t+2]<<16|n[4*t+3]<<24;for(t=this.Nk;t<this.Nb*(this.Nr+1);t++)i=r[t-1],t%this.Nk==0?i=(this.SBox[i>>8&255]|this.SBox[i>>16&255]<<8|this.SBox[i>>24&255]<<16|this.SBox[i&255]<<24)^this.Rcon[Math.floor(t/this.Nk)-1]:this.Nk>6&&t%this.Nk==4&&(i=this.SBox[i>>24&255]<<24|this.SBox[i>>16&255]<<16|this.SBox[i>>8&255]<<8|this.SBox[i&255]),r[t]=r[t-this.Nk]^i;return r},Round:function(n,t){this.byteSub(n,"encrypt");this.shiftRow(n,"encrypt");this.mixColumn(n,"encrypt");this.addRoundKey(n,t)},InverseRound:function(n,t){this.addRoundKey(n,t);this.mixColumn(n,"decrypt");this.shiftRow(n,"decrypt");this.byteSub(n,"decrypt")},FinalRound:function(n,t){this.byteSub(n,"encrypt");this.shiftRow(n,"encrypt");this.addRoundKey(n,t)},InverseFinalRound:function(n,t){this.addRoundKey(n,t);this.shiftRow(n,"decrypt");this.byteSub(n,"decrypt")},encrypt:function(n,t){var i;if(n&&n.length*8==this.blockSizeInBits&&t){for(n=this.packBytes(n),this.addRoundKey(n,t),i=1;i<this.Nr;i++)this.Round(n,t.slice(this.Nb*i,this.Nb*(i+1)));return this.FinalRound(n,t.slice(this.Nb*this.Nr)),this.unpackBytes(n)}},decrypt:function(n,t){var i;if(n&&n.length*8==this.blockSizeInBits&&t){for(n=this.packBytes(n),this.InverseFinalRound(n,t.slice(this.Nb*this.Nr)),i=this.Nr-1;i>0;i--)this.InverseRound(n,t.slice(this.Nb*i,this.Nb*(i+1)));return this.addRoundKey(n,t),this.unpackBytes(n)}},byteArrayToString:function(n){for(var i="",r=n.length,t=0;t<r;t++)n[t]!=0&&(i+=String.fromCharCode(n[t]));return i},stringToByteArray:function(n){for(var t=[],r=n.length,i=0;i<r;i++)t[t.length]=n.charCodeAt();return t},byteArrayToHex:function(n){var i="",r,t;if(n){for(r=n.length,t=0;t<r;t++)i+=(n[t]<16?"0":"")+n[t].toString(16);return i}},hexToByteArray:function(n){var i=[],r,t;if(!(n.length%2)){for((n.indexOf("0x")==0||n.indexOf("0X")==0)&&(n=n.substring(2)),r=n.length,t=0;t<r;t+=2)i[Math.floor(t/2)]=parseInt(n.slice(t,t+2),16);return i}},packBytes:function(n){var i=[],r,t;if(n&&!(n.length%4)){for(i[0]=[],i[1]=[],i[2]=[],i[3]=[],r=n.length,t=0;t<r;t+=4)i[0][t/4]=n[t],i[1][t/4]=n[t+1],i[2][t/4]=n[t+2],i[3][t/4]=n[t+3];return i}},unpackBytes:function(n){for(var t=[],r=n[0].length,i=0;i<r;i++)t[t.length]=n[0][i],t[t.length]=n[1][i],t[t.length]=n[2][i],t[t.length]=n[3][i];return t},formatPlaintext:function(n){var i=this.blockSizeInBits/8,t,r;if(typeof n=="string"||n.indexOf)for(n=n.split(""),r=n.length,t=0;t<r;t++)n[t]=n[t].charCodeAt(0)&255;for(t=i-n.length%i;t>0&&t<i;t--)n[n.length]=0;return n},rijndaelEncrypt:function(n,t,i,r){var h,s,o=this.blockSizeInBits/8,u,f,e;if(n&&t&&t.length*8==this.keySizeInBits){for(i=="CBC"?u=r:(i="ECB",u=[]),n=this.formatPlaintext(n),h=this.keyExpansion(t),f=0;f<n.length/o;f++){if(s=n.slice(f*o,(f+1)*o),i=="CBC")for(e=0;e<o;e++)s[e]^=u[f*o+e];u=u.concat(this.encrypt(s,h))}return u}},rijndaelDecrypt:function(n,t,i){var o,r=this.blockSizeInBits/8,f=[],s,u,e;if(n&&t&&typeof n!="string"&&t.length*8==this.keySizeInBits){for(i||(i="ECB"),o=this.keyExpansion(t),u=n.length/r-1;u>0;u--)if(s=this.decrypt(n.slice(u*r,(u+1)*r),o),i=="CBC")for(e=0;e<r;e++)f[(u-1)*r+e]=s[e]^n[(u-1)*r+e];else f=s.concat(f);return i=="ECB"&&(f=this.decrypt(n.slice(0,r),o).concat(f)),f}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};gx.popup=function(n){var c=10,f="PopupHeader gx-popup-header",e="gx-popup-resize",o="PopupContent gx-popup-content",i="gx-popup-default",s="PopupBorder gx-popup "+i,h="PopupHeaderButton gx-popup-close",t="gx-popup-centered",r="gx-popup-horizontal-center",l="gx-popup-initial",u="data-gx-popup-ct";return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.width=0;this.height=0;this.position=0;this.top=0;this.cssClass="";this.left=0;this.zindex=1e3;this.lvl=-1;this.parentPopup=null;this.window=null;this.document=null;this.Opener=null;this.InternalPopup=null;this.state="created";this.callbacks={};var t=function(i){n(this.getEl()).find(i.target).length===0&&(n(document.body).off("click",t),this.close())}.closure(this);this.open=function(r){this.state="opening";this.id=r.id||"gxdialog";this.callbacks=r.callbacks;var e=r.resizable===undefined||r.resizable,u=s;this.cssClass&&(u=u.replace(i,"")+(" "+this.cssClass));gx.popup.ext.window(this,!1,0,0,r.w,r.h,r.contentHtml,"white",r.title,"black","black","black","black",r.isModal===undefined||r.isModal,!0,!0,e,!1,gx.ajax.getImageUrl(gx,"resizeImage"),f,h,o,u,"PopupShadow",r.showParentPopups,!1,r.callbacks,r.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened";setTimeout(function(){n(document.body).on("click",t)},1)};this.close=function(){n(document.body).off("click",t);this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};this.isActive=function(){return!(this.state=="closed"||this.state=="closing")};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(t,i){this.url="";this.frameDocument=null;this.frameWindow=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=i?i:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){gx.lang.isArray(t)?(this.url=t[0],this.autoresize=t[1],this.width=t[2],this.height=t[3],this.position=t[4],this.top=t[5],this.left=t[6],this.OncloseCmds=t[7]||[],this.ReturnParms=t[8]||[],this.cssClass=t[9]):t&&t.Url&&(this.url=t.Url,typeof t.Autoresize!="undefined"&&(this.autoresize=t.Autoresize),typeof t.Width!="undefined"&&(this.width=t.Width),typeof t.Height!="undefined"&&(this.height=t.Height),typeof t.Position!="undefined"&&(this.position=t.Position),typeof t.Top!="undefined"&&(this.top=t.Top),typeof t.Left!="undefined"&&(this.left=t.Left),typeof t.Class!="undefined"&&(this.cssClass=t.Class),typeof t.OncloseCmds!="undefined"&&(this.OncloseCmds=t.OncloseCmds),typeof t.ReturnParms!="undefined"&&(this.ReturnParms=t.ReturnParms))};this.open=function(){var r,f,n,t;if(this.state="opening",r=gx.popup.gxOpener(),this.lvl=-1,this.lvl=r&&r.gx&&r.gx.popup.ext.win&&r.gx.popup.ext.win.gx?r.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl,document.gxPopup!=null?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx,f=this.url,this.IsPrompt){gx.popup.currentPrompt=this;var e="?",i="",u="",o=this.ReturnParms.length;for(n=0;n<o;n++){if(i="",gx.lang.emptyObject(this.ReturnParms[n].Ctrl))if(typeof this.ReturnParms[n]=="string")i=gx.util.urlValue(this.ReturnParms[n])+",";else if(typeof this.ReturnParms[n]=="number")i=gx.util.urlValue(this.ReturnParms[n].toString())+",";else if(this.CustomRenderGrid)u=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[n].id),gx.lang.emptyObject(u)||(i=gx.util.urlValue(u+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[n].id))continue;else u=gx.fn.getHidden(this.ReturnParms[n].id),gx.lang.emptyObject(u)||(i=gx.util.urlValue(u)),i+=",";else i=gx.util.urlValue(this.ReturnParms[n].Ctrl)+",";e+=this.ReturnParms[n].IOType=="out"?",":i;this.ReturnParms[n].isLastKey&&gx.fn.isOutputParm(this.ReturnParms[n])&&!this.PromptIsGet&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}this.ModifCtrl!=null&&(this.ModifCtrl.value=1);f+=e}t=document.activeElement;gx.csv.lastControl&&t&&gx.util.inArray(t.tagName,["BODY","FORM"])&&(t=gx.csv.lastControl);t&&(t&&(this.callerActiveElement=t),t.blur&&t.blur());this.InternalPopup=gx.popup.Impl(this,f,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var i=[],r,n,t;if(this.IsPrompt)for(r=this.ReturnParms.length,n=0;n<r;n++)t=this.ReturnParms[n],gx.fn.isOutputParm(t)&&i.push(t);else return this.ReturnParms;return i};this.close=function(t,i,r){var u;i=i||{};this.state="closing";t&&(this.RawReturnedParms=t);u=window;gx.popup.ext.win?(u=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var o=function(){var t=n.Deferred();return this.setCellValue.apply(this,arguments),t.resolve()},f=function(){var n,f,s,h,c;this.beforeClose&&this.beforeClose(t);!this.isPdf&&this.frameWindow&&this.frameWindow.gx&&(this.IsPrompt&&(this.parentPopup==null?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null),this.frameWindow.gx.evt.onunload.call(this.frameWindow),gx.util.browser.isIE()||(this.frameDocument.gxPopup=null),this.frameDocument=null,this.frameWindow=null);gx.popup.ext.close(this);var u=this.getOutputParms(),e=function(){i&&i.ignoreCmds===!0&&(this.OncloseCmds=[]);gx.ajax.dispatchCommands(this.OncloseCmds,undefined,{updateParms:u});this.cleanup();this.state="closed";this.afterClose&&this.afterClose(t);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",[this])}.closure(this),l=!0;if(t!=null&&this.IsPrompt){if(r&&i.parmsMetadata&&i.updateParms)for(f=i.parmsMetadata.length,n=0;n<f;n++)s=i.parmsMetadata[n],gx.util.inArray(s,i.updateParms)&&(t[n]=r[s]);f=t.length;h=gx.popup.assignPromptFields;c=gx.popup;gx.lang.emptyObject(this.CustomRenderGrid)||(h=o,c=this.CustomRenderGrid.grid);l=!1;h.call(c,u,t).then(function(){var t=null,r,o,s,i;for(f=u.length,n=0;n<f;n++)r=u[n].Ctrl,gx.fn.isAccepted(r)&&(t=r);if(t&&gx.TabOnPrompSelect&&(o=gx.fn.getControlIndex(t),o!=-1&&(t=gx.fn.searchFocus(o+1,!0))),gx.fn.setFocus(t),this.PromptIsGet)if(this.Opener.fullAjax)s=gx.csv.ctxControlId(t.id),s&&(i=gx.O.getValidStructFld(s)),i&&gx.csv.validControls(i.id,i.id+1,!0,this.Opener);else{gx.csv.loadScreen(function(){gx.fn.setFocus(t);e()});return}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),typeof GXPkIsDirty=="undefined"?!1:window.GXPkIsDirty,null,"eng")}catch(h){gx.dbg.logEx(h,"gxpopup.js","close")}e()}.closure(this))}else t&&u&&u instanceof Array&&u.length>0&&gx.fn.setReturnParms(this.Opener,u,t,this.CustomRenderGrid);l&&e()},e=gx.util.browser;e.isFirefox()||e.isIE()?u.setTimeout(f.closure(this),10):f.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload(!1)};this.cleanup=function(){try{this.OncloseCmds=[];this.ReturnParms=[];this.PromptIsGet=!1;this.InternalPopup=null;this.window=null;this.document=null;this.Opener=null;this.parentPopup=null;this.RawReturnedParms=[];this.ModifCtrl=null;this.InternalPopup=null;this.CustomRenderGrid=null}catch(n){gx.dbg.logEx(n,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},getWindowIframeElement:function(n){for(var r,t,u=n.document.getElementsByTagName("iframe"),i=0;i<u.length&&!t;i++)r=u[i],r.contentWindow===window&&(t=r);return t},gxOpener:function(){try{parent.gxTestAvailable=1;var t=this.getWindowIframeElement(parent);return t&&n(t).attr(u)!==undefined?parent:window}catch(i){}return null},setFocus:function(){var n=this.getPopup();n&&n.window.frames[0].focus()},ispopup:function(){return this.getPopup()!=null},popupurl:function(){return this.getPopup().url},waitCallback:function(n){var t=gx.popup.getPopup();t?t.state=="opened"?n():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[n],50):n()},getPopup:function(){var n=this.gxOpener();try{if(!gx.lang.emptyObject(n)&&!gx.lang.emptyObject(n.gx))return n.gx.popup.currentPopup}catch(t){}return null},setPopup:function(n){this.currentPopup=n},open:function(n,t){return this.openPopup(n,t)},openUrlToOpenPopupParms:function(n,t,i){var r=1,u=0,f=0,e=0,o=0,s=0;return i&&(r=i[0],u=i[1],f=i[2],e=i[3],o=i[4],s=i[5]),[n,r,u,f,e,o,s,[],t]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(n,t){var e=this.getPopup(),r,u,o,f,i;if(e&&e.Opener===gx.O&&gx.lang.isArray(n))e.OncloseCmds.push({popup:n});else{for(i=new this.Popup(n,!1),i.Opener=t||gx.O,u=0,o=i.ReturnParms.length;u<o;u++)if(f=gx.fn.vStructForVar(i.ReturnParms[u]),f&&f.grid&&(r=gx.O.getGridById(f.grid),r))break;return r&&r.isUsercontrol&&(i.CustomRenderGrid=r),i.open(),i}},openDialog:function(n){var t=new this.Dialog;return t.Opener=gx.O,t.open(n),t},openPrompt:function(n,t,i,r,u,f){var a,h,e,s,o,v,c,p,y,l;if(gx.popup.currentPrompt==null){if(r&&gx.setGxO(r,u),a=t[0].Ctrl,h=!1,a)e=gx.fn.rowGridId(a),s=gx.fn.controlRowId(a),gx.lang.emptyObject(e)||gx.lang.emptyObject(s)||(gx.csv.lastGrid=e,gx.fn.setCurrentGridRow(e,s));else{for(c=0,p=t.length;c<p;c++)if(t[c].IOType){v=t[c].id;break}v&&(y=gx.O.getValidStructFld(v),gx.lang.emptyObject(y)||(o=gx.O.getGridById(y.grid),o&&(h=o.isUsercontrol,h&&(e=o.gridId+"",s=gx.lang.emptyObject(o.grid.getSelectedRow)?undefined:gx.text.padl(o.grid.getSelectedRow()+"",4,"0"),gx.lang.emptyObject(e)||gx.lang.emptyObject(s)||(gx.csv.lastGrid=e,gx.fn.setCurrentGridRow(e,s))))))}if(!f&&!this.outParmsAccepted(t)&&!h)return;l=new this.Popup([n,1,0,0,0,0,0,[],t],!0);l.IsMod=i;l.Opener=gx.getObj(r,u);h&&(l.CustomRenderGrid=o);l.open()}},outParmsAccepted:function(n){for(var t,u=n.length,r=!1,i=0;i<u;i++)if(t=n[i],gx.fn.isOutputParm(t)&&(r=!0),gx.fn.isOutputParm(t)&&t.Ctrl&&gx.fn.isAccepted(t.Ctrl))return!0;return!r},gxReturn:function(n){gx.fn.closeWindow(n)},parmId:function(n){var t=gx.dom.id(n);return t.indexOf("span_")===0&&(t=t.substring(5)),t},popuplvl:function(){var n=gx.popup.getPopup();return!n||!n.window?-1:n.window.gx.popup.lvl},assignPromptFields:function(t,i){for(var c=[],s=gx.O,f=[],a=99999,v=i.length,r=0,u,e,h,o,l,r=0;r<v;r++)(u=t[r],e=i[r],u.Ctrl&&!gx.lang.emptyObject(u))&&(gx.csv.pkDirty=u.isKey,u.Ctrl.type=="checkbox"&&u.Ctrl.value!=e&&(u.Ctrl.checked=!u.Ctrl.checked),u.Ctrl.value!=e&&u.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0),h=gx.csv.ctxControlId(this.parmId(u.Ctrl)),o=s.getValidStructFld(h),f.push({idx:o?o.id:a++,ParmCtrl:u.Ctrl,ControlId:h,VStruct:o,PValue:e}));for(l=function(n,t){return n.idx<t.idx?-1:n.idx>t.idx?1:0},f.sort(l),r=0;r<f.length;r++)this.assignPromptFieldValue(f[r],s);for(r=0;r<f.length;r++)c.push(this.assignAndValidatePromptField(f[r],s));return n.when.apply(n,c)},assignPromptFieldValue:function(n){var t=n.VStruct,r=n.ParmCtrl,u=n.PValue,i,f;gx.lang.emptyObject(t)||gx.lang.emptyObject(t.v2c)||t.type!="date"&&t.type!="dtime"?gx.fn.setControlValue(this.parmId(r),u,0):(t.v2v(u),gx.fn.v2c(t,u));gx.fn.setControlGxValid(r,"0");gx.evt.execOnchange(r);i=gx.dom.byId("span_"+r.name);i!=null&&(i.childNodes.length===0&&i.appendChild(gx.popup.gxOpener().document.createTextNode("")),f=i.childNodes[0],f.nodeValue=u);t&&t.gxgrid&&t.gxgrid.updateControlValue(t,!1)},assignAndValidatePromptField:function(t,i){var f=n.Deferred(),e=!0,o=t.ControlId,u=t.VStruct,r,s=function(){gx.popup.assignPromptFieldValue(t);gx.util.balloon.clear(o);r&&(gx.O.toValid=r+1,gx.csv.validateAll().done(function(){var t,n;if(!gx.lang.emptyObject(u.rgrid)){for(t=u.rgrid.length,n=0;n<t;n++)u.rgrid[n].filterVarChanged();f.resolve();return}}));f.resolve()}.closure(this);return gx.lang.emptyObject(u)||(r=i.getValidStructId(u.fld),r&&(r>gx.O.toValid&&(i.toValid=r),e=!1,gx.csv.validateAll().done(s))),e&&f.resolve(),f.promise()},autofit:function(){var n=this.getPopup();gx.lang.emptyObject(n)||n.state!="opened"||this.ext.autofit(n,null,!1)},Impl:function(n,t,r,u,e,c,l,a){var v=s;return n.cssClass&&(v=v.replace(i,"")+(" "+n.cssClass)),new this.ext.popUp(n,r,c,a,l,u,e,"gxp",t,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),f,h,o,v,"PopupShadow",undefined)},setZIndex:function(n){var t=gx.dom.getStyle(n,"zIndex");isNaN(t)&&(t=999);t++;this.zindex=t;this.ext.zdx=t},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1e3,sdiff:5,win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&gx.util.browser.ieVersion()<=8},hide:function(n){var t=gx.dom.byId;gx.popup.ext.compatMode()&&(t(n+"_t").style.visibility="hidden",t(n+"_c").style.visibility="hidden",t(n+"_rs").style.visibility="hidden");t(n+"_b").style.visibility="hidden"},show:function(t){var i=gx.dom.byId,r=n("#"+t+"_b");gx.popup.ext.compatMode()?(i(t+"_t").style.visibility="visible",i(t+"_c").style.visibility="visible",i(t+"_rs").style.visibility="visible"):n(document.body).toggleClass("gx-popup-opened",!0);r.css("visibility","visible")},close:function(t,i){var r;if(n(document.body).toggleClass("gx-popup-opened",!1),!i||typeof i!="function"||i()!==!1){t.draggable&&t.draggable.deinit();t.resizable&&t.resizable.deinit();gx.popup.ext.iFrame=null;gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currRS=null;var f=t.id,u=document.getElementById(f+"_b"),e=document.getElementById(f+"_ifrm");gx.popup.ext.deinitmodal(t);gx.popup.setPopup(t.parentPopup);r=t.callerActiveElement;r&&r.focus&&r.focus();t.parentPopup?t.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[t]):gx.fx.obs.notify("popup.close",[t]);e&&(e.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&gx.util.browser.ieVersion()==7?u.parentNode.removeChild(u):gx.dom.removeControlSafe(u)}},move:function(i,u,f){var e=n("#"+i+"_b");e.toggleClass(t,!1);u!==undefined?e.css({left:Math.max(u,0)}).toggleClass(r,!1):e.toggleClass(r,!0);f!==undefined&&e.css({top:Math.max(f,0)})},resize:function(t,i,r){var u=gx.dom.byId,s;if(u(t+"_rs").rsEnable){var f=u(t+"_rs"),e=u(t+"_b"),h=u(t+"_t"),o=u(t+"_c");gx.popup.ext.compatMode()?(f.style.left=Math.max(i,92)+"px",f.style.top=Math.max(r,72)+"px",e.style.width=Math.max(i+8,100)+"px",e.style.height=Math.max(r+8,80)+"px",h.style.width=Math.max(i+3,92)+"px",o.style.width=Math.max(i-5,87)+"px",o.style.height=Math.max(r-28,44)+"px"):(s=document.getElementById(t+"_ifrm"),n(s).css({width:i,height:r}));this.resizePopupContent(i,r)}},movepopup:function(){return this.currIDb!=null&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff),this.currRS!=null&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff),!1},stopRS:function(){gx.popup.ext.currRS=null},startRS:function(t,i){var r=gx.popup.ext,u=t.pageX,f=t.pageY,e=n(i);return gx.popup.ext.compatMode()?(r.rsxoff=parseInt(i.style.left,0)-u,r.rsyoff=parseInt(i.style.top,0)-f):(r.rsxoff=e.position().left-u,r.rsyoff=e.position().top-f),r.currRS=i,!1},changez:function(n){var t=n!=null?n:this,i=gx.popup.ext,r=gx.dom.byId;t.style.zIndex=++i.zdx;r(t.cid+"_rs").style.zIndex=++i.zdx},stopdrag:function(){var n=gx.popup.ext;n.currIDb=null},grab_id:function(t,i){var r=gx.popup.ext,o=gx.dom.byId,u=o(i.cid+"_b"),f,e;return gx.evt.mouse.update(t),f=gx.evt.mouse.x,e=gx.evt.mouse.y,gx.popup.ext.compatMode()?(r.xoff=parseInt(u.style.left,0)-f,r.yoff=parseInt(u.style.top,0)-e):(r.xoff=n(u).position().left-f,r.yoff=n(u).position().top-e),r.currIDb=u,!1},subBox:function(n,t,i,r,u,f){var e=document.createElement("div");return e.setAttribute("id",f),e.style.position="absolute",e.style.left=n+"px",e.style.top=t+"px",e.style.width=i+"px",e.style.height=r+"px",e.style.visibility="visible",e.style.padding="0px",e.style.width=i+"px",e},window:function(){gx.popup.ext.compatMode()?this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(i,r,u,f,e,o,s,h,c,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht){var ct,yt,lt,pt,at,vt,bt,wt;et=et!==undefined?et:gx.popup.showParentPopups;ct=i.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);yt=this.win.gx.dom.byId.closure(this.win.gx.dom);lt=n("<div/>",{id:ct+"_b",style:b?"":"visibility:hidden;"})[0];n(lt).addClass("gx-responsive-popup "+t+" "+ut+" "+l);pt=n("<div/>",{id:ct+"_t"})[0];pt.className=tt;pt.innerHTML='<span id="'+ct+'_gxtitle" class="PopupTitle">'+c+'<\/span><span class="'+it+'"; id="'+ct+'_cls"><\/span>';at=n("<div/>",{id:ct+"_c"})[0];at.className=rt;typeof s=="string"?at.innerHTML=s:at.appendChild(s);lt.appendChild(pt);lt.appendChild(at);ht=gx.dom.byId(ht)||this.doc.body;ht.appendChild(lt);b||this.hide(ct);vt=yt(ct+"_b");bt=yt(ct+"_cls");vt.cid=ct;vt.isExt=g?!0:!1;wt=yt(ct+"_t");wt.cid=ct;d&&(i.resizable=new gx.popup.ext.resizable(vt,ct,nt,lt));k&&(i.draggable=new gx.popup.ext.draggable(vt,wt));gx.evt.attach(bt,"click",st.close||this.close.closure(this,[i,st.beforeClose]));(w||et)&&this.initmodal(i,et,ot)},resizable:function(i,r,u,f){var h,o=!1,c,l,s,a,v;this.init=function(t,i,r,u){var f=n("<div/>",{id:i+"_rs"})[0];f.className+=e;f.innerHTML='<img src="'+r+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'">';f.rsEnable=!0;f.style.cursor="se-resize";f.cid=i;u.appendChild(f);s=t;f.firstChild.addEventListener("dragstart",function(n){gx.evt.cancel(n,!0)},!0);a=this.onMouseup.closure(this);v=this.onMousemove.closure(this);f.addEventListener("mousedown",this.onMousedown.closure(this));document.addEventListener("mouseup",a);document.addEventListener("mousemove",v);h=!0};this.deinit=function(){h&&(document.removeEventListener("mouseup",a),document.removeEventListener("mousemove",v),s=null,h=null)};this.onMousemove=function(i){var r;if(o){r=n(s).find("iframe");n("iframe").css("pointer-events","none");var u=n(s).hasClass(t)?2:1,f=i.clientX-c,e=i.clientY-l,h=n(r).width()+f*u,a=n(r).height()+e*u;n(r).css({width:h,height:a});c=i.clientX;l=i.clientY}};this.onMousedown=function(n){c=n.clientX;l=n.clientY;o=!0};this.onMouseup=function(){o&&(n("iframe").css("pointer-events",""),o=!1)};this.init(i,r,u,f)},draggable:function(i,u){var h,e=!1,y,p,o=0,s=0,f,c,l,a,v;this.init=function(n,t){f=n;c=t;v=this.onMousedown.closure(this);a=this.onMousemove.closure(this);l=this.onMouseup.closure(this);f.addEventListener("mousedown",v);f.addEventListener("mouseup",l);document.addEventListener("mousemove",a);h=!0};this.deinit=function(){h&&(f.removeEventListener("mousedown",v),f.removeEventListener("mouseup",l),document.removeEventListener("mousemove",a),c=null,f=null,h=null)};this.onMousemove=function(t){if(e){n("iframe").css("pointer-events","none");var i=t.clientX-y,r=t.clientY-p;f.style.left=o+i+"px";f.style.top=s+r+"px"}};this.onMousedown=function(i){if(i.target===c){var u=n(f);o=u.position().left;s=u.position().top;u.css({left:o,top:s}).toggleClass(t+" "+r,!1);y=i.clientX;p=i.clientY;e=!0}};this.onMouseup=function(){e&&(n("iframe").css("pointer-events",""),e=!1,o=parseInt(f.style.left,10)||0,s=parseInt(f.style.top,10)||0)};this.init(i,u)},window_compat:function(n,t,i,r,u,f,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){var st,yt,kt,lt,at,ct,bt,pt,vt,dt;ut=ut!==undefined?ut:gx.popup.showParentPopups;st=n.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);yt=this.win.gx.dom.byId.closure(this.win.gx.dom);kt=100;u=Math.max(u,kt);f=Math.max(f,80);lt=new this.subBox(u-8,f-8,7,7,"",st+"_rs");b&&(lt.className+=e,lt.innerHTML='<img src="'+d+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',lt.style.cursor="se-resize");lt.rsEnable=b;var wt=u+4,gt=f+6,ht=new this.subBox(i,r,u,f,l,st+"_b");ht.className=it;ht.style.display="block";ht.style.boxSizing="content-box";ht.style.zIndex=++this.zdx;p||(ht.style.visibility="hidden");wt=u-5;gt=f-4;at=new this.subBox(2,2,wt,20,c,st+"_t");at.style.overflow="hidden";at.style.boxSizing="content-box";at.className=g;at.innerHTML='<span id="'+st+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+h+'<\/span><span class="'+nt+'" style="z-index:'+ ++this.zdx+';" id="'+st+'_cls"><\/span>';wt=u-13;ct=new this.subBox(2,24,wt,f-36,s,st+"_c");ct.className=tt;typeof o=="string"?ct.innerHTML=o:ct.appendChild(o);ct.style.overflow="hidden";ct.style.boxSizing="content-box";p||(ht.style.visibility="hidden",at.style.visibility="hidden",ct.style.visibility="hidden");ht.appendChild(at);ht.appendChild(ct);ht.appendChild(lt);ot=gx.dom.byId(ot)||this.doc.body;ot.appendChild(ht);p||this.hide(st);bt=yt(st+"_b");bt.cid=st;bt.isExt=k?!0:!1;pt=yt(st+"_t");pt.cid=st;b&&(vt=yt(st+"_rs"),vt.cid=st,vt.style.boxSizing="content-box",gx.evt.attach(vt,"mousedown",this.startRS.closure(this,[vt],!0)),gx.evt.attach(vt,"mouseup",this.stopRS.closure(this,[vt],!0)));dt=yt(st+"_cls");gx.evt.attach(dt,"click",et.close||this.close.closure(this,[n,et.beforeClose]));w&&(gx.evt.attach(pt,"mousedown",function(n){this.grab_id(n,pt);gx.evt.attach(bt,"mouseup",this.stopdrag.closure(this,[pt],!0),this,{single:!0})},this),b&&gx.evt.attach(lt.firstChild,"dragstart",function(n){gx.evt.cancel(n,!0)},!0));(y||ut)&&this.initmodal(n,ut,ft)},popUp:function(t,i,r,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt){var wt=gx.popup.ext,dt,gt,fi,ni,ti,bt,kt,ii,ei,ri,oi,ui;t.parentPopup!=null?(dt=t.parentPopup.window,wt=dt.gx.popup.ext,wt.win=dt,wt.doc=dt.document,gx.popup.ext=wt):(wt.win=window,wt.doc=wt.win.document);wt.win.gx.popup.setPopup(t);t.window=wt.win;t.document=wt.doc;wt.win.gx.popup.lvl++;h=h+wt.win.gx.popup.lvl;t.id=h;t.IsPrompt||gx.util.sameAppUrl(c)?(c+=gx.http.urlParameterPrefix(c),c+=encodeURIComponent("gxPopupLevel="+wt.win.gx.popup.lvl+";"),bt="",kt=gx.util.getFileName(c),kt=kt.charAt(0).toUpperCase()+kt.slice(1),gx.popup.ext.compatMode()?(ii=gx.HTML5?"auto":"100%",bt='<iframe id="'+h+'_ifrm" src="'+c+'" width="'+ii+'" height="'+ii+'" frameborder="0" style="overflow:auto;" title="'+kt+'" '+u+'=""><\/iframe>'):(ei=!i&&o>0?o:gx.dom.fixes.getPopupMinWidth(),ri=n("<iframe/>",{id:h+"_ifrm",src:c,title:kt,style:"width:"+gx.dom.addUnits(ei)}),ri.attr(u,""),bt=ri[0].outerHTML,gx.util.browser.isIPad()&&(bt='<div class="iframe-container">'+bt+"<\/div>")),oi={close:t.close.closure(t,[null,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel}])},wt.window(t,i,f,e,o,s,bt,l,y,p,b,k,d,g,nt,tt,it,ut,ht,ct,lt,at,vt,yt,pt,!0,oi),ui=wt.win.gx.dom.byId(h+"_ifrm"),wt.iFrame=ui,gx.lang.doCallTimeout(wt.showIfLoaded,wt,[t,ui,1],50)):(g=!1,gx.popup.setPopup(null),gt=new Date,gt=gt.getTime(),fi=ut?c:"",ni="",r==1&&(ni="left="+f+",top="+e),ti="",i||(ti=",width="+o+",height="+s),dt=window.open(fi,"gx"+gt,"status=no,menubar=no"+ti+",resizable="+(it?"yes":"no")+",scrollbars=yes,"+ni))},initmodal:function(n,t,i){n.showParentPopups=t;n.parentPopup==null?gx.ajax.disableForm(i,!0):t||this.hide(n.parentPopup.id)},deinitmodal:function(n){if(n.parentPopup==null)gx.ajax.enableForm();else{this.show(n.parentPopup.id);var t=n.parentPopup.frameWindow;t&&t.gx&&n.parentPopup.frameWindow.gx.ajax.enableForm()}},getDocumentContentType:function(t){return t.contentType||n(t.querySelector('meta[http-equiv="content-type"]')).attr("content")},isPDFPopup:function(n,t){var u,r,f,e,i;if(t.isPdf===undefined){if(u=n.src,gx.util.getContentTypeFromExt(u)==gx.util.contentTypes.pdf)return t.isPdf=!0,!0;r=gx.util.contentTypes.html;try{if(f=n.contentDocument,f=n.contentWindow.document,r=this.getDocumentContentType(f),r==gx.util.contentTypes.pdf)return t.isPdf=!0,!0}catch(o){r=null}return gx.lang.emptyObject(r)&&(i={},i.url=u,i.method="HEAD",i.sync=!0,i.ajaxHeader=!1,i.handler=function(n,t,i){e=i.getResponseHeader("Content-Type")},i.obj=!0,gx.http.doCall(i),e&&e.indexOf(gx.util.contentTypes.pdf)>=0)?(t.isPdf=!0,!0):!1}return t.isPdf},showIfLoaded:function(n,t,i){var r,u,f;try{if(n.isActive()&&(this.docReady(t,i)||i>c&&this.isPDFPopup(t,n))){r=gx.dom.iFrameDoc(t);u=!1;try{u=r&&r.URL!="about:blank"}catch(e){}if(f=this.isPDFPopup(t,n),u||f){n.state="opened";this.autofit(n,r,!0);return}}}catch(e){gx.dbg.logEx(e,"gxpopup.js","showIfLoaded")}i++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[n,t,i],i*50)},docReady:function(n,t){var i,r;if(n.readyState=="complete")return!0;if(i=gx.dom.iFrameDoc(n),i){try{r=typeof i.gxReadyState!="undefined"?i.gxReadyState:i.readyState}catch(u){return!0}if(r=="complete")return!0}return!gx.util.browser.isIE()&&t>=50&&i&&i.body&&i.body.childNodes.length!==0?!0:!1},resizePopupContent:function(t,i){var f;if(gx.HTML5&&this.iFrame){var r=gx.dom.iFrameDoc(this.iFrame),e=i>0?i:"100%",o=t>0?t:"100%",u=n(this.iFrame),h=t>0&&i>0,c=gx.popup.ext.compatMode(),s;if(r&&(f=r.documentElement,f))if(c)o=e="100%";else{try{s=u[0].contentWindow.gx&&u[0].contentWindow.gx.runtimeTemplates}catch(l){}h?(n(f).width(t),n(f).height(i),n(f).css("min-width",""),u.width(o),u.height(e)):(s||u.width(50),n(f).width(f.offsetWidth));o=Math.max(Math.max(r.body.scrollWidth,r.documentElement.scrollWidth),Math.max(r.body.offsetWidth,r.documentElement.offsetWidth));try{o+=n(window).height()<=r.body.offsetHeight?n.position.scrollbarWidth():0}catch(l){}e=undefined}u.width(o);e===undefined&&(e=Math.max(Math.max(r.body.scrollHeight,r.documentElement.scrollHeight),Math.max(r.body.offsetHeight,r.documentElement.offsetHeight)));u.height(e)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(t,i,r){var s,v,y,h,p,g,e,w,b,l,a,k,d;if(!gx.lang.emptyObject(t)){var u=document,f=t.id,c=t.isPdf,o=n("#"+f+"_c");this.doc||(this.doc=t.document);u=this.doc;s=u.getElementById(f+"_ifrm");v=n(u.getElementById(f+"_gxtitle"));!i&&gx.popup.ispopup()&&(i=gx.dom.iFrameDoc(s));this.iFrame=this.iFrame||s;v.text(i&&!c?i.title:"");t.frameDocument=i;t.frameWindow=s.contentWindow;i&&!c&&(i.gxPopup=t);gx.util.browser.isIPad()&&(o.css("overflow-y","auto"),o.css("-webkit-overflow-scrolling","touch"));y=window.self!==window.top;y&&(e=this.getiFrameSizeInfo(u),e.accessParentFrame&&(p=e.scrollTop,h=e.maxHeight+Math.min(window.top.document.body.scrollTop-e.y,0)-50,o.css("max-height",h).parent().css("margin-top","0px"),w=Math.max(window.top.document.body.scrollTop-e.y,0),b=Math.min(i.body.offsetHeight,h),this.move(f,g,w+p+(h-b)/2)));c&&(o.addClass("gx-popup-pdf"),l=u.body.clientWidth*.5,a=u.body.clientHeight*.85);t.autoresize||(l=t.width,a=t.height);this.resizePopupContent(l,a);r&&(t.position&&(k=parseInt(t.top,0),d=parseInt(t.left,0),this.move(f,d,k)),this.show(f))}},autofit_comp:function(t,i,r){var u,c,v,tt,f,o,h,st,ht,b,k,p,ut;if(!gx.lang.emptyObject(t)){u=document;t.zindex=u.gxPopup!=null?this.zdx+u.gxPopup.zindex:this.zdx;c=t.id;v=t.isPdf;this.doc||(this.doc=t.document);u=this.doc;tt=u.getElementById(c+"_ifrm");!i&&gx.popup.ispopup()&&(i=gx.dom.iFrameDoc(tt));t.frameDocument=i;t.frameWindow=tt.contentWindow;i&&!v&&(i.gxPopup=t);var w=u.getElementById(c+"_rs"),it=u.getElementById(c+"_t"),l=u.getElementById(c+"_b"),e=u.getElementById(c+"_c"),rt=u.getElementById(c+"_gxtitle");rt.innerHTML=i&&!v?i.title:"";rt.style.width="auto";var d=gx.dom.getComputedStyle(e),at=gx.dom.getComputedStyle(it),g=gx.dom.getComputedStyle(l),ft=gx.dom.getComputedStyle(w),a=parseInt(d.height,0),s=parseInt(d.width,0),y=this.getiFrameSizeInfo(u),et=y.maxWidth,ot=y.maxHeight,vt=y.scrollTop,yt=y.scrollLeft,pt=y.x,wt=y.y,nt=gx.dom.dimensions(l);if(t.autoresize||(a=t.height-a+nt.h,s=t.width-s+nt.w),f=t.width-s,o=t.height-a,t.autoresize)if(!v&&i)if(h=gx.HTML5?i.documentElement||i.body:i.body,ht=r&&gx.util.browser.isEdge()?n.position.scrollbarWidth():0,h){h.gxwidth||(h.gxwidth=h.scrollWidth);st=h.gxwidth+ht;var ct=h.gxwidth+30-et,lt=h.scrollHeight+30-ot;f=Math.max(st,rt.clientWidth+15)-s-(ct>0?ct:0)+0;o=h.scrollHeight-a-(lt>0?lt:0)}else gx.util.browser.isIE()&&(f<0&&(f=0),o<0&&(o=0));else v&&(f=u.body.clientWidth/2,o=u.body.clientHeight/2);b=parseInt(t.top,0);k=parseInt(t.left,0);t.position||(b=(ot-o)/2-nt.h/2+vt-wt,k=(et-f)/2-nt.w/2+yt-pt,b<0&&(b=5,o=o-5),k<0&&(k=5,f=f-5));l.style.top=parseInt(b,0)+"px";l.style.left=parseInt(k,0)+"px";t.autoresize?(p=function(n,t){var i=parseInt(n,0)+t;return i>0?i:n},it.style.width=p(at.width,f)+"px",l.style.height=p(g.height,o)+"px",l.style.width=p(g.width,f)+"px",e.style.height=p(d.height,o)+"px",e.style.width=p(d.width,f)+"px",ut=gx.util.browser.isIE()?4:2,w.style.top=parseInt(g.height,0)-parseInt(ft.height,0)-ut+"px",w.style.left=parseInt(g.width,0)-parseInt(ft.width,0)-ut+"px"):(a=t.height,s=t.width,w.style.left=Math.max(s,92)+"px",w.style.top=Math.max(a,72)+"px",l.style.width=Math.max(s+8,100)+"px",l.style.height=Math.max(a+8,80)+"px",it.style.width=Math.max(s+3,92)+"px",e.style.width=Math.max(s-5,87)+"px",e.style.height=Math.max(a-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(e.style["overflow-y"]="auto",e.style["-webkit-overflow-scrolling"]="touch"):e.style.overflow="hidden";v&&gx.util.browser.isIE()?this.resizePopupContent("100%","100%"):this.resizePopupContent(parseInt(e.offsetWidth,10),parseInt(e.offsetHeight,10));r&&this.show(c)}},getiFrameSizeInfo:function(n){var u=gx.util.getWindowInfo(),r=u.canAccessFrame,t={x:0,y:0,accessParentFrame:r},i;return!r||window==window.top||gx.lang.emptyObject(window.top)?(t.maxWidth=window.innerWidth||n.documentElement.clientWidth||n.body.offsetWidth,t.maxHeight=window.innerHeight||n.documentElement.clientHeight||n.body.offsetHeight,t.scrollTop=gx.dom.documentScroll(n).scrollTop,t.scrollLeft=gx.dom.documentScroll(n).scrollLeft):(i=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>n.body.clientHeight?t.maxHeight=n.body.clientHeight:(t.maxHeight=window.top.document.body.clientHeight,t.y=i.y),t.scrollTop=n.body.scrollTop,t.scrollLeft=n.body.scrollLeft,t.maxWidth=Math.min(window.top.document.body.clientWidth,n.body.clientWidth),window.top.document.body.clientWidth>n.body.clientWidth?t.maxWidth=n.body.clientWidth:(t.maxWidth=window.top.document.body.clientWidth,t.x=i.x)),t},_init:function(){}},_init:function(){var n,t;if(gx.lang.inherits(this.Popup,this.Dialog),this.ext._init(),n=this.getPopup(),n){try{n.frameDocument&&(gx.util.browser.isIE()?n.frameDocument=n.frameWindow.document:n.frameDocument.gxPopup=n)}catch(i){n.frameDocument=n.frameWindow.document;gx.dbg.logEx(i,"gxpopup.js","_init")}t=n.window.gx.popup;gx.fx.obs.addObserver("gx.onload",t,function(){this.autofit()}.closure(t));gx.fx.obs.addObserver("grid.onafterrefresh",t,function(n,t,i){t<i&&this.autofit()}.closure(t));gx.fx.obs.addObserver("gx.onafterevent",t,function(){this.autofit()}.closure(t))}}}}(gx.$);gx.ajax=function(n){function i(n,t,i){if(n>0){i=i||gx.O;gx.fn.setCurrentGridRow(n,t);var r=i.getGridById(n);r&&r.instanciateRow(t)}}var r=/\?(.*)/,u="X-FULL-AJAX-REQUEST",t=function(n,t,i){gx.dbg.logMsg("Unable to execute external object "+n+" - "+t+"("+i+")")};return{reqHeader:"GxAjaxRequest",resourceProvider:"",dfTimer:null,resolveParmKey:function(n){var t=!1;return n.av?t=n.av:n.ctrl&&n.prop?t=n.ctrl+n.prop:n.ctrl&&(t=n.ctrl),t},serviceUrl:function(n){var t=gx.ajax.selfUrl();return n&&(r.test(t)?t=t.replace(r,"?"+n+gx.http.urlParameterSeparator(t)+"$1"):t+="?"+n),t},validationMessage:function(n,t,i,r,f,e){var o=new gx.ajax.message(n,t,i,r,f,e);return gx.lang.apply(o,{isValidation:!0,beforeCall:gx.emptyFn,beforeAjaxCall:function(n){n.warnOnTimeout=!0;n.beforeSend=function(n){n.setRequestHeader(u,"1")}},beforeProcesResponse:function(n){for(var r=[],i=this.getParmsMetadata("input"),t=0;t<i.length;t++)i[t].av&&r.push(i[t].av);n.isValidation=!0;n.validationInput=r}})},message:function(t,i,r,u,f,e){var o;return{disableForm:e,gxO:i,grid:r,row:u,methods:[t],isValidation:!1,addMethod:function(n){this.methods.push(n)},gridsData:function(){var i=this.gxO.getGridById(this.grid,this.row),t={},r=function(n,t){var i=n.parentRow?n.parentRow.gxId:"";t[n.gridName]={id:n.gridId,lastRow:Math.max(0,Number(n.lastRowId)),pRow:i}},f,u;return i?(f=function(t,i,u,f){var e=function(n,t){return n?t.parentGrid===n&&gx.text.startsWith(t.parentRow.gxId,f)?t:e(n.parentGrid,t):null},o=function(n){return e(t,n)},s=n.map(gx.O.Grids,o);n.each(s,function(n,t){r(t,i)})},u=function(n,t){if(n){r(n,t);var i=gx.fn.currentGridRowImpl(n.gridId);i&&(t[n.gridName].lastRow=Math.max(0,Number(i.substr(-4,4))-1));u(n.parentGrid,t)}},f(i,t,this.gxO,this.row),u(i,t)):n.each(this.gxO.Grids,function(n,i){r(i,t)}),t},to_json:function(){var n={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};return this.fullPost&&(n.fullPost=this.fullPost),this.addGXStateParms(n),this.grid&&(n.grid=this.grid),n.grids=this.gridsData(),this.row&&(n.row=this.row.substring(0,4),n.pRow=this.row.substring(4)),gx.json.serializeJson(n)},getParmsMetadata:function(n){for(var o,i,t,u,r=[],f={},e=0,s=this.methods.length;e<s;e++)if(o=this.methods[e],this.gxO.EvtParms[o])for(i=this.gxO.EvtParms[o][n=="input"?0:1],t=0;t<i.length;t++)i[t].postForm||i[t].sPrefix||i[t].sSFPrefix||i[t].sCompEvt?r.push(i[t]):(u=gx.ajax.resolveParmKey(i[t]),u&&(f[u]===undefined?(f[u]=r.length,r.push(i[t])):r[f[u]].grid===undefined&&i[t].grid!==undefined&&(r[f[u]]=i[t])));return r},parmFromHidden:function(n,t){var f=gx.O,i,r,u;return gx.setGxO(t),gx.lang.emptyObject(n)||gx.lang.emptyObject(t)||!n.v2v||(r=this.gxO.IsMasterPage?n.fld+"_MPAGE":gx.O.CmpContext+n.fld,u=gx.fn.getHidden(r),n.v2v(u),i=t[n.gxvar]),gx.setGxO(f),i},getInputParms:function(){for(var a,o,v,y,p,d,s,h,g,w,b=this.getParmsMetadata("input"),nt=this.gxO.CmpContext,f=[],k=[],i,r,t,c,u,e,l=0,tt=b.length;l<tt;l++)if(t=undefined,r=undefined,e="",i=b[l],i.postForm){a={};a.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(a,gx.http.postDataFormat.JSON);for(o in gx.http.viewState)this.fullPost[o]||gx.http.viewState[o]===undefined||(this.fullPost[o]=gx.http.viewState[o])}else this.gxO.isTransaction()&&this.grid>0&&this.row&&i.av==="Gx_mode"&&i.fld==="vMODE"?f.push(gx.fn.getGridRowModeImpl(gx.fn.gridLvl(this.grid),this.grid,this.row)):i.prop=="Referrer"?f.push(gx.referrer?gx.referrer:document.referrer):i.sPrefix?f.push(this.gxO.sPrefix()):i.sSFPrefix?f.push(""):i.sCompEvt?f.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),"")):i.ctrl?(i.prop?i.prop=="GridRC"?(v=gx.parentGridRow(i.grid,this.gxO),y=v?"_"+v:"",r={gridRC:gx.fn.getHidden(this.gxO.sPrefix()+i.av+y),rowSuffix:y}):r=this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+i.ctrl,i.prop):(t=this.gxO.getValidStructFld(i.ctrl),t&&(c=gx.fn.getControlGridRef(t.fld,t.grid),gx.html.controls.isMultiSelection(t.ctrltype)?e=gx.dom.comboBoxToObj(c,r):t.ctrltype==="radio"&&(e=gx.dom.radioToObj(c,r)),e&&(r=e))),f.push(r!==undefined?r:null)):(t=this.getParmVarVStruct(i),t&&typeof t.c2v=="function"&&typeof t.val=="function"&&(p=t.grid===this.grid?this.row:gx.fn.currentGridRowImpl(t.grid),t.val(p)!==undefined&&t.c2v(p)),t&&t.isuc===!0&&(u=this.row||(t&&t.grid?gx.fn.currentGridRowImpl(t.grid):undefined),d=t.getUCInstance(u)||t.uc,d.execC2VFunctions()),r=typeof this.gxO[i.av]=="function"?this.gxO[i.av](this.row):this.gxO[i.av]===undefined?i.fld?gx.fn.getControlValue(i.fld):"":this.gxO[i.av],s=gx.fn.vStructForOld(i.av),s&&(s.type=="date"||s.type=="dtime")&&typeof r=="string"&&(r=new gx.date.gxdate(r)),this.isValidation&&r instanceof gx.date.gxdate&&!r.HasDatePart&&(h=new gx.date.gxdate(""),h.assign_date(r),h.JsonNullFormat=gx.date.jsonNullFormat.YearOne,r=h),i.grid!==undefined?(g=r,w=[],n.each(this.gxO.Grids,function(n,f){var e,o,s;if(f.gridId===i.grid){if(e=f.parentRow?f.parentRow.gxId:"",t)for(r={pRow:e,c:[],hc:[],hsh:[],v:g},o=1;o<=f.lastRowId;o++)u=gx.grid.getPaddedRowId(o),s=t.isuc?gx.fn.getControlValue(t.fld+"_"+u+e):t.val(u+e),r.c.push(s),i.hsh&&r.hsh.push(gx.fn.getHash(nt,t.fld,u+e)),gx.lang.emptyObject(t.hc)||r.hc.push(gx.fn.getControlValue("GXHC"+t.fld+"_"+u+e));else gx.lang.isArray(r)&&(r={pRow:e,c:r,v:r[Number(gx.fn.currentGridRowImpl(i.grid))-1]});w.push(r)}}),r=w):i.hsh&&(t&&t.grid?(u=gx.fn.currentGridRowImpl(t.grid)||"",u===""&&(r=this.parmFromHidden(t,this.gxO))):u="",k.push({hsh:gx.fn.getHash(this.gxO.CmpContext,i.fld,u),row:u})),f.push(r!==undefined?r:null));return{input:f,hashed:k}},refreshOutputParms:function(){for(var r=this.getParmsMetadata("output"),u,n,t,i=0,f=r.length;i<f;i++)n=undefined,u=r[i],n=this.getParmVarVStruct(u),n&&n.grid&&typeof n.c2v=="function"&&typeof n.val=="function"&&(t=gx.fn.currentGridRowImpl(n.grid),n.val(t)!==undefined&&n.v2c(t))},getParmVarVStruct:function(n){var t,i;return n.fld!==undefined?n.fld?this.gxO.getValidStructFld(n.fld):null:this.grid&&this.row&&(t=this.gxO.getGridById(this.grid),t&&(i=t.grid.getColumnForVar(n.av),i))?this.gxO.getValidStruct(i.gxId):void 0},addGXStateParms:function(n){var t={};gx.notifications&&gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID")&&(t.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(t)||(n.gxstate=t)},beforeCall:function(){f&&gx.fn.objectOnpost()},call:function(){var i,r,t;return o=n.Deferred(),i=gx.O,gx.setGxO(this.gxO),this.grid&&this.row&&(r=gx.fn.currentGridRowImpl(this.grid),gx.fn.setCurrentGridRow(this.grid,this.row)),this.beforeCall(),t=this.getInputParms(),f?(this.parms=t.input,this.hashedParms=t.hashed,this.doAjaxCall(!1,this.disableForm)):(this.doClientSideCall(),this.refreshOutputParms()),this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,r),gx.setGxO(i),o.promise()},doAjaxCall:function(n,t){var r=this.to_json(),i;gx.evt.setProcessing({status:!0,ctx:"doAjaxCall"});t!==!1&&this.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[r,n]);i=gx.ajax.getPostInfo(this.gxO,r,n);i.handler=this.ajaxCallHandler.closure(this);i.error=this.ajaxCallError.closure(this);i.handleAllStatusCodes=!0;i.url=gx.ajax.serviceUrl((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));i.reqData=r;i.always=this.callback;i.contentType="application/json";this.beforeAjaxCall(i);gx.http.doCall(i)},beforeAjaxCall:gx.emptyFn,doClientSideCall:function(){var n=this.callback();o.resolve(n)},ajaxCallError:function(){o.resolve(!1);i.endFeedback()},afterAjaxCallHandler:function(n,t,i){i=i||gx.O;gx.evt.setProcessing({status:!1,ctx:"afterAjaxCallHandler"});o.resolve(!n);n&&(i.endFeedback(),gx.fx.obs.notify("gx.onafterevent",[t]))},ajaxCallHandler:function(n,t,i){var r,u,f;gx.evt.enter=!1;gx.csv.lastEvtResponse=null;gx.http.lastStatus=i.status;r=!1;i.status==gx.http.STATUS_FORBIDDEN?(gx.util.alert.showError(gx.getMessage("GXM_runtimeappsrv")+" ("+i.status+")"),r=!0):gx.http.checkResponseStatus(i,this.isValidation)?r=!0:i.status<200||i.status>299?(gx.dom.writeError(i.responseText,gx.getMessage("GXM_runtimeappsrv"),i.status),r=!0):gx.http.validJsonResponse(i,t)?(u=gx.json.evalJSON(t),u==null?gx.dom.writeError(t.toString(),gx.getMessage("GXM_runtimeappsrv"),i.status):(gx.csv.lastEvtResponse=u,f={response:u,isPostBack:!0,context:{fullAjaxCall:!0},gxObject:this.gxO,gridId:this.grid,row:this.row},this.beforeProcesResponse(f),gx.ajax.setJsonResponse(f).done(function(){gx.fx.obs.notify("gx.onafterevent",[u])}))):r=!0;this.afterAjaxCallHandler(r,u,this.gxO)},beforeProcesResponse:gx.emptyFn,startFeedback:function(){this.gxO.startFeedback(!1,this.isValidation)}}},maxGETLength:function(n){return n.AjaxSecurity?600:1350},getImageUrl:function(n,t){var i=n[t];return gx.lang.emptyObject(i)?"":(typeof i=="object"&&(n[t]=gx.ajax.resolveImageUrl(i)),gx.util.resourceUrl(gx.basePath+gx.staticDirectory+n[t],!0))},imageGuidToUrl:function(n){try{if(!gx.lang.emptyObject(this.resourceProvider)){var t=gx.ajax.objectUrl(this.resourceProvider)+"?image,"+encodeURIComponent(n)+",,"+encodeURIComponent(gx.theme);return gx.http.callBackend_simple(t,!0,!0,"GET",null,!0),gx.http.lastResponse}}catch(i){gx.dbg.logEx(i,"gxcallrpc.js","getImageUrl")}return n},resolveImageUrl:function(n){for(var t,i=0;i<n.length;i++)if(t=n[i],t.l==gx.languageCode&&t.t==gx.theme)return(t.i?"Resources/":"")+t.p},sendHeader:function(n){try{if(!gx.lang.emptyObject(this.resourceProvider)){var t=location.href;return gx.http.callBackend_simple(t,!0,!0,"HEAD",null,!0,!0,n),!0}}catch(i){}return!1},encryptParms:function(n,t){return n.AjaxSecurity?gx.sec.encrypt(t):t},doPost:function(n,t,i,r){var u,f;i!==!1&&gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[n,t]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);u=this.getPostInfo(gx.O,n,t);u.url=gx.ajax.serviceUrl(n);f=gx.O;u.onReady=function(){i!==!1&&f.endFeedback()};u.always=r;gx.http.doCall(u)},getPostInfo:function(n,t,i){var r={};return r.formNode=gx.dom.form(),r.method="POST",r.encoding="UTF-8",r.useCash=!1,r.gxO=n,i===!0&&(r.sync=!0),r.handler=gx.http.postHandler,this.multipartInfo(r),r},multipartInfo:function(n){var t=gx.dom.hasSelectedFile();t&&(n.multipart=!0,n.mimetype="text/html",n.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(t,i){var e=t.refresh_form!==undefined,o=t.refresh||t.refresh_form,r,u,f;if(o=="GET")gx.http.reload(!0);else return r="RFR",i.IsMasterPage&&(r=r+"_MPAGE"),u=e||!gx.pO.fullAjax?gx.pO:i,f=u.fullAjax,u.executeServerEvent(r,!gx.pO.fullAjax,null,!0,f);return n.Deferred().resolve()},doRefresh:function(n){var t=n.IsMasterPage?"RFR_MPAGE":"RFR";n=gx.pO.fullAjax?n:gx.pO;n.executeServerEvent(t,!0,null,!0,n.fullAjax)},dispatchCommands:function(n,t,i,r){var e,s,l,a,h,v,f,u,y,c,p,o;if(i=i||{},a=i.ignoreCmds||[],r=r===undefined?0:r,t=t||gx.O,n&&n.length>0){for(v=n.length,f=r;f<v;f++)if(u=n[f],y=Object.keys?Object.keys(u)[0]:"",!gx.util.inArray(y,a)){if(u.set_focus&&gx.fn.usrSetFocus(u.set_focus),u.print&&gx.printing.print(u.print),u.close&&(c=[],u.close.values instanceof Array&&(c=u.close.values),gx.fn.closeWindow(c,{parmsMetadata:u.close.metadata,updateParms:i.updateParms},t)),u.refresh!==undefined||u.refresh_form!==undefined||u.cmp_refresh===""){gx.ajax.dispatchRefreshCommand(u,t).then(function(){gx.ajax.dispatchCommands(n,t,i,f+1)});return}if(u.redirect&&(e=u.redirect,e.url=gx.ajax.removeGXParms(e.url),gx.http.redirect(e.url,e.forceDisableFrm===1,e.forceDisableFrm===2,t)),u.calltarget&&gx.nav.callFromServerRedirect(u.calltarget.url,u.calltarget.target),u.callback&&u.callback.apply(u.callback.scope,u.args||[]),u.cmp_refresh&&(p=gx.pO.getWebComponent(u.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",p)),u.popup){n.length>f+1&&(gx.lang.isArray(u.popup)?u.popup[7]=n.slice(f+1):u.popup.OncloseCmds=n.slice(f+1));gx.popup.open(u.popup,t);break}if(u.ucmethod&&(s=gx.getObj(u.ucmethod.CmpContext,u.ucmethod.IsMasterPage),s)){if(l=gx.O,gx.setGxO(s),o=gx.O.getUserControl(u.ucmethod.Control),o&&typeof o[u.ucmethod.Method]=="function")try{o[u.ucmethod.Method].apply(o,u.ucmethod.Parms);h=!0}catch(w){gx.dbg.logEx(w,"gxcallrpc.js","Failed to execute usercontrol method: "+u.ucmethod.Method)}gx.setGxO(l)}u.exomethod&&(gx.ajax.dispatchExoMethod(u.exomethod),h=!0);u.exoprop&&gx.ajax.dispatchExoProperty(u.exoprop)}h&&t.showMessages(!0)}gx.fn.usrSetFocus_commit()},resolveExoObject:function(n,t){var u=n[t],f,i,r,e;if(!u){for(f=t.split("."),i=window,r=0,e=f.length;r<e;r++)if(i=i[f[r]],i===undefined)return;u=i}return u},dispatchExoMethod:function(n){var r=gx.getObj(n.CmpContext,n.IsMasterPage),f,i,u;if(r){f=gx.O;gx.setGxO(r);try{i=this.resolveExoObject(r,n.ObjectName);i&&n.ObjectName==="GlobalEvents"?i.executeMethod(n.Method,n.Parms):n.IsEvent?gx.fx.obs.notify(n.Method,n.Parms):i?(u=i[n.Method],u?u.apply(i,n.Parms):t("method","Method not found",n.Method)):t("method","Object not found",n.ObjectName)}catch(e){gx.dbg.logEx(e,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(f)}}},dispatchExoProperty:function(n){var i=gx.getObj(n.CmpContext,n.IsMasterPage),u,r;if(i){u=gx.O;gx.setGxO(i);try{r=this.resolveExoObject(i,n.ObjectName);r?r[n.PropertyName]=n.Value:t("property","Object not found",n.ObjectName)}catch(f){gx.dbg.logEx(f,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(u)}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(n,t,i,r,u,f,e,o){var l,h,c,s;if(t=t||gx.O,n&&n.length>0)for(l=n.length,c=0;c<l;c++)s=n[c],s.load?(h=t.getGridById(s.load.grid,o),h&&(s.load.props.values=s.load.values,h.loadNewRows(s.load.props))):s.addlines&&(gx.lang.doCall(gx.fn.setJsonValues,u),gx.lang.doCall(gx.fn.setJsonProperties,e,o),h=t.getGridById(s.addlines.grid,o),h&&h.getNewRows(s.addlines.count))},willLeavePage:function(n){var i,t,r;if(n)for(i=n.length,t=0;t<i;t++)if(r=n[t],r.close)return!0;return!1},getRedirectCommand:function(n){var r,t,i;if(n)for(r=n.length,t=0;t<r;t++){if(i=n[t],i.popup)return null;if(i.redirect)return i}return null},saveJsonResponse:function(n){this.lastJsonResponse=n},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){return this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands,this.lastJsonResponse},setPostResponse:function(n,t,i){return this.setJsonResponse({response:n,isPostBack:!0,gxObject:t||gx.O,context:i})},setJsonResponse:function(t){var o=n.Deferred(),i=t.response,e=t.isPostBack,p=t.afterCmpLoaded,r=t.gxObject,s=t.gridId,h=t.row,w=t.context||{},l=!!t.isValidation,f=gx.fn,u=gx.lang.doCall,a,v,c=this.willLeavePage(i.gxCommands),d=this.getShouldUpdatePropertyFunction(i),b,y,k;return r&&(a=gx.O,gx.O=r),b=function(n,t){(t||!gx.popup.currentPopup)&&n.endFeedback()},s&&h&&(v=gx.fn.currentGridRow(s),gx.fn.setCurrentGridRow(s,h)),gx.evt.srvCommand?(gx.evt.srvCommand=!1,u(gx.ajax.dispatchCommands,i.gxCommands,r),o.resolve(c)):(y=this.getRedirectCommand(i.gxCommands),y&&y.redirect.forceDisableFrm===1?(u(gx.ajax.dispatchCommands,i.gxCommands,r,{ignoreCmds:["refresh","cmp_refresh"]}),o.resolve(c)):c?(u(gx.ajax.dispatchCommands,i.gxCommands,r),o.resolve(c)):(u(gx.ajax.dispatchPreCommands,i.gxCommands,r,i.gxComponents,i.gxHiddens,i.gxValues,i.gxGrids,i.gxProps,h),u(f.clearCompontHiddens,i.gxComponents),k=u(f.setJsonHiddens,r,i.gxHiddens),u(f.setJsonComponents,i.gxComponents,i.DynComponentMap,i.gxHiddens,function(y){var nt;gx.http.loadStyles();gx.updateTheme();e&&gx.fn.installComponents(!1);typeof p=="function"&&p();a&&(gx.O=a);var tt=u(f.setJsonValues,i.gxValues,l,s,h,d),it=u(f.setJsonProperties,i.gxProps,h),g=[],rt=n.map(y,function(n){var i=f.cmpContextFromCtrl(n),t=gx.pO.WebComponents[i];if(t)return gx.lang.objToArray(t.UserControls).concat(t.getUserControlGrids())});l||!r.isTransaction()&&r.fullAjax||gx.util.balloon.clearAll();f.enableDisableDelete();e&&(g=u(f.loadJsonGrids,i.gxGrids,e));l&&gx.ajax.transformValidationMessages(t,r,i.gxMessages);u(f.setErrorViewer,i.gxMessages);e&&(gx.pO.supportAjaxEvents&&(nt=gx.lang.arrayUnique(it.concat(tt,rt,g,k))),f.objectPostback(nt,y),l||f.setFocusAfterLoad(!0),gx.dom.indexElements());w.fullAjaxCall&&!w.autoRefreshing&&b(r,e);u(gx.ajax.dispatchCommands,i.gxCommands,r);v&&gx.fn.setCurrentGridRowSafe(s,v);o.resolve(c)},e))),o},getShouldUpdatePropertyFunction:function(n){var i,t,r,u,f={};if(n.gxGrids)for(i=0;i<n.gxGrids.length;i++)for(u=n.gxGrids[i],t=0;t<u.Count;t++)for(r=0;r<u[t].Props.length;r++)f[u[t].Props[r][0]]=!0;return function(n){return!f[n]}},transformValidationMessages:function(n,t,i){var r=t.cmpCtx||"MAIN";typeof i[r]!="undefined"&&(i[r]={fields:n.validationInput,msgs:i[r]})},disableForm:function(n,t){n=n===undefined||n;gx.pO.startFeedback(t,n)},enableForm:function(n){n=n||gx.O;gx.pO&&gx.pO.endFeedback();n!=gx.pO&&n.endFeedback()},isFormEnabled:function(){var n=gx.getActiveContext();return n==top&&gx.popup.getPopup()!=null?!0:gx.pO?!n.gx.pO.isFeedbackOn()&&!n.gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){var r,f,e,o,s;if(gx.ajax.formAutocomplete&&!gx.grid.drawAtServer&&(!gx.util.browser.isIE()||!(gx.util.browser.isCompatMode()||document.documentMode<=7||gx.util.browser.ieVersion()<=7))){var u="gx_iframe_force_ajax_autocomplete",t=gx.dom.form(),i=document.createElement("iframe");i.id=u;i.name=u;i.style.cssText="display: none";i.src="/content/blank";document.body.appendChild(i);r=document.createElement("input");r.type="submit";r.style.cssText="display: none";t.appendChild(r);f=t.target;e=t.action;t.target=i.name;t.action=i.src;o=n(r);s=function(n){return n.stopPropagation(),!0};gx.evt.attach(r,"click",s);o.trigger("click");setTimeout(function(){t.target=f;t.action=e;t.removeChild(r);document.body.removeChild(i)})}},suggest:function(n,t,i,r,u,f,e){var o=i,s=new gx.fx.suggestProvider(n,t,i,r);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(i),s,o,u,f,e)},hideCode:function(n,t,i){for(var e=function(n){gx.fn.setVarValues(i,n)},u=this.objectUrl()+"?",f="gxajaxHideCode_"+t,o=n.length,r=0;r<o;r++)f+=","+encodeURIComponent(eval(n[r]));return u+=gx.ajax.encryptParms(gx.O,f),gx.http.callBackend_impl(e,u,!0,gx.http.modes.retval),this.lastStatus},callCrl:function(n,t,i){var f=i?gx.fn.setGridComboValues:gx.fn.setComboValues,e=i?t:gx.fn.screen_CtrlRef(t).name,o=function(n){f(e,n)},r=this.objectUrl()+"?",u="gxajaxCallCrl_"+t+",";u+=this.arrayToUrl(n);r+=gx.ajax.encryptParms(gx.O,u);gx.http.callBackend_impl(o,r,!0,gx.http.modes.retval)},refreshGrid:function(n,t){var c=gx.O,s,u,i,h;gx.setGxO(n.parentObject);var f="GET",e=gx.ajax.gxObjectUrl(n.parentObject)+"?",o="gxajaxGridRefresh_"+n.gridName+","+t,r;if(gx.fx.obs.notify("grid.onbeforerefresh",[n]),n.autoRefreshing=!0,gx.csv.autoRefreshing=n,s=n.grid.rows.length,n.setPagingVars(0,0),o.length>gx.ajax.maxGETLength(gx.O))for(f="POST",r=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+n.gridName)],u=t.split(","),i=0,h=u.length;i<h;i++)r.push("GXParm"+i+"="+u[i]);else e+=gx.ajax.encryptParms(gx.O,o);n.grid.mask();gx.http.doCall({method:f,url:e,reqData:r,handler:function(t,i,r){gx.http.postHandler(t,i,r,{autoRefreshing:!0});var u=n.grid.rows.length;gx.fx.obs.notify("grid.onafterrefresh",[n,s,u])},always:function(){gx.csv.autoRefreshing=null;n.autoRefreshing=!1;n.grid.unmask();gx.setGxO(c)}})},newRows:function(n,t,i,r,u,f,e,o){var w=this.objectUrl()+"?",s=[],h=gx.O,a=gx.fn.gridObj(n,e?i+"_"+e:i,t),v=null,b="GET",c=null,k="gxajaxNewRow_"+i,l,d,y,p;if(s.push(k),s.push(r),s.push(u),s.push(f),(h.IsComponent||h.IsTypeComponent)&&s.push(h.CmpContext),s=s.concat(a.getParmsValues(!1,a.postingVariables,!1)),c=s.join(","),c.length>gx.ajax.maxGETLength(h)){for(b="POST",v=["GXEvent="+gx.ajax.encryptParms(h,k)],l=1,d=s.length;l<d;l++)v.push("GXParm"+(l-1)+"="+s[l]);c=v.join("&")}else w+=gx.ajax.encryptParms(h,c),c=null;gx.http.callBackend_simple(w,!0,null,b,c);y=gx.http.lastResponse;y&&(p=gx.json.evalJSON(y),o.call(a,p),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[p]))},loadCrl:function(n,t,i){if(gx.fn.getControlValue("IsConfirmed")=="1"){this.lastStatus=0;return}var f=function(n){gx.fn.setVarValues(i,n)},r=this.objectUrl()+"?",u="gxajaxExecAct_"+n+",";u+=this.arrayToUrl(t);r+=gx.ajax.encryptParms(gx.O,u);gx.http.callBackend_impl(f,r,!0,gx.http.modes.retval)},udp:function(n,t,i){var f=function(n){gx.fn.setVarValues(i,n)},r=this.objectUrl()+"?",u=n+",";u+=this.arrayToUrl(t);r+=gx.ajax.encryptParms(gx.O,u);gx.http.callBackend_impl(f,r,!0,gx.http.modes.retval)},srvEvt:function(n,t,i,r){var e=function(n){gx.fn.setVarValues(r,n)},u=this.objectUrl()+"?",f=n+","+t+",";f+=this.arrayToUrl(i);u+=gx.ajax.encryptParms(gx.O,f);gx.http.callBackend_impl(e,u,!0,gx.http.modes.full)},validSrvEvt:function(t,r,u){var s=gx.fn.currentGridRowImpl(r),f,e,o;return r>0&&(f=gx.fn.currentGridRowImpl(r),i(r,s,u)),gx.fx.delayedValidation?(e=n.Deferred(),o=arguments,gx.fx.obs.addObserver("gx.validation",this,function(){return this.validSrvEvt_impl.apply(this,o).then(function(n){e.resolve(n);i(r,f,u)})},{single:!0,"async":!0}),e.promise()):this.validSrvEvt_impl.apply(this,arguments).then(function(n){return i(r,f,u),n})},validCliEvt:function(n,t,i,r){return r=r||gx.O,gx.evt.dispatcher.dispatch({eventName:n,fn:i},r,t,gx.fn.currentGridRowImpl(t),!1,undefined,undefined,gx.evt.dispatcher.types.validation)},validSrvEvt_impl:function(n,t,i){i=i||gx.O;var r=gx.fn.currentGridRowImpl(t);return gx.evt.dispatcher.dispatch(n,i,t,r,!0,undefined,undefined,gx.evt.dispatcher.types.validation).then(function(n){return i.refreshOlds(),n})},getParmsPostData:function(n){for(var i="",t=0;t<n.length;t++)t>0&&(i+="&"),i+="GXParm"+t+"="+this.parmToUrl(n[t],!0);return i},getCallerUrl:function(n){var t,i;return gx.stackSupported()?(t=gx.call_stack_storage.get(gx.stackId(n)),t=t||[],i=t.length==1&&t[0]!=gx.ajax.selfUrl()?t[0]:"",t.length>1?t[t.length-2]:i):gx.fn.getHidden("sCallerURL")},pushReferer:function(n,t){var i,r,u;t=typeof t=="undefined"?location.href:gx.absoluteurl(t);gx.stackSupported()?(typeof n=="undefined"&&(n=gx.popup.popuplvl()),i=gx.call_stack_storage.get(gx.stackId(n)),i=i||[],t!=gx.util.lastArray(i)&&i.push(t),gx.call_stack_storage.set(gx.stackId(n),i)):(r=this.objectUrl()+"?",u="dyncall,PushReferer,"+encodeURIComponent(t),r+=gx.ajax.encryptParms(gx.O,u),gx.http.callBackend_simple(r,!0,!0))},windowClosed:function(n){var i,t,r,u,f;gx.stackSupported()?n==-1?(i=gx.stackId(gx.popup.popuplvl()),t=gx.call_stack_storage.get(i),t=t||[],t.pop(),gx.call_stack_storage.set(i,t)):gx.call_stack_storage.remove(gx.stackId(n)):(r="",r=n==-1?",PopReferer":",DeleteReferer,"+n.toString(),u=this.objectUrl()+"?",f="dyncall"+r,u+=gx.ajax.encryptParms(gx.O,f),gx.http.callBackend_simple(u,!0,!0))},aggSel:function(n,t,i){var r=this.objectUrl()+"?",u="gxajaxAggSel"+t+"_"+n+",",f;return u+=this.arrayToUrl(i),r+=gx.ajax.encryptParms(gx.O,u),f=gx.http.callBackend_impl(null,r,!1,gx.http.modes.retval),f[0]},aggSelDecimal:function(n,t,i,r,u){return gx.num.parseFloat(this.aggSel(n,t,u),i,r)},aggSelInteger:function(n,t,i){return parseInt(this.aggSel(n,t,i),10)},dynComponent:function(t,i,r,u){var e=n.Deferred(),o,f;t=gx.util.removeBaseUrl(t).toLowerCase();o=t;gx.gen.isDotNet()&&(o+=".aspx");var h=gx.ajax.objectUrl(o),s="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(r)+"&GXParm0="+encodeURIComponent(u);for(f=0;f<i.length;f++)s+="&GXParm"+(f+1).toString()+"="+encodeURIComponent(typeof i[f].getUrlVal=="function"?i[f].getUrlVal():i[f]);return gx.http.doCall({method:"POST",url:h,reqData:s,handler:function(n,t){e.resolve(gx.json.evalJSON(t))},error:function(){e.reject()}}),e.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(n){return n.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(n){var i,t,r;if(n&&n.ajaxSecurityToken)return i=n.CmpContext?n.CmpContext:"",t="GX_AUTH_"+i+n.ServerClass,t=t.toUpperCase(),r=gx.fn.getHidden(t)||n.InternalParms[t],{id:t,value:r}},arrayToUrl:function(n,t){for(var r="",u=n.length,i=0;i<u;i++)r+=this.parmToUrl(n[i],t)+",";return r},ControlValuesObject:function(n,t){var i=gx.fn.vStructForVar(gx.unprefixVar(n)),r;return i!=null&&gx.html.controls.isMultiSelection(i.ctrltype)?(r=gx.fn.getControlGridRef(i.fld,i.grid),gx.dom.comboBoxToObj(r,t)):null},parmToUrl:function(n,t){var i=eval(n),r,f,e,o,u;return i instanceof Array&&i.length==2&&typeof i[0]=="string"&&typeof i[1]=="string"&&(r=gx.fn.vStructForVar(i[0]),r!=null&&(i=gx.fn.getGridCtrlProperty(r.grid,r.fld,i[1]))),t&&(f=gx.ajax.ControlValuesObject(n,i),f&&(i=f)),typeof i=="object"&&(i=gx.json.serializeJson(i)),(typeof i=="undefined"||i==null)&&(e=!1,n&&(o=n.indexOf("gx.O."),o===0&&(n=gx.unprefixVar(n),u=gx.fn.getHidden(gx.O.CmpContext+n),u!=null&&typeof u!="undefined"&&(i=u,e=!0))),e||(i="")),encodeURIComponent(i)},gxObjectUrl:function(n){return this.objectUrl(n.serviceUrl,n&&n.fullAjax?n.CmpContext:undefined)},objectUrl:function(n,t){t=t!==undefined?t:gx.csv.cmpCtx;var i="";return n?i=n:(i=t?gx.fn.getControlValue(t+"_CMPPGM"):gx.ajax.selfUrl(),i!=null&&(i=i.replace(/\?.*/,""),i=i.replace(/#[\s\S]*$/,"")),i=this.objnameFromUrl(i)),gx.absoluteurl(i)},objnameFromUrl:function(n){n.indexOf("?")>=0&&(n=n.split("?")[0]);var t=n.split("/"),i=t.length;return i===0?n:t[i-1]},_init:function(){var n,t;if(this.resourceProvider=gx.fn.getHidden("GX_RES_PROVIDER"),gx.stackSupported()){if(n=gx.json.evalJSON(gx.fn.getHidden("GX_NAV")),n)for(t=0;t<n.length;t++)gx.ajax.pushReferer(gx.popup.popuplvl(),n[t]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function n(n,t){var i=$("#"+n.id+"_dp_trigger");return i.length>0?i.get(0):t&&t.length>0&&(i=$("[data-gx-attached-ctrl~='"+n.id+"']"),i.length>0)?i.parent().get(0):void 0}this.init=function(n,t){this.id=n;this.balloonid=n+"_Balloon";this.hasMessage=!1;this.messageErr="";this.messageWar="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=t||[]};this.clear=function(){this.hasMessage=!1;this.messageErr="";this.messageWar="";this.active=!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(n){this.hasMessage||(this.messageWar=n,this.hasMessage=!0)};this.setAsFormatError=function(){this.isFormatError=!0;gx.csv.setFormatError(this.id,!1)};this.setError=function(n){this.hasMessage||(this.messageErr=n,this.isError=!0,this.hasMessage=!0,this.isFormatError&&gx.csv.setFormatError(this.id))};this.create=function(t,i,r,u){var f,h,o,e,s;return e=document.createElement("span"),e.id=t,e.className=r,f=document.createElement("div"),f.style.position="absolute",f.style.zIndex=100,f.style.display="none",h=document.createTextNode(u),e.appendChild(h),f.appendChild(e),gx.csv.messagePosition=="right"||gx.csv.messagePosition=="bottom"?(s=$(i).closest(".gx-attribute"),gx.csv.overlap===!0&&gx.runtimeTemplates&&s.length>0?s.append(f):(o=n(i),o?o.id.indexOf("_dp_trigger")>=0?$(o).closest(".dp_container").append(f):$(o).after(f):$(i).after(f))):gx.csv.overlap===!0?$(i).after(f):$(i).before(f),gx.csv.overlap===!0?(e.style.position="static",e.style.zIndex="1"):(f.style.position="relative",e.style.position="relative"),e};this.getControlValue=function(){for(var t=[gx.fn.getControlValue(this.id)],n=0,i=this.sourceElements.length;n<i;n++)t.push(gx.fn.getControlValue(this.sourceElements[n]));return t.join(";")};this.groupControl=function(n){var t=gx.dom.el(n);return t&&t.nodeName==="INPUT"&&t.type==="radio"&&(t=t.parentNode&&t.parentNode.tagName=="SPAN"?t.parentNode:gx.dom.findParentByTagName(t,"table")),t};this.hideBalloon=function(n){var t=n.parentNode;try{t&&(t.style.display="none")}catch(i){gx.dbg.logEx(i,"gxballoon.js","hideBalloon")}};this.showBalloon=function(t){try{var u=gx.csv.messagePosition,o=gx.dom.el(this.id),f=t.parentNode,s=$(f),i,r,h=gx.popup.ispopup()?"flipfit":"none",e=o,c=n(o,this.sourceElements);gx.lang.requestAnimationFrame(function(){if(gx.csv.overlap===!0){switch(u){case"top":i="left bottom";r="left top";break;case"right":i="left center";r="right center";e=c||e;break;case"bottom":i="left top";r="left bottom";break;case"left":i="right center";r="left center"}s.fadeIn().css("display","block");s.position({my:i,at:r,of:e,collision:h})}else f.style.display=(u=="top"||u=="bottom")&&gx.csv.overlap===!1?"block":"inline"})}catch(l){gx.dbg.logEx(l,"gxballoon.js","showBalloon")}};this.show=function(n){var s,t,e,o,h,u,c,r,i,f,l,a;if(document.readyState===undefined||document.readyState=="complete"){try{if(this.hasMessage===!1)return!0;if(t=gx.dom.el(this.id),t===null&&gx.csv.validatingUC!==null&&(t=gx.csv.validatingUC.getContainerControl()),t.type=="hidden"?(s=gx.dom.byId("span_"+this.id),s!==null&&(t=s)):t.nodeName==="INPUT"&&t.type==="radio"&&(r=gx.dom.byName(gx.dom.id(t)),t.parentNode&&t.parentNode.tagName=="SPAN"?t=t.parentNode:(c=r[0],t=gx.dom.findParentByTagName(t,"table"))),r){for(l=[],i=0,f=r.length;i<f;i++)l.push(r[i]);r=l}else for(r=[t],i=0,f=this.sourceElements.length;i<f;i++)r.push(gx.dom.el(this.sourceElements[i]));if(h=!0,this.active=!0,this.messageErr.length>0?(e="Error",o=this.messageErr):this.messageWar.length>0&&(e="Warning",o=gx.html.encode(this.messageWar)),e!==""&&(a=e+"Messages",gx.dom.addPrefixClass(t,e),u=gx.dom.byId(this.balloonid),u?(u.innerHTML=o,h=!1):u=this.create(this.balloonid,c?c:t,a,o)),gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl),gx.util.balloon.lastLbl=u,n===!0?gx.csv.oneAtAtime||this.showBalloon(u):this.showBalloon(u),gx.util.balloon.timerOn===!1&&gx.csv.dismissSeconds>0)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},gx.csv.dismissSeconds*1e3);else if(h)for(gx.csv.oneAtAtime&&(gx.evt.attach(t,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(t,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this))),f=r.length,i=0;i<f;i++)r[i].nodeName==="INPUT"&&r[i].type==="radio"?gx.evt.attach(r[i],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(r[i],"blur",gx.util.balloon.cvsHide,this);this.errorValue=this.getControlValue()}catch(v){gx.dbg.logEx(v,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){var n,t,i;try{if(n=this.groupControl(this.id),i=this.getControlValue(),i==this.errorValue)return;this.errorValue=i;t=gx.dom.byId(this.balloonid);t!=null&&(n&&(gx.dom.removePrefixClass(n,"Error"),gx.dom.removePrefixClass(n,"Warning")),this.hideBalloon(t),this.active=!1)}catch(r){}},cvsMouseOutHandler:function(){if(this.active){var n=gx.dom.byId(this.balloonid);n!=null&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=n.id&&this.hideBalloon(n):this.hideBalloon(n))}},cvsMouseOverHandler:function(){if(this.active){var n=gx.dom.byId(this.balloonid);n!=null&&this.showBalloon(n)}},clearAll:function(){var n,t,i;this.timerOn=!1;for(i in this.balloons)n=this.balloons[i],t=gx.util.balloon.cvsHide.closure(n),n.clear(),t()},clear:function(n){var t,i,r;try{t=gx.csv.ctxControlId(n);this.balloons[t]&&(i=this.balloons[t],r=gx.util.balloon.cvsHide.closure(i),i.clear(),r())}catch(u){gx.dbg.logEx(u,"gxballoon.js","clear")}},getNew:function(n,t,i){i=i||[];var f,e,r,u,o=i.length;typeof t!="undefined"&&(n=n+"_"+t);try{for(f=gx.fn.screen_CtrlRef(n),e=gx.dom.id(f),n=gx.csv.ctxControlId(e),u=0;u<o;u++)f=gx.fn.screen_CtrlRef(i[u]),e=gx.dom.id(f),i[u]=gx.csv.ctxControlId(e)}catch(s){gx.dbg.logEx(s,"gxballoon.js","getNew")}return this.balloons[n]?(r=this.balloons[n],r.sourceElements=i||[],r.clear()):(r=new this.impl,this.balloons[n]=r,r.init(n,i)),r}},function(n){var t=function(){var n={"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":"Asia/Amman Asia/Jerusalem Europe/Helsinki Asia/Damascus Africa/Cairo Asia/Gaza Europe/Minsk".split(" "),"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},i=function(n){return n=-n.getTimezoneOffset(),null!==n?n:0},f=function(){var n=i(new Date(2014,0,2)),t=i(new Date(2014,5,2)),r=n-t;return 0>r?n+",1":0<r?t+",1,s":n+",0"},e=function(){var n;if(!("undefined"==typeof Intl||"undefined"==typeof Intl.DateTimeFormat)&&(n=Intl.DateTimeFormat(),!("undefined"==typeof n||"undefined"==typeof n.resolvedOptions))&&(n=n.resolvedOptions().timeZone)&&(-1<n.indexOf("/")||"UTC"===n))return n},r=function u(n,t,i){var e;"undefined"==typeof t&&(t=864e5,i=36e5);for(var r=new Date(n.getTime()-t).getTime(),n=n.getTime()+t,o=new Date(r).getTimezoneOffset(),f=null;r<n-i;){if(e=new Date(r),e.getTimezoneOffset()!==o){f=e;break}r+=i}return 864e5===t?u(f,36e5,6e4):36e5===t?u(f,6e4,1e3):f},o=function(n,t,i,r){if("N/A"!==i)return i;if("Asia/Beirut"===t){if("Africa/Cairo"===r.name&&13983768e5===n[6].s&&14116788e5===n[6].e||"Asia/Jerusalem"===r.name&&13959648e5===n[6].s&&14118588e5===n[6].e)return 0}else if("America/Santiago"===t){if("America/Asuncion"===r.name&&14124816e5===n[6].s&&1397358e6===n[6].e||"America/Campo_Grande"===r.name&&14136912e5===n[6].s&&13925196e5===n[6].e)return 0}else if("America/Montevideo"===t){if("America/Sao_Paulo"===r.name&&14136876e5===n[6].s&&1392516e6===n[6].e)return 0}else if("Pacific/Auckland"===t&&"Pacific/Fiji"===r.name&&14142456e5===n[6].s&&13961016e5===n[6].e)return 0;return i},s=function(i,r){for(var v,f,e,u,c,l={},s=t.olson.dst_rules.zones,y=s.length,a=n[r],h=0;h<y;h++){for(v=s[h],f=s[h],e=0,u=0;u<i.length;u++)if(f.rules[u]&&i[u]){if(i[u].s>=f.rules[u].s&&i[u].e<=f.rules[u].e)e=0,e+=Math.abs(i[u].s-f.rules[u].s),e+=Math.abs(f.rules[u].e-i[u].e);else{e="N/A";break}if(864e6<e){e="N/A";break}}f=e=o(i,r,e,f);"N/A"!==f&&(l[v.name]=f)}for(c in l)if(l.hasOwnProperty(c))for(s=0;s<a.length;s++)if(a[s]===c)return c;return r},h=function(n){var i=function(){for(var n,i,o,u,s=[],f=0;f<t.olson.dst_rules.years.length;f++){n=t.olson.dst_rules.years[f];i=new Date(n,0,1,0,0,1,0).getTime();n=new Date(n,12,31,23,59,59).getTime();for(var e=new Date(i).getTimezoneOffset(),h=null,c=null;i<n-864e5;)o=new Date(i),u=o.getTimezoneOffset(),u!==e&&(u<e&&(h=o),u>e&&(c=o),e=u),i+=864e5;n=h&&c?{s:r(h).getTime(),e:r(c).getTime()}:!1;s.push(n)}return s}();return function(n){for(var t=0;t<n.length;t++)if(!1!==n[t])return!0;return!1}(i)?s(i,n):n};return{determine:function(){var r=navigator.userAgent.toLowerCase(),i=e();return i||(-1!=r.indexOf("firefox")&&"undefined"!=typeof Intl&&"undefined"!=typeof Intl.DateTimeFormat&&(r=Intl.DateTimeFormat(void 0,{timeZoneName:"long"}).format(new Date).toLowerCase(),-1!=r.indexOf("montevideo")||-1!=r.indexOf("uruguay"))&&(i="America/Montevideo"),i||(i=t.olson.timezones[f()]),"undefined"!=typeof n[i]&&(i=h(i))),{name:function(){return i}}}}}();t.olson=t.olson||{};t.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};t.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:"undefined"!=typeof define&&null!==define&&null!=define.amd?define([],function(){return t}):"undefined"==typeof n?window.jstz=t:n.jstz=t}();gx.livePrev=function(n){var t=gx.ajax.getPostInfo("",!1);postInfo=gx.ajax.getPostInfo("",!1);var i=function(n){return n.replace(/^data:(image\/png;base64)?,/,"")},r=function(t,i){var u=t.CmpContext+i,r;return t==gx.pO.MasterPage&&(u=u+"_MPAGE"),r=n("#"+u),r.length==0&&(r=n("[id^="+u+"]")),r.length==0&&(r=n("[name="+u+"]")),r.length==0&&(r=n("[name^="+u+"]")),r.length==0&&(r=n("[id^=span_"+u+"]")),r},u=function(n,t){if(n){var i=n.offset();i&&(t.x=i.left,t.y=i.top);t.w=n.outerWidth();t.h=n.outerHeight()}},f=function(n){var t=gx.pO.getComponentByPrefix(n)||(gx.pO.MasterPage?gx.pO.MasterPage.getComponentByPrefix(n):null),r,i;if(t)return t.id;for(r=gx.pO.WebComponents.length,i=0;i<r;i++)if(t=gx.pO.WebComponents[i],t=t.getComponentByPrefix(n.replace(new RegExp("^"+t.CmpContext),"")),t)return t.id;return null},e=function(n){n.setRequestHeader("GeneXus-Language",gx.languageCode);n.setRequestHeader("DeviceOSName","Web");n.setRequestHeader("DeviceName","Web Simulator");n.setRequestHeader("DeviceId",clientGUID);n.setRequestHeader("GeneXus-Theme",gx.theme)};return{}}(gx.$);gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1?(gx.livePrevWS.IPNamesIdx+=1,gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx],gx.livePrev.port=gx.livePrevWS.FIRST_PORT,gx.livePrevWS.Connect()):gx.livePrev.port<gx.livePrevWS.LAST_PORT?(gx.livePrevWS.IPNamesIdx=0,gx.livePrev.port+=1,gx.livePrevWS.Connect()):gx.util.alert.showMessage("Can not Connect to LivePreview",{dismissmitAt:5e3})},onMessage:function(n){var r=function(n){var t=$.map(document.styleSheets,function(t){return t.href==n?t:null});return t.length>0?t[0]:undefined},t=function(n,t,i){return i((n||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase(),(t||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase())},i=function(n,i,r){var f=n.cssRules,u=f.length,e=!1,o=!1;$.each(f,function(r,f){if(f&&f.selectorText&&t(f.selectorText,i.replace(":","::"),function(n,t){return n==t})){n.deleteRule(r);u=r;e=!0;return}});e||$.each(f,function(f,e){e&&e.selectorText&&t(e.selectorText,i.replace(":","::")+",",function(n,t){return n.indexOf(t)==0})&&(n.deleteRule(f),u=f,n.insertRule(e.selectorText+r.replace(/.*{/,"{"),u),o=!0)});o||n.insertRule(r,u)},u=function(n){var h=gx.getThemeElement(),c=h.id,o=r(h.href),s,e,f,u;if(o)for(s=n.indexOf("@media",0)==0,e=n.split(/{|}/),f=0;f<e.length-1;f+=2)u=e[f].replace(/(\r\n|\r|\n| *$)/gm,""),gx.lang.emptyObject(u)||(s?$.each(o.cssRules,function(n,r){if(s&&!r.selectorText){var o=r.cssText.split(/{/)[0];if(t(o.replace(/ all and/gm,""),u)){u=e[f+1].replace(/(\r\n|\r|\n| )/gm,"");i(r,u,u+" {"+e[f+2]+"}");return}}}):i(o,u,u+" {"+e[f+1]+"}"))},n=gx.json.evalJSON(n);n.Type==="KBOK"?gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+gx.livePrev.port,{dismissmitAt:2e3}):n.Type==="KBDoesNotMatchGUID"?gx.livePrevWS.onError():n.Type==="ThemeStyleChanged"&&u(n.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=0;gx.livePrevWS.SocketConnect()},onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var n={};gx.livePrev.port=gx.livePrev.port||gx.livePrevWS.FIRST_PORT;n.port=gx.livePrev.port;n.wsProtocol=location.protocol==="https:"?"wss://":"ws://";n.host=gx.livePrevWS.host+":"+n.port;n.resourceUrl="/live/";n.namespace="livepreview";n.maxRetries=10;n.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();gx.livePrevWS.webSocket=new gx.webSocket(n);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3e3)},_init:function(){var f=function(){return!gx.lang.emptyObject(gx.livePreviewUri)},t,i;if(f()){gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",gx.livePrevWS,gx.livePrevWS.onOpen,{single:!1});gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:!1});gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});t="GXClientID";i=function(){var n=gx.http.getCookie(t);return n=n||gx.guid.generate(),gx.http.setCookie(t,n,1,!1),n};gx.livePrevWS.clientGUID||(gx.livePrevWS.clientGUID=i());var r="",u=[],n=gx.livePreviewUri.split("?");n.length>0&&(n=n[1],n=n.split(":"),n.length>2&&(r=n[1],u=n[2].substring(1,n[2].length-1).split(","),n=n[0]));gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=u;gx.livePrevWS.KBName=r;gx.livePrevWS.KBUUID=n;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,!1),gx.livePrevWS.Connect)}}};gx.nav=function(){var t=function(){var n={top:!0,right:!0,bottom:!0,left:!0};return function(t){return!!n[t.toLowerCase()]}}(),i=function(n){var t=n;return gx.gen.isDotNet()&&(t=n.replace(/\.aspx$/,"")),gx.gen.isJava()&&gx.pO.PackageName&&gx.text.startsWith(n,gx.pO.PackageName)&&(t=n.substring(gx.pO.PackageName.length+1)),t},r=function(n){var r=n.split("?"),t,i,u;if(r.length>0){for(t=r.length==2?r[1].split(gx.http.urlParameterSeparator(n)):[],i=0,u=t.length;i<u;i++)t[i]=gx.http.useNamedParameters(n)?decodeURIComponent(t[i].split("=")[1]):decodeURIComponent(t[i]);return{obj:r[0],args:t}}return!1},n={};return{setCallTarget:function(t,i){n[t.toLowerCase()]=i.toLowerCase()},willRedirect:function(r){return gx.pO&&!gx.pO.fullAjax?!0:!t(n[i(r).toLowerCase()]||"")},willRedirectByUrl:function(n){var t=r(n);return this.willRedirect(t.obj,t.args)},call:function(r,u,f){var e=i(r),o=gx.pO.MasterPage;if(f=f||n[e.toLowerCase()]||"",delete n[e.toLowerCase()],gx.pO&&!gx.pO.fullAjax){gx.http.redirect(gx.http.formatLink(r,u),!1,!1,gx.pO);return}t(f)?o&&o.createObjectInTarget(f,e,u):gx.http.redirect(gx.http.formatLink(r,u),!1,!1,gx.pO)},callUrl:function(n,t){var i=r(n);i&&this.call(i.obj,i.args,t)},callFromServerRedirect:function(n,t){this.callUrl(n,t)}}}(gx.$);
/*! jQuery UI - v1.11.4 - 2016-07-07
* http://jqueryui.com
* Includes: position.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){
/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(){function a(n,t,i){return[parseFloat(n[0])*(l.test(n[0])?t/100:1),parseFloat(n[1])*(l.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}function v(n){return n!=null&&n===n.window}function p(n){var t=n[0];return t.nodeType===9?{width:n.width(),height:n.height(),offset:{top:0,left:0}}:v(t)?{width:n.width(),height:n.height(),offset:{top:n.scrollTop(),left:n.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:n.outerWidth(),height:n.outerHeight(),offset:n.offset()}}n.ui=n.ui||{};var u,f,i=Math.max,t=Math.abs,e=Math.round,o=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,l=/%$/,y=n.fn.position;n.position={scrollbarWidth:function(){if(u!==undefined)return u;var r,i,t=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),f=t.children()[0];return n("body").append(t),r=f.offsetWidth,t.css("overflow","scroll"),i=f.offsetWidth,r===i&&(i=t[0].clientWidth),t.remove(),u=r-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=v(i[0]),u=!!i[0]&&i[0].nodeType===9,f=!r&&!u;return{element:i,isWindow:r,isDocument:u,offset:f?n(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r||u?i.width():i.outerWidth(),height:r||u?i.height():i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return y.apply(this,arguments);u=n.extend({},u);var k,l,v,w,b,nt,d=n(u.of),it=n.position.getWithinInfo(u.within),rt=n.position.getScrollInfo(it),g=(u.collision||"flip").split(" "),tt={},ut=d[0];return nt=p(d),d[0].preventDefault&&(u.at="left top"),l=nt.width,v=nt.height,w=nt.offset,w.top+w.left!==0||d.is(":visible")||(w=n(ut.parentElement).offset(),l=n(ut.parentElement).width()),b=n.extend({},w),n.each(["my","at"],function(){var n=(u[this]||"").split(" "),t,i;n.length===1&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]);n[0]=o.test(n[0])?n[0]:"center";n[1]=s.test(n[1])?n[1]:"center";t=h.exec(n[0]);i=h.exec(n[1]);tt[this]=[t?t[0]:0,i?i[0]:0];u[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),g.length===1&&(g[1]=g[0]),u.at[0]==="right"?b.left+=l:u.at[0]==="center"&&(b.left+=l/2),u.at[1]==="bottom"?b.top+=v:u.at[1]==="center"&&(b.top+=v/2),k=a(tt.at,l,v),b.left+=k[0],b.top+=k[1],this.each(function(){var p,nt,s=n(this),h=s.outerWidth(),c=s.outerHeight(),ut=r(this,"marginLeft"),ft=r(this,"marginTop"),et=h+ut+r(this,"marginRight")+rt.width,ot=c+ft+r(this,"marginBottom")+rt.height,o=n.extend({},b),y=a(tt.my,s.outerWidth(),s.outerHeight());u.my[0]==="right"?o.left-=h:u.my[0]==="center"&&(o.left-=h/2);u.my[1]==="bottom"?o.top-=c:u.my[1]==="center"&&(o.top-=c/2);o.left+=y[0];o.top+=y[1];f||(o.left=e(o.left),o.top=e(o.top));p={marginLeft:ut,marginTop:ft};n.each(["left","top"],function(t,i){n.ui.position[g[t]]&&n.ui.position[g[t]][i](o,{targetWidth:l,targetHeight:v,elemWidth:h,elemHeight:c,collisionPosition:p,collisionWidth:et,collisionHeight:ot,offset:[k[0]+y[0],k[1]+y[1]],my:u.my,at:u.at,within:it,elem:s})});u.using&&(nt=function(n){var r=w.left-o.left,a=r+l-h,f=w.top-o.top,y=f+v-c,e={target:{element:d,left:w.left,top:w.top,width:l,height:v},element:{element:s,left:o.left,top:o.top,width:h,height:c},horizontal:a<0?"left":r>0?"right":"center",vertical:y<0?"top":f>0?"bottom":"middle"};l<h&&t(r+a)<l&&(e.horizontal="center");v<c&&t(f+y)<v&&(e.vertical="middle");e.important=i(t(r),t(a))>i(t(f),t(y))?"horizontal":"vertical";u.using.call(this,n,e)});s.offset(n.extend(o,{using:nt}))})};n.ui.position={fit:{left:function(n,t){var e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,r=u-s,f=s+t.collisionWidth-o-u,h;t.collisionWidth>o?r>0&&f<=0?(h=n.left+r+t.collisionWidth-o-u,n.left+=r-h):n.left=f>0&&r<=0?u:r>f?u+o-t.collisionWidth:u:r>0?n.left+=r:f>0?n.left-=f:n.left=i(n.left-s,n.left)},top:function(n,t){var o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,r=u-s,f=s+t.collisionHeight-e-u,h;t.collisionHeight>e?r>0&&f<=0?(h=n.top+r+t.collisionHeight-e-u,n.top+=r-h):n.top=f>0&&r<=0?u:r>f?u+e-t.collisionHeight:u:r>0?n.top+=r:f>0?n.top-=f:n.top=i(n.top-s,n.top)}},flip:{left:function(n,i){var r=i.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-i.collisionPosition.marginLeft,a=l-o,v=l+i.collisionWidth-c-o,u=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,f=i.at[0]==="left"?i.targetWidth:i.at[0]==="right"?-i.targetWidth:0,e=-2*i.offset[0],s,h;a<0?(s=n.left+u+f+e+i.collisionWidth-c-y,(s<0||s<t(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-i.collisionPosition.marginLeft+u+f+e-o,(h>0||t(h)<v)&&(n.left+=u+f+e))},top:function(n,i){var r=i.within,y=r.offset.top+r.scrollTop,c=r.height,o=r.isWindow?r.scrollTop:r.offset.top,l=n.top-i.collisionPosition.marginTop,a=l-o,v=l+i.collisionHeight-c-o,p=i.my[1]==="top",u=p?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,f=i.at[1]==="top"?i.targetHeight:i.at[1]==="bottom"?-i.targetHeight:0,e=-2*i.offset[1],s,h;a<0?(h=n.top+u+f+e+i.collisionHeight-c-y,(h<0||h<t(a))&&(n.top+=u+f+e)):v>0&&(s=n.top-i.collisionPosition.marginTop+u+f+e-o,(s>0||t(s)<v)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,e,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};o&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in r)t.style[e]=r[e];t.appendChild(s);i=o||document.documentElement;i.insertBefore(t,i.firstChild);s.style.cssText="position: absolute; left: 10.7432222px;";u=n(s).offset().left;f=u>10&&u<11;t.innerHTML="";i.removeChild(t)}()})();var t=n.ui.position})