var defaultConfig,GlobalEvents;gx.setGxObyCtx=function(n,t){var i;return void 0!=n&&(i=gx.getObj(n,t))&&gx.setGxO(n,t),gx.O};gx.parentGridRow=function(n,t){var i=gx.fn.currentGridRowImpl(n);if((i=t.getGridById(n,i))&&i.parentGrid)return gx.fn.currentGridRow(i.parentGrid.gridId)};gx.applyPicture=function(n,t,i){if(!gx.lang.emptyObject(n)&&!gx.lang.emptyObject(gx.rtPicture(n,i))&&!gx.lang.emptyObject(n.type))try{switch(n.type){case"int":case"decimal":return gx.num.formatNumber(t,n.dec,gx.rtPicture(n,i),n.len,n.sign,!0,n.emptyAsNull);case"char":return t;default:return t}}catch(r){}return t};gx.SetOld=function(n,t,i){var r=t,n=gx.fn.controlGridId(n);0<n&&(r=t+"_"+gx.fn.currentGridRow(n));gx.fn.setHidden(r,gx.getVar(i))};gx.Old=function(n,t){var i,u,r;try{return i=t,u=gx.fn.controlGridId(n),0<u&&(i=t+"_"+gx.fn.currentGridRow(u)),r=gx.fn.getHidden(i),"undefined"==typeof r&&""!=gx.O.CmpContext&&(r=gx.fn.getHidden(gx.O.CmpContext+i)),r}catch(f){gx.dbg.logEx(f,"gxapi.js","Old")}return""};gx.OldInteger=function(n,t){var i=parseInt(gx.Old(n,t),10);return isNaN(i)?0:i};gx.OldDecimal=function(n,t){var i=gx.num.parseFloat(gx.Old(n,t),gx.thousandSeparator,gx.decimalPoint);return isNaN(i)?0:i};gx.OldDate=function(n,t){return new gx.date.gxdate(gx.Old(n,t),"Y4MD").getStringWithFmt(gx.dateFormat)};gx.OldDateTime=function(n,t){var i=new gx.date.gxdate(gx.Old(n,t),"Y4MD");return i.getStringWithFmt(gx.dateFormat)+" "+i.getTimeString(!0,!0)};gx.dom_i=function(n){return{el:function(n,t,i){if(n){if("string"==typeof n){var r=this.byId(n);return null!=r||!i&&(r=this.byId("span_"+n),null!=r)?r:t?null:(r=this.byName(n),null!=r&&0<r.length?(r[0].id||(r[0].id=n),r[0]):null)}return n}return null},matchesSelector:function(){var t;return function(i,r){var u,i=gx.dom.byId(i);return u=i.matches||i.matchesSelector||i.msMatchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector,void 0===t&&(t=gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()),t||!u?n(i).is(r):u?u.call(i,r):!1}}(),hasAttribute:function(n,t){return n.hasAttribute?n.hasAttribute(t):void 0!==n[t]},hasClass:function(n,t){var i=gx.dom.el(n,!0);if(i)return i.classList?i.classList.contains(t):t&&-1!=(" "+i.className+" ").indexOf(" "+t+" ")},addPrefixClass:function(t,i){if(t){var r=n(t);t.className&&!r.attr("data-gx-unprefixed-class")&&(r.attr("data-gx-unprefixed-class",t.className),r=t.className.split(" "),r.splice(0,0,""),t.className+=r.join(" "+i))}},removePrefixClass:function(t,i){var r,u;t&&(r=n(t),0<=t.className.search(RegExp("(^|\\s)"+i))&&(u=r.attr("data-gx-unprefixed-class"),r.removeAttr("data-gx-unprefixed-class"),t.className=u||t.className.substring(i.length)))},addClass:function(n,t){var i=gx.dom.el(n,!0);i&&t&&(i.classList?0<t.indexOf(" ")?i.classList.add.apply(i.classList,t.split(" ")):i.classList.add(t):this.hasClass(n,t)||(i.className=i.className+(i.className?" ":"")+t))},classReCache:{},removeClass:function(n,t){var i=gx.dom.el(n,!0),r;i&&(i.classList?i.classList.remove(t):this.hasClass(n,t)&&(r=this.classReCache[t],r||(r=RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g"),this.classReCache[t]=r),i.className=i.className.replace(r," ")))},hasTransition:function(n){if(n&&Modernizr.csstransitions){var i=gx.util.browser,t="transitionDuration";return i.isIE()&&(t="msTransitionDuration"),i.isWebkit()?t="webkitTransitionDuration":i.isFirefox()?t="MozTransitionDuration":i.isOpera()&&(t="OTransitionDuration"),n=parseFloat(gx.dom.getComputedStyle(n)[t],10),0!==n&&!isNaN(n)}return!1},hasAnimation:function(n){if(n&&Modernizr.csstransitions){var i=gx.util.browser,t="animationName";return i.isIE()&&(t="msAnimationName"),i.isWebkit()?t="webkitAnimationName":i.isFirefox()?t="MozAnimationName":i.isOpera()&&(t="OAnimationName"),(n=gx.dom.getComputedStyle(n)[t])&&"none"!=n}return!1},isMultimediaElement:function(n){return"SPAN"==n.tagName&&(gx.dom.hasClass(n,"gx-video-placeholder")||gx.dom.hasClass(n,"gx-audio-placeholder")||gx.dom.hasClass(n,"gx-download-placeholder"))},purgeElement:function(n,t){var r=t||n.attributes,i,f,u;if(r)for(f=r.length,i=0;i<f;i+=1)u=r[i].name||r[i],"function"==typeof n[u]&&(n[u]=null)},purge:function(n,t){var i,r,u;if(t||this.purgeElement(n),i=n.childNodes,i)for(r=0,u=i.length;r<u;r++)gx.dom.purge(i[r],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isOldIE()},form:function(){return null==this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0])),this._form},indexElements:function(){try{for(var t=gx.fn.getFormElements(),i=t.length,n=0;n<i;n++)t[n].gxIndex=n}catch(r){gx.dbg.logEx(r,"gxapi.js","indexElements")}},setAttribute:function(n,t,i){var r=function(){var u,f,r;try{if(u=gx.dom.byName(n),null!=u&&0<u.length)for(f=u.length,r=0;r<f;r++)u[r].setAttribute(t,i);else r=gx.dom.byId(n),null!=r&&r.setAttribute(t,i)}catch(e){gx.dbg.logEx(e,"gxapi.js","setAttribute")}};"loading"==document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,r,{single:!0}):r.apply(this)},createInput:function(n,t){var i=document.createElement("input");return i.type=t,i.id=n,i.name=n,gx.dom.form().appendChild(i),i},hasSelectedFile:function(){var i=n('input[type="file"]'),r=i.length,t;if(!r)return!1;for(t=0;t<r;t++)if(!gx.lang.emptyObject(i[t].value))return!0;return!1},hasSubmitControl:function(){var i=this.byTag("input"),r=i.length,n,t;if(!r)return!1;for(n=0;n<r;n++)if(t=i[n].getAttribute("type"),"submit"==t||"image"==t)return!0;return!1},styles:function(){var n=document.styleSheets,i;if("undefined"!=typeof n){for(var r=[],u=n.length,t=0;t<u;t++)i=n[t].href,gx.lang.emptyObject(i)||r.push(i);return r}return[]},getComputedStyle:function(n){try{return"#document"==n.nodeName?null:"function"==typeof getComputedStyle?window.getComputedStyle(n):"undefined"!=typeof n.currentStyle?n.currentStyle:n.style}catch(t){return gx.dbg.logEx(t,"gxapi.js","getComputedStyle"),null}},getStyle:function(n,t){var i="",r;try{i="function"==typeof getComputedStyle?window.getComputedStyle(n,null)[t]:"undefined"!=typeof n.currentStyle?n.currentStyle[t]:n.style[t];r=parseInt(i);isNaN(r)||(i=r)}catch(u){gx.dbg.logEx(u,"gxapi.js","getStyle")}return i},CSS_URL_REGEXP:/url\(["\']?(?!(?:https?:|\/))([^"\)]+)["\']?\)/ig,CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,cacheStyleSheet:function(n,t){var i,e=n.href?n.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,u,r,f;this.cssRules||(this.cssRules=[]);try{if(u=n.cssRules||n.rules)for(r=0,f=u.length;r<f;r++)i=u[r].cssText,t&&(i=i.replace(this.CSS_URL_REGEXP,'url("'+e+'$1")')),this.cssRules.push(i)}catch(o){}},getCssRules:function(n,t){var r=document.styleSheets,i,u;if(null===this.cssRules||n)for(this.cssRules=[],i=0,u=r.length;i<u;i++)try{r[i].disabled||this.cacheStyleSheet(r[i],t)}catch(f){}return this.cssRules},setStyleElement:function(n,t,i){try{n.innerHTML=(i?n.innerHTML:"")+t}catch(r){n.styleSheet.cssText=(i?n.styleSheet.cssText:"")+t}},isButton:function(n){return void 0!=n&&null!=n?"submit"==n.type||"button"==n.type:!1},isRadio:function(n){return n&&"INPUT"==n.tagName&&"radio"==n.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0,month:!0,week:!0},isEditControl:function(n){return n&&"INPUT"==n.tagName?this.editControls[n.type]||!1:!1},isTextControl:function(n){return n&&"INPUT"===n.tagName&&"text"===n.type},isDateControl:function(n){return"date"==n.type||"datetime"==n.type||"datetime-local"==n.type},isButtonLike:function(n){return n?this.isButton(n)||gx.dom.hasAttribute(n,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR)?!0:n&&"INPUT"===n.nodeName?"file"===n.type||("image"===n.type||"checkbox"===n.type)&&"function"==typeof n.onclick:!1:!1},iFrameDoc:function(n){try{if(n.contentDocument)return n.contentDocument;if(n.contentWindow)return n.contentWindow.document}catch(t){}return null},forEachChild:function(n,t,i){if(n&&n.childNodes&&"function"==typeof i)for(var u=n.childNodes.length,r=0;r<u&&!1!==i.call(t,n.childNodes[r]);r++);},isTextWithLink:function(n){return null!=n&&"A"==n.tagName&&n.childNodes&&0<n.childNodes.length&&this.innerChildIsText(n.firstChild)?!0:!1},isImageWithLink:function(n){return n&&"A"===n.tagName&&n.href&&(n=n.firstElementChild,!gx.dom.hasClass(n,"gx-prompt")&&n&&"IMG"===n.tagName)?!0:!1},isChildNode:function(n,t){if(n.frameElement&&(n=n.frameElement),n==t)return!0;for(;n.parentNode;){if(n==t||n.parentNode==t)return!0;n=n.parentNode}return!1},NodeLevel:function(n){for(var t=0;n.parentNode;)(n.id||n.name)&&t++,n=n.parentNode;return t},findParentByTagName:function(n,t,r){for(n=n.parentNode,t=t.toUpperCase(),i=0;n&&!(r&&i==r);){if(i++,n.tagName==t)return n;n=n.parentNode}},innerChildIsText:function(n){for(;null!=n;){if(n.nodeName&&"#text"==n.nodeName)return!0;n=n.firstChild}return!1},allChildrenAreText:function(n){for(n=n.firstChild;n;){var t=n.nodeName.toLowerCase();if("#text"!==t&&"pre"!==t&&null!=n.offsetParent)return!1;n=n.nextSibling}return!0},position:function(t){return t=n(t).offset(),{x:Math.floor(t.left),y:Math.floor(t.top)}},dimensions:function(t){return t=n(t),{w:t.outerWidth(),h:t.outerHeight()}},windowDimensions:function(n){var i=n.documentElement,t=n.body;if(i&&i.scrollHeight){var n=Math.max(i.scrollHeight,t.scrollHeight),r=Math.max(i.scrollWidth,t.scrollWidth),u=Math.max(i.clientHeight,t.clientHeight),i=Math.max(i.clientWidth,t.clientWidth);return{scrollWidth:r,scrollHeight:n,clientHeight:u,clientWidth:i}}return{scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,clientHeight:t.clientHeight,clientWidth:t.clientWidth}},documentScroll:function(n){var n=n||document,t=-1,i=-1;try{t=n.documentElement.scrollTop||n.body.scrollTop;i=n.documentElement.scrollLeft||n.body.scrollLeft}catch(r){}return{scrollTop:t,scrollLeft:i}},documentScrollable:function(n){var n=n||document,t={x:!1,y:!1},n=gx.dom.windowDimensions(n);return n.scrollHeight>n.clientHeight&&(t.x=!0),n.scrollWidth>n.clientWidth&&(t.x=!0),t},autofitIFrame:function(n){var n=gx.evt.source(window.event||n),i=window.frames[n.name].document;if(i&&!(""!=n.width||""!=n.height)){var t=gx.dom.windowDimensions(i),i=t.scrollWidth?t.scrollWidth+10:null,t=t.scrollHeight?t.scrollHeight+10:null;i&&t&&(n.style.width=i+"px",n.style.height=t+"px")}},fitToParent:function(n){var r;if(!gx.util.browser.isIE()&&n&&n.childNodes){for(var t=null,u=n.childNodes.length,i=0;i<u;i++)if(r=n.childNodes[i],"TABLE"==r.nodeName){t=r;break}null!=t&&(-1!=t.style.width.indexOf("%")&&(n.style.width=gx.dom.addUnits(t.style.width)),-1!=t.style.height.indexOf("%"))&&(n.style.height=gx.dom.addUnits(t.style.height))}},redrawControl:function(n){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(n,n.outerHTML):setTimeout(function(){gx.html.setOuterHtml(n,n.outerHTML)},100)},setCaretPosition:function(n,t){if(null!=n)if(n.createTextRange){var i=n.createTextRange();i.move("character",t);i.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(t,t)):n.focus()},replaceAtCaretPosition:function(n,t){var i=n.selectionStart,r=n.selectionEnd;document.selection?(i=document.selection.createRange().getBookmark(),n.selection=n.createTextRange(),n.selection.moveToBookmark(i),n.selectLeft=n.createTextRange(),n.selectLeft.collapse(!0),n.selectLeft.setEndPoint("EndToStart",n.selection),i=n.selectLeft.text.length+1,r=n.selectLeft.text.length+(0==n.selection.text.length?1:n.selection.text.length)):(i=n.selectionStart,r=n.selectionEnd);n.setRangeText?n.setRangeText(t,i,r,"end"):(n.value=n.value.substr(0,i)+t+n.value.substr(i,n.value.length),gx.dom.setCaretPosition(n,i+t.length))},spanValue:function(n){var t=n.nodeValue;return gx.lang.emptyObject(t)&&(t=n.innerText||n.textContent),gx.lang.emptyObject(t)&&(t=""),t},removeControlSafe:function(n){gx.dom.shouldPurge()?(this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV")),this._avoidLeaksDiv.appendChild(n),gx.dom.purge(this._avoidLeaksDiv),this.removeControl(this._avoidLeaksDiv),this._avoidLeaksDiv=null):this.removeControl(n)},removeControl:function(n){if(null==document.createRange)n.removeNode(!0);else{var t=document.createRange();n&&(t.selectNode(n),t.deleteContents())}},radioToObj:function(t){var i={s:"",v:[]},u,f;if(!t)return i;if(gx.dom.isRadio(t)){i.s=t.value;for(var t=gx.dom.byName(t.name),e=t.length,r=0;r<e;r++)u=n(t[r]),f=n("label[for='"+t[r].id+"']").first(),i.v.push([u.val(),f.text().trim()])}return i},comboBoxToObj:function(t,i){var r,e,u,f;try{if(r={s:"",v:[]},!t)return r;if("SELECT"===t.tagName)for(r.s=t.value,e=t.options.length,u=0;u<e;u++)f=n(t.options[u]),r.v.push([f.val(),f.text()]);else if("SPAN"===t.tagName){if(t.hasAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR))return gx.json.evalJSON(t.getAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR));u=gx.fn.getControlValue_span(t);r.v.push([i,u]);r.s=i}return r}catch(o){gx.dbg.logEx(o,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,addUnits:function(n,t){return""===n||"auto"==n?n:void 0===n?"":"number"==typeof n||!this.unitPattern.test(n)?n+(t||"px"):n},getActiveElement:function(n){var n=n||document,t;try{(t=n.activeElement,t&&t.nodeName)||(t=n.body)}catch(i){t=n.body}return t},getCaretOffset:function(n){return n&&"INPUT"===n.tagName&&"text"===n.type&&"undefined"!=typeof n.selectionStart?{s:n.selectionStart,e:n.selectionEnd}:{s:0,e:0}},setCaretOffset:function(n,t){n&&"INPUT"==n.tagName&&"text"==n.type&&n.setSelectionRange&&n.setSelectionRange(t.s,t.e)},write:function(n,t){t=t||document;t.write(n)},writeError:function(n,t,i,r){gx.dbg.write(n);r=r||document;r.head.innerHTML="";r.body.innerHTML=n},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASKED_CLASS:"gx-masked",isMaskElement:function(n){return this.hasClass(n,this.MASK_CLASS)},mask:function(t){var f,u;if((t=this.el(t))&&!this.hasClass(t,this.MASK_RELATIVE_CLASS)){var i,r=gx.util.browser,e=r.ieVersion(),o=6==e||r.isIE&&r.isCompatMode(),s=!!t.style.setExpression,u=n(t);if(u.css("caret-color","transparent"),u.is("body")&&"static"==this.getComputedStyle(t).position||this.addClass(t,this.MASK_RELATIVE_CLASS),i=document.createElement("div"),i.className=this.MASK_CLASS,"TABLE"==t.tagName?(f=n(i),u=n(t),f.width(u.width()),f.insertAfter(u),f.parent().addClass(this.MASK_RELATIVE_CLASS)):t.appendChild(i),this.addClass(t,this.MASKED_CLASS),o&&s)try{i.style.setExpression("height","this.parentNode."+(t==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(h){}else(t=this.getComputedStyle(t).height,r.isIE&&(7!=r.ieVersion||r.isCompatMode())&&"auto"==t)&&(i.style.height=t);return r.isIE()&&(7>=e||r.isCompatMode())&&(n(i),(r=this.getComputedStyle(i).opacity)&&n(i).css("opacity",r)),i}},unmask:function(t){var t=this.el(t),i,r,u;if(n(t).css("caret-color",""),"TABLE"==t.tagName)r=t.nextSibling,r&&"DIV"==r.tagName&&this.hasClass(r,this.MASK_CLASS)&&(i=r);else for(r=0,u=t.childNodes.length;r<u;r++)if("DIV"==t.childNodes[r].tagName&&this.hasClass(t.childNodes[r],this.MASK_CLASS)&&!this.hasClass(t.childNodes[r],this.UNMASK_CLASS)){i=t.childNodes[r];break}i&&!i.removed?(i.removed=!0,i.style.clearExpression&&(i.style.clearExpression("width"),i.style.clearExpression("height")),this.removeClass(t,this.MASKED_CLASS),r=gx.dom.hasTransition(i)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(i)?gx.dom.ANIMATION_END_EVENT:!1,u=function(){t.tagName=="TABLE"?i.parentNode&&(gx.dom.removeClass(i.parentNode,this.MASK_RELATIVE_CLASS),i.parentNode.removeChild(i)):i.parentNode==t&&t.removeChild(i);gx.dom.removeClass(t,this.MASK_RELATIVE_CLASS)}.closure(this),r?gx.evt.attach(i,r,u,!1,{single:!0,useCapture:!0,timeout:300}):u(),this.addClass(i,this.UNMASK_CLASS)):(this.removeClass(t,this.MASKED_CLASS),this.removeClass(t,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(n,t,i){var i=i||{},b=i.enteringClass||"entering",ot=i.leavingClass||"leaving",it=i.enterDurationClass||"enter-fx-duration",o=i.leaveDurationClass||"leave-fx-duration",k=i.transitioningClass||"transitioning",d=i.transitionTimeout||1500,u=function(n){return 0<n.childNodes.length&&(gx.dom.hasAnimation(n)||gx.dom.hasTransition(n))&&!gx.dom.hasClass(n.parentNode,k)},a=function(n){return gx.dom.hasAnimation(n)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(n)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==n.tagName&&(gx.dom.addClass(n,n.className+"-fx"),n.style.position="static");"BODY"==t.tagName&&gx.dom.addClass(t,t.className+"-fx");var f=n.parentNode,v=u(n),s=u(t),g="BODY"!=n.tagName;if(v||s){var u=document.createElement("iframe"),r=document.createElement("div"),y,p,w=this.getComputedStyle(n),rt=w.width,w=w.height,h,ut,st=a(n),ft=a(t),nt,c,l,et,tt,e=0,a=0;if(gx.dom.addClass(f,k),"BODY"!=n.tagName&&"BODY"!=t.tagName)if(v){u.setAttribute("scrolling","no");u.setAttribute("frameborder","0");u.style.width=gx.dom.addUnits(window.innerWidth);u.style.height=gx.dom.addUnits(window.innerHeight);u.style.display="none";r.appendChild(u);r.style.width=rt;r.style.height=w;r.style.overflow="hidden";gx.spa.dettachContent(n);n.insertBefore(r,n.firstChild);r=u.contentDocument;try{r.open();r.write(this.getDocTypeDeclaration(document));r.write("<html>");r.write("<head><\/head>");r.write("<body><div><\/div><\/body>");r.write("<\/html>");r.close()}catch(ht){gx.dbg.logEx(ht,"gxapi.js","replaceWithFx");y=r.createElement("div");r.body.appendChild(y)}for(r.documentElement&&(r.documentElement.className="gx-fx-iframe"),r.body.style.margin="0",r.body.className=gx.dom.form().className,r.head.appendChild(document.createElement("style")),y=r.styleSheets[0],p=gx.dom.getCssRules(!0,!0),h=0,ut=p.length;h<ut;h++)try{y.insertRule(p[h],a);a++}catch(ct){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+p[h])}for(r.body.firstChild.style.width=rt,r.body.firstChild.style.height=w;n.childNodes[1];)r.body.firstChild.appendChild(n.childNodes[1]);u.style.display="block"}else s&&(n.style.display="none");gx.dom.addClass(t,b);gx.dom.addClass(t,it);gx.dom.addClass(n,o);!1!==i.domAdd&&f.appendChild(t);o=function(){l=function(){e===2?(gx.dom.removeClass(f,k),g&&(i.transitionEndCallback&&(t=i.transitionEndCallback(n,t)),i.domRemove!==!1&&n.parentNode==f&&f.removeChild(n)),gx.dom.removeClass(t,it)):g||(i.transitionEndCallback&&(t=i.transitionEndCallback(n,t)),gx.dom.removeClass(t,b),s&&(tt=setTimeout(c,d)))};v?(nt=function(){clearTimeout(et);e++;i.leavingTransCallback&&i.leavingTransCallback(n,t);l()},gx.evt.attach(n,st,nt,!1,{single:!0,useCapture:!0})):(e++,l());s?(c=function(){e>=2?gx.evt.detach(t,ft,c):(clearTimeout(tt),e++,i.enteringTransCallback&&i.enteringTransCallback(n,t),l())},gx.evt.attach(t,ft,c,!1,{single:!0,useCapture:!0})):(e++,l());gx.lang.requestAnimationFrame(function(){gx.dom.addClass(n,ot);g&&(gx.dom.removeClass(t,b),s&&(tt=setTimeout(c,d)));v&&(et=setTimeout(nt,d))})};i.beforeTransitionStart?!0!==i.beforeTransitionStart(o)&&o():o()}else!1!==i.domRemove&&f.removeChild(n),!1!==i.domAdd&&(n.parentNode==f?f.replaceChild(t,n):f.appendChild(t)),i.beforeTransitionStart&&i.beforeTransitionStart(),i.leavingTransCallback&&i.leavingTransCallback(n,t),i.enteringTransCallback&&i.enteringTransCallback(n,t),i.transitionEndCallback&&(t=i.transitionEndCallback(n,t))},getDocTypeDeclaration:function(n){return(n=n||document,n=n.doctype,parts=["!DOCTYPE"],!n)?"":(parts.push(n.name||"html"),n.publicId&&(parts.push("PUBLIC"),parts.push('"'+n.publicId+'"')),n.systemId&&parts.push('"'+n.systemId+'"'),"<"+parts.join(" ")+">")},createShadowRoot:function(n){return n=this.el(n),n.createShadowRoot?n.createShadowRoot():n.webkitCreateShadowRoot?n.webkitCreateShadowRoot():!1},fixes:function(){var o=RegExp("gx-tab-padding-fix-\\d+","ig"),s=RegExp("gx-tab-spacing-fix-\\d+","ig"),f={},e={},i,r,u,t={center:{marginLeft:"auto",marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{resetFixesStyleElement:function(){f={};e={};n("#gx-dom-fixes").empty()},getFixesStyleElement:function(){var t=n("#gx-dom-fixes")[0],i;return t||(t=document.createElement("style"),t.id="gx-dom-fixes",i=gx.getThemeElement(),n("head")[0].insertBefore(t,i),gx.util.browser.isIE()&&n(i).insertAfter(t)),t},html5:function(i){var f=gx.util.browser,o=f.isIE(),e=[],r;if(n("TABLE",i||document.body).each(function(){var t=n(this);t.attr({align:t.data("align")})}),!i){if(!u){for(r in t)gx.lang.apply(t[r],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});u=".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}";Mustache.parse(u)}for(r in t)e.push(Mustache.render(u,t[r]));r=this.getFixesStyleElement();gx.dom.setStyleElement(r,e.join(""),!0)}(o||f.isOpera())&&n("td[data-align]",i||document.body).each(function(){var i=n(this),r=i.attr("data-align").toLowerCase(),u=t[r].className,f=i.attr("class")||"";f&&(f=" "+f);i.attr("align",r);i.hasClass(u)||i.attr("class",u+f);i.children("div."+t[r].contHolderClassName).children("div."+t[r].contHolderBodyClassName).addClass(u);i.children("div."+t[r].wcClassName).children("div."+t[r].wcBodyClassName).addClass(u)})},setPopupMinWidth:function(){var t=gx.popup.getPopup(),i;t&&(gx.runtimeTemplates&&(i=this.getPopupMinWidth(),n(document.documentElement).css("min-width",gx.dom.addUnits(i)),n(document.documentElement).addClass("gx-popup-document")),(t.autoresize||void 0===t.autoresize)&&n(document.documentElement).css("height","auto"))},getPopupMinWidth:function(){var t=gx.popup.getPopup(),i=r;if(t&&(i=t.width,t.autoresize||void 0===t.autoresize)){var r=600,t=n(t.window).width(),i=800;1200<=t&&(i=900);768<=t&&992>t&&(i=r);768>t&&(i=t-20)}return i},fixTableResets:function(t){var u=[],h=[],c=this.getFixesStyleElement();i||(i="{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}",Mustache.parse(i));r||(r="{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}",Mustache.parse(r));n("table[data-cellpadding], table[data-cellspacing]",t||document.body).each(function(){var i=this.getAttribute("data-cellpadding"),t;i!==void 0&&(f[i]||(f[i]=i,u.push(i)),n("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className="gx-tab-padding-fix-"+i+" "+this.className.replace(o,"").trim()}));t=this.getAttribute("data-cellspacing");t!==void 0&&(e[t]||(e[t]=t,h.push(t)),this.className="gx-tab-spacing-fix-"+t+" "+this.className.replace(s,"").trim())});gx.dom.setStyleElement(c,Mustache.render(i,u)+Mustache.render(r,h),!0)},createLegacyNotification:function(){n("div#gx_ajax_notification").length||n('<div id="gx_ajax_notification" style="display:none;"><\/div>').appendTo(document.body)}}}(),_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(t,i){var r=n(i)[0].offsetTop-n(t)[0].offsetTop-n(t).scrollTop();return t&&n(i)[0]?r<n(t).height():!1}}}(gx.$);$.extend(gx.dom,gx.dom_i);gx.evt_i=function(n){return{eachKeyAutorefreshType:function(n){return!gx.lang.isNumericType(n)&&!gx.lang.isDateType(n)},waitGridRefresh:function(n){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(n):n.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var n=gx.evt.refreshGridCallback.pop();"function"==typeof n&&n.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var n,i=this.hooks.length,t=0;t<i;t++){n=this.hooks[t];try{this.detach(n.c,n.e,n.f);n.c=null;n.f=null}catch(r){gx.dbg.logEx(r,"gxapi.js","clearHooks")}this.hooks[t]=null}this.hooks=[]},source:function(n){return n.target||n.currentTarget||n.srcElement},createEvent:function(n,t,i,r){var u,t=void 0===t?!0:t,i=void 0===i?!0:i,r=r||{};return window.CustomEvent?u=new CustomEvent(n,{bubbles:t,cancelable:i,detail:r}):(u=document.createEvent("CustomEvent"),u.initCustomEvent(n,t,i,r)),u},dispatch:function(n,t){return n.dispatchEvent?n.dispatchEvent(t):n.fireEvent("on"+t.type,t)},fireEvent:function(n,t){gx.evt.dispatch(n,gx.evt.createEvent(t))},detach:function(n,t,i,r){try{if(r=r||{},"string"==typeof t)n.removeEventListener?n.removeEventListener(t,i,r.useCapture||!1):n.detachEvent?n.detachEvent("on"+t,i):n["on"+t]=null;else if(gx.lang.isArray(t))for(var u=0,f=t.length;u<f;u++)this.detach(n,t[u],i,r)}catch(e){gx.dbg.logEx(e,"gxapi.js","detach")}},stopPropagation:function(n){n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},cancel:function(n,t){if(t&&gx.util.browser.isIE()&&typeof("undefined"!=n.keyCode))try{n.keyCode=0}catch(i){}"undefined"==typeof n.preventDefault?(n.cancelBubble=t,n.returnValue=!t):t&&(n.preventDefault(),n.stopPropagation())},checkCtrlFocus:function(n){try{gx.evt.fixWebKitOnFocus()&&"button"==n.type&&gx.fn.isAccepted(n)&&void 0!=n.onfocus&&n.onfocus()}catch(t){gx.dbg.logEx(t,"gxapi.js","checkCtrlFocus")}},doClick:function(n,t){if(gx.isInputEnabled()){var i=gx.evt.source(t);"button"!=i.type&&"submit"!=i.type&&(i=gx.dom.el(n),gx.fn.isAccepted(i))&&(void 0!=i.onfocus&&i.onfocus(),void 0!=i.onclick&&i.onclick(),"INPUT"==i.nodeName&&"submit"==i.type&&gx.dom.form().submit())}},executeOnblur:function(n,t){var i=gx.csv.lastId,r=gx.O.focusControl;gx.O.focusControl=n;this.onblur(t,gx.O.focusControl);gx.O.focusControl=r;gx.csv.lastId=i},onblur:function(n,t){var e,i,r,u,f,o;if(gx.O&&!0!==gx.csv.IgnoreBlur){e=gx.fn.controlRowId(n);gx.csv.lastId=t;try{i=gx.fn.validStruct(t);i&&null!=i.gxgrid&&i.gxgrid.updateControlValue(i,!1,e);r=gx.csv.lastControl;r&&(u=r.getAttribute("maxlength"),0<u&&r.value.length>u&&(r.value=r.value.substring(0,u)),i&&"bits"==i.type&&0==i.ro&&(f=gx.fn.getControlGridRef(i.fld,i.gxgrid?i.gxgrid.gridId:""),gx.util.browser.isWebkit()&&0>r.id.indexOf(i.fld)&&(r=f),o=gx.html.multimediaUpload.getContainer(f),gx.html.multimediaUpload.refreshPreviewImg(o,r)))}catch(s){gx.dbg.logEx(s,"gxapi.js","onblur")}}},onfocus:function(){var t=function(){var t=n.Deferred();return gx.fx.obs.notify("gx.onbeforefocus",arguments),gx.evt.onfocus_impl.apply(gx.evt,arguments).then(function(){gx.fx.obs.notify("gx.onafterfocus");t.resolve()}),t.promise()};!0===gx.evt.is_button_mouse_event||gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,t.closure(this,arguments),{single:!0,"async":!0}):t.apply(gx.evt,arguments)},onfocus_impl:function(t,i,r,u,f,e,o){var h=n.Deferred(),p,a,w,b,v,c,y;gx.csv.deferredOnchange&&gx.lang.doExecTimeout(gx.csv.deferredOnchange);f=gx.fn.controlRowIndex(t)||f;try{if(gx.grid.clearActiveGrid(),gx.spa.isNavigating())return h.resolve(!1).promise();if(gx.evt.setReady(!1,"onfocus_impl"),!gx.fn.checkPopupFocus(t))return gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!1).promise();p=!1;gx.csv.cmpCtx!=r&&(p=!0,gx.O.fromValid=0);gx.setGxO(r,u);gx.fn.refreshControlOldValue(t);p&&gx.fn.changeCmpContext();gx.fn.initOld(t);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(d){gx.dbg.logEx(d,"gxapi.js","onfocus")}if(gx.csv.rowChanged=!1,gx.csv.lastControl=t,(0==e||""!=f)&&gx.fn.setCurrentGridRow(e,f),gx.fx.installSuggest(t),a=!1,gx.csv.lastGrid!=e&&(gx.csv.lastRow[e]=null,o||(gx.csv.lastGrid<e&&(w=gx.fn.firstGridControl(e),gx.O.fromValid>w&&(gx.O.fromValid=w)),gx.csv.lastGrid=e),a=!0),0<i&&(gx.O.focusControl=i),!gx.csv.onloadFocus)try{gx.fx.ctx.notify(t)}catch(g){gx.dbg.logEx(g,"gxapi.js","onfocus")}if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise();try{if(b=gx.fn.getControlValue("Mode"),"DLT"==b||"DSP"==b||gx.O.isTransaction()&&gx.dom.isButton(t)&&!gx.evt.isEnterEvtCtrl(t)&&!gx.evt.isCheckEvtCtrl(t)&&!o)return gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise()}catch(nt){gx.dbg.logEx(nt,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&t.gxdisabled&&null!=gx.csv.lastControl)return(cn=gx.fn.getControlIndex(t)+1,-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))?(gx.fn.setFocus(NextFocus),gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise()):(gx.fn.setFocus(gx.csv.lastControl),gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise());if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!0).promise();if(null!=gx.csv.invalidControl&&gx.csv.invalidControl!=t&&gx.O.focusControl>=gx.csv.invalidId&&gx.csv.invalidControl==t)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,!1,gx.O,f).done(function(n){n&&(gx.csv.invalidControl=null,gx.evt.setReady(!0,"onfocus_impl"));h.resolve(!0)}),h.promise();o?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0==gx.csv.lastRow[e]||gx.csv.lastRow[e]==f||a||gx.O.fromValid!=gx.O.toValid||(gx.csv.lastId=gx.O.fromValid);v=gx.fn.controlIds();0<v.length&&gx.O.fromValid<v[0]&&(gx.O.fromValid=v[0]);gx.lang.emptyObject(gx.csv.lastRow[e])&&0!=e&&(gx.csv.rowChanged=!0,gx.csv.lastRow[e]=f);var s=gx.O,l=gx.csv.lastId,k=gx.fn.validStruct(l,s);return k&&(c=gx.csv.lastRow[k.grid]),gx.csv.checkRowChange(l,a,s,c).done(function(n){var i=!1,r=!1,u=function(){gx.csv.invalidControl==null&&(t.nodeName==="SELECT"||!gx.util.browser.isSafari()||gx.dom.isTextControl(t)&&t.selectionEnd===0)&&gx.fn.setSelection(t);gx.csv.disableFocusCondition();h.resolve(!0)};!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(f)&&c.length>f.length&&(i=c.substring(c.length-f.length),i=parseInt(i)<parseInt(f));gx.csv.backwardGridValidation&&(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(f)&&c.length==f.length&&parseInt(c)>parseInt(f)&&(r=s.focusControl>gx.fn.firstGridControl(e)),!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(f)&&c.length==f.length&&parseInt(c)<parseInt(f)&&(r=s.focusControl<l&&s.focusControl>gx.fn.firstGridControl(e)));n&&gx.csv.invalidControl==null&&r?(s.fromValid=gx.fn.firstGridControl(e),gx.csv.validControls(s.fromValid,s.focusControl,!0,gx.O)):(!n||a)&&(s.focusControl>=l||i)?(gx.fn.lastMainLevelCtrlId(l,e)&&(n=gx.fn.getControlRefById(l))&&n.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)===1&&(s.fromValid=l+1),gx.csv.validateAll(s).done(u)):(s.toValid=s.focusControl,u())}),e&&f&&(y=gx.O.getGridById(e,f),y&&y.allowSelection&&y.setSelection(parseInt(f,10)-1)),gx.evt.setReady(!0,"onfocus_impl"),h.promise()}catch(tt){gx.dbg.logEx(tt,"gxapi.js","onfocus")}return gx.evt.setReady(!0,"onfocus_impl"),h.resolve(!1).promise()},userOnload:function(){try{"function"==typeof GXOnloadUsr&&GXOnloadUsr()}catch(n){gx.dbg.logEx(n,"gxapi.js","userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(n,t,i){gx.pO.MasterPage&&n.req.setRequestHeader(i,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(n,t,i,r,u,f){gx.reinit(!f)},oncontentreplace:function(n,t,i,r,u,f,e,o){var n=gx.lang.getType(r),f=(f=f==e?f:e)?gx.lang.getType(f.toLowerCase()):!1,s=gx.ajax.getJsonResponse();s&&gx.fn.setJsonHiddens(null,s.gxHiddens,!1);n.prototype=new gx.GxObject;gx.setParentObj(new n);o?gx.setMasterPage(u):f&&gx.setMasterPage(new f);gx.ajax.clearJsonResponse();s?gx.ajax.setJsonResponse({response:s,isPostBack:!1,afterCmpLoaded:function(){o&&(u.restoreTargetComponents(),u.restoreExoEventHandlers());gx.objectLoad(s.gxGrids,s.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}):gx.objectLoad()}}});gx.livePrevWS._init()})},onunload:function(n){gx.objectUnload(n);gx.spa.stop()},onclick:function(n){var t={event:n};gx.fx.obs.notify("gx.onclick",[t]);t.cancel||(gx.evt.setReady(!1,"onclick"),gx.isInputEnabled(n)||gx.evt.cancel(n,!0),gx.evt.mouse.update(n),setTimeout(function(){gx.fx.ctx.notify()},10),gx.evt.setReady(!0,"onclick"))},ontouchstart:function(n){n=gx.evt.onmousedown.closure(this,[n]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(n,150):n()},onmousedown:function(t){var r=window.event||t,i=gx.evt.source(r);if(i&&8>=gx.util.browser.ieVersion()&&n(i).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(i);gx.evt.mouse.update(t);t=gx.fx.dnd;t.deleteClonControl();i=t.getSource(r);gx.dom.isMaskElement(r.target)||null==i||(gx.evt.cancel(r,!0),gx.setGxO(i.obj),t.drag(i.obj,i.types,i.hdl))},onmousemove:function(n){var t,i;if(gx.evt.mouse.update(n),t=gx.fx.dnd,gx.util.browser.isIE(),gx.popup.ispopup()&&gx.popup.ext.compatMode()&&(i=gx.popup.ext,i.movepopup(),null!=i.currIDb||null!=i.currRS))return!1;null!=t.obj&&(n=window.event||n,gx.evt.cancel(n,!0),null!=gx.fx.dnd.getTarget(n,t.obj.gxDragTypes)&&t.over(),t.moveControl(t.dragCtrl))},onmouseup:function(n){var t,i;window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(n);t=gx.fx.dnd;null!=t.dragCtrl&&(i=window.event||n,i=t.getTarget(i,t.obj.gxDragTypes),null!=i?(t.deleteClonControl(),gx.setGxO(i.obj),t.drop(t.dropCtrl,i.obj,i.hdl)):t.restoreControl(),i=window.event||n,gx.evt.cancel(i,!0));t.out();t.dragCtrl=null;t.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(n){gx.evt.mouse.update(n);var t=window.event||n;(gx.util.browser.isOldIE()||!gx.fx.dom.delayedDispatch(n))&&gx.fx.dom.raiseEvent("dblclick",t)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(n,t,i){var i=window.event||i,u=gx.util.browser.isIE(),r=i.keyCode;if(u){if("keydown"==i.type&&229==r)return n.value.length<=t?n.ImeKey=!0:!1;if("keyup"==i.type&&8==r&&n.ImeKey&&n.value.length+1>=t)return n.value=n.value.substring(0,n.value.length-1),n.ImeKey=!1,!0}if("keyup"==i.type||u)return n.value.length+1<=t||8==r||9==r||46==r||35<=r&&40>=r},fireControlValueChange:function(t,i,r){var f=n.Deferred(),u;return!t||!i?f.resolve():(u=t.getValidStructFld(i),u&&u.evt_cvc?(gx.evt.startValidation(u.gxgrid),gx.evt.stopPropagation(r),u.grid&&gx.evt.setEventRow(t,i),gx.fn.disableKeys(),t[u.evt_cvc].call(t).always(function(){gx.evt.endValidation(u.gxGrid,gx.evt.types.VALUECHANGED);gx.fn.enableKeys()})):n.Deferred().resolve())},fireControlValueChanging:function(t){var r=gx.fn.getControlContext(t)||gx.O,e=n.Deferred(),i,u,f;return!r||!t?e.resolve():(i=r.getValidStructFld(t),i&&(u=i.gxgrid&&i.gxgrid.isFreestyle,f=i.evt_cvcing&&!i.gxsgprm,f&&gx.evt.startValidation(i.gxgrid),(f||u)&&(u=gx.O,gx.setGxO(r),"function"==typeof i.c2v&&i.c2v(),"function"==typeof i.v2bc&&i.v2bc.call(r),gx.setGxO(u)),f))?(i.grid&&gx.evt.setEventRow(r,t),r[i.evt_cvcing].call(r).always(function(){gx.evt.endValidation(i.gxGrid,gx.evt.types.VALUECHANGING)})):e.resolve()},oncontrolvaluechanging:function(n){var t=n.keyCode;8!=t&&32>t||33<=t&&46>t||112<=t&&123>=t||(n=gx.evt.source(n))&&gx.evt.fireControlValueChanging(n)},onkeypress:function(t,i,r){var u,o,i;if(t=t||window.event){u=13===t.keyCode;27===t.keyCode&&gx.evt.shouldIgnoreEscKey()&&gx.evt.cancel(t,!0);var f=gx.fn,e=gx.util.browser,i={event:t,hasEnter:i,skipOnEnter:r,cancel:!1};if(27===t.keyCode&&gx.popup.ispopup())f.cancelWindow();else if(gx.fx.obs.notify("gx.keypress",[i]),!i.cancel){if(u&&!gx.isInputEnabled()&&this.cancel(t,!0),!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(t))return this.cancel(t,!0),!1;if(this.lastKey=t.keyCode,this.shiftPressed=t.shiftKey,o=t.ctrlKey,i=gx.evt.source(t)||gx.dom.getActiveElement()||gx.csv.lastControl,gx.evt.validKeypressForCtrl(i,t)||this.cancel(t,!0),9!==t.keyCode&&gx.csv.invalidateCtrl(i,t),(!this.isEnterEvtCtrl(i)||!this.isTriggerKey(t)||!this.cancelAndRefresh(t))&&(this.checkFuncKey(t,i),(32==t.charCode||32==t.keyCode||u&&!r)&&gx.dom.hasClass(i,"gx_newrow")&&n(i).find("span").trigger("click"),u&&r||!gx.grid.handleKeyPressEvt(t)))switch(t.keyCode){case 13:if(u=this.triggersEvt(i),r){if(f.enterHasFocus())break;if(this.shiftPressed&&"TEXTAREA"===i.nodeName)break;o&&"TEXTAREA"===i.nodeName?(gx.dom.replaceAtCaretPosition(i,"\n"),this.cancel(t,!0)):(e.isIE()&&"file"!=i.type?(gx.evt.isEnterEvtCtrl(i)&&gx.O.executeEnterEvent(t,i),this.lastKey=9,t.keyCode=this.lastKey,this.cancel(t,!0),f.skipFocus(r,i)):(i.value&&e.isIE()&&"SELECT"!=i.tagName&&(e=i.value,i.value="",i.value=e),f.skipFocus(r),this.cancel(t,!0)),this.enter=!1)}else u||gx.O.executeEnterEvent(t,i)}}}},onkeyup:function(n){var n=window.event?window.event:n,t=gx.evt.source(n),i=t.getAttribute("maxlength")||(t.getAttribute("max")?t.getAttribute("max").length:0),r="undefined"==typeof t.value?"":t.value;if(""==t.type&&9==n.keyCode||this.autoSkip&&""!=t.type&&!this.isControlKey(this.lastKey)&&r.length>=i&&0<i){if(!this.skipPromptCtrl)return;if(gx.dom.isTextWithLink(t)||gx.dom.isImageWithLink(t)){(n=t.id||("A"==t.tagName&&t.parentNode?t.parentNode.id:""))&&(n=gx.O.getValidStructId(n),gx.evt.onfocus(t,n,"",!1,"",0));return}if(t=t.getAttribute("gxfocusable"),null!=t&&"1"==t)return;if(t=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl),-1==t)return!0;t=gx.fn.searchFocus(this.shiftPressed?t-1:t+1,!this.shiftPressed);gx.fn.setFocus(t)}gx.grid.handleKeyUpEvt(n)},shouldIgnoreEscKey:function(){var n=gx.popup.getPopup();return gx.evt.processing||n&&"opening"==n.state},validKeypressForCtrl:function(n,t){var i=gx.O.getValidStructFld(n);if(i){var f=gx.rtPicture(i,n),u=gx.numericLenDec(f),e=u.Decimals,u=u.Integers,r=i.type,i=n.value;if("int"==r||"decimal"==r){if("e"===t.key)return!1;if(r=null!==n.selectionStart&&void 0!==n.selectionStart?n.selectionEnd-n.selectionStart:window.getSelection?window.getSelection().toString().length:void 0,void 0===r)return!0;if(gx.util.browser.isFirefox()&&"number"==n.type&&0===e)!n.gxoninput&&n.max&&n.min&&(n.gxoninput=!0,gx.evt.attach(n,"input",function(n){if(n.max&&n.min){var t=Number(n.value);(t>n.max||t<n.min)&&(n.value=n.value.substr(0,n.max.length))}}.closure(this,[n])));else if(!isNaN(Number(t.key)))return digits=i.split("").filter(function(n){return"0"<=n&&"9">=n}).length,i=gx.num.normalize_decimal_sep(f,gx.thousandSeparator,gx.decimalPoint,i),picinputs=u+(-1==i.indexOf(gx.decimalPoint)?0:e),digits-r<picinputs}}return!0},setEventRow:function(n,t){var i=gx.fn.rowGridId(t),r=i&&(gx.fn.controlRowId(t)||gx.fn.currentGridRowImpl(i)||"0001");i&&r&&(void 0!=t.gxGridName&&gx.fn.setHidden(n.CmpContext+t.gxGridName.toUpperCase()+"_ROW",r),gx.evt.setCurrentGridRows(i,r));gx.csv.lastEvtRow=r},ctrlOnchange:function(n,t,i,r){gx.csv.pkDirty=i;"UPD"==n.value?"1"==t.value?(i?null!=r&&(r.value=gx.getMessage("GXM_captionadd")):null!=r&&(r.value=gx.getMessage("GXM_captionupdate")),t.value="0"):i&&null!=r&&(r.value=gx.getMessage("GXM_captionadd")):"INS"==n.value&&"1"==t.value&&(null!=r&&(r.value=gx.getMessage("GXM_captionadd")),t.value="0")},onchange:function(){var n=function(){return gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,n.closure(this,arguments),{single:!0,"async":!0}):n.apply(gx.evt,arguments)},onchange_impl:function(t,i,r){var c=n.Deferred(),o,f,s,h,v,y;gx.evt.setReady(!1,"onchange_impl");gx.evt.lastControl=t;o=gx.fn.getControlValue("radio"==t.type?t.name:gx.dom.id(t));f=gx.fn.getControlContext(t)||gx.O;gx.evt.fixWebKitOnFocus()&&"radio"===t.type&&t.onfocus();var u=f.getValidStructFld(t),l=!1,e=gx.O.focusControl,a=function(){delete gx.fx.delayedValidation;gx.evt.setReady(!0,"onchange_impl");var n=gx.util.browser.isWebkit()&&("radio"==t.type||"checkbox"==t.type||"file"==t.type),i=!1;l&&u&&(gx.fn.lastMainLevelCtrlId(e,u.grid)||u.gxsgprm)&&(i=n=!0);r&&(i=!1);n&&t.onblur&&t.onblur();n=function(){gx.evt.execUsrOnchange(t);gx.fx.obs.notify("gx.validation");c.resolve()};i&&("undefined"==typeof t.GXFormatError||!1==t.GXFormatError)?gx.csv.validControls(e,e+1,!0,f).then(n):n()};return gx.csv.controlValueHasChanged(t,o,u)?(l=!0,gx.fn.setControlValue("IsModified","1"),gx.fn.setControlValue("IsConfirmed","0"),gx.csv.invalidateGXCtrl(t),s=!0,u&&(h=u.grid?gx.fn.controlRowIndex(t):void 0,"function"==typeof u.c2v&&u.c2v(h),"function"==typeof u.v2bc&&u.v2bc.call(f,h)),r||gx.fn.setControlOldValue(t,o),v=function(){var i=n.Deferred(),r;return("select-one"==t.type||"checkbox"==t.type||"radio"==t.type)&&(s=!1,gx.evt.setReady(!1,"validationCallback"),r=u?gx.fn.currentGridRowImpl(u.grid):null,gx.csv.validate(t,u.id||e,!0,f,r).done(function(n){n&&gx.csv.invalidControl==t&&(gx.csv.invalidControl=null);gx.evt.execOnchange(t,n);gx.evt.setReady(!0,"validationCallback");i.resolve()}).fail(function(){gx.evt.setReady(!0,"validationCallback");i.resolve()})),s&&(gx.evt.execOnchange(t,!1),i.resolve()),i.promise()},y=function(){v.call(this).then(a.closure(this))}.closure(this),gx.csv.deferredOnchange=gx.lang.doCallTimeout(function(){delete gx.csv.deferredOnchange;gx.evt.fireControlValueChange(f,t,i).always(y)},this,[],100)):a.call(this),c.promise()},execOnchange:function(n,t,i){var r="";if(n.attributes["data-gxoch1"])try{r+=n.attributes["data-gxoch1"].value+";"}catch(u){gx.dbg.logEx(u,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(n)&&n.attributes["data-gxoch2"])try{r+=n.attributes["data-gxoch2"].value+";"}catch(f){gx.dbg.logEx(f,"gxapi.js","execOnchange")}try{""!=r&&eval(r)}catch(e){gx.dbg.logEx(e,"gxapi.js","execOnchange")}t||gx.fn.setControlGxValid(n,"0");i||(n.setAttribute("gxctrlchanged","1"),gx.fn.setControlValue("IsModified","1"));!0!==i&&gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(n){var t="";try{t=n.attributes["data-gxoch0"].value}catch(i){return!0}return new Function(t).call(n)},jsEvent:function(n){return gx.isInputEnabled()?(n=n.getAttribute?n.getAttribute("data-jsevent")||n.getAttribute("jsevent"):n.jsevent,gx.lang.emptyObject(n)?!0:eval(n)):!1},isEnterEvtCtrl:function(n){var t,r;if(gx.O.EnterCtrl){if(t=gx.dom.id(n),t||"A"!=n.tagName||(t=n.parentNode.id),t&&0==t.indexOf("span_")&&(t=t.substring(5)),!t)return!1;for(var u=gx.O.EnterCtrl,n=gx.fn.rowGridId(n),i=0,f=u.length;i<f;i++)if(r=gx.csv.ctxControlId(u[i]),n&&-1!=t.search(RegExp(".*"+r+"_[0-9]{4}$"))||r==t)return!0}return!1},isCheckEvtCtrl:function(n){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){var n=gx.dom.id(n);for(var t in gx.O.CheckCtrl)if(gx.O.CheckCtrl[t]==n||gx.O.CmpContext+gx.O.CheckCtrl[t]==n)return!0}return!1},isTriggerKey:function(n){for(var i=this.triggerKeys.length,t=0;t<i;t++)if(n.keyCode==this.triggerKeys[t]||n.charCode==this.triggerKeys[t])return!0;return!1},isControlKey:function(n){for(var i=this.controlKeys.length,t=0;t<i;t++)if(n==this.controlKeys[t])return!0;return!1},invalidDSPKey:function(n){var t=n.keyCode-111;return n.shiftKey&&(t+=12),this.keyListeners[t]&&"ENTER"==this.keyListeners[t][gx.O.CmpContext]||13==n.keyCode?!0:!1},addKeyListener:function(n,t,i){1==t&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[t]&&(this.keyListeners[t]=[]);this.keyListeners[t][n]=i},setEvtName:function(n){gx.fn.setHidden("_EventName",n)},cancelAndRefresh:function(n){var t=gx.O;return t&&t.conditionsChanged?(this.cancel(n,!0),t.autoRefresh||this.resetGridsPagingVarsIfConditionsChanged(t.Grids||[]),!t.autoRefresh&&!t.hasEnterEvent&&!t.anyGridBaseTable)?!1:(t.executeServerEvent("RFR",!1),!0):!1},resetGridsPagingVarsIfConditionsChanged:function(t){var i=!1;return n.each(t,function(n,t){t.conditionsChanged&&t.conditionsChanged()&&(t.setPagingVars(0,0),i=!0)}),i},setGridEvt:function(n,t){if(gx.isInputEnabled()&&!gx.lang.emptyObject(n)){if(gx.lang.emptyObject(t)){var i=gx.fn.getGridObj(n);i&&(t=gx.fn.getHidden(gx.O.CmpContext+i.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",n);gx.fn.setHidden("_EventRowId",t);t&&gx.fn.setCurrentGridRow(n,t)}},checkFuncKey:function(n,t){var i=this.lastKey-111,r,u,f;if(n.shiftKey&&(i+=12),0<i&&24>=i&&void 0!=this.keyListeners[i])if(r=this.keyListeners[i][gx.O.CmpContext],"undefined"!=typeof r)this.execFnKeyEvt(n,gx.O,r,t);else for(u in this.keyListeners[i])if((r=this.keyListeners[i][u],"undefined"!=typeof r)&&(f=gx.getObj(u,!1),null!=f)){this.execFnKeyEvt(n,f,r,t);break}},execFnKeyEvt:function(n,t,i,r){var f;if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(n,!0),"PROMPT"==i){if((n=t.getValidStructFld(r))&&n.attachedCtrls)for(var i=n.attachedCtrls,u=0,e=i.length;u<e;u++)(r=i[u])&&r.info&&r.info.isPrompt&&(f=i[u].id,"function"==typeof t.promptKeyHandlers[f]&&(r=0<n.grid?"_"+gx.fn.currentGridRowImpl(n.grid):"",r=gx.dom.el(t.CmpContext+f+r),t.promptKeyHandlers[f].call(t,r)))}else t.isTransaction()&&"SELECT"==i?(t=gx.dom.byId(t.CmpContext+"BTN_SELECT"))&&"function"==typeof t.click&&t.click():t.executeEvent(i,!1)},keyModifiesValue:function(n){return n=window.event?n.keyCode:n.which,32<=n&&127>=n||229==n?!0:!1},triggersEvt:function(n){if(!gx.lang.emptyObject(n)){if(n==gx.evt.dummyCtrl)return!0;var t=gx.config.evt.triggersEvtNodes||{};if("A"===n.nodeName||"TEXTAREA"===n.nodeName||t[n.nodeName])return!0;if("INPUT"===n.nodeName){if("button"===n.type||"image"===n.type)return!0}else if("IMG"===n.tagName&&gx.dom.hasAttribute(n,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR))return!0}return!1},setProcessing:function(n){var t=n.status,n=n.cond;("undefined"==typeof n||n)&&!gx.evt.redirecting&&(gx.evt.processing=t,gx.dbg.enabled&&(console.groupCollapsed("setProcessing ${ctx} ${gx.evt.processing}"),console.trace(),console.groupEnd()),gx.evt.setReady(!gx.evt.processing,"setProcessing"),gx.evt.processing||gx.fx.obs.notify("gx.endprocessing"))},doAfterProcessing:function(n,t){gx.evt.processing?gx.fx.obs.addObserver("gx.endprocessing",t,n,{single:!0}):n.call(t)},startValidation:function(n,t){(n||t)&&(gx.csv.validatingGrid=n,gx.csv.validating+=1)},endValidation:function(n,t){n&&n!==gx.csv.validatingGrid||(gx.csv.validating-=1,0===gx.csv.validating&&(gx.csv.validatingGrid=null),0>gx.csv.validating&&gx.dbg.logMsg("WARNING! endValidation unexpected condition (gx.csv.validating < 0)"),gx.fx.obs.notify("gx.onaftervalidate",[t]))},userReadyThresholdWait:function(){return gx.evt.userReadyTStamp||(gx.evt.userReadyTStamp=Date.now()),Date.now()>gx.evt.userReadyTStamp+gx.evt.userReadyThreshold},setReady:function(n){gx.evt.userReadyCnt+=n?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;0==gx.evt.userReadyCnt?(gx.evt._userReady=!0,gx.evt.userReadyTStamp=Date.now()):gx.evt._userReady=!1;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0);gx.dbg.enabled&&(console.groupCollapsed("setReady ${Context} ${gx.evt.userReadyCnt}"),console.trace(),console.groupEnd())},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,setCurrentGridRows:function(n,t){for(;0<n&&t&&t.length&&4<=t.length;){var i=t.substr(0,4),r=t.substr(4);gx.fn.setCurrentGridRow(n,i);(i=gx.O.getGridById(n,r))&&(i=i.parentGrid);n=i?i.gridId:0;t=t.substr(4,t.length)}},canExecuteEvent:function(n,t){return!(!t&&(gx.spa.isNavigating()||gx.evt.redirecting||!gx.csv.isvalidating()&&(gx.lang.emptyObject(n)||gx.evt.processing)))},execEvt:function(n,t,i,r,u,f,e,o,s,h,c,l){if(gx.dbg.logPerf("execEvt"),gx.text.contains(i,"EENTER")&&gx.ajax.saveFormForAutoComplete(),this.canExecuteEvent(i,h)){var p=gx.setGxObyCtx(n,t),y=u,a=this.EVT_ROW_ID_REGEXP.exec(i),v=a&&1<a.length?a[1]:null;a&&2<a.length&&gx.evt.setCurrentGridRows(y,v);v||(v=gx.fn.currentGridRowImpl(y));a=function(){gx.fx.obs.notify("gx.validation",null,function(){var w,a;!h&&p&&p.inputHasFormatErrors(i,u,v)?c&&c.call():(gx.setGxObyCtx(n,t),e&&(gx.evt.srvCommand=!0,r&&(y=gx.fn.rowGridId(r),v=gx.fn.controlRowId(r),!gx.lang.emptyObject(y)&&!gx.lang.emptyObject(v)&&(gx.csv.lastGrid=y,gx.fn.setCurrentGridRow(y,v)))),0<gx.csv.lastId&&!gx.csv.validatingAll&&(a=gx.O.getValidStruct(gx.csv.lastId),((gx.evt.isEnterEvtCtrl(r)&&0<r.id?gx.O.getValidStructId(r.id):gx.O.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(r)||a&&a.isuc)||l)&&(gx.csv.validatingAll=!0,gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=!1)),this.setEvtName(i,r),this.lastEvent=i,!e&&(gx.grid.drawAtServer||r&&"INPUT"==r.nodeName&&"submit"==r.type)?this.execEvtSubmit(i,r):(gx.evt.setProcessing({status:!0,ctx:"notifyValidation"}),w=function(){gx.evt.setProcessing({status:!1,ctx:"notifyValidation"})},a=function(){gx.ajax.doPost((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),f,o,s);w()},gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(i,gx.O,y,v,!0,void 0,o).done(function(n){n||c&&c.call();s&&s(n);w()}).fail(a):gx.evt.execNonFullAjaxEvent(a)))}.closure(this))};gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(r)&&r!=gx.csv.lastControl&&void 0!=r.onfocus?(gx.fx.obs.addObserver("gx.onafterfocus",this,a,{single:!0}),r.onfocus()):a.call(this)}else c&&c.call()},execEvtSubmit:function(n,t){var r,f,i,u;gx.isInputEnabled()&&(gx.evt.setProcessing({status:!0,ctx:"execEvtSubmit"}),gx.O.startFeedback(),gx.fx.obs.notify("gx.onbeforeevent",[n,t]),gx.fn.objectOnpost(),gx.http.saveState(),gx.fn.forceEnableControls(!1),r=gx.dom.form(),i=gx.popup.getPopup(),null!=i&&(f=r.action,i=i.window.gx.popup.lvl,-1!=i&&(u=gx.http.urlParameterPrefix(f),u=u+encodeURIComponent("gxPopupLevel="+i+";"),r.action=f+u)),r.submit())},execCliEvt:function(t,i,r,u,f,e){var h=n.Deferred(),e,o,s,c,l,a;return this.canExecuteEvent(!0,!1)?(gx.fx.obs.notify("gx.validation"),e=void 0!=e?e:[],o=gx.getObj(t,i),null!=o)?(gx.setGxO(t,i),"string"==typeof u&&""!=u&&4<arguments.length&&(s=o.getGrid(u),s.instanciateRow(f),s=s.gridId),o.inputHasFormatErrors(o.getServerEventName(r),s,f))?h.reject():(c=o.isServerEvent(r),gx.evt.setProcessing({status:!0,cond:!c,ctx:"execCliEvt"}),o.execC2VFunctions(),l=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing({status:!1,cond:!c,ctx:"execCliEvt"})});o.conditionsChanged?o.executeServerEvent("RFR",!0):gx.fx.obs.notify("gx.onafterevent",[]);h.resolve()},a=function(){o[r](e);l();gx.fx.obs.notify("gx.afterNonFullajax")},gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(o.getServerEventName(r),o,s,f,!1,e).done(l).fail(a):gx.evt.execNonFullAjaxEvent(a),h.promise()):h.reject():h.reject()},execNonFullAjaxEvent:function(n){gx.evt.NonFullAjaxserialRunner=gx.evt.NonFullAjaxserialRunner||gx.evt.serialRunner();gx.fx.obs.addObserver("gx.afterNonFullajax",gx.evt,function(){gx.evt.NonFullAjaxserialRunner.signalEndTask()},{single:!0});gx.evt.NonFullAjaxserialRunner.addTask(n)},fixWebKitOnFocus:function(){var n=gx.util.browser;return n.isWebkit()&&!n.isChrome()||n.isChrome()&&30>n.chromeVersion()?!0:!1},dispatcherTimeout:30,dispatcher:function(){var t=function(n){for(var r=[],t,u={},f,i=0;i<n.length;i++)t=n[i],u[t.eventName]||(u[t.eventName]=[]),u[t.eventName].push(t.deferred),(0===r.length||t.eventName!==r[r.length-1].eventName)&&r.push(t);for(i=0;i<r.length;i++)for(t=r[i],f=u[t.eventName],n=0;n<f.length;n++)t.deferred!==f[n]&&t.deferred.done(function(){this.resolve.apply(this,arguments)}.closure(f[n]));return r};return{dispatchedEvents:{},serialRunner:gx.evt.serialRunner(),getContextKey:function(n,t,i,r){return r+(n.CmpContext+n.ServerClass)+(t||"")+(i||"")},getEventParmsMetadata:function(n,t,i){return t.EvtParms[n]["input"==i?0:1]},eventDepends:function(n,t,i){for(var t=this.getEventParmsMetadata(t,i,"output"),n=this.getEventParmsMetadata(n,i,"input"),f,r=0,e=t.length;r<e;r++)for(var i=gx.ajax.resolveParmKey(t[r]),u=0,o=n.length;u<o;u++)if(f=gx.ajax.resolveParmKey(n[u]),i==f)return!0;return!1},initialize:function(){this.t&&clearTimeout(this.t);this.serialRunner=gx.evt.serialRunner();this.dispatchedEvents={}},beforeDispatch:function(n){var t=gx.ajax.getSecurityToken(n);t&&(n.InternalParms[t.id]=t.value)},types:{event:"event",validation:"validation"},dispatch:function(t,i,r,u,f,e,o,s){var s=s||gx.evt.dispatcher.types.event,f=void 0===f||f,l=n.Deferred(),v,h,c;if("object"==typeof t&&(v=t.fn,t=t.eventName),h=i.cleanEventName(t),c=i.getClientEventName(t),s===gx.evt.dispatcher.types.validation?(h=t.toUpperCase(),c=t):(h=i.cleanEventName(t),c=i.getClientEventName(t)),this.beforeDispatch(i),!i.EvtParms[h])return l.reject(),l.promise();var t=this.getContextKey(i,r,u,s),a=this.dispatchedEvents[t],f={eventName:h,clientSideEventName:c,clientSideFunction:f?null:(v||i[c]).closure(i,e||[]),serverSide:f,deferred:l,arguments:e,disableForm:o};return a?a.events.push(f):(a={gxO:i,grid:r,row:u,type:s,events:[f]},this.dispatchedEvents[t]=a,this.t=setTimeout(this.serialRunner.addTask.closure(this.serialRunner,[this.dispatchTimeoutCallback.closure(this,[t])]),gx.evt.dispatcherTimeout)),l.promise()},dispatchTimeoutCallback:function(n){var i=this.dispatchedEvents[n],o=i.type,w=i.gxO,b=i.grid,k=i.row,e=[],r=[],u,v,f=[],s,h={},n,c,l,a,y,p;if(delete this.dispatchedEvents[n],o!==gx.evt.dispatcher.types.validation)for(n=0,c=i.events.length;n<c;n++)if(u=i.events[n],u.serverSide)r.push(u);else{for(v=!0,l=0;l<n;l++)if(this.eventDepends(u.eventName,i.events[l].eventName,w)){v=!1;break}v?e.push(u):r.push(u)}else r=i.events;for(i=t(e,o).concat(t(r,o)),e=!1,n=0,c=i.length;n<c;n++)r=i[n].eventName,h[r]||(h[r]=[]),h[r].push(i[n].deferred),e&&i[n].serverSide?s.addMethod(r):(s=this.createMessage(o,r,w,b,k,i[n].serverSide,i[n].disableForm),i[n].serverSide||(s.callback=i[n].clientSideFunction),f.push(s)),e=i[n].serverSide;a=function(n,t,i){for(var e,u,f,r=0,o=n.methods.length;r<o;r++)for(e=h[n.methods[r]],u=0;u<e.length;u++)f=e[u],f&&(t?f.resolve(i):f.reject(i))};runCount=0;y=this.serialRunner;p=function(){if(runCount<f.length){var n=f[runCount++],t=runCount==f.length;n.call().done(function(i){a(n,!0,i);p();t&&y.signalEndTask()}).fail(function(t){a(n,!1,t);for(var i=runCount;i<f.length;i++)a(f[i],!1,t);y.signalEndTask()})}};p()},createMessage:function(n,t,i,r,u,f,e){return n===gx.evt.dispatcher.types.validation?new gx.ajax.validationMessage(t,i,r,u,f,e):new gx.ajax.message(t,i,r,u,f,e)}}}(),mouse:{x:-1,y:-1,update:function(n){try{gx.lang.emptyObject(n.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=n.pageX,this.y=n.pageY):0<n.touches.length&&(this.x=n.touches[0].pageX,this.y=n.touches[0].pageY)}catch(t){gx.dbg.logEx(t,"gxapi.js","mouse update")}}},_deinit:function(){this.lastEvent=this.lastControl=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}}}(gx.$);gx.csv_i=function(n){var t=function(t,i,r){for(var f=[],u=0;u<t.length;u++)f.push(i.validControl.apply(i,t[u]));n.when.apply(n,f).done(r)};return{GX_OLD_VALUE_ATTRIBUTE:"data-gxoldvalue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:0,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],resetRow:function(){gx.csv.lastEvtRow=null;gx.csv.validatingGrid=null;gx.csv.instanciatedRowGrid=null},isvalidating:function(){return 0<gx.csv.validating},validateAll:function(t){var i=n.Deferred(),t=t||gx.O;return this.validControls(t.fromValid,t.toValid,!1,t).done(function(){try{null!=this.invalidControl&&gx.csv.stopOnError||(t.fromValid=t.toValid)}catch(n){gx.dbg.logEx(n,"gxapi.js","validateAll")}i.resolve()}.closure(this)),i.promise()},validControls:function(i,r,u,f,e){var l=n.Deferred(),h=[],w=0,b=0,y=0,k=gx.csv.fullGridValidation&&1<=r-i&&gx.O.isTransaction(),o,f=f||gx.O,p,s,d,it,a,v;f.startFeedback();p=function(n,t){if(gx.csv.stopOnError)if(-1!=t){var i=gx.fn.validStruct(t,f),i=gx.fn.getControlGridRef(i.fld,i.grid);gx.csv.disableFocus=document.activeElement!==i;gx.fn.isAccepted(i,f)?gx.fn.setFocus(i):gx.fn.setFocus(gx.evt.lastControl)}else gx.dom.isButton(gx.csv.lastControl)||null==gx.csv.validActivatedControl||gx.fn.setFocus(gx.csv.validActivatedControl)};try{if(gx.csv.validActivatedControl=null,gx.csv.invalidControl=null,gx.csv.invalidId=0,o=null,r>i){for(k&&(o=gx.fn.validStruct(i),void 0!=o&&void 0!=o.lvl&&(w=o.lvl),o=gx.fn.validStruct(r),void 0!=o&&void 0!=o.lvl)&&(b=o.lvl),h=[],s=i;s<r;s++)if(o=gx.fn.validStruct(s),o&&(d=gx.fn.currentGridRowImpl(o.grid)),h.push([s,u,f,d,e]),k&&s>i&&s<r&&void 0!=o&&void 0!=o.lvl&&(y=o.lvl,y!=w&&y!=b&&o&&o.grid)){var g=gx.fn.getGridObj(o.grid),rt=g.grid.rows.length,nt=gx.fn.currentGridRowImpl(o.grid),tt=gx.fn.lastGridControl(o.grid);if(s==tt)for(it=gx.fn.firstGridControl(o.grid),a=0;a<rt;a++){var c=g.grid.rows[a],ut=c.gxDeleted(),ft=c.gxExists(),et=c.gxIsMod();if(!ut&&(ft||et)&&c.gxId!=nt)for(v=it;v<=tt;v++)h.push([v,u,f,nt,c.gxId])}}if(0<h.length)return gx.evt.setProcessing({status:!0,ctx:"validControls"}),t(h,this,function(){for(var r,n=!0,i=-1,t=0,u=arguments.length;t<u;t++)if(r=arguments[t].ret,n&&!r){i=arguments[t].ctrl;n=!1;break}p(n,i);gx.evt.setProcessing({status:!1,ctx:"validControls"});f.endFeedback();l.resolve(n)}),l.promise()}p(!0,-1);f.endFeedback();l.resolve(!0)}catch(ot){gx.dbg.logEx(ot,"gxapi.js","validControls")}return l.promise()},validControl:function(t,i,r,u,f){var h=n.Deferred(),r=r||gx.O,e=gx.fn.validStruct(t,r),s,c=!0,o;if(void 0!=e){0!=e.grid&&(s=u?u:gx.fn.currentGridRowImpl(e.grid),gx.lang.emptyObject(s)||gx.fn.setCurrentGridRow(e.grid,s));!0==e.isuc?(s=0!=e.grid?u?u:gx.fn.currentGridRowImpl(e.grid):null,e.getUCInstance(s),e.uc.execC2VFunctions()):"function"==typeof e.c2v&&e.c2v();"function"==typeof e.v2bc&&e.v2bc.call(r);try{if((0==e.lvl||0!=e.grid&&gx.fn.gridRowIsMod(e.lvl,gx.fn.currentGridRow(e.grid))||!r.isTransaction())&&(o=null,o=!0==e.isuc?e.uc.getRealControl():gx.fn.getControlGridRef(e.fld,e.grid)))return this.validate(o,t,i,r,u,f).done(function(n){try{var i=!1,r=!0,u=-1;e.grid!=0&&(i=gx.fn.rowIsRemoved(e.grid,gx.fn.currentGridRow(e.grid)));n||i||(gx.csv.invalidControl=o,gx.csv.invalidId=t,r=!1,u=t);gx.csv.lastId=t;gx.fn.isAccepted(o)==!1&&(gx.evt.executeOnblur(t,o),o.getAttribute("data-gxhiddenonchange")!=o.value&&(o.setAttribute("data-gxhiddenonchange",o.value),gx.evt.execOnchange(o,!1,!0)))}catch(f){gx.dbg.logEx(f,"gxapi.js","validControl - callback")}h.resolve({ret:r,ctrl:u})}),c=!1,h.promise()}catch(l){gx.dbg.logEx(l,"gxapi.js","validControl")}}return c&&h.resolve({ret:!0,ctrl:-1}),h.promise()},validate:function(t,i,r,u,f,e){var s=n.Deferred(),u=u||gx.O,c=!0,o,h;if(gx.csv.anyError=!1,o=gx.fn.validStruct(i,u),void 0==o)return s.resolve(!0),s.promise();if(gx.csv.refreshVars(o,u),null==o.fnc&&null==o.isvalid){if("SELECT"!=t.tagName&&"checkbox"!=t.type&&!gx.evt.eachKeyAutorefreshType(o.type)&&!gx.lang.emptyObject(o.rgrid))for(c=o.rgrid.length,h=0;h<c;h++)o.rgrid[h].filterVarChanged();return s.resolve(!0),s.promise()}try{-1!=i&&(r||"1"!=t.getAttribute(gx.csv.GX_VALID_ATTRIBUTE))&&(gx.csv.currentId=i,gx.evt.startValidation(o.gxgrid,!0),gx.csv.refreshVars(o),r=function(n){var n,c,h,r,l,a;if(1==u.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=t),gx.csv.anyError=!0,u.AnyError=0),gx.csv.anyError&&(n=!gx.csv.anyError),!n)return gx.evt.endValidation(),s.resolve(!1),s.promise();if(gx.csv.refreshControls(o,u,f),gx.csv.invalidateDeps(i,u),!gx.lang.emptyObject(o.rgrid)&&!gx.lang.emptyObject(o.hc))for(n=o.rgrid.length,r=0;r<n;r++)o.rgrid[r].filterVarChanged();c=gx.fn.isAccepted(t,!1,u);h=function(){s.resolve(!0);try{if(!e){var n=gx.dom.byId(t.id);c?gx.fn.setControlGxValid(n,"1"):gx.fn.setControlGxValid(n,"0")}gx.evt.endValidation()}catch(i){gx.dbg.logEx(i,"gxapi.js","validate")}};null!=o.isvalid&&c&&"1"!=t.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&!e?(r=o.gxgrid?o.gxgrid:null,n=o.isvalid,gx.pO.supportAjaxEvents)?(r=o.gxgrid?o.gxgrid.gridId:!1,l=u.isServerEvent(n),n?gx.evt.dispatcher.dispatch(u.getServerEventName(n),u,r,f,l).done(h).fail(h):u[n]().then(h)):(a=gx.csv.instanciatedRowGrid,gx.csv.instanciatedRowGrid=r,u[n]().then(function(){gx.csv.instanciatedRowGrid=a;h()})):h()},c=!1,o.isuc?r.call(this,o.fnc.call(o.uc)):null!=o.fnc?(h=o.fnc.call(u))&&h.done?h.done(r.closure(this)):r.call(this,h):r.call(this,!0))}catch(l){gx.dbg.logEx(l,"gxapi.js","validate")}return c&&s.resolve(!0),s.promise()},invalidateForm:function(){var n;if(1!=gx.O.AnyError)for(var i=gx.fn.controlIds(),r=i.length,t=0;t<r;t++)n=gx.fn.validStruct(i[t]),n&&n.fld&&!n.isuc&&this.invalidateGXCtrl(gx.fn.getControlGridRef(n.fld,n.grid),!1)},invalidateGXCtrl:function(n,t){"undefined"==typeof t&&(t=!0);n&&1==n.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&(!t||gx.csv.controlValueHasChanged(n))&&gx.fn.setControlGxValid(n,"0")},invalidateCtrl:function(n,t){var i,r;try{this.invalidateGXCtrl(n);i=gx.fn.validStruct(gx.O.focusControl);i&&0!=i.grid&&(!0===t||gx.evt.keyModifiesValue(t))&&(r=gx.fn.controlRowId(n)||gx.fn.currentGridRowImpl(i.grid)||"0001",i.gxgrid.setRowModified(r))}catch(u){gx.dbg.logEx(u,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(n,t){for(var i,r,u,h,f,s=gx.fn.controlIds(t),c=s.length,e=0;e<c;e++)if(i=s[e],i>n)for(var i=gx.fn.validStruct(i,t),l=i.ip?i.ip.length:0,o=0;o<l;o++)if(i.ip[o]==n)if(0==i.grid)r=gx.fn.getControlGridRef(i.fld,i.grid),r&&gx.fn.setControlGxValid(r,"0");else if(u=gx.fn.getGridObj(i.grid),u)for(h=u.grid.rows.length,f=0;f<h;f++){var r=u.grid.rows[f],a=r.gxDeleted(),v=r.gxExists();!a&&v&&(u.setRowModified(r.gxId),(r=gx.fn.getControlRef(i.fld+"_"+r.gxId))&&gx.fn.setControlGxValid(r,"0"))}},controlValueHasChanged:function(n,t,i){if(!n)return!1;"undefined"==typeof t&&(t=n.value);var r=n.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE),u=gx.applyPicture(i,r,n);return null===r||u!==gx.applyPicture(i,t,n)||gx.evt.fixWebKitOnFocus()&&"radio"===n.type},setFormatError:function(n,t){n=gx.dom.el(n);n.id&&(t||"undefined"==typeof t?(this.gxFormatErrors[n.id]=!0,n.GXFormatError=!0):(delete this.gxFormatErrors[n.id],n.GXFormatError=!1))},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){var t,n,i;if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{if(t=gx.getVar("Gx_mode"),0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),n=gx.fn.validStruct(gx.O.focusControl),n&&n.nac&&!0==n.nac.call(gx.O))return cn=gx.fn.getControlIndex(gx.csv.lastControl)+1,i=gx.fn.searchFocusFwd(cn),null!=i&&gx.fn.setFocus(i),gx.setVar("Gx_mode",t),!0;gx.setVar("Gx_mode",t)}catch(r){}return!1},loadScreen:function(n){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0,void 0,void 0,n,!1))}catch(t){gx.dbg.logEx(t,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(n,t){var i,r;return(i=t||gx.O)&&i.IsMasterPage&&0!=n.indexOf("MP")&&(r=this.CTRL_ROW_INDEX_REGEXP.exec(n),r&&1<r.length)?(i=r[1],r=2<r.length?"_"+r[2]:"",i+(-1===i.indexOf("_MPAGE")?"_MPAGE":"")+r):(i=(t?t.CmpContext:this.cmpCtx)||"")&&0==n.indexOf(i)||0<=n.search(gx.GxObject.CONTROL_CMP_REGEX)?n:i+n},isProperty:function(n){return n instanceof Array&&2==n.length||"object"==typeof n&&"undefined"!=typeof n[0]&&"undefined"!=typeof n[1]?!0:!1},checkGridChange:function(n,t,i,r){if(n){var u=n.gridId,n=gx.fn.currentGridRowImpl(u);gx.csv.validGridRowChange(u,n,i,n).done(function(){var n=i.getGridById(u,r);gx.csv.checkGridChange(n.parentGrid,!0,i,r)})}},checkRowChange:function(t,i,r,u){var o=n.Deferred(),s,e,f,h;try{s=gx.fn.validStruct(t,r);"undefined"!=typeof s?(e=s.grid,0!=e?(f=gx.fn.currentGridRowImpl(e),f&&(f!=u||i)&&1<f.length&&u&&1<u.length?(gx.csv.rowChanged=!0,h=r.Gx_BScreen,r.Gx_BScreen=1,gx.csv.validGridRowChange(e,f,r,u).done(function(n){n&&(n=r.getGridById(e,u))&&(n.instanciateRow(f),n.parentGrid&&gx.csv.checkGridChange(n.parentGrid,!0,r,u));r.Gx_BScreen=h;o.resolve(!0)})):o.resolve(!1),void 0!=f&&gx.fn.setCurrentGridRow(e,f)):o.resolve(!1)):o.resolve(!1)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","checkRowChange")}return o.promise()},validGridRow:function(n,t){void 0!=t&&gx.fn.setCurrentGridRow(n,t);var i=gx.fn.firstGridControl(n),r=gx.fn.lastGridControl(n);gx.csv.validControls(i,r+1,!0,gx.O)},validGridRowChange:function(t,i,r,u){var f=n.Deferred();void 0!=u&&gx.fn.setCurrentGridRow(t,u);var e=gx.fn.firstGridControl(t,r),o=gx.fn.lastGridControl(t,r),u=!gx.lang.emptyObject(u)&&!gx.lang.emptyObject(i)&&u.length==i.length&&parseInt(u)>parseInt(i);return gx.csv.validControls(e,o+1,!0,r,u).done(function(n){(n||!gx.csv.stopOnError)&&gx.csv.changeGridRow(t,e,i);f.resolve(n)}),f.promise()},changeGridRow:function(n,t,i){gx.csv.lastId=t;gx.O.fromValid>t&&(gx.O.fromValid=t);gx.csv.lastRow[n]=i;Gx_BScreen=1},targetRowIsMod:function(n){return(n=gx.fn.validStruct(n))?gx.fn.gridRowIsMod(n.lvl,gx.fn.currentGridRow(n.grid)):!1},refreshVars:function(n,t){for(var r=n.ip?n.ip.length:0,i=0;i<r;i++)try{"function"==typeof gx.fn.validStruct(n.ip[i],t).c2v&&gx.fn.validStruct(n.ip[i],t).c2v()}catch(u){gx.dbg.logEx(u,"gxapi.js","refreshVars")}},refreshControls:function(n,t,i){for(var u,f,o,e=n.op?n.op.length:0,r=0;r<e;r++)try{u=gx.fn.validStruct(n.op[r],t);f=null;0==u.grid?(gx.fn.v2c(u),f=gx.dom.el(gx.csv.ctxControlId(u.fld))):(o=gx.fn.currentGridRowImpl(u.grid),gx.text.endsWith(i,o)&&(gx.fn.v2c(u),f=gx.fn.getControlGridRef(u.fld,u.grid)));f&&gx.fn.setControlGxValid(f,"0")}catch(s){gx.dbg.logEx(s,"gxapi.js","refreshControls")}for(e=n.ucs?n.ucs.length:0,r=0;r<e;r++)try{gx.fn.validStruct(n.ucs[r],t).uc.execV2CFunctions(!0)}catch(h){gx.dbg.logEx(h,"gxapi.js","refreshControls")}},setValidValues:function(n,t,i){var u=[],e,f,r,o;if(1<i.length-t.length){e=gx.json.evalJSON(i[i.length-1]);for(h in e)gx.fn.setHidden(h,e[h]);u=gx.json.evalJSON(i[i.length-2])}if(e={},n={fields:n,msgs:u},gx.O.cmpCtx?e[gx.O.cmpCtx]=n:e.MAIN=n,gx.fn.setErrorViewer(e),!gx.O.AnyError)for(var s=!1,n=t.length,e=0;e<n;e++)f=t[e],u=i[e],this.isProperty(f)?(r=gx.fn.vStructForVar(f[0])||gx.O.getValidStructFld(f[0]),null!=r&&gx.fn.setCtrlProperty(r.fld,f[1],u)):(r=gx.fn.validStruct(this.currentId),!gx.lang.emptyObject(r)&&!gx.lang.emptyObject(r.hc)&&(r.hc==f?(gx.O[r.hc]=u,gx.fn.setHidden(this.cmpCtx+"GXH_"+r.fld,u)):r.hd==f&&(gx.O[r.hd]=u)),r=gx.fn.vStructForVarWId(f,this.currentId),gx.lang.emptyObject(r))?(r=gx.fn.vStructForHC(f),null!=r&&(o="",0!=r.grid&&(o="_"+gx.fn.currentGridRow(r.grid)),gx.fn.setHidden(this.cmpCtx+"GXHC"+r.fld+o,u)),r=gx.fn.gridObjFromGxO(f),void 0!=r?(s=!0,r.loadGrid({rowProps:u})):gx.fn.saveLvlOldParm(f,u)&&(gx.setVar(f,u),gx.fn.setGridHidden(f,u))):(f=gx.fn.screen_CtrlRef(r.fld),!gx.lang.emptyObject(f)&&u instanceof Object&&("SELECT"==f.tagName?(-1!=f.selectedIndex&&gx.fn.invalidEmptyValue(u)&&(u.s=f.options[f.selectedIndex].value),o=gx.dom.id(f),gx.fn.loadComboBox(o,u.v),gx.fn.setComboBoxValue(o,u.s)):gx.lang.emptyObject(u.s)||(u.s=gx.fn.trimSelectValue(u.s,r.type)),o=gx.fn.selectedDescription(u,r.type),u=gx.lang.emptyObject(u.s)&&!gx.lang.emptyObject(f.value)?f.value:"SPAN"==f.tagName&&!gx.lang.emptyObject(u.s)&&!gx.lang.emptyObject(o)?o:u.s,gx.fn.setControlValue_span_safe(this.cmpCtx+r.fld,u,0)),r.v2v)&&(r.v2v(u),gx.fn.v2c(r,u,"bits"==r.type));gx.O.refreshOlds();gx.fn.enableDisableDelete();s&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.gxFormatErrors=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}}}(gx.$);gx.http_i=function(n){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(n,t){return"{"!=t[0]&&200==n.status&&0!=n.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+n.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(n,t,i){null!=gx.dom.el(n,!1,!0,!0)?gx.fn.setControlValue_impl(n,t):i&&(gx.dom.createInput(n,"hidden"),gx.fn.setControlValue_impl(n,t))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart","",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;n(gx.dom.el("GXState")).val("{}")},applyWellKnownPtys:function(){gx.wpo(function(){this.viewState.FORM_Caption&&gx.fn.setCtrlPropertyImpl(document,"Caption",this.viewState.FORM_Caption)},this)},loadState:function(){var n,t;gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;n=gx.dom.el("GXState");n&&(t=n=n.value,this.useBase64State&&(t=gx.base64.decode(n)),this.viewState=gx.json.evalJSON(t),this.viewStateLoaded=!0,this.applyWellKnownPtys());gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(n){if(this.viewState){var t=gx.json.serializeJson(this.viewState,n),n=t;this.useBase64State&&(n=gx.base64.encode(t));t=gx.dom.el("GXState");null==t?gx.dom.createInput("GXState","hidden"):this.oldState=t.value;gx.fn.setControlValue_impl("GXState",n);this.useStateSignature&&(gx.http.setStateHsh(n),gx.http.setHsh())}},setStateHsh:function(n){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");n=gx.MD5.getHsh(n);gx.fn.setControlValue_impl("GXHSH12",n)},setHsh:function(){for(var t=gx.pO.WebComponents.length,n=0;n<t;n++)gx.http.setObjectHsh(gx.pO.WebComponents[n]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(n){var u=n.getControlIdsh(),i,r,f,t;if(null!=u){for(i="",n.IsComponent&&null!=n.CmpContext&&(i=n.CmpContext),t="",r=0;r<u.length;r++)(validStruct=n.getValidStruct(u[r]))&&"function"==typeof validStruct.val&&(f=gx.fn.getControlValue_impl(i+validStruct.fld),t="checkbox"==validStruct.ctrltype&&""==gx.text.trim(f)?t+validStruct.val():t+f);gx.http.createHsh(i+"GXHSH11",t)}},createHsh:function(n,t){null==gx.dom.el(n)&&gx.dom.createInput(n,"hidden");var i=gx.MD5.getHsh(t);gx.fn.setControlValue_impl(n,i)},refreshState:function(){null!=this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(n){for(var t,n=n+"=",r=document.cookie.split(";"),u=r.length,i=0;i<u;i++){for(t=r[i];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return null},setCookie:function(n,t,i,r,u){var i=i||1,f=[],i=new Date((new Date).getTime()+864e5*i);return f.push(n+"="+escape(t)),u&&f.push("path="+u),f.push(r?"session":"expires="+i.toGMTString()),"https:"===location.protocol&&(f.push("secure"),f.push("samesite=none")),document.cookie=f.join(";"),this.getCookie(n)==t},checkResponseStatus:function(n,t){return n.status==this.STATUS_FORBIDDEN?!1:n.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(t),!0):this.isBadResponse(n)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",n.status)),!0):n.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.timeoutActions.warn&&gx.http.reloadOnTimeout(t),!0):!1},isSessionTimeoutError:function(n,t){return!gx.gen.isDotNet()&&t&&n&&gx.pO.AjaxSecurity&&n.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==t.name&&2147500037==t.result||"Error"==t.name&&-2146697209==t.number||"NETWORK_ERR"==t.name&&101==t.code)?!0:!1},reloadOnTimeout:function(n){return(n||gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired"))?(gx.http.reload(),!0):(gx.ajax.enableForm(),!1)},reload:function(n){""==document.location.hash?this.redirect(location.href,!1,n):document.location.reload()},redirect:function(n,t,i,r){var r=r||gx.O,u=gx.popup.getPopup();if(null!=u&&gx.util.sameAppUrl(n)&&(u=u.window.gx.popup.lvl,-1!=u))var f=gx.http.urlParameterPrefix(n),f=f+encodeURIComponent("gxPopupLevel="+u+";"),n=n+f;gx.isabsoluteurl(n)||(n=gx.absoluteurl(n));t?gx.evt.redirecting=!0:setTimeout(function(){gx.pO!=r?r.endFeedback():gx.ajax.enableForm()},200);gx.spa.started&&!i?(gx.spa.redirect(n),gx.pO!=r?r.endFeedback():gx.ajax.enableForm()):location.href=n},getRequest:function(){var n=null;if(window.XMLHttpRequest&&(n=new XMLHttpRequest),!n)try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}return n},postDataFormat:{HTTP:0,JSON:1},getPostData:function(t,i){var i=i||gx.http.postDataFormat.HTTP,r=i==gx.http.postDataFormat.HTTP?[]:{},u;if(t.reqData)r=t.reqData;else for(var f=t.formNode,f="Form"==f.tagName?f.elements:n("input[type!=file],textarea,select"),o=f.length,e=0;e<o;e++)u=gx.http.elementPostData(f[e],i),null!=u&&(i==gx.http.postDataFormat.HTTP?r.push(u):r[u[0]]=u[1]);return gx.lang.isArray(r)&&i==gx.http.postDataFormat.HTTP&&(r=r.join("&")+"&"),r},elementPostData:function(n,t){var i,u,r;if(gx.json.isNonSerializable(n.name)||"FIELDSET"==n.tagName)return null;if(i="","select-multiple"==n.type)for(u=n.options.length,r=0;r<u;r++)n.options[r].selected&&(i=n.options[r].value);else if("radio"==n.type||"checkbox"==n.type){if(n.checked)i=n.value;else if("radio"==n.type)return null}else i="image"===n.type?n.src:this.element_gxvalue(n);return t==gx.http.postDataFormat.HTTP?encodeURIComponent(n.name)+"="+encodeURIComponent(i):[n.name,i]},element_gxvalue:function(n){return n.gxtype&&"dtime"==n.gxtype.type?(dt=new gx.date.gxdate(n.value,gx.dateFormat),dt.HasTimePart=0<n.gxtype.dec,dt.HasDatePart=0<n.gxtype.len,gx.date.dttoc(dt,n.gxtype.len,n.gxtype.dec)):n.value},doHandleRequest:function(n,t){if(n.readyState==this.STATE_DONE){if(n.status==this.STATUS_OK||t.handleAllStatusCodes){var i=new gx.util.Url(n.responseURL);if(gx.text.endsWith(i.path,".html")){window.location.href=n.responseURL;return}this.isOffline(n)&&(this.handleOffline(n),t.offline&&t.offline.call(t.obj||window,n,t));this.doCallHandler(n,t)}else gx.http.checkResponseStatus(n,t.warnOnTimeout)||gx.lang.doCallTimeout(gx.dom.writeError,document,[n.responseText,gx.getMessage("GXM_runtimeappsrv"),n.status],50);t.always&&t.always.call(t.obj||window,n,t);window.gx&&(gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog())}},onRequestError:function(n,t){t.error&&t.error.call(t.obj||window,n,t);t.always&&t.always.call(t.obj||window,n,t);gx.evt.setProcessing({status:!1,cond:!gx.csv.isvalidating(),ctx:"onRequestError"});n.readyState==this.STATE_DONE?gx.http.checkResponseStatus(n,t.warnOnTimeout):this.isBadResponse(n)&&gx.http.reloadOnTimeout(t.warnOnTimeout)},isBadResponse:function(n){return n.status==this.STATE_UNSENT&&gx.lang.emptyObject(n.responseText)?!0:!1},doCall:function(n){var t,i,r;if(n.gxInitiator=gx.util.executionContext.getContext(),gx.util.alert.hide(),n.handler||"function"!=typeof n.load||(n.handler=n.load),"boolean"!=typeof n.sync&&(n.sync=!1),n.method||(n.method="POST"),n.multipart&&"POST"==n.method)this.doMultipartPost(n);else if(t=this.getRequest(),null!=t){"function"!=typeof n.handler||n.sync||(i=gx.http.doHandleRequest.closure(this,[t,n]),r=gx.http.onRequestError.closure(this,[t,n]),gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?t.onreadystatechange=i:(t.onload=i,t.onerror=r));i=null;"POST"==n.method&&(i=gx.http.getPostData(n));r=!1!==n.avoidCache?this.uncache(n.url):n.url;t.open(n.method,r,!n.sync);!1!==n.ajaxHeader&&t.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==n.method&&t.setRequestHeader("Content-Type",n.contentType?n.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&gx.AjaxSecurity&&gx.OnSessionTimeout==gx.timeoutActions.ignore&&t.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(t,n.gxO);n.beforeSend&&n.beforeSend.call(n.obj||window,t);try{t.send(i)}catch(u){gx.dbg.logEx(u,"gxapi.js","doCall")}return"function"==typeof n.handler&&n.sync&&gx.http.doHandleRequest(t,n),t}return null},doCallHandler:function(n,t){t.gxInitiator&&gx.util.executionContext.changedContext(t.gxInitiator)||(t.obj?t.handler.call(t.obj,null,n.responseText,n):t.handler(null,n.responseText,n),window.gx&&"function"==typeof t.onReady)&&t.onReady()},doMultipartPost:function(n){gx.http.saveState(!0);this.getPostIFrame().gxPostInfo=n;var t=n.formNode;n.oldAction=t.getAttribute("action");t.setAttribute("action",n.url);n.oldTarget=t.getAttribute("target");t.setAttribute("target",this.iframeName);n.reqData&&(gx.http.saveHidden("GXAjaxMultipart",n.reqData,!0),this.setSecurityToken(null,n.gxO));t.submit()},setSecurityToken:function(n,t){var i=gx.ajax.getSecurityToken(t);i&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",i.value,!0):n.setRequestHeader("X-GXAUTH-TOKEN",i.value))},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var t=this.iframeName,n=gx.dom.byId(t);return n&&n.frameElement&&(n=n.frameElement),n||(n=document.createElement("div"),n.innerHTML='<iframe id="'+t+'" name="'+t+'" src="about:blank">',document.body.appendChild(n),n=n.firstChild,document.body.appendChild(n),window[t]=n,n.name=t,n.setAttribute("name",t),n.id=t,n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.height="1px",n.style.width="1px",n.style.visibility="hidden"),gx.evt.attach(n,this.iFrameloadEventName(),gx.http.iframeOnload),n},iFrameJsonResponse:function(t){return n(t).find("input[data-response-content-type='application/json']").val()},captureIframeHTTPStatusCode:function(n){var t=0;return n.title&&(n=/HTTP Status (\d\d\d)/gi.exec(n.title),0<n.length&&(t=Number(n[1]))),{status:t}},iframeOnload:function(){var n=gx.dom.byId(gx.http.iframeName),t,i;if(!(gx.http.useReadyStateEvent()&&"complete"!=n.readyState)&&(n||(n=window.frames[gx.http.iframeName]),n&&n.frameElement&&(n=n.frameElement),n)&&(gx.http.useReadyStateEvent()&&(n.src="about:blank",gx.evt.detach(n,gx.http.iFrameloadEventName(),gx.http.iframeOnload)),t=n.gxPostInfo,i=t.formNode,i.setAttribute("action",t.oldAction),i.setAttribute("target",t.oldTarget),n=n.contentDocument?n.contentDocument:n.contentWindow.document)){var i=n.body,r=gx.http.iFrameJsonResponse(i),u=!gx.lang.emptyObject(r);u||(u=gx.dom.allChildrenAreText(i))&&(r=gx.http.multipartResponse(i));u?(n=gx.base64.decode(r),gx.http.clearMultipartHidden(),t.handler(null,n,t),window.gx&&"function"==typeof t.onReady&&t.onReady(),t.always&&t.always.call(t.obj||window,null,t)):(i=gx.http.captureIframeHTTPStatusCode(n),gx.http.checkResponseStatus(i,t.warnOnTimeout)||document.write(n.documentElement.innerHTML))}},multipartResponse:function(t){var i="";try{i=n(t).text()}catch(r){gx.dbg.logEx(r,"gxapi.js","multipartResponse")}return i},uncache:function(n){var t=(new Date).getTime();return n+gx.http.urlParameterPrefix(n)+"gx-no-cache="+t},callBackend_simple:function(n,t,i,r,u,f,e,o){gx.http.callBackend_impl(void 0,n,t,gx.http.modes.none,i,r,u,f,e,o)},callBackend:function(n,t,i,r,u,f,e,o,s,h,c){gx.http.callBackend_impl(n,t,r,u,f,e,o,s,h,c)},callBackend_impl:function(n,t,i,r,u,f,e,o,s,h,c){var l=this.getRequest(),h=h||{},v,y,a;if(l){try{v=gx.O;u||v.startFeedback();f="undefined"!=typeof f?f:"GET";e="undefined"!=typeof e?e:null;s="undefined"!=typeof s?s:!1;o||(t=this.uncache(t));l.open(f,t,s);l.setRequestHeader(gx.ajax.reqHeader,"2");for(y in h)l.setRequestHeader(y,h[y]);try{"POST"==f?l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.timeoutActions.ignore&&l.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken)}catch(p){gx.dbg.logEx(p,"gxapi.js","callBackend_impl: gx.O cannot be null")}a=function(){if(u||v.endFeedback(),this.lastStatus=l.status,this.lastResponse=l.responseText,l.readyState!=this.STATE_DONE||l.status!=this.STATUS_OK)gx.http.checkResponseStatus(l)||(window.status="GXAjax HTTP error: ("+l.status+") - "+l.statusText,gx.dbg.logEx(l.responseText),c&&c());else if(r!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(r==this.modes.full)this.handleFull(this.lastResponse);else if(r==this.modes.call)return this.handleCall(this.lastResponse,n);return this.handleRetVal(this.lastResponse,n,i)}catch(t){gx.dbg.logEx(t,"gxapi.js","callBackend");c&&c()}}else window.status="GXAjax HTTP error: (bad response format)",c&&c()}.closure(this);s&&(gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?l.onreadystatechange=a:l.onload=a);l.send(e);s||a()}catch(w){window.status="GXAjax HTTP error: "+w.message}window.status=""}},handleFull:function(n){gx.http.postHandler(null,n,{status:200,responseText:""})},handleCall:function(t,i){if(i){var r=n.parseJSON(t);if(gx.lang.isArray(r))return i(r);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+t)}},handleRetVal:function(t,i,r){var u=gx.json.evalJSON(t),f=u[0];if(this.lastStatus=u[1],void 0==this.lastStatus&&(this.lastStatus=0),i&&(r||null==this.lastStatus||0==this.lastStatus)){if(r=n.parseJSON(t),gx.lang.isArray(r))return i(r);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+t)}else return f},postHandler:function(n,t,i,r){try{if(gx.csv.lastEvtResponse=null,200>i.status||299<i.status)gx.dom.writeError(i.responseText,gx.getMessage("GXM_runtimeappsrv"),i.status);else if(gx.http.validJsonResponse(i,t)){var u=gx.json.evalJSON(t);null==u?gx.dom.writeError(t.toString(),gx.getMessage("GXM_runtimeappsrv"),i.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=u,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(u,gx.O,r).done(function(n){n||(gx.fx.obs.notify("gx.onafterevent",[u]),gx.fx.obs.notify("gx.afterNonFullajax"))}))}}catch(f){gx.dbg.logEx(f,"gxapi.js","postHandler")}},encodeUriSegment:function(n){return encodeURIComponent(n).replace(/%20/g,"+")},formatLink:function(n,t,i){var u,f;if(n=gx.ajax.objectUrl(n),t&&0<t.length){u=",";f="";i&&(u="&");for(var n=n+"?",e=t.length,r=0;r<e;r++)0<r&&(n+=u),i&&(f=i[r]+"="),n+=f+gx.http.encodeUriSegment("function"==typeof t[r].getUrlVal?t[r].getUrlVal():t[r])}return n},loadScripts:function(n,t,i,r){"undefined"==typeof i&&(i=0);i>=n.length?t():gx.http.loadScript(n[i],function(n,t,i){gx.http.loadScripts(n,t,i+1,r)}.closure(this,[n,t,i]),r)},loadStyle:function(t,i,r,u){if(u=u?gx.dom.byId(u):null)u.href=t;else{var f=gx.dom.byTag("head")[0],u=document.createElement("link");u.rel="stylesheet";u.type="text/css";u.href=t;"function"==typeof i&&(u.onload=i);r?(t=gx.getThemeElement(),n(u).insertBefore(t),gx.util.browser.isIE()&&n(t).insertAfter(u)):f.appendChild(u)}},applyDeferredStyles:function(){n("link[rel='preload'][as='style']").each(function(n,t){t.rel="stylesheet"})},loadStyles:function(){var i=gx.fn.getHidden("GX_STYLE_FILES"),t,n;if(!gx.lang.emptyObject(i))for(t=0;t<i.length;t++)n=i[t],n=gx.util.resolveUrl(n),gx.cache.fileLoaded(n)||(gx.cache.addRemoteFile(n),this.loadStyle(n))},doCommands:function(){var n=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(n)||gx.ajax.dispatchCommands(n)},isOffline:function(n){return"1"===n.getResponseHeader("X-GX-OFFLINE")},handleOffline:function(){gx.util.alert.showError(gx.getMessage("GXM_OfflineUnsupported"))},useNamedParameters:function(n){return!1===gx.csv.useNamedParameters?!1:-1<n.indexOf("=")},urlParameterSeparator:function(n){return this.useNamedParameters(n)?"&":","},urlParameterPrefix:function(n){var t=n.indexOf("?");return-1<t?t==n.length-1?"":this.urlParameterSeparator(n):"?"}}}(gx.$);gx.$.extend(gx.evt,gx.evt_i);gx.$.extend(gx.csv,gx.csv_i);gx.$.extend(gx.http,gx.http_i);defaultConfig={popup:{ignoreCmdsOnCancel:!1},websocket:{},timezone:{reload:!0},evt:{dblclick:{delay:450}},csv:{scrollTopOnError:!1}};gx.config=gx.$.extend({},defaultConfig,window.gxCustomConfig||{});GlobalEvents=function(){return{executeMethod:function(n,t){gx.fx.obs.notify(n,t);try{for(var i=window;null!=i&&i.parent!==i;)i=i.parent,i!=window&&i.gx&&i.gx.fx.obs.notify(n,t)}catch(r){}}}}(jQuery);gx.util.browser.isIE()&&function(){function n(n,t){var t=t||{bubbles:!1,cancelable:!1,detail:void 0},i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i}if("function"==typeof CustomEvent)return!1;n.prototype=window.Event.prototype;window.CustomEvent=n}();gx.fx.obs.addObserver("gx.onload",gx,function(){var n={};gx.serviceWorkerUrl&&"serviceWorker"in navigator&&(gx.staticDirectory&&gx.basePath&&(n={scope:gx.util.resourceUrl(gx.basePath,!1)+"/"}),navigator.serviceWorker.register(gx.serviceWorkerUrl,n).then(function(n){console.log("Service Worker Registered:",gx.serviceWorkerUrl,"scope: ",n.scope)}))}),function(n){function l(t,i){var r=n(t),u=r.is("SPAN,DIV");return r.attr(i)||(u?r.find("> a").first().attr(i):"")}var t=gx.GxObject.prototype,o,r,i,s,h,c;t.sPrefix=function(){return this.CmpContext};t.declareDomainHdlr=function(n,t){this.GXValidFnc[n].dom_hdl=t};t.setVCMap=function(n,t,i,r,u,f){this.VarControlMap[n]={id:t,grid:i,type:r,length:u,decimals:f}};t.setSDTMapping=function(n,t){this.SDTMap=this.SDTMap||{};this.SDTMap[n]=t;var r={};for(var i in t)t[i].extr&&(r[t[i].extr]=i);t.extrn=r};t.applySDTVarMapping=function(n,t){var i;return this.VarControlMap[t]&&this.VarControlMap[t].type&&(i=this.VarControlMap[t].type),this.applySDTMapping(n,i,!0)};t.applySDTMapping=function(n,t,i){var t,r,f,u;if(n&&t&&(t=this.SDTMap?this.SDTMap[t]:void 0,t)){for(r in t.extrn)i?(n[t.extrn[r]]=n[r],delete n[r]):(n[r]=n[t.extrn[r]],delete n[t.extrn[r]]);for(r in t)if(t[r].sdt)if(f=n[r]?n[r].length:0,f)for(u=0;u<f;u++)this.applySDTMapping(n[r][u],t[r].sdt,i);else this.applySDTMapping(n[r],t[r].sdt,i)}return n};t.Initialize=function(){this.InitStandaloneVars();gx.wpo(function(){this.initTargets()},this)};t.InitStandaloneVars=function(){var n=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=n&&gx.setGxO(n)};t.getCmpType=function(n){return n=this.cmpRegex.exec(n),this.cmpRegex.lastIndex=0,n};t.getContainer=function(){if(this.containerControl)return gx.dom.byId(this.containerControl);if(!this.CmpContext&&!this.IsMasterPage)return n(".gx-content-placeholder").get(0)||document.body;var i,t=this.getCmpType(this.CmpContext);return t&&(i=gx.dom.byId(t[1]+"gxHTMLWrp"+t[2]+(t[3]||""))),i?i:void 0};t.setContainer=function(n){this.containerControl=n};t.setObjectType=function(n){this.ObjectType=n};t.getObjectType=function(){return this.ObjectType};t.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};t.setAjaxSecurity=function(n){this.AjaxSecurity=n};t.setOnAjaxSessionTimeout=function(n){switch(n){case"Warn":this.OnSessionTimeout=gx.timeoutActions.warn;break;case"CallObj":this.OnSessionTimeout=gx.timeoutActions.callObj}};t.addKeyListener=function(n,t){gx.evt.addKeyListener(this.CmpContext,n,t)};t.clearMessages=function(){this.MsgList.length=0};t.addMessage=function(n){this.MsgList.push(n)};t.showMessages=function(n){for(var u,r=[],t=this.MsgList.length,i=0;i<t;i++)u=this.MsgList[i],"string"==typeof u?r.push({att:"",type:2,text:this.MsgList[i]}):r.push(u);t={};t[""==this.CmpContext?"MAIN":this.CmpContext]=r;n?gx.fn.setErrorViewer(t,!1):gx.fn.setErrorViewer(t);this.clearMessages()};t.setPrompt=function(n,t){gx.fn.attachCtrl(this.CmpContext+n,{id:n,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:t,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[n]=function(t){if((t=(t||gx.dom.el(n)).parentNode)&&t.href&&(t=t.href.match("javascript:(.+)"))&&t.length>1){t=decodeURIComponent(t[1]);try{eval(t)}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","setPrompt")}}}};t.readServerVars=function(){var n;if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var i=[],r=gx.csv.lastEvtResponse.gxValues,u=r.length,t=0;t<u;t++)if(n=r[t],n.CmpContext==this.CmpContext&&gx.lang.booleanValue(n.IsMasterPage)==this.IsMasterPage){i.push(n);break}gx.fn.setJsonValues(i)}};t.call=function(n,t,i,r){gx.nav.willRedirect(n)?(!1===gx.csv.useNamedParameters&&(r=void 0),this.postEventRedirect={url:gx.http.formatLink(n,t,r),forceDisableFrm:!1}):gx.nav.call.apply(gx.nav,arguments)};t.callUrl=function(n){gx.nav.willRedirectByUrl(n)?this.postEventRedirect={url:n,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,arguments)};t.popupOpen=function(n){this.postEventPopupCommands.push({popup:gx.lang.clone(n)})};t.popupOpenUrl=function(n,t){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(n,t)})};t.refreshInputs=function(n){for(var i,r=n.length,t=0;t<r;t++)i=this.getValidStructFld(n[t][1]),null!=i&&"function"==typeof i.c2v&&i.c2v()};t.refreshOutputs_impl=function(n){for(var t,i,u,f=[],r=0,e=n.length;r<e;r++)t=n[r],t.fld?(i=this.getValidStructFld(t.fld),null!=i?(gx.fn.v2c(i),t=gx.fn.getControlGridRef(i.fld,i.grid),gx.csv.invalidateGXCtrl(t),gx.fn.setControlOldValue(t,i.val())):(i=this.getVariable(t.av),null!=i&&"object"==typeof i&&(u=this.getFormBCForVar(t.av),null!=u&&this.bcToScreen(u,i),(u=this.getGridForColl(t.av))&&u.refreshCollection(i)),gx.fn.setHidden(gx.csv.ctxControlId(t.fld,this),i))):t.ctrl&&f.push(t);for(gx.uc.StartRender(),r=0,e=f.length;r<e;r++)t=f[r],gx.uc.isUserControl(t.ctrl)&&(t.ctrl.execV2CFunctions(!1),t.ctrl.execShowFunction());gx.uc.EndRender()};t.OnClientEventEnd=function(){gx.fn.usrSetFocus_commit()};t.refreshOutputs=function(n){var t=this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(t.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);0<t.length&&gx.ajax.dispatchCommands(t);this.refreshOutputs_impl(n);this.showMessages()};t.refreshRowOutputs=function(n){this.refreshOutputs_impl(n)};t.refreshServerOutputs=function(n){for(var t,r,u=n.length,i=0;i<u;i++)t=n[i],r=gx.fn.getHidden(this.CmpContext+t.fld),void 0!=r&&((t=this.getValidStructFld(t.fld))&&t.v2v?(t.v2v(r),gx.fn.v2c(t,r)):this.setVariable(n[i].av,r))};t.getContextObject=function(n){return null!=this.getValidStructFld(n)&&(n=gx.fn.getControlValue_impl(this.CmpContext+n),null!=n)?n:""};t.getValidStructId=function(n){if(!gx.lang.emptyObject(n))for(var i=this.getControlIds(),t=0;t<i.length;t++)if(this.isSameField(this.getValidStruct(i[t]),n))return i[t];return-1};t.getValidStructFld=function(n){var t,r;if(("function"==typeof n||"object"==typeof n&&n.tagName)&&(n="object"==typeof n&&"radio"===n.type&&n.name?n.name:gx.dom.id(n)),t=this.getValidStructFld_cache[n],t)return t;if(!gx.lang.emptyObject(n))for(var t=this.getControlIds(),u=t.length,i=0;i<u;i++)if(r=this.getValidStruct(t[i]),this.isSameField(r,n))return this.getValidStructFld_cache[n]=r;return this.getValidStructFld_cache[n]=null};t.isSameField=function(n,t){var i=n.fld;return i==t?!0:(this.IsComponent&&0==t.indexOf(this.CmpContext)&&(t=t.substring(this.CmpContext.length)),0!=n.grid&&(t=t.replace(this.rowPatternRegex,"")),this.IsMasterPage&&(i=i.replace(/_MPAGE$/,""),t=t.replace(/_MPAGE$/,"")),i==t)};t.getUserFocus=function(){var n=gx.fn.getHidden(this.CmpContext+"GX_FocusControl"),i,t;if(gx.lang.emptyObject(n)||"notset"==n||(i=gx.dom.byId(n),gx.lang.emptyObject(i)||gx.fn.isAccepted(i)||(n=gx.csv.cmpCtx,gx.csv.cmpCtx=this.CmpContext,t=gx.O,gx.O=this,i=gx.fn.firstAcceptedControl(gx.popup.ispopup()),gx.O=t,gx.csv.cmpCtx=n,n=gx.lang.emptyObject(i)?"":i.id)),gx.lang.emptyObject(n)){if(this.hasMasterPage()&&(n=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(n)))return n;for(i=[],t=0;t<this.WebComponents.length;t++)if(0==this.WebComponents[t].CmpContext.indexOf("MP"))i.push(this.WebComponents[t]);else if(n=this.WebComponents[t].getUserFocus(),!gx.lang.emptyObject(n))return n;for(t=0;t<i.length&&!(n=i[t].getUserFocus(),!gx.lang.emptyObject(n));t++);}return n};t.getGridColumn=function(n,t){var r=null,i=null,i=gx.fn.controlGridId(n);return 0!=i&&(i=gx.O.getGridById(i,t))&&(r=i.grid.getColumnByHtmlName(n)),r};t.hasMasterPage=function(){return null!=this.MasterPage};t.setComponent=function(n){this.CmpControls[n.id.toLowerCase()]=n};t.getComponentByPrefix=function(t){var i=n.map(this.CmpControls,function(n){return n.Prefix==t?n:null});return 1==i.length?i[0]:null};t.refreshGrid=function(n){(n=this.getGrid(n))&&n.doRefresh()};t.refreshComponent=function(n){var t=this.getWebComponent(this.CmpContext+this.getComponentData(n).Prefix);t?gx.evt.dispatcher.dispatch("REFRESH",t):(t=gx.fn.controlGridId(n),0!==t&&(t=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(n).Prefix+gx.fn.currentGridRow(t)))&&gx.evt.dispatcher.dispatch("REFRESH",t))};t.getComponentPrefix=function(n){return(n=this.getComponentData(n))?n.Prefix||"":""};t.getComponentData=function(n){return this.CmpControls[n.toLowerCase()]};t.createWebComponent=function(n,t,i,r,u,f,e){f=f||this.getComponentPrefix(n);r||(n=gx.fn.controlGridId(n),r=0!==n?gx.fn.currentGridRow(n):"");var u=u||this.CmpContext+"gxHTMLWrp"+f+r,f=this.CmpContext+f,o=gx.getObj(f,!1);o?o.startFeedback():(n=gx.dom.byId(u),n.firstChild&&gx.dom.mask(u));n=gx.gen.isJava()&&gx.pO.PackageName&&!gx.text.startsWith(t,"/")?gx.pO.PackageName+".":"";gx.ajax.dynComponent(n+t,i,f,r).done(function(n){n.DynComponentMap||(n.DynComponentMap={});n.DynComponentMap[f+r]=u;gx.ajax.setJsonResponse({response:n,isPostBack:!0,gxObject:o||gx.O,afterCmpLoaded:function(){e&&e(f)}});o?o.endFeedback():gx.dom.unmask(u)})};t.registerComponent=function(n){this.WebComponents[n.CmpContext]=n;this.WebComponents.push(n)};t.setWebComponent=function(n,t){this.deleteComponent(n.CmpContext,n,!1);t&&this.restoreComponentHiddens(n.CmpContext,t);this.registerComponent(n);n.JustCreated=!0;gx.fn.setHidden(n.CmpContext,n.ServerClass);gx.fx.obs.notify("webcom.render",[n])};t.getWebComponent=function(n){return this.WebComponents[n]};t.deleteComponent=function(n,t,i){var i="undefined"==typeof i?!0:i,r=this.getWebComponent(n),f,t,u;if(r){for(f=gx.gen.isJava()&&r.PackageName?r.PackageName+".":"",gx.cache.deleteInlineCode(n+f+r.ServerClass.toLowerCase()),i&&this.deleteComponentHiddens(n),gx.lang.emptyObject(t)||gx.fn.setHidden(t.CmpContext,t.ServerClass),r.ondestroy(),delete this.WebComponents[n],t=this.WebComponents.length,i=0;i<t;i++)if(this.WebComponents[i].CmpContext==n){this.WebComponents.splice(i,1);break}for(t=gx.attachedControls.length;t--;)gx.attachedControls[t].info.wc===n&&gx.attachedControls.splice(t,1);t=this.WebComponents;for(u in t)isNaN(parseInt(u))&&0===u.indexOf(n)&&this.deleteComponent(u)}};t.deleteComponentHiddens=function(n){if(gx.lang.isArray(n)){if(0==n.length)return;n=gx.fn.getCmpRegex("("+n.join("|")+")")}else n=gx.fn.getCmpRegex(n);var n=gx.fn.filterHiddens(n,gx.http.viewState);for(var t in n)t&&gx.fn.deleteHidden(t)};t.restoreComponentHiddens=function(n,t){var i=gx.fn.getCmpRegex(n),i=gx.fn.filterHiddens(i,t);for(var r in i)r&&gx.fn.setHidden(r,i[r])};t.setCmpContext=function(n){void 0!=n&&(this.IsTypeComponent=!0,""!==n&&(this.IsComponent=!0),this.CmpContext=n)};t.getOldLvl=function(n){for(var i in this.LvlOlds)for(var r=this.LvlOlds[i],u=r.length,t=0;t<u;t++)if(r[t]==n)return i;return-1};t.refreshDependantGrids=function(n){for(var r=this.Grids.length,t=0;t<r;t++)for(var u=this.Grids[t],f=u.refreshVars,e=f.length,i=0;i<e;i++)if(f[i].fld==n.fld){u.filterVarChanged();break}};t.getCtrlPropertyValue=function(n,t){var i=gx.fn.getCtrlProperty(n,t);return void 0===i&&(i=gx.fn.getHidden(n+"_"+t)),i};t.setGrid=function(n){this.Grids[n.gridName]=n;this.GridsUpper[n.gridName.toUpperCase()]=n;var t=this.getGridIdxByName(n.gridName);-1!=t?this.Grids[t]=n:this.Grids.push(n)};t.getGrid=function(n){return n=n||"",this.Grids[n]||this.GridsUpper[n.toUpperCase()]};t.getGridIdxByProp=function(n){for(var i=this.Grids.length,t=0;t<i;t++)if(n(this.Grids[t]))return t;return-1};t.getGridIdxByName=function(n){return this.getGridIdxByProp(function(t){return t.gridName===n})};t.getGridByBaseName=function(n){var t=this.getGridIdxByProp(function(t){return t.gridName===n||t.grid.GridBaseName===n});return-1===t?null:this.Grids[t]};t.getGridIdx=function(n){for(var i=this.Grids.length,t=0;t<i;t++)if(this.Grids[t].gridId==n)return t;return-1};t.getGridById=function(n,t){for(var i,t=t||"",u=this.Grids.length,r=0;r<u;r++)if(i=this.Grids[r],i.gridId==n&&(!i.parentRow||gx.text.endsWith(t,i.parentRow.gxId)))return i;return null};t.getGridForColl=function(n){for(var i,r=this.Grids.length,t=0;t<r;t++)if(i=this.Grids[t],i.boundedCollName==n)return i;return null};t.getFormBCForVar=function(n){var i,t;for(i in this.FormBCs)if(t=this.FormBCs[i],t&&t.gxvar==n)return t;return null};t.getGridBC=function(n){var t=n;return this.IsComponent&&0===n.indexOf(this.CmpContext)&&(t=n.substring(this.CmpContext.length)),this.GridBCs[t]};t.getFormBC=function(n){var t=n;return this.IsComponent&&0===n.indexOf(this.CmpContext)&&(t=n.substring(this.CmpContext.length)),this.FormBCs[t]};t.addGridBCProperty=function(n,t,i,r){var u=this.getGridBC(n);"undefined"==typeof u&&(u={},u.gxvar=r,this.GridBCs[n]=u);this.addBCProperties(u,t,i,r)};t.addBCProperty=function(n,t,i,r){var u=this.getFormBC(n);"undefined"==typeof u&&(u={},u.gxvar=r,this.FormBCs[n]=u);this.addBCProperties(u,t,i,r)};t.addBCProperties=function(t,i,r,u){if(t)if(i instanceof Array)for(var e=i.length,o=function(t){var f=this[r.gxvar],e;gx.lang.emptyObject(r.hc)||(f=this[r.hc]);"date"==r.type?f=new gx.date.gxdate(f).getString("Y4MD"):"bitstr"===r.type&&gx.pO.fullAjax&&(e=gx.fn.getControlGridRef(r.fld,r.grid,t),e&&n(e).val()&&(f="gxformdataref:"+e.id));this.valueToBCProp(this[u],i,r,f,t)},f=0;f<e;f++){if("undefined"==typeof t[i[f]])if(f<e-1)t[i[f]]={};else{t[i[f]]=r;"object"==typeof this[u]&&(r.v2bc=o);break}t=t[i[f]]}else"string"==typeof i&&(t[i]=r)};t.valueToBCProp=function(n,t,i,r,u){try{if(n){for(var h=t.length,f=u||"",o=u=0,e,s=function(n){if(gx.lang.isArray(n)&&i&&i.grid){var t=gx.fn.getGridObj(i.grid,f&&4===f.length?f:void 0),t=t&&t.grid&&!t.InfiniteScrolling?t.grid.firstRecordOnPage:0;e=f?f:gx.fn.currentGridRow(i.grid);3<e.length&&(o+=1,e=e.substr(-4*o,4),n=n[Number(t||0)+Number(e)-1])}return n},n=s(n);n&&u<h-1;u++)n=s(n[t[u]]);n&&(u=t.length-1,n[t[u]]=r,void 0!==n[t[u]+"_N"]&&(n[t[u]+"_N"]=0))}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","valueToBCProp")}};t.bcToScreen=function(n,t){var i,r;for(i in n)if("gxvar"!=i)try{"object"==typeof t[i]?this.bcToScreen(n[i],t[i]):(r=n[i],(0==r.grid||gx.csv.validatingGrid&&r.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(r.hc)&&void 0!=t[i]&&r.v2v&&(r.v2v(t[i]),gx.fn.v2c(r,t[i])))}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","bcToScreen")}};t.addGridUCEventHandler=function(n,t,i){gx.lang.emptyObject(this.GridUCsEvts[n])&&(this.GridUCsEvts[n]=[]);this.GridUCsEvts[n].push({e:t,h:i})};t.getGridUCEventHandlers=function(n){return n=this.GridUCsEvts[n],gx.lang.emptyObject(n)?[]:n};t.setGridUCDynProp=function(n,t,i,r,u){this.setGridUCProp(n,t,i,r,u)};t.setGridUCProp=function(n,t,i,r,u){gx.lang.emptyObject(this.GridUCsProps[n])&&(this.GridUCsProps[n]=[]);this.GridUCsProps[n].push({p:t,h:i,v:r,t:u});"InternalTitle"==t&&(this.GridUCsProps[n].title=r)};t.getGridUCProperties=function(n){return n=this.GridUCsProps[n],gx.lang.emptyObject(n)?[]:n};t.addUsercontrolBinding=function(n,t,i){this.UCBindings[n]||(this.UCBindings[n]={fld:t,uc:[]},this.UCBindingsHiddens[t]=this.UCBindings[n]);gx.util.inArray(i,this.UCBindings[n].uc)||this.UCBindings[n].uc.push(i)};t.setUserControl=function(n){n.ContainerName&&(this.UserControls[n.ContainerName]=n)};t.getUserControl=function(n){var t=this.UserControls[n];return t||""==this.CmpContext||(t=this.UserControls[this.CmpContext+n]),t};t.getUserControlGrids=function(){return n.map(this.Grids,function(n){if(n.grid&&n.isUsercontrol)return n.grid})};t.execV2CFunctions=function(t,i,r,u){r=void 0===r||r;i||(i=this.UserControls);var f=this;gx.uc.StartRender();n.each(i,function(n,i){i&&f==i.ParentObject&&(r||!i.GridId||i instanceof gx.ui.grid)&&(!u||u(i))&&i.updateAndShow(t)});gx.uc.EndRender()};t.execC2VFunctions=function(){n.each(this.UserControls,function(n,t){try{t.execC2VFunctions()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","execC2VFunctions")}try{t.saveProperties()}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","execC2VFunctions")}})};t.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};t.setVariable=function(n,t){var i=this[n]=t,r;0!=n.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+n,t);void 0!=this.VarControlMap[n]&&(r=this.VarControlMap[n].type,("date"==r||"dtime"==r)&&(("string"==typeof t&&(t=new gx.date.gxdate(t),this[n]=t),"date"==r)?i=t.getStringWithFmt("Y4MD"):(i=this.VarControlMap[n].decimals,i=t.getStringWithFmt("Y4MD")+" "+t.getTimeString(!0,!0,1<i,12<=i))),"decimal"==r&&"."!=gx.decimalPoint?(i=t.toString().replace(".",gx.decimalPoint),"string"==typeof t&&(this[n]=gx.num.parseFloat(t))):"int"==r&&"string"==typeof t&&(this[n]=gx.num.parseInt(t)),gx.fn.setHidden(this.CmpContext+this.VarControlMap[n].id,i));"Gx_mode"==n&&this.setMode();void 0!=this.UCBindings[n]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[n].fld,t)};t.getVariable=function(n){return this[n]};t.isServerEvent=function(n){return this.Events[n][1]||!1};t.getServerEventName=function(n){return this.Events[n][0]||""};t.getClientEventName=function(n){for(var t in this.Events)if(this.Events[t][0]==n)return t;return""};var y={RFR:"REFRESH",RFR_MPAGE:"REFRESH"},a=[".CONTROLVALUECHANGED",".CONTROLVALUECHANGING"],p=function(n){for(var t=0;t<a.length;t++)if(0<=n.indexOf(a[t]))return!1;return!0};t.cleanEventName=function(n){var n=n.replace(RegExp("^"+this.CmpContext),""),t=(gx.pO.fullAjax?/^E('?(.*)\.?'?)/:/^E('?(\w+)\.?([^\.]*)'?)/).exec(n),n=t&&t.length&&1<t.length?t[1].replace(/\.\d*$/,""):n;return y[n]||n};t.inputHasFormatErrors=function(n,t,i){var u,s,f,e,n,o,c,l,h,r,a;if(u=this.cleanEventName(n),n=!1,o=gx.csv.anyFormatError(),!this.fullAjax&&o)return!0;if(!o||!this.EvtParms[u]||!p(u))return!1;for(s=this.EvtParms[u][0],l=this,h=function(n){if(n)if(t&&i&&n.grid==t){if((f=gx.fn.getControlGridRef(n.fld,t,i))&&f.id&&gx.csv.gxFormatErrors[f.id])return!0}else if((f=gx.fn.getControlGridRef(n.fld,n.grid))&&f.id)for(c in gx.csv.gxFormatErrors)if(n==l.getValidStructFld(c))return!0;return!1},u=0,len=s.length;u<len&&!n;u++){if(r=s[u],r.postForm)return o;if(r.fld)if(e=this.getValidStructFld(r.fld))n=n||h(e);else if(r=this.getFormBCForVar(r.av),null!=r)for(a in r)e=r[a],"object"==typeof e&&(n=n||h(e))}return n};t.setEventParameters=function(n,t){var e,u,c,r,h;for(gx.csv.lastEvtRow=null,gx.O=this,e=!0,u=-1,gx.csv.cmpCtx=this.CmpContext,c=n.length,r=0;r<c;r++){var i=n[r][0],l=n[r][1],f=n[r][2],s=!1;if(t instanceof o)this.setVariable(f,t.parms[r]),s=!0;else for(h in t)if(h.toLowerCase()==i.toLowerCase()){this.setVariable(f,t[h]);s=!0;break}s||this.setVariable(f,t);i=this.getValidStructFld(l);null!=i?(0!=i.grid&&-1==u?u=i.grid:0!=i.grid&&i.grid!=u&&(e=!1),gx.fn.v2c(i)):gx.fn.setHidden(this.CmpContext+l,this.getVariable(f))}e&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(u))};t.executeEvent=function(n,t,i,r,u){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var f=this.getClientEventName(n);return(f?this.isServerEvent(f):1)?(u?(f=this.getGrid(u))&&i?f.instanciateRow(i):gx.csv.instanciatedRowGrid=null:gx.csv.instanciatedRowGrid=null,n=this.executeServerEvent(n,t,i,r,this.fullAjax&&!i&&!u)):n=gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,f,u,i,""),gx.csv.instanciatedRowGrid=null,n};t.executeServerEvent=function(t,i,r,u,f){var o=n.Deferred(),s,e,r;return gx.O=this,gx.csv.cmpCtx=this.CmpContext,s=!0,void 0!=i&&!1==i&&(s=!1),(i=gx.csv.validatingGrid||gx.csv.instanciatedRowGrid)&&i.parentObject!=this&&(i=null),e=gx.lang.emptyObject(i)?!1:i.gridId,r=r||gx.csv.lastEvtRow||"",f?(r="",e=null):(""==r&&e&&(r=gx.csv.lastRow[e]),"undefined"==typeof r&&(r=gx.fn.currentGridRowImpl(i.gridId))),gx.evt.execEvt(this.CmpContext,this.IsMasterPage,this.CmpContext+"E"+t+"."+(r||""),gx.evt.dummyCtrl,e,s,null,null,function(){o.resolve()},u,function(){o.resolve()},!1),o.promise()};t.executeEnterEvent=function(n,t,i){var r=this.gxOWithEnter(t),f=!1,u,o,e;if(t&&t.onblur&&t.onblur(),(gx.pO.fullAjax||null==r)&&n&&gx.evt.cancelAndRefresh(n)){if(null==r||r.autoRefresh||!r.hasEnterEvent||r.anyGridBaseTable)return;f=!0}n?(gx.dom.hasSubmitControl()&&gx.evt.cancel(n,!0),t&&"INPUT"==t.nodeName&&gx.dom.isEditControl(t)&&gx.evt.cancel(n,!0)):f=!0;null!=r&&(u="ENTER",r.IsMasterPage&&(u+="_MPAGE"),u=r.CmpContext+"E"+u+".",t&&gx.evt.isEnterEvtCtrl(t)&&(e=gx.fn.controlRowId(t),o=gx.fn.controlGridId(t.id),e&&(u+=e)),gx.evt.execEvt(r.CmpContext,r.IsMasterPage,u,gx.evt.dummyCtrl,o,!1,null,i,null,f,void 0,null!=r),n&&gx.evt.cancel(n,!0))};t.gxOWithEnter=function(n){if(n&&(n=gx.fn.getControlContext(n))&&n.hasEnterEvent)return n;if(this.hasEnterEvent)return this;if(this.IsComponent){var n=this.getCmpType(this.CmpContext),t=""==n[1]&&0==n[0].indexOf("MP"),n=gx.getObj(n[1],t);if(!gx.lang.emptyObject(n))return n.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();return null};t.getLastControlId=function(){return this.GXLastCtrlId};t.getValidStruct=function(n){return this.GXValidFnc[n]};t.getControlIds=function(){return this.GXCtrlIds};t.getControlIdsh=function(){return this.GXCtrlIdsh};t.getUsercontrolFromChild=function(t){return n.each(this.UserControls,function(n,i){var r=i.getContainerControl();if(gx.dom.isChildNode(t,r))return i}),null};t.installFlatLevelDatePickers=function(){for(var n=null,i=this.getControlIds(),r=i.length,t=0;t<r;t++)n=this.getValidStruct(i[t]),void 0!=n&&0==n.grid&&void 0!=n.dp&&gx.fn.installDatePicker(this.CmpContext+n.fld,n,this,n.dp.f,n.dp.st,n.dp.wn,n.dp.mf,gx.fn.datePickerFormat(n.dp.pic,n.dp.dec,n.len),n.len,n.dp.dec)};t.installImageControls=function(){for(var t=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),n=0,i=t.length;n<i;n++)gx.html.multimediaUpload.createControl(t[n]);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};t.initControlsEnabledFlag=function(n){if("bits"!=n.type&&"audio"!=n.type&&"video"!=n.type&&(n=gx.fn.getControlRef(n.fld))){var t=gx.http.viewState[gx.dom.id(n)+"_Enabled"];void 0!==t&&gx.fn.setEnabledProperty(n,gx.lang.gxBoolean(t),!1)}};t.initControlsBehaviour=function(){var t=this;n.each(gx.O.GXValidFnc,function(n,i){if(i&&i.fld&&(t.initControlsEnabledFlag(i),i.gxsgprm)){var r=gx.fn.getControlRef(i.fld);r&&gx.fx.installSuggest(r)}})};var u=function(n){if(gx.lang.emptyObject(n))return!1;var t;try{t=new Function("return "+n)}catch(r){return gx.lang.doEval(n)}try{return t()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","evaluateCode")}return!1},w=function(t){var i=t.tagName.toLowerCase();return"img"==i||"input"==i?n(t).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR):n("a["+gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR+"]",t).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR)},f=function(){var n={select:!0,textarea:!0},t=gx.lang.apply({radio:!0,checkbox:!0,file:!0},gx.dom.editControls);return function(i){if(!i)return!1;var r=i.tagName.toLowerCase();return"input"==r?t[i.type.toLowerCase()]:n[r]}}(),b=function(n){return n&&"label"==n.tagName.toLowerCase()&&(n=n.getAttribute("for"))?(n=gx.dom.el(n),f(n)&&gx.fn.isVisible(n,0)):!1},v=function(t){if(!("keypress"===t.type&&13!==t.keyCode&&(32!==t.keyCode||!gx.dom.isButton(t)))){var i=t.target,e=n(i),r=n(t.currentTarget),u=gx.fn.getControlContext(r);i&&"A"===i.tagName.toUpperCase()&&void 0===n(i).attr(gx.GxObject.GX_EVENT_DATA_ATTR)&&i.href||(u?r.hasClass("gx-disabled")||(f(i)||b(i))&&!n(i).is(r)||gx.dom.hasAttribute(i,gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS)||(t.stopPropagation(),gx.evt.doAfterProcessing(function(){var n=r.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR);gx.util.browser.isOldIE()&&!gx.util.browser.isWinCE()?d.apply(this,[t,e,u,n]):k.apply(this,[t,e,u,n])},this)):t.preventDefault())}},k=function(n,t,i,r){var f=function(){gx.csv.resetRow();var n=i.getValidStructFld(r);n&&n.grid&&gx.evt.setEventRow(i,t.get(0))},u=function(){f();t.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);i.handleControlEvent(n,r,this)}.closure(this);gx.fx.dom.delayedDispatch(n)?t.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)?(f(),gx.fx.dom.raiseEvent("dblclick",n)):(u=setTimeout(u,gx.config.evt.dblclick.delay),t.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,u)):u.call()},d=function(n,t,i,r){if(!t.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)){var u=function(){gx.csv.resetRow();var u=i.getValidStructFld(r);u&&u.grid&&gx.evt.setEventRow(i,t.get(0));t.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);i.handleControlEvent(n,r,this)}.closure(this);gx.fx.dom.delayedDispatch(n)?(u=setTimeout(u,gx.config.evt.dblclick.delay),t.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,u)):u.call()}},e=function(n,t,i){try{i&&n.preventDefault();t&&n.stopPropagation()}catch(r){}};t.handleControlEvent=function(t,i,r){var o=this.controlEventMap;if(o[i]){var f=o[i],s=o[i].evt,i=this.Events[s]?this.Events[s][0]:o[i].std,o=l(r,gx.GxObject.GX_EVENT_DATA_ATTR),s=l(r,gx.GxObject.GX_EVENT_CODE_DATA_ATTR),h=w(r),c=0<f.grid?gx.fn.controlRowId(t.currentTarget):null,a=this.getGridById(f.grid,c),v,y=!0,p=!1,b=n(t.target);if("combo"!=f.ctrltype)switch(o){case"1":e(t,!0,!0);(!h||u(h))&&gx.fn.closeWindow();break;case"3":case"4":e(t,!0,!0);s&&u(s);break;case"8":gx.ajax.doRefresh(this);break;default:if((!h||u(h))&&(a&&(v=a.gridName),"checkbox"===f.ctrltype&&(gx.fn.checkboxClick(f,r,f.values[0],f.values[1]),y=!1,p=!0),i&&(b.attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,!0),this.executeEvent(i,!1,c,!1,v).always(function(t){if(!gx.evt.redirecting){var i=function(){n(t).attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,null)};gx.spa.isNavigatingRaw()?gx.spa.addObserver("onnavigate",this,i,{single:!0}):i()}}.closure(this,[b]))),p))gx.evt.onchange(r);e(t,!0,y)}}};t.registerCtrlsEventHandlers=function(){var u,h,c=this.GXCtrlIds,a=this.GXValidFnc,t,o=this.IsMasterPage,s=this.CmpContext,y=o?"_MPAGE":"",p="["+gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR+"]",r,i,w=!s&&!o,e,b=gx.GxObject.GX_EVENT_EXCLUDED_CTRLTYPES,l;for(void 0===this.listeningControlEvents&&(this.listeningControlEvents=!1),this.controlEventMap||(this.controlEventMap={}),l=this.controlEventMap,u=0,h=c.length;u<h;u++)(t=a[c[u]],e=gx.fn.controlFiresEvent(t),i=this.hasEnterEvent&&!gx.lang.emptyObject(t.ctrltype)||t.evt_cvc||t.evt_cvcing,!gx.util.inArray(t.ctrltype,b)&&(e||i))&&(e&&(l[t.fld]=t),0===t.grid&&(r=s+t.fld+(t.gxvar?"":y),i="#span_"+r,r="#"+r,i=t.gxvar&&0<n(i).length?n(i):n(r),e&&(i.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),i.is("img")&&i.attr("tabindex","0"),f(i.get(0))||i.attr("tabindex","0")),i.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,gx.json.serializeJson([s,o]))));w&&!this.listeningControlEvents&&(this.listeningControlEvents=!0,n(document.body).on("click keypress",p,v))};t.unregisterCtrlsEventHandlers=function(){this.listeningControlEvents&&n(document.body).off("click keypress",v);this.listeningControlEvents=!1};t.clearMultimediaValue=function(n){n=gx.html.multimediaUpload.getElements(n);n.fileField.onchange(n.fileField);gx.fn.setHidden(n.fileField.id,"");gx.fn.setHidden(n.uriField.id,"");gx.fn.setHidden(n.fileField.id+"_gxBlob","")};t.refreshOlds=function(){var o,r,u,t,f;for(o in this.LvlOlds)if(r=this.LvlOlds[o],"function"!=typeof r){if(t=gx.fn.lvlGrid(parseInt(o,10)),0!=t&&(u=gx.fn.currentGridRow(t),"9999"===u))continue;for(t=r.length,f=0;f<t;f++){var s=r[f],e=s,i="",n=gx.fn.vStructForOld(e);n?(!n.gxgrid||0<n.gxgrid.grid.rows.length)&&(i=gx.typedOld(n.fld,e,n.type)):(gx.lang.emptyObject(u)||(s+="_"+u),i=gx.fn.getHidden(this.CmpContext+s));"undefined"!=typeof i&&(n||(window[e]=i),this[e]=i)}}};o=function(n){return this.parms=n,this};t.addExoEventHandler=function(n,t){var i=function(){var n=gx.O;gx.setGxO(this);t.call(this,null,null,new o(Array.prototype.slice.call(arguments,0)));gx.setGxO(n)};gx.fx.obs.addObserver(n,this,i);this.exoEventHandlers=this.exoEventHandlers||{};this.exoEventHandlers[n]=i};t.deleteExoEventHandlers=function(){for(var n in this.exoEventHandlers)this.exoEventHandlers.hasOwnProperty(n)&&gx.fx.obs.deleteObserver(n,this,this.exoEventHandlers[n])};t.restoreExoEventHandlers=function(){for(var n in this.exoEventHandlers)gx.fx.obs.addObserver(n,this,this.exoEventHandlers[n])};t.deleteEventHandlers=function(){try{this.unregisterCtrlsEventHandlers();gx.fx.ctx.deleteHandlers(this);gx.fx.dnd.deleteHandlers(this);this.deleteExoEventHandlers();gx.fx.dom.deleteEventHandlers(this)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","deleteEventHandlers")}};t.ondestroy=function(){try{this.endFeedback();this.deleteEventHandlers();n.each(this.UserControls,function(n,t){if(!gx.lang.emptyObject(t.destroy))try{t.destroy()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","ondestroy")}});this.UserControls=[];delete this.containerControl}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","ondestroy")}};t.onpost=function(){var t=gx.O,i,n;for(gx.setGxO(this),this.hasMasterPage()&&this.MasterPage.onpost(),i=this.WebComponents.length,n=0;n<i;n++)this.WebComponents[n].onpost();this.ReadonlyForm&&this.IsComponent&&t!=this&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(t)};t.roControlsAsHidden=function(){for(var n,i,r=this.getControlIds(),u=r.length,t=0;t<u;t++)n=this.getValidStruct(r[t]),0==n.grid&&"function"==typeof n.val&&(n=this.CmpContext+n.fld,i=gx.dom.el(n),i&&!gx.fn.isAccepted(i)&&gx.fn.setHidden(n,gx.fn.getControlValue(n)))};t.onload=function(t,i){var u,f,r,e;if(n.Deferred(),u=[],gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass),gx.setGxO(this),this.screenToVars(),gx.wmp(function(){this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this))},this),f=this.Grids.length,!1!==t)for(r=0;r<f;r++)u.push(this.Grids[r].loadGrid());for(f=this.WebComponents.length,r=0;r<f;r++)u.push(this.WebComponents[r].onload(t));i?this.afterLoad():gx.wr(this.afterLoad.closure(this),this);gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);e=this;n.when.apply(n,u).done(function(){e.execV2CFunctions(!0,void 0,!1,function(n){return n.ownerGrid&&n.ownerGrid.parentGrid});e.onLoadDeferred.resolve()})};t.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0,void 0,!1);this.JustCreated=!1;this.registerCtrlsEventHandlers();gx.$.map(gx.$("input[data-gx-disable], select[data-gx-disable]",this.getContainer()),function(n){gx.fn.disableCtrl(n.getAttribute("data-gx-disable"));n.removeAttribute("data-gx-disable")});this===gx.pO&&(gx.ui.controls.actionGroup.init(),gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.goOnload()};t.onunload=function(n){for(this.hasMasterPage()&&!1!==n&&this.MasterPage.onunload(),n=this.Grids.length,n-=1;0<=n;n--)delete this.Grids[this.Grids[n].gridName],this.Grids[n].cleanup(),this.Grids.splice(n,1);for(n=this.WebComponents.length,n-=1;0<=n;n--)delete this.WebComponents[this.WebComponents[n].CmpContext],this.WebComponents[n].onunload(),this.WebComponents.splice(n,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};t.clean=function(n){this.cleanHiddens();this.onunload(n)};t.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};t.screenToVars=function(){var n;try{for(var i=this.getControlIds(),r=i.length,t=0;t<r;t++)n=this.getValidStruct(i[t]),n&&0==n.lvl&&"function"==typeof n.c2v&&n.c2v()}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","screenToVars")}};t.postbackLoad=function(n,t){var r=this.IsComponent&&this.JustCreated,u,i;for(this.hasMasterPage()&&this.MasterPage.postbackLoad(n),u=this.WebComponents.length,i=0;i<u;i++)this.WebComponents[i].postbackLoad(n);r&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());this.execV2CFunctions(!0,r?!1:n);this.conditionsChanged=this.JustCreated=!1;this===gx.pO&&gx.fn.doAttachs(t);gx.goOnload();this.onLoadDeferred.resolve()};t.addDragSource=function(n,t,i,r){gx.fx.dnd.addSource(this,n,t,i,r)};t.addDropTarget=function(n,t,i,r){gx.fx.dnd.addTarget(this,n,t,i,r)};t.addContextSetter=function(n,t,i,r){gx.fx.ctx.addSetter(this,n,t,i,r)};t.addContextTracker=function(n,t,i,r){gx.fx.ctx.addTracker(this,i,r)};t.addOnMessage=function(n,t,i,r,u){gx.fx.notifications.addTracker(this,n,t,i,r,u)};t.addEventHandler=function(n,t,i){gx.fx.dom.addEventHandler(this,n,t,i)};t.updateBitmapValue=function(n,t,i,r){n=gx.html.multimediaUpload.getContainer(n);"file"==gx.html.multimediaUpload.getOptionValue(n)?this[t]=r:this[i]=r};t.getFeedbackContainer=function(){return this==gx.pO?document.body:this.getContainer()};t.startFeedback=function(n,t){this.feedbackCallCounter++;t&&gx.fn.disableKeys();var i=!0===n?0:void 0===gx.NotificationDelay?1e3:gx.NotificationDelay,r=function(){var n=this.getFeedbackContainer();n&&gx.dom.mask(n)};1==this.feedbackCallCounter&&(0===i?r.call(this):this.feedbackTimeoutId||(i=gx.lang.doCallTimeout(r,this,arguments,i),this.feedbackTimeoutId=i.t))};t.endFeedback=function(){if(gx.fn.enableKeys(),0<this.feedbackCallCounter&&this.feedbackCallCounter--,0==this.feedbackCallCounter){this.feedbackTimeoutId&&(clearTimeout(this.feedbackTimeoutId),this.feedbackTimeoutId=!1);var n=this.getFeedbackContainer();n&&gx.dom.unmask(n)}};t.isFeedbackOn=function(){return 0<this.feedbackCallCounter},function(){var i=9996,t=this;return function(u){var f="MPW"+i++,e=t.CmpContext+"gxHTMLWrp"+f;return t.setComponent({id:r(u),GXClass:null,Prefix:f,lvl:1}),n('<div class="gx-call-target '+u+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+e+'"><\/div><\/div>')}}.call(this);r=function(n){return"GX-"+n.toUpperCase()+"-TARGET"};t.initSingleTarget=function(t){var i="MPW"+this.targetsCounter++,u=this.CmpContext+"gxHTMLWrp"+i;return this.setComponent({id:r(t),GXClass:null,Prefix:i,lvl:1}),n('<div class="gx-call-target '+t+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+u+'"><\/div><\/div>')};t.initTargets=function(){var i,t,r,u,f;gx.pO&&gx.pO.fullAjax&&this.IsMasterPage&&(i=n(gx.dom.form()),t=i.children("[data-abstract-form]").first(),t.length||(t=n("<div><\/div>"),t.append(i.children()),i.append(t)),i=t.addClass("gx-center-target"),t=this.initSingleTarget("top"),r=this.initSingleTarget("right"),u=this.initSingleTarget("bottom"),f=this.initSingleTarget("left"),n('<div id="gx-column-targets"><\/div>').insertBefore(i).append(f).append(i).append(r).before(t).after(u))};t.createObjectInTarget=function(t,u,f){var t=t.toLowerCase(),e=i(t);this.createWebComponent(r(t),u,f,void 0,void 0,void 0,function(n){this.targetComponents=this.targetComponents||{};(n=gx.pO.getWebComponent(n))&&(this.targetComponents[t]=n)});n(e.selector).removeClass("empty")};t.restoreTargetComponents=function(){var n;this.targetComponents=this.targetComponents||{};for(n in this.targetComponents)targetComponents.hasOwnProperty(n)&&gx.pO.registerComponent(this.targetComponents[n])};i=function(n){return{selector:".gx-call-target."+n,centerSelector:".gx-center-target"}};h={useCapture:!0};t.showTarget=function(t,r){var t=t.toLowerCase(),f=i(t),u=f.selector,o=f.centerSelector,e;n(f.selector).removeClass("empty");n(u).removeClass("off");n(o).addClass("slideout "+t);n(document.documentElement).addClass("gx-blocking");gx.fx.obs.notify("gx.targetshown",[t]);!1!==r&&(s=function(t){n(t.target).closest(u).length||n(t.target).is(u)||!n(u).is(":visible")||(e.call(this),t.stopImmediatePropagation(),t.preventDefault())}.closure(this),e=function(){this.hideTarget(t)},gx.evt.attach(document,"click",s,!1,h),gx.spa.addObserver("onnavigate",this,e))};t.hideTarget=function(t){var t=t.toLowerCase(),r=i(t),u=r.centerSelector;n(r.selector).addClass("off");n(u).removeClass("slideout "+t);n(document.documentElement).removeClass("gx-blocking");gx.evt.detach(document,"click",s,h);gx.fx.obs.notify("gx.targethidden",[t])};t.collapseTarget=function(t){var t=t.toLowerCase(),r=i(t),u=r.selector,r=r.centerSelector;this.showTarget(t,!1);n(u).addClass("collapsed");n(r).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",[t])};t.expandTarget=function(t){var t=t.toLowerCase(),r=i(t),u=r.selector,r=r.centerSelector;this.showTarget(t,!1);n(u).removeClass("collapsed");n(r).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[t])};c=function(n,t){return n=Array.prototype.slice.call(n,0),n.push(t),n};t.validSrvEvt=function(){return gx.ajax.validSrvEvt.apply(gx.ajax,c(arguments,this))};t.validCliEvt=function(){return gx.ajax.validCliEvt.apply(gx.ajax,c(arguments,this))}}(gx.$);gx.lang.apply(gx.GxObject.prototype,new gx.util.Observable);gx.printing=function(n){return{IFrameId:"gxprintHelper_Iframe",print:function(n){this.printDirect(n)},printDirect:function(t){t&&(gx.printing._deinit(),$iframe=n("<iframe>"),$iframe.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"}),n(document.body).append($iframe),$iframe[0].onload=function(){this.contentWindow.print()},$iframe.attr("src",t.reportFile))},_deinit:function(){n("#"+gx.printing.IFrameId).remove()}}}(gx.$);gx.thread={Map:function(){this.map={};this.add=function(n,t){this.map[n]=t};this.remove=function(n){delete this.map[n]};this.get=function(n){return null==n?null:this.map[n]};this.first=function(){return this.get(this.nextKey())};this.next=function(n){return this.get(this.nextKey(n))};this.nextKey=function(n){for(i in this.map){if(!n)return i;n==i&&(n=null)}return null}},Command:function(n,t,i){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){t.apply(n,i)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(n,t,i,r){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(n,t){gx.thread.Mutex.Wait.get(n).attempt(gx.thread.Mutex.Wait.get(t))};this.attempt=function(t){for(;t;t=gx.thread.Mutex.Wait.next(t.c.id))if(t.enter||t.number&&(t.number<this.number||t.number==this.number&&t.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+t.c.id+")",10);try{retVal=this.c.execute()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","Mutex Call")}if(this.number=0,gx.thread.Mutex.Wait.remove(this.c.id),typeof r=="function")try{r.call(n,retVal)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(n,t,i);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};gx.sec={key:null,iv:null,keyName:"GX_AJAX_KEY",ivName:"GX_AJAX_IV",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var n=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(n)?null:n;null!=this.key&&this.loadSecToken();this.iv=gx.fn.getHidden(this.ivName)},loadSecToken:function(){var n=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(n)?null:n},encrypt:function(n,t){try{if(t=null==t?this.key:t,null!=t){var i=this.rijndael,t=i.hexToByteArray(t),r;return r=null!=this.iv?i.rijndaelEncrypt(n,t,"CBC",i.hexToByteArray(this.iv)):i.rijndaelEncrypt(n,t),i.byteArrayToHex(r)}}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","encrypt")}return n},decrypt:function(n,t){try{if(t=null==t?this.key:t,null!=t){var i=this.rijndael,t=i.hexToByteArray(t),r=i.hexToByteArray(n),u=i.rijndaelDecrypt(r,t,"CBC");return i.byteArrayToString(u)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","decrypt")}return n},_init:function(){this.rijndael._init()}};gx.MD5={RotateLeft:function(n,t){return n<<t|n>>>32-t},AddUnsigned:function(n,t){var f,e,r,u,i;return r=n&2147483648,u=t&2147483648,f=n&1073741824,e=t&1073741824,i=(n&1073741823)+(t&1073741823),f&e?i^2147483648^r^u:f|e?i&1073741824?i^3221225472^r^u:i^1073741824^r^u:i^r^u},F:function(n,t,i){return n&t|~n&i},G:function(n,t,i){return n&i|t&~i},H:function(n,t,i){return n^t^i},I:function(n,t,i){return t^(n|~i)},FF:function(n,t,i,r,u,f,e){return n=gx.MD5.AddUnsigned(n,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(t,i,r),u),e)),gx.MD5.AddUnsigned(gx.MD5.RotateLeft(n,f),t)},GG:function(n,t,i,r,u,f,e){return n=gx.MD5.AddUnsigned(n,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(t,i,r),u),e)),gx.MD5.AddUnsigned(gx.MD5.RotateLeft(n,f),t)},HH:function(n,t,i,r,u,f,e){return n=gx.MD5.AddUnsigned(n,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(t,i,r),u),e)),gx.MD5.AddUnsigned(gx.MD5.RotateLeft(n,f),t)},II:function(n,t,i,r,u,f,e){return n=gx.MD5.AddUnsigned(n,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(t,i,r),u),e)),gx.MD5.AddUnsigned(gx.MD5.RotateLeft(n,f),t)},ConvertToWordArray:function(n){var i,u=n.length;i=u+8;for(var f=16*((i-i%64)/64+1),r=Array(f-1),e=0,t=0;t<u;)i=(t-t%4)/4,e=8*(t%4),r[i]|=n.charCodeAt(t)<<e,t++;return i=(t-t%4)/4,r[i]|=128<<8*(t%4),r[f-2]=u<<3,r[f-1]=u>>>29,r},WordToHex:function(n){for(var r="",t="",i=0;3>=i;i++)t=n>>>8*i&255,t="0"+t.toString(16),r+=t.substr(t.length-2,2);return r},Utf8Encode:function(n){for(var t,n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),128>t?i+=String.fromCharCode(t):(127<t&&2048>t?i+=String.fromCharCode(t>>6|192):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128)),i+=String.fromCharCode(t&63|128));return i},getHsh:function(n){var f=[],e,o,s,h,t,i,r,u,n=gx.MD5.Utf8Encode(n),f=gx.MD5.ConvertToWordArray(n);for(t=1732584193,i=4023233417,r=2562383102,u=271733878,n=0;n<f.length;n+=16)e=t,o=i,s=r,h=u,t=gx.MD5.FF(t,i,r,u,f[n+0],7,3614090360),u=gx.MD5.FF(u,t,i,r,f[n+1],12,3905402710),r=gx.MD5.FF(r,u,t,i,f[n+2],17,606105819),i=gx.MD5.FF(i,r,u,t,f[n+3],22,3250441966),t=gx.MD5.FF(t,i,r,u,f[n+4],7,4118548399),u=gx.MD5.FF(u,t,i,r,f[n+5],12,1200080426),r=gx.MD5.FF(r,u,t,i,f[n+6],17,2821735955),i=gx.MD5.FF(i,r,u,t,f[n+7],22,4249261313),t=gx.MD5.FF(t,i,r,u,f[n+8],7,1770035416),u=gx.MD5.FF(u,t,i,r,f[n+9],12,2336552879),r=gx.MD5.FF(r,u,t,i,f[n+10],17,4294925233),i=gx.MD5.FF(i,r,u,t,f[n+11],22,2304563134),t=gx.MD5.FF(t,i,r,u,f[n+12],7,1804603682),u=gx.MD5.FF(u,t,i,r,f[n+13],12,4254626195),r=gx.MD5.FF(r,u,t,i,f[n+14],17,2792965006),i=gx.MD5.FF(i,r,u,t,f[n+15],22,1236535329),t=gx.MD5.GG(t,i,r,u,f[n+1],5,4129170786),u=gx.MD5.GG(u,t,i,r,f[n+6],9,3225465664),r=gx.MD5.GG(r,u,t,i,f[n+11],14,643717713),i=gx.MD5.GG(i,r,u,t,f[n+0],20,3921069994),t=gx.MD5.GG(t,i,r,u,f[n+5],5,3593408605),u=gx.MD5.GG(u,t,i,r,f[n+10],9,38016083),r=gx.MD5.GG(r,u,t,i,f[n+15],14,3634488961),i=gx.MD5.GG(i,r,u,t,f[n+4],20,3889429448),t=gx.MD5.GG(t,i,r,u,f[n+9],5,568446438),u=gx.MD5.GG(u,t,i,r,f[n+14],9,3275163606),r=gx.MD5.GG(r,u,t,i,f[n+3],14,4107603335),i=gx.MD5.GG(i,r,u,t,f[n+8],20,1163531501),t=gx.MD5.GG(t,i,r,u,f[n+13],5,2850285829),u=gx.MD5.GG(u,t,i,r,f[n+2],9,4243563512),r=gx.MD5.GG(r,u,t,i,f[n+7],14,1735328473),i=gx.MD5.GG(i,r,u,t,f[n+12],20,2368359562),t=gx.MD5.HH(t,i,r,u,f[n+5],4,4294588738),u=gx.MD5.HH(u,t,i,r,f[n+8],11,2272392833),r=gx.MD5.HH(r,u,t,i,f[n+11],16,1839030562),i=gx.MD5.HH(i,r,u,t,f[n+14],23,4259657740),t=gx.MD5.HH(t,i,r,u,f[n+1],4,2763975236),u=gx.MD5.HH(u,t,i,r,f[n+4],11,1272893353),r=gx.MD5.HH(r,u,t,i,f[n+7],16,4139469664),i=gx.MD5.HH(i,r,u,t,f[n+10],23,3200236656),t=gx.MD5.HH(t,i,r,u,f[n+13],4,681279174),u=gx.MD5.HH(u,t,i,r,f[n+0],11,3936430074),r=gx.MD5.HH(r,u,t,i,f[n+3],16,3572445317),i=gx.MD5.HH(i,r,u,t,f[n+6],23,76029189),t=gx.MD5.HH(t,i,r,u,f[n+9],4,3654602809),u=gx.MD5.HH(u,t,i,r,f[n+12],11,3873151461),r=gx.MD5.HH(r,u,t,i,f[n+15],16,530742520),i=gx.MD5.HH(i,r,u,t,f[n+2],23,3299628645),t=gx.MD5.II(t,i,r,u,f[n+0],6,4096336452),u=gx.MD5.II(u,t,i,r,f[n+7],10,1126891415),r=gx.MD5.II(r,u,t,i,f[n+14],15,2878612391),i=gx.MD5.II(i,r,u,t,f[n+5],21,4237533241),t=gx.MD5.II(t,i,r,u,f[n+12],6,1700485571),u=gx.MD5.II(u,t,i,r,f[n+3],10,2399980690),r=gx.MD5.II(r,u,t,i,f[n+10],15,4293915773),i=gx.MD5.II(i,r,u,t,f[n+1],21,2240044497),t=gx.MD5.II(t,i,r,u,f[n+8],6,1873313359),u=gx.MD5.II(u,t,i,r,f[n+15],10,4264355552),r=gx.MD5.II(r,u,t,i,f[n+6],15,2734768916),i=gx.MD5.II(i,r,u,t,f[n+13],21,1309151649),t=gx.MD5.II(t,i,r,u,f[n+4],6,4149444226),u=gx.MD5.II(u,t,i,r,f[n+11],10,3174756917),r=gx.MD5.II(r,u,t,i,f[n+2],15,718787259),i=gx.MD5.II(i,r,u,t,f[n+9],21,3951481745),t=gx.MD5.AddUnsigned(t,e),i=gx.MD5.AddUnsigned(i,o),r=gx.MD5.AddUnsigned(r,s),u=gx.MD5.AddUnsigned(u,h);return(gx.MD5.WordToHex(t)+gx.MD5.WordToHex(i)+gx.MD5.WordToHex(r)+gx.MD5.WordToHex(u)).toLowerCase()}};gx.base64={b64:[],f64:[],decode:function(n){try{if(window.atob)return decodeURIComponent(atob(n).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(t){}return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(n)))},encode:function(n){try{if(window.btoa)return btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(n,t){return String.fromCharCode("0x"+t)}))}catch(t){}return this.encodeImpl(this.UTF8BytesFromString(n))},bytesFromUTF8Bytes:function(n){for(var r=[],t=0,i=c1=c2=0,u=n.length;t<u;)i=n[t],128>i?(r.push(i),t++):191<i&&224>i?(c2=n[t+1],r.push((i&31)<<6|c2&63),t+=2):(c2=n[t+1],c3=n[t+2],r.push((i&15)<<12|(c2&63)<<6|c3&63),t+=3);return r},UTF8BytesFromString:function(n){for(var t,n=n.replace(/\r\n/g,"\n"),i=[],u=n.length,r=0;r<u;r++)t=n.charCodeAt(r),128>t?i.push(t):(127<t&&2048>t?i.push(t>>6|192):(i.push(t>>12|224),i.push(t>>6&63|128)),i.push(t&63|128));return i},bytesToString:function(n){for(var t=gx.util.browser.isChrome()?32765:5e4,i=[];n.length>=t;)i.push(eval("String.fromCharCode("+n.slice(0,t).join(",")+");")),n=n.slice(t);return 0!=n.length&&i.push(eval("String.fromCharCode("+n.join(",")+");")),i.join("")},decodeImpl:function(n){for(var r=this.f64,t=[],i=0,n=n.replace(/\n|\r/g,""),n=n.replace(/=/g,""),u=n.length;i<u;)t[t.length]=r[n.charAt(i)]<<2|r[n.charAt(i+1)]>>4,t[t.length]=(r[n.charAt(i+1)]&15)<<4|r[n.charAt(i+2)]>>2,t[t.length]=(r[n.charAt(i+2)]&3)<<6|r[n.charAt(i+3)],i+=4;return 2==n.length%4&&(t=t.slice(0,t.length-2)),3==n.length%4&&(t=t.slice(0,t.length-1)),t},encodeImpl:function(n){var r=this.b64,t=[],i=0,u=n.length,f;for(1==u%3&&(n[n.length]=0,n[n.length]=0),2==u%3&&(n[n.length]=0),f=n.length;i<f;)t[t.length]=r[n[i]>>2],t[t.length]=r[(n[i]&3)<<4|n[i+1]>>4],t[t.length]=r[(n[i+1]&15)<<2|n[i+2]>>6],t[t.length]=r[n[i+2]&63],i+=3;return 1==u%3&&(t[t.length-1]=t[t.length-2]="="),2==u%3&&(t[t.length-1]="="),t.join("")},_init:function(){for(var t,n=0;64>n;n++)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n),this.b64[n]=t,this.f64[t]=n}};gx.webSocket=function(n){this.reconnect=!0;this.initialized=this.opened=!1;this.retryCount=0;this.maxRetries=n.maxRetries||3;this.retryDelay=n.retryDelay||1e4;this._init=function(n){if(!this.initialized&&"WebSocket"in window){n=n||{};n.clientId=n.clientId||"";n.basePath=n.basePath||"";this.namespace="."+n.namespace;try{var t=n.wsProtocol+n.host+n.basePath+n.resourceUrl+n.clientId;this.create(n.wsURL||t);this.initialized=!0;this.wsOpts=n}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","Could not initialize WebSocket")}}};var t=this,i=function(){this.initialized=this.opened=!1;this.reconnect&&(-1==this.maxRetries||this.retryCount<this.maxRetries)&&(this.retryCount++,gx.lang.doCallTimeout(this._init,this,[this.wsOpts],1e4))};this.create=function(n){try{this.ws=new WebSocket(n);this.ws.onopen=function(){t.opened=!0;t.retryCount=0;gx.fx.obs.notify("gx.ws.onOpen"+t.namespace,[])};this.ws.onerror=function(n){gx.dbg.logDebug("gx.webSocket - Error: "+n.data);gx.fx.obs.notify("gx.ws.onError"+t.namespace,[n.data])};this.ws.onmessage=function(n){gx.dbg.logDebug("gx.webSocket - New Message: "+n.data);gx.fx.obs.notify("gx.ws.onMessage"+t.namespace,[n.data])};this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");t.opened&&(t.retryCount=0,i.apply(t))}}catch(r){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+t.namespace,[r]],100)}};window.onbeforeunload=function(){t.opened&&t.ws.close()};this.close=function(){t.opened&&(t.opened=!1,t.ws.close())};this.send=function(n){this.ws?this.ws.send(n):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};this._init(n)};gx.util.alert=function(n){var r=!1,t=!1,u=function(u){var u=u||{},e=u.message||"",o=u.cssClass||"",s=u.cssDisBtnClass||"",h=u.dataDisAtt,u=u.dismissmitAt,f;r&&0!=n("#gx-main-error").length||(n(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'><\/div>"),r=!0);i();f=n("#gx-main-error");f.html('<div class="'+o+'"><button type="button" class="'+s+'" data-dismiss="'+h+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;<\/button><span>'+e+"<\/span><\/div>");f.slideDown();t=!0;u&&window.setTimeout(function(){i()},u)},i=function(){t&&(n("#gx-main-error").fadeOut(500,function(){n(this).empty()}),t=!1)};return{showMessage:function(t,i){n("#gx-main-error");u(n.extend({message:t,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},i))},showError:function(t,i){n("#gx-main-error");u(n.extend({message:t,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},i))},hide:i}}(gx.$);gx.geolocation=function(n){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(t){t.attachedCtrl=n("#"+t.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(t);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(n){var i=attachedCtrls.shift(),t=gx.fn.validStruct(gx.O.getValidStructId(i.attachedCtrl.id)),n=n.coords.latitude+","+n.coords.longitude;gx.evt.setEventRow(gx.pO,i.attachedCtrl);t.v2v&&(t.v2v(n),t.v2c());t.gxgrid&&t.gxgrid.updateControlValue(t,!0)},handle_errors:function(n){attachedCtrls.shift();switch(n.code){case n.PERMISSION_DENIED:n="user did not share geolocation data";break;case n.POSITION_UNAVAILABLE:n="could not detect current position";break;case n.TIMEOUT:n="retrieving position timed out";break;default:n="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(n);gx.pO.refreshOutputs([])}}}(gx.$);gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(n,t){var i=n.slice(0,t);return n.slice(t).concat(i)},xtime:function(n){return n<<=1,n&256?n^283:n},mult_GF256:function(n,t){for(var r=0,i=1;256>i;i*=2,t=this.xtime(t))n&i&&(r^=t);return r},byteSub:function(n,t){for(var r,u="encrypt"==t?this.SBox:this.SBoxInverse,i=0;4>i;i++)for(r=0;r<this.Nb;r++)n[i][r]=u[n[i][r]]},shiftRow:function(n,t){for(var i=1;4>i;i++)n[i]="encrypt"==t?this.cyclicShiftLeft(n[i],this.shiftOffsets[this.Nb][i]):this.cyclicShiftLeft(n[i],this.Nb-this.shiftOffsets[this.Nb][i])},mixColumn:function(n,t){for(var i,u=[],r=0;r<this.Nb;r++){for(i=0;4>i;i++)u[i]="encrypt"==t?this.mult_GF256(n[i][r],2)^this.mult_GF256(n[(i+1)%4][r],3)^n[(i+2)%4][r]^n[(i+3)%4][r]:this.mult_GF256(n[i][r],14)^this.mult_GF256(n[(i+1)%4][r],11)^this.mult_GF256(n[(i+2)%4][r],13)^this.mult_GF256(n[(i+3)%4][r],9);for(i=0;4>i;i++)n[i][r]=u[i]}},addRoundKey:function(n,t){for(var i=0;i<this.Nb;i++)n[0][i]^=t[i]&255,n[1][i]^=t[i]>>8&255,n[2][i]^=t[i]>>16&255,n[3][i]^=t[i]>>24&255},keyExpansion:function(n){var i=[],t;for(this.Nk=this.keySizeInBits/32,this.Nb=this.blockSizeInBits/32,this.Nr=this.roundsArray[this.Nk][this.Nb],t=0;t<this.Nk;t++)i[t]=n[4*t]|n[4*t+1]<<8|n[4*t+2]<<16|n[4*t+3]<<24;for(t=this.Nk;t<this.Nb*(this.Nr+1);t++)n=i[t-1],0==t%this.Nk?n=(this.SBox[n>>8&255]|this.SBox[n>>16&255]<<8|this.SBox[n>>24&255]<<16|this.SBox[n&255]<<24)^this.Rcon[Math.floor(t/this.Nk)-1]:6<this.Nk&&4==t%this.Nk&&(n=this.SBox[n>>24&255]<<24|this.SBox[n>>16&255]<<16|this.SBox[n>>8&255]<<8|this.SBox[n&255]),i[t]=i[t-this.Nk]^n;return i},Round:function(n,t){this.byteSub(n,"encrypt");this.shiftRow(n,"encrypt");this.mixColumn(n,"encrypt");this.addRoundKey(n,t)},InverseRound:function(n,t){this.addRoundKey(n,t);this.mixColumn(n,"decrypt");this.shiftRow(n,"decrypt");this.byteSub(n,"decrypt")},FinalRound:function(n,t){this.byteSub(n,"encrypt");this.shiftRow(n,"encrypt");this.addRoundKey(n,t)},InverseFinalRound:function(n,t){this.addRoundKey(n,t);this.shiftRow(n,"decrypt");this.byteSub(n,"decrypt")},encrypt:function(n,t){var i;if(n&&8*n.length==this.blockSizeInBits&&t){for(n=this.packBytes(n),this.addRoundKey(n,t),i=1;i<this.Nr;i++)this.Round(n,t.slice(this.Nb*i,this.Nb*(i+1)));return this.FinalRound(n,t.slice(this.Nb*this.Nr)),this.unpackBytes(n)}},decrypt:function(n,t){var i;if(n&&8*n.length==this.blockSizeInBits&&t){for(n=this.packBytes(n),this.InverseFinalRound(n,t.slice(this.Nb*this.Nr)),i=this.Nr-1;0<i;i--)this.InverseRound(n,t.slice(this.Nb*i,this.Nb*(i+1)));return this.addRoundKey(n,t),this.unpackBytes(n)}},byteArrayToString:function(n){for(var i="",r=n.length,t=0;t<r;t++)0!=n[t]&&(i+=String.fromCharCode(n[t]));return i},stringToByteArray:function(n){for(var t=[],r=n.length,i=0;i<r;i++)t[t.length]=n.charCodeAt();return t},byteArrayToHex:function(n){var i="",r,t;if(n){for(r=n.length,t=0;t<r;t++)i+=(16>n[t]?"0":"")+n[t].toString(16);return i}},hexToByteArray:function(n){var i=[],r,t;if(!(n.length%2)){for((0==n.indexOf("0x")||0==n.indexOf("0X"))&&(n=n.substring(2)),r=n.length,t=0;t<r;t+=2)i[Math.floor(t/2)]=parseInt(n.slice(t,t+2),16);return i}},packBytes:function(n){var i=[],r,t;if(n&&!(n.length%4)){for(i[0]=[],i[1]=[],i[2]=[],i[3]=[],r=n.length,t=0;t<r;t+=4)i[0][t/4]=n[t],i[1][t/4]=n[t+1],i[2][t/4]=n[t+2],i[3][t/4]=n[t+3];return i}},unpackBytes:function(n){for(var t=[],r=n[0].length,i=0;i<r;i++)t[t.length]=n[0][i],t[t.length]=n[1][i],t[t.length]=n[2][i],t[t.length]=n[3][i];return t},formatPlaintext:function(n){var i=this.blockSizeInBits/8,t,n,r;if("string"==typeof n||n.indexOf)for(n=n.split(""),r=n.length,t=0;t<r;t++)n[t]=n[t].charCodeAt(0)&255;for(t=i-n.length%i;0<t&&t<i;t--)n[n.length]=0;return n},rijndaelEncrypt:function(n,t,i,r){var u,o,f=this.blockSizeInBits/8;if(n&&t&&8*t.length==this.keySizeInBits){"CBC"!=i&&(i="ECB",r=[]);for(var n=this.formatPlaintext(n),t=this.keyExpansion(t),e=0;e<n.length/f;e++){if(o=n.slice(e*f,(e+1)*f),"CBC"==i)for(u=0;u<f;u++)o[u]^=r[e*f+u];r=r.concat(this.encrypt(o,t))}return r}},rijndaelDecrypt:function(n,t,i){var r=this.blockSizeInBits/8,f=[],o,u,e;if(n&&t&&"string"!=typeof n&&8*t.length==this.keySizeInBits){for(i||(i="ECB"),t=this.keyExpansion(t),u=n.length/r-1;0<u;u--)if(o=this.decrypt(n.slice(u*r,(u+1)*r),t),"CBC"==i)for(e=0;e<r;e++)f[(u-1)*r+e]=o[e]^n[(u-1)*r+e];else f=o.concat(f);return"ECB"==i&&(f=this.decrypt(n.slice(0,r),t).concat(f)),f}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};gx.popup=function(n){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.top=this.position=this.height=this.width=0;this.cssClass="";this.left=0;this.zindex=1e3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};var t=function(i){0===n(this.getEl()).find(i.target).length&&(n(document.body).off("click",t),this.close())}.closure(this);this.open=function(i){this.state="opening";this.id=i.id||"gxdialog";this.callbacks=i.callbacks;var u=void 0===i.resizable||i.resizable,r="PopupBorder gx-popup gx-popup-default";this.cssClass&&(r=r.replace("gx-popup-default",""),r+=" "+this.cssClass);gx.popup.ext.window(this,!1,0,0,i.w,i.h,i.contentHtml,"white",i.title,"black","black","black","black",void 0===i.isModal||i.isModal,!0,!0,u,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",r,"PopupShadow",i.showParentPopups,!1,i.callbacks,i.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened";setTimeout(function(){n(document.body).on("click",t)},1)};this.close=function(){n(document.body).off("click",t);this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(t,i){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=i?i:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){gx.lang.isArray(t)?(this.url=t[0],this.autoresize=t[1],this.width=t[2],this.height=t[3],this.position=t[4],this.top=t[5],this.left=t[6],this.OncloseCmds=t[7]||[],this.ReturnParms=t[8]||[],this.cssClass=t[9]):t&&t.Url&&(this.url=t.Url,"undefined"!=typeof t.Autoresize&&(this.autoresize=t.Autoresize),"undefined"!=typeof t.Width&&(this.width=t.Width),"undefined"!=typeof t.Height&&(this.height=t.Height),"undefined"!=typeof t.Position&&(this.position=t.Position),"undefined"!=typeof t.Top&&(this.top=t.Top),"undefined"!=typeof t.Left&&(this.left=t.Left),"undefined"!=typeof t.Class&&(this.cssClass=t.Class),"undefined"!=typeof t.OncloseCmds&&(this.OncloseCmds=t.OncloseCmds),"undefined"!=typeof t.ReturnParms)&&(this.ReturnParms=t.ReturnParms)};this.open=function(){var i;if(this.state="opening",i=gx.popup.gxOpener(),this.lvl=-1,this.lvl=i&&i.gx&&i.gx.popup.ext.win&&i.gx.popup.ext.win.gx?i.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl,null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx,i=this.url,this.IsPrompt){gx.popup.currentPrompt=this;for(var t="?",r="",u="",f=this.ReturnParms.length,n=0;n<f;n++){if(r="",gx.lang.emptyObject(this.ReturnParms[n].Ctrl))if("string"==typeof this.ReturnParms[n])r=gx.util.urlValue(this.ReturnParms[n])+",";else if("number"==typeof this.ReturnParms[n])r=gx.util.urlValue(this.ReturnParms[n].toString())+",";else if(this.CustomRenderGrid)u=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[n].id),gx.lang.emptyObject(u)||(r=gx.util.urlValue(u+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[n].id))continue;else u=gx.fn.getHidden(this.ReturnParms[n].id),gx.lang.emptyObject(u)||(r=gx.util.urlValue(u)),r+=",";else r=gx.util.urlValue(this.ReturnParms[n].Ctrl)+",";t="out"==this.ReturnParms[n].IOType?t+",":t+r;this.ReturnParms[n].isLastKey&&gx.fn.isOutputParm(this.ReturnParms[n])&&!this.PromptIsGet&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);i+=t}t=document.activeElement;gx.csv.lastControl&&t&&gx.util.inArray(t.tagName,["BODY","FORM"])&&(t=gx.csv.lastControl);t&&(t&&(this.callerActiveElement=t),t.blur&&t.blur());this.InternalPopup=gx.popup.Impl(this,i,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var i=[],r,n,t;if(this.IsPrompt)for(r=this.ReturnParms.length,n=0;n<r;n++)t=this.ReturnParms[n],gx.fn.isOutputParm(t)&&i.push(t);else return this.ReturnParms;return i};this.close=function(t,i,r){var u;i=i||{};this.state="closing";t&&(this.RawReturnedParms=t);u=window;gx.popup.ext.win?(u=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var o=function(){var t=n.Deferred();return this.setCellValue.apply(this,arguments),t.resolve()},f=function(){var n,f,h,c;this.beforeClose&&this.beforeClose(t);!this.isPdf&&this.frameWindow&&this.frameWindow.gx&&(this.IsPrompt&&(this.parentPopup==null?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null),this.frameWindow.gx.evt.onunload.call(this.frameWindow),gx.util.browser.isIE()||(this.frameDocument.gxPopup=null),this.frameWindow=this.frameDocument=null);gx.popup.ext.close(this);var u=this.getOutputParms(),s=function(){i&&i.ignoreCmds===!0&&(this.OncloseCmds=[]);gx.ajax.dispatchCommands(this.OncloseCmds,void 0,{updateParms:u});this.cleanup();this.state="closed";this.afterClose&&this.afterClose(t);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",[this])}.closure(this),e=!0;if(t!=null&&this.IsPrompt){if(r&&i.parmsMetadata&&i.updateParms)for(f=i.parmsMetadata.length,n=0;n<f;n++)e=i.parmsMetadata[n],gx.util.inArray(e,i.updateParms)&&(t[n]=r[e]);f=t.length;h=gx.popup.assignPromptFields;c=gx.popup;gx.lang.emptyObject(this.CustomRenderGrid)||(h=o,c=this.CustomRenderGrid.grid);e=!1;h.call(c,u,t).then(function(){var i=null,t,r;for(f=u.length,n=0;n<f;n++)t=u[n].Ctrl,gx.fn.isAccepted(t)&&(i=t);if(i&&gx.TabOnPrompSelect&&(t=gx.fn.getControlIndex(i),t!=-1&&(i=gx.fn.searchFocus(t+1,!0))),gx.fn.setFocus(i),this.PromptIsGet)if(this.Opener.fullAjax)(t=gx.csv.ctxControlId(i.id))&&(r=gx.O.getValidStructFld(t)),r&&gx.csv.validControls(r.id,r.id+1,!0,this.Opener);else{gx.csv.loadScreen(function(){gx.fn.setFocus(i);s()});return}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),typeof GXPkIsDirty=="undefined"?!1:window.GXPkIsDirty,null,"eng")}catch(e){gx.dbg.logEx(e,"gxpopup.js","close")}s()}.closure(this))}else t&&u&&u instanceof Array&&u.length>0&&gx.fn.setReturnParms(this.Opener,u,t,this.CustomRenderGrid);e&&s()},e=gx.util.browser;e.isFirefox()||e.isIE()?u.setTimeout(f.closure(this),10):f.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload(!1)};this.cleanup=function(){try{this.OncloseCmds=[];this.ReturnParms=[];this.PromptIsGet=!1;this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null;this.RawReturnedParms=[];this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(n){gx.dbg.logEx(n,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},getWindowIframeElement:function(n){for(var i,r,n=n.document.getElementsByTagName("iframe"),t=0;t<n.length&&!i;t++)r=n[t],r.contentWindow===window&&(i=r);return i},gxOpener:function(){try{parent.gxTestAvailable=1;var t=this.getWindowIframeElement(parent);return t&&void 0!==n(t).attr("data-gx-popup-ct")?parent:window}catch(i){}return null},setFocus:function(){var n=this.getPopup();n&&n.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(n){var t=gx.popup.getPopup();t?"opened"==t.state?n():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[n],50):n()},getPopup:function(){var n=this.gxOpener();try{if(!gx.lang.emptyObject(n)&&!gx.lang.emptyObject(n.gx))return n.gx.popup.currentPopup}catch(t){}return null},setPopup:function(n){this.currentPopup=n},open:function(n,t){return this.openPopup(n,t)},openUrlToOpenPopupParms:function(n,t,i){var r=1,u=0,f=0,e=0,o=0,s=0;return i&&(r=i[0],u=i[1],f=i[2],e=i[3],o=i[4],s=i[5]),[n,r,u,f,e,o,s,[],t]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(n,t){var i=this.getPopup(),u,e,f,r;if(!i||i.Opener!==gx.O||!gx.lang.isArray(n)){for(r=new this.Popup(n,!1),r.Opener=t||gx.O,i=0,e=r.ReturnParms.length;i<e;i++)if((f=gx.fn.vStructForVar(r.ReturnParms[i]))&&f.grid&&(u=gx.O.getGridById(f.grid)))break;return u&&u.isUsercontrol&&(r.CustomRenderGrid=u),r.open(),r}i.OncloseCmds.push({popup:n})},openDialog:function(n){var t=new this.Dialog;return t.Opener=gx.O,t.open(n),t},openPrompt:function(n,t,i,r,u,f){var h,o,s,e,c;if(null==gx.popup.currentPrompt){if(r&&gx.setGxO(r,u),e=t[0].Ctrl,h=!1,e)o=gx.fn.rowGridId(e),e=gx.fn.controlRowId(e),!gx.lang.emptyObject(o)&&!gx.lang.emptyObject(e)&&(gx.csv.lastGrid=o,gx.fn.setCurrentGridRow(o,e));else{for(e=0,c=t.length;e<c;e++)if(t[e].IOType){o=t[e].id;break}o&&(o=gx.O.getValidStructFld(o),!gx.lang.emptyObject(o)&&(s=gx.O.getGridById(o.grid)))&&(h=s.isUsercontrol)&&(o=s.gridId+"",e=gx.lang.emptyObject(s.grid.getSelectedRow)?void 0:gx.text.padl(s.grid.getSelectedRow()+"",4,"0"),!gx.lang.emptyObject(o)&&!gx.lang.emptyObject(e)&&(gx.csv.lastGrid=o,gx.fn.setCurrentGridRow(o,e)))}(f||this.outParmsAccepted(t)||h)&&(n=new this.Popup([n,1,0,0,0,0,0,[],t],!0),n.IsMod=i,n.Opener=gx.getObj(r,u),h&&(n.CustomRenderGrid=s),n.open())}},outParmsAccepted:function(n){for(var t,u=n.length,r=!1,i=0;i<u;i++)if(t=n[i],gx.fn.isOutputParm(t)&&(r=!0),gx.fn.isOutputParm(t)&&t.Ctrl&&gx.fn.isAccepted(t.Ctrl))return!0;return!r},gxReturn:function(n){gx.fn.closeWindow(n)},parmId:function(n){return n=gx.dom.id(n),0===n.indexOf("span_")&&(n=n.substring(5)),n},popuplvl:function(){var n=gx.popup.getPopup();return!n||!n.window?-1:n.window.gx.popup.lvl},assignPromptFields:function(t,i){for(var u,e,h,o,c=[],s=gx.O,f=[],l=99999,a=i.length,r=0,r=0;r<a;r++)u=t[r],e=i[r],u.Ctrl&&!gx.lang.emptyObject(u)&&(gx.csv.pkDirty=u.isKey,"checkbox"==u.Ctrl.type&&u.Ctrl.value!=e&&(u.Ctrl.checked=!u.Ctrl.checked),u.Ctrl.value!=e&&u.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0),h=gx.csv.ctxControlId(this.parmId(u.Ctrl)),o=s.getValidStructFld(h),f.push({idx:o?o.id:l++,ParmCtrl:u.Ctrl,ControlId:h,VStruct:o,PValue:e}));for(f.sort(function(n,t){return n.idx<t.idx?-1:n.idx>t.idx?1:0}),r=0;r<f.length;r++)this.assignPromptFieldValue(f[r],s);for(r=0;r<f.length;r++)c.push(this.assignAndValidatePromptField(f[r],s));return n.when.apply(n,c)},assignPromptFieldValue:function(n){var t=n.VStruct,i=n.ParmCtrl,n=n.PValue;!gx.lang.emptyObject(t)&&!gx.lang.emptyObject(t.v2c)&&("date"==t.type||"dtime"==t.type)?(t.v2v(n),gx.fn.v2c(t,n)):gx.fn.setControlValue(this.parmId(i),n,0);gx.fn.setControlGxValid(i,"0");gx.evt.execOnchange(i);i=gx.dom.byId("span_"+i.name);null!=i&&(0===i.childNodes.length&&i.appendChild(gx.popup.gxOpener().document.createTextNode("")),i.childNodes[0].nodeValue=n);t&&t.gxgrid&&t.gxgrid.updateControlValue(t,!1)},assignAndValidatePromptField:function(t,i){var f=n.Deferred(),e=!0,o=t.ControlId,r=t.VStruct,u,s=function(){gx.popup.assignPromptFieldValue(t);gx.util.balloon.clear(o);u&&(gx.O.toValid=u+1,gx.csv.validateAll().done(function(){if(!gx.lang.emptyObject(r.rgrid)){for(var t=r.rgrid.length,n=0;n<t;n++)r.rgrid[n].filterVarChanged();f.resolve()}}));f.resolve()}.closure(this);return!gx.lang.emptyObject(r)&&(u=i.getValidStructId(r.fld))&&(u>gx.O.toValid&&(i.toValid=u),e=!1,gx.csv.validateAll().done(s)),e&&f.resolve(),f.promise()},autofit:function(){var n=this.getPopup();gx.lang.emptyObject(n)||"opened"!=n.state||this.ext.autofit(n,null,!1)},Impl:function(n,t,i,r,u,f,e,o){var s="PopupBorder gx-popup gx-popup-default";return n.cssClass&&(s=s.replace("gx-popup-default",""),s+=" "+n.cssClass),new this.ext.popUp(n,i,f,o,e,r,u,"gxp",t,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",s,"PopupShadow",void 0)},setZIndex:function(n){n=gx.dom.getStyle(n,"zIndex");isNaN(n)&&(n=999);n++;this.zindex=n;this.ext.zdx=n},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1e3,sdiff:5,win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&8>=gx.util.browser.ieVersion()},hide:function(n){var t=gx.dom.byId;gx.popup.ext.compatMode()&&(t(n+"_t").style.visibility="hidden",t(n+"_c").style.visibility="hidden",t(n+"_rs").style.visibility="hidden");t(n+"_b").style.visibility="hidden"},show:function(t){var i=gx.dom.byId,r=n("#"+t+"_b");gx.popup.ext.compatMode()?(i(t+"_t").style.visibility="visible",i(t+"_c").style.visibility="visible",i(t+"_rs").style.visibility="visible"):n(document.body).toggleClass("gx-popup-opened",!0);r.css("visibility","visible")},close:function(t,i){var u;if(n(document.body).toggleClass("gx-popup-opened",!1),!i||!("function"==typeof i&&!1===i())){t.draggable&&t.draggable.deinit();t.resizable&&t.resizable.deinit();gx.popup.ext.iFrame=null;gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currRS=null;var r=t.id,f=document.getElementById(r+"_b"),r=document.getElementById(r+"_ifrm");gx.popup.ext.deinitmodal(t);gx.popup.setPopup(t.parentPopup);u=t.callerActiveElement;u&&u.focus&&u.focus();t.parentPopup?t.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[t]):gx.fx.obs.notify("popup.close",[t]);r&&(r.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?f.parentNode.removeChild(f):gx.dom.removeControlSafe(f)}},move:function(t,i,r){t=n("#"+t+"_b");t.toggleClass("gx-popup-centered",!1);void 0!==i?t.css({left:Math.max(i,0)}).toggleClass("gx-popup-horizontal-center",!1):t.toggleClass("gx-popup-horizontal-center",!0);void 0!==r&&t.css({top:Math.max(r,0)})},resize:function(t,i,r){var u=gx.dom.byId;if(u(t+"_rs").rsEnable){var f=u(t+"_rs"),e=u(t+"_b"),o=u(t+"_t"),u=u(t+"_c");gx.popup.ext.compatMode()?(f.style.left=Math.max(i,92)+"px",f.style.top=Math.max(r,72)+"px",e.style.width=Math.max(i+8,100)+"px",e.style.height=Math.max(r+8,80)+"px",o.style.width=Math.max(i+3,92)+"px",u.style.width=Math.max(i-5,87)+"px",u.style.height=Math.max(r-28,44)+"px"):(t=document.getElementById(t+"_ifrm"),n(t).css({width:i,height:r}));this.resizePopupContent(i,r)}},movepopup:function(){return null!=this.currIDb&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff),null!=this.currRS&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff),!1},stopRS:function(){gx.popup.ext.currRS=null},startRS:function(t,i){var r=gx.popup.ext,u=t.pageX,f=t.pageY,e=n(i);return gx.popup.ext.compatMode()?(r.rsxoff=parseInt(i.style.left,0)-u,r.rsyoff=parseInt(i.style.top,0)-f):(r.rsxoff=e.position().left-u,r.rsyoff=e.position().top-f),r.currRS=i,!1},changez:function(n){var n=null!=n?n:this,t=gx.popup.ext,i=gx.dom.byId;n.style.zIndex=++t.zdx;i(n.cid+"_rs").style.zIndex=++t.zdx},stopdrag:function(){gx.popup.ext.currIDb=null},grab_id:function(t,i){var u=gx.popup.ext,r=gx.dom.byId,r=r(i.cid+"_b"),f,e;return gx.evt.mouse.update(t),f=gx.evt.mouse.x,e=gx.evt.mouse.y,gx.popup.ext.compatMode()?(u.xoff=parseInt(r.style.left,0)-f,u.yoff=parseInt(r.style.top,0)-e):(u.xoff=n(r).position().left-f,u.yoff=n(r).position().top-e),u.currIDb=r,!1},subBox:function(n,t,i,r,u,f){return u=document.createElement("div"),u.setAttribute("id",f),u.style.position="absolute",u.style.left=n+"px",u.style.top=t+"px",u.style.width=i+"px",u.style.height=r+"px",u.style.visibility="visible",u.style.padding="0px",u.style.width=i+"px",u},window:function(){gx.popup.ext.compatMode()?this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){ut=void 0!==ut?ut:gx.popup.showParentPopups;i=t.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);u=this.win.gx.dom.byId.closure(this.win.gx.dom);r=n("<div/>",{id:i+"_b",style:p?"":"visibility:hidden;"})[0];n(r).addClass("gx-responsive-popup gx-popup-centered "+it+" gx-popup-initial");it=n("<div/>",{id:i+"_t"})[0];it.className=g;it.innerHTML='<span id="'+i+'_gxtitle" class="PopupTitle">'+h+'<\/span><span class="'+nt+'"; id="'+i+'_cls"><\/span>';h=n("<div/>",{id:i+"_c"})[0];h.className=tt;"string"==typeof o?h.innerHTML=o:h.appendChild(o);r.appendChild(it);r.appendChild(h);ot=gx.dom.byId(ot)||this.doc.body;ot.appendChild(r);p||this.hide(i);o=u(i+"_b");p=u(i+"_cls");o.cid=i;o.isExt=k?!0:!1;k=u(i+"_t");k.cid=i;b&&(t.resizable=new gx.popup.ext.resizable(o,i,d,r));w&&(t.draggable=new gx.popup.ext.draggable(o,k));gx.evt.attach(p,"click",et.close||this.close.closure(this,[t,et.beforeClose]));(y||ut)&&this.initmodal(t,ut,ft)},resizable:function(t,i,r,u){var o,f=!1,s,h,e,c,l;this.init=function(t,i,r,u){var f=n("<div/>",{id:i+"_rs"})[0];f.className+="gx-popup-resize";f.innerHTML='<img src="'+r+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'">';f.rsEnable=!0;f.style.cursor="se-resize";f.cid=i;u.appendChild(f);e=t;f.firstChild.addEventListener("dragstart",function(n){gx.evt.cancel(n,!0)},!0);c=this.onMouseup.closure(this);l=this.onMousemove.closure(this);f.addEventListener("mousedown",this.onMousedown.closure(this));document.addEventListener("mouseup",c);document.addEventListener("mousemove",l);o=!0};this.deinit=function(){o&&(document.removeEventListener("mouseup",c),document.removeEventListener("mousemove",l),o=e=null)};this.onMousemove=function(t){var i;if(f){i=n(e).find("iframe");n("iframe").css("pointer-events","none");var r=n(e).hasClass("gx-popup-centered")?2:1,u=t.clientX-s,o=t.clientY-h,u=n(i).width()+u*r,r=n(i).height()+o*r;n(i).css({width:u,height:r});s=t.clientX;h=t.clientY}};this.onMousedown=function(n){s=n.clientX;h=n.clientY;f=!0};this.onMouseup=function(){f&&(n("iframe").css("pointer-events",""),f=!1)};this.init(t,i,r,u)},draggable:function(t,i){var o,u=!1,a,v,f=0,e=0,r,s,h,c,l;this.init=function(n,t){r=n;s=t;l=this.onMousedown.closure(this);c=this.onMousemove.closure(this);h=this.onMouseup.closure(this);r.addEventListener("mousedown",l);r.addEventListener("mouseup",h);document.addEventListener("mousemove",c);o=!0};this.deinit=function(){o&&(r.removeEventListener("mousedown",l),r.removeEventListener("mouseup",h),document.removeEventListener("mousemove",c),o=r=s=null)};this.onMousemove=function(t){if(u){n("iframe").css("pointer-events","none");var i=t.clientY-v;r.style.left=f+(t.clientX-a)+"px";r.style.top=e+i+"px"}};this.onMousedown=function(t){if(t.target===s){var i=n(r);f=i.position().left;e=i.position().top;i.css({left:f,top:e}).toggleClass("gx-popup-centered gx-popup-horizontal-center",!1);a=t.clientX;v=t.clientY;u=!0}};this.onMouseup=function(){u&&(n("iframe").css("pointer-events",""),u=!1,f=parseInt(r.style.left,10)||0,e=parseInt(r.style.top,10)||0)};this.init(t,i)},window_compat:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et){var st,ot;rt=void 0!==rt?rt:gx.popup.showParentPopups;l=n.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);a=this.win.gx.dom.byId.closure(this.win.gx.dom);u=Math.max(u,100);f=Math.max(f,80);t=new this.subBox(u-8,f-8,7,7,"",l+"_rs");w&&(t.className+="gx-popup-resize",t.innerHTML='<img src="'+k+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',t.style.cursor="se-resize");t.rsEnable=w;i=new this.subBox(i,r,u,f,c,l+"_b");i.className=tt;i.style.display="block";i.style.boxSizing="content-box";i.style.zIndex=++this.zdx;y||(i.style.visibility="hidden");h=new this.subBox(2,2,u-5,20,h,l+"_t");h.style.overflow="hidden";h.style.boxSizing="content-box";h.className=d;h.innerHTML='<span id="'+l+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+s+'<\/span><span class="'+g+'" style="z-index:'+ ++this.zdx+';" id="'+l+'_cls"><\/span>';u=new this.subBox(2,24,u-13,f-36,o,l+"_c");u.className=nt;"string"==typeof e?u.innerHTML=e:u.appendChild(e);u.style.overflow="hidden";u.style.boxSizing="content-box";y||(i.style.visibility="hidden",h.style.visibility="hidden",u.style.visibility="hidden");i.appendChild(h);i.appendChild(u);i.appendChild(t);et=gx.dom.byId(et)||this.doc.body;et.appendChild(i);y||this.hide(l);st=a(l+"_b");st.cid=l;st.isExt=b?!0:!1;ot=a(l+"_t");ot.cid=l;w&&(e=a(l+"_rs"),e.cid=l,e.style.boxSizing="content-box",gx.evt.attach(e,"mousedown",this.startRS.closure(this,[e],!0)),gx.evt.attach(e,"mouseup",this.stopRS.closure(this,[e],!0)));e=a(l+"_cls");gx.evt.attach(e,"click",ft.close||this.close.closure(this,[n,ft.beforeClose]));p&&(gx.evt.attach(ot,"mousedown",function(n){this.grab_id(n,ot);gx.evt.attach(st,"mouseup",this.stopdrag.closure(this,[ot],!0),this,{single:!0})},this),w&&gx.evt.attach(t.firstChild,"dragstart",function(n){gx.evt.cancel(n,!0)},!0));(v||rt)&&this.initmodal(n,rt,ut)},popUp:function(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt){l=gx.popup.ext;null!=t.parentPopup?(a=t.parentPopup.window,l=a.gx.popup.ext,l.win=a,l.doc=a.document,gx.popup.ext=l):(l.win=window,l.doc=l.win.document);l.win.gx.popup.setPopup(t);t.window=l.win;t.document=l.doc;l.win.gx.popup.lvl++;s+=l.win.gx.popup.lvl;t.id=s;!t.IsPrompt&&!gx.util.sameAppUrl(h)?(gx.popup.setPopup(null),t=new Date,t=t.getTime(),s="",1==r&&(s="left="+u+",top="+f),u="",i||(u=",width="+e+",height="+o),window.open(rt?h:"","gx"+t,"status=no,menubar=no"+u+",resizable="+(tt?"yes":"no")+",scrollbars=yes,"+s)):(h+=gx.http.urlParameterPrefix(h),h+=encodeURIComponent("gxPopupLevel="+l.win.gx.popup.lvl+";"),r="",r=gx.util.getFileName(h),r=r.charAt(0).toUpperCase()+r.slice(1),gx.popup.ext.compatMode()?(a=gx.HTML5?"auto":"100%",r='<iframe id="'+s+'_ifrm" src="'+h+'" width="'+a+'" height="'+a+'" frameborder="0" style="overflow:auto;" title="'+r+'" data-gx-popup-ct=""><\/iframe>'):(a=!i&&0<e?e:gx.dom.fixes.getPopupMinWidth(),h=n("<iframe/>",{id:s+"_ifrm",src:h,title:r,style:"width:"+gx.dom.addUnits(a)}),h.attr("data-gx-popup-ct",""),r=h[0].outerHTML,gx.util.browser.isIPad()&&(r='<div class="iframe-container">'+r+"<\/div>")),h={close:t.close.closure(t,[null,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel}])},l.window(t,i,u,f,e,o,r,c,v,y,w,b,k,d,g,nt,tt,rt,st,ht,ct,lt,at,vt,yt,!0,h),i=l.win.gx.dom.byId(s+"_ifrm"),l.iFrame=i,gx.lang.doCallTimeout(l.showIfLoaded,l,[t,i,1],50))},initmodal:function(n,t,i){n.showParentPopups=t;null==n.parentPopup?gx.ajax.disableForm(i,!0):t||this.hide(n.parentPopup.id)},deinitmodal:function(n){if(null==n.parentPopup)gx.ajax.enableForm();else{this.show(n.parentPopup.id);var t=n.parentPopup.frameWindow;t&&t.gx&&n.parentPopup.frameWindow.gx.ajax.enableForm()}},getDocumentContentType:function(t){return t.contentType||n(t.querySelector('meta[http-equiv="content-type"]')).attr("content")},isPDFPopup:function(n,t){var r,u,i;if(void 0===t.isPdf){if(r=n.src,gx.util.getContentTypeFromExt(r)==gx.util.contentTypes.pdf)return t.isPdf=!0;i=gx.util.contentTypes.html;try{var f=n.contentDocument,f=n.contentWindow.document,i=this.getDocumentContentType(f);if(i==gx.util.contentTypes.pdf)return t.isPdf=!0}catch(e){i=null}return gx.lang.emptyObject(i)&&(i={},i.url=r,i.method="HEAD",i.sync=!0,i.ajaxHeader=!1,i.handler=function(n,t,i){u=i.getResponseHeader("Content-Type")},i.obj=!0,gx.http.doCall(i),u&&0<=u.indexOf(gx.util.contentTypes.pdf))?t.isPdf=!0:!1}return t.isPdf},showIfLoaded:function(n,t,i){var r,u,f;try{if(n.isActive()&&(this.docReady(t,i)||10<i&&this.isPDFPopup(t,n))){r=gx.dom.iFrameDoc(t);u=!1;try{u=r&&"about:blank"!=r.URL}catch(o){}if(f=this.isPDFPopup(t,n),u||f){n.state="opened";this.autofit(n,r,!0);return}}}catch(e){gx.dbg.logEx(e,"gxpopup.js","showIfLoaded")}i++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[n,t,i],50*i)},docReady:function(n,t){var i,r;if("complete"==n.readyState)return!0;if(i=gx.dom.iFrameDoc(n),i){try{r="undefined"!=typeof i.gxReadyState?i.gxReadyState:i.readyState}catch(u){return!0}if("complete"==r)return!0}return!gx.util.browser.isIE()&&50<=t&&i&&i.body&&0!==i.body.childNodes.length?!0:!1},resizePopupContent:function(t,i){var f;if(gx.HTML5&&this.iFrame){var r=gx.dom.iFrameDoc(this.iFrame),e=0<i?i:"100%",o=0<t?t:"100%",u=n(this.iFrame),h=0<t&&0<i,c=gx.popup.ext.compatMode(),s;if(r&&(f=r.documentElement,f))if(c)o=e="100%";else{try{s=u[0].contentWindow.gx&&u[0].contentWindow.gx.runtimeTemplates}catch(l){}h?(n(f).width(t),n(f).height(i),n(f).css("min-width",""),u.width(o),u.height(e)):(s||u.width(50),n(f).width(f.offsetWidth));o=Math.max(Math.max(r.body.scrollWidth,r.documentElement.scrollWidth),Math.max(r.body.offsetWidth,r.documentElement.offsetWidth));try{o+=n(window).height()<=r.body.offsetHeight?n.position.scrollbarWidth():0}catch(a){}e=void 0}u.width(o);void 0===e&&(e=Math.max(Math.max(r.body.scrollHeight,r.documentElement.scrollHeight),Math.max(r.body.offsetHeight,r.documentElement.offsetHeight)));u.height(e)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(t,i,r){var u,l,a;if(!gx.lang.emptyObject(t)){var o=document,e=t.id,h=t.isPdf,s=n("#"+e+"_c");this.doc||(this.doc=t.document);var o=this.doc,f=o.getElementById(e+"_ifrm"),c=n(o.getElementById(e+"_gxtitle"));!i&&gx.popup.ispopup()&&(i=gx.dom.iFrameDoc(f));this.iFrame=this.iFrame||f;c.text(i&&!h?i.title:"");t.frameDocument=i;t.frameWindow=f.contentWindow;i&&!h&&(i.gxPopup=t);gx.util.browser.isIPad()&&(s.css("overflow-y","auto"),s.css("-webkit-overflow-scrolling","touch"));window.self!==window.top&&(u=this.getiFrameSizeInfo(o),u.accessParentFrame&&(c=u.scrollTop,f=u.maxHeight+Math.min(window.top.document.body.scrollTop-u.y,0)-50,s.css("max-height",f).parent().css("margin-top","0px"),u=Math.max(window.top.document.body.scrollTop-u.y,0),i=Math.min(i.body.offsetHeight,f),this.move(e,void 0,u+c+(f-i)/2)));h&&(s.addClass("gx-popup-pdf"),l=.5*o.body.clientWidth,a=.85*o.body.clientHeight);t.autoresize||(l=t.width,a=t.height);this.resizePopupContent(l,a);r&&(t.position&&(r=parseInt(t.top,0),t=parseInt(t.left,0),this.move(e,t,r)),this.show(e))}},autofit_comp:function(t,i,r){var c,p,u,l,e,o;if(!gx.lang.emptyObject(t)){u=document;t.zindex=null!=u.gxPopup?this.zdx+u.gxPopup.zindex:this.zdx;c=t.id;p=t.isPdf;this.doc||(this.doc=t.document);u=this.doc;l=u.getElementById(c+"_ifrm");!i&&gx.popup.ispopup()&&(i=gx.dom.iFrameDoc(l));t.frameDocument=i;t.frameWindow=l.contentWindow;i&&!p&&(i.gxPopup=t);var l=u.getElementById(c+"_rs"),d=u.getElementById(c+"_t"),a=u.getElementById(c+"_b"),s=u.getElementById(c+"_c"),v=u.getElementById(c+"_gxtitle");v.innerHTML=i&&!p?i.title:"";v.style.width="auto";var w=gx.dom.getComputedStyle(s),it=gx.dom.getComputedStyle(d),b=gx.dom.getComputedStyle(a),g=gx.dom.getComputedStyle(l),f=parseInt(w.height,0),h=parseInt(w.width,0),y=this.getiFrameSizeInfo(u),nt=y.maxWidth,tt=y.maxHeight,rt=y.scrollTop,ut=y.scrollLeft,ft=y.x,y=y.y,k=gx.dom.dimensions(a);t.autoresize||(f=t.height-f+k.h,h=t.width-h+k.w);e=t.width-h;o=t.height-f;t.autoresize&&(!p&&i?(i=gx.HTML5?i.documentElement||i.body:i.body,u=r&&gx.util.browser.isEdge()?n.position.scrollbarWidth():0,i?(i.gxwidth||(i.gxwidth=i.scrollWidth),e=i.gxwidth+u,u=i.gxwidth+30-nt,o=i.scrollHeight+30-tt,e=Math.max(e,v.clientWidth+15)-h-(0<u?u:0)+0,o=i.scrollHeight-f-(0<o?o:0)):gx.util.browser.isIE()&&(0>e&&(e=0),0>o&&(o=0))):p&&(e=u.body.clientWidth/2,o=u.body.clientHeight/2));v=parseInt(t.top,0);f=parseInt(t.left,0);!t.position&&(v=(tt-o)/2-k.h/2+rt-y,f=(nt-e)/2-k.w/2+ut-ft,0>v&&(v=5,o-=5),0>f)&&(f=5,e-=5);a.style.top=parseInt(v,0)+"px";a.style.left=parseInt(f,0)+"px";t.autoresize?(t=function(n,t){var i=parseInt(n,0)+t;return i>0?i:n},d.style.width=t(it.width,e)+"px",a.style.height=t(b.height,o)+"px",a.style.width=t(b.width,e)+"px",s.style.height=t(w.height,o)+"px",s.style.width=t(w.width,e)+"px",t=gx.util.browser.isIE()?4:2,l.style.top=parseInt(b.height,0)-parseInt(g.height,0)-t+"px",l.style.left=parseInt(b.width,0)-parseInt(g.width,0)-t+"px"):(f=t.height,h=t.width,l.style.left=Math.max(h,92)+"px",l.style.top=Math.max(f,72)+"px",a.style.width=Math.max(h+8,100)+"px",a.style.height=Math.max(f+8,80)+"px",d.style.width=Math.max(h+3,92)+"px",s.style.width=Math.max(h-5,87)+"px",s.style.height=Math.max(f-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(s.style["overflow-y"]="auto",s.style["-webkit-overflow-scrolling"]="touch"):s.style.overflow="hidden";p&&gx.util.browser.isIE()?this.resizePopupContent("100%","100%"):this.resizePopupContent(parseInt(s.offsetWidth,10),parseInt(s.offsetHeight,10));r&&this.show(c)}},getiFrameSizeInfo:function(n){var i=gx.util.getWindowInfo().canAccessFrame,t={x:0,y:0,accessParentFrame:i};return!i||window==window.top||gx.lang.emptyObject(window.top)?(t.maxWidth=window.innerWidth||n.documentElement.clientWidth||n.body.offsetWidth,t.maxHeight=window.innerHeight||n.documentElement.clientHeight||n.body.offsetHeight,t.scrollTop=gx.dom.documentScroll(n).scrollTop,t.scrollLeft=gx.dom.documentScroll(n).scrollLeft):(i=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>n.body.clientHeight?t.maxHeight=n.body.clientHeight:(t.maxHeight=window.top.document.body.clientHeight,t.y=i.y),t.scrollTop=n.body.scrollTop,t.scrollLeft=n.body.scrollLeft,t.maxWidth=Math.min(window.top.document.body.clientWidth,n.body.clientWidth),window.top.document.body.clientWidth>n.body.clientWidth)?t.maxWidth=n.body.clientWidth:(t.maxWidth=window.top.document.body.clientWidth,t.x=i.x),t},_init:function(){}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var n=this.getPopup();if(n){try{n.frameDocument&&(gx.util.browser.isIE()?n.frameDocument=n.frameWindow.document:n.frameDocument.gxPopup=n)}catch(t){n.frameDocument=n.frameWindow.document;gx.dbg.logEx(t,"gxpopup.js","_init")}n=n.window.gx.popup;gx.fx.obs.addObserver("gx.onload",n,function(){this.autofit()}.closure(n));gx.fx.obs.addObserver("grid.onafterrefresh",n,function(n,t,i){t<i&&this.autofit()}.closure(n));gx.fx.obs.addObserver("gx.onafterevent",n,function(){this.autofit()}.closure(n))}}}}(gx.$);gx.ajax=function(n){function t(n,t,i){0<n&&(i=i||gx.O,gx.fn.setCurrentGridRow(n,t),(n=i.getGridById(n))&&n.instanciateRow(t))}var r=/\?(.*)/,i=function(n,t,i){gx.dbg.logMsg("Unable to execute external object "+n+" - "+t+"("+i+")")};return{reqHeader:"GxAjaxRequest",resourceProvider:"",dfTimer:null,resolveParmKey:function(n){var t=!1;return n.av?t=n.av:n.ctrl&&n.prop?t=n.ctrl+n.prop:n.ctrl&&(t=n.ctrl),t},serviceUrl:function(n){var t=gx.ajax.selfUrl();return n&&(t=r.test(t)?t.replace(r,"?"+n+gx.http.urlParameterSeparator(t)+"$1"):t+("?"+n)),t},validationMessage:function(n,t,i,r,u,f){return n=new gx.ajax.message(n,t,i,r,u,f),gx.lang.apply(n,{isValidation:!0,beforeCall:gx.emptyFn,beforeAjaxCall:function(n){n.warnOnTimeout=!0;n.beforeSend=function(n){n.setRequestHeader("X-FULL-AJAX-REQUEST","1")}},beforeProcesResponse:function(n){for(var r=[],i=this.getParmsMetadata("input"),t=0;t<i.length;t++)i[t].av&&r.push(i[t].av);n.isValidation=!0;n.validationInput=r}})},message:function(t,i,r,u,f,e){var o;return{disableForm:e,gxO:i,grid:r,row:u,methods:[t],isValidation:!1,addMethod:function(n){this.methods.push(n)},gridsData:function(){var i=this.gxO.getGridById(this.grid,this.row),t={},r=function(n,t){var i=n.parentRow?n.parentRow.gxId:"";t[n.gridName]={id:n.gridId,lastRow:Math.max(0,Number(n.lastRowId)),pRow:i}},u;return i?(u=function(n,t){if(n){r(n,t);var i=gx.fn.currentGridRowImpl(n.gridId);i&&(t[n.gridName].lastRow=Math.max(0,Number(i.substr(-4,4))-1));u(n.parentGrid,t)}},function(t,i,u,f){var e=function(n,t){return n?t.parentGrid===n&&gx.text.startsWith(t.parentRow.gxId,f)?t:e(n.parentGrid,t):null},u=n.map(gx.O.Grids,function(n){return e(t,n)});n.each(u,function(n,t){r(t,i)})}(i,t,this.gxO,this.row),u(i,t)):n.each(this.gxO.Grids,function(n,i){r(i,t)}),t},to_json:function(){var n={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};return this.fullPost&&(n.fullPost=this.fullPost),this.addGXStateParms(n),this.grid&&(n.grid=this.grid),n.grids=this.gridsData(),this.row&&(n.row=this.row.substring(0,4),n.pRow=this.row.substring(4)),gx.json.serializeJson(n)},getParmsMetadata:function(n){for(var t,i,u,r=[],f={},e=0,o=this.methods.length;e<o;e++)if(t=this.methods[e],this.gxO.EvtParms[t])for(t=this.gxO.EvtParms[t]["input"==n?0:1],i=0;i<t.length;i++)t[i].postForm||t[i].sPrefix||t[i].sSFPrefix||t[i].sCompEvt?r.push(t[i]):(u=gx.ajax.resolveParmKey(t[i]),u&&(void 0===f[u]?(f[u]=r.length,r.push(t[i])):void 0===r[f[u]].grid&&void 0!==t[i].grid&&(r[f[u]]=t[i])));return r},parmFromHidden:function(n,t){var r=gx.O,i;return gx.setGxO(t),gx.lang.emptyObject(n)||gx.lang.emptyObject(t)||!n.v2v||(i=gx.fn.getHidden(this.gxO.IsMasterPage?n.fld+"_MPAGE":gx.O.CmpContext+n.fld),n.v2v(i),i=t[n.gxvar]),gx.setGxO(r),i},getInputParms:function(){for(var s,v,c,l=this.getParmsMetadata("input"),y=this.gxO.CmpContext,e=[],a=[],i,r,t,u,f,o,h=0,p=l.length;h<p;h++)if(r=t=void 0,o="",i=l[h],i.postForm){u={};u.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(u,gx.http.postDataFormat.JSON);for(s in gx.http.viewState)this.fullPost[s]||void 0===gx.http.viewState[s]||(this.fullPost[s]=gx.http.viewState[s])}else this.gxO.isTransaction()&&0<this.grid&&this.row&&"Gx_mode"===i.av&&"vMODE"===i.fld?e.push(gx.fn.getGridRowModeImpl(gx.fn.gridLvl(this.grid),this.grid,this.row)):"Referrer"==i.prop?e.push(gx.referrer?gx.referrer:document.referrer):i.sPrefix?e.push(this.gxO.sPrefix()):i.sSFPrefix?e.push(""):i.sCompEvt?e.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),"")):(i.ctrl?i.prop?"GridRC"==i.prop?(u=(u=gx.parentGridRow(i.grid,this.gxO))?"_"+u:"",r={gridRC:gx.fn.getHidden(this.gxO.sPrefix()+i.av+u),rowSuffix:u}):r=this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+i.ctrl,i.prop):(t=this.gxO.getValidStructFld(i.ctrl))&&(u=gx.fn.getControlGridRef(t.fld,t.grid),gx.html.controls.isMultiSelection(t.ctrltype)?o=gx.dom.comboBoxToObj(u,r):"radio"===t.ctrltype&&(o=gx.dom.radioToObj(u,r)),o&&(r=o)):((t=this.getParmVarVStruct(i))&&"function"==typeof t.c2v&&"function"==typeof t.val&&(u=t.grid===this.grid?this.row:gx.fn.currentGridRowImpl(t.grid),void 0!==t.val(u)&&t.c2v(u)),t&&!0===t.isuc&&(f=this.row||(t&&t.grid?gx.fn.currentGridRowImpl(t.grid):void 0),(t.getUCInstance(f)||t.uc).execC2VFunctions()),r="function"==typeof this.gxO[i.av]?this.gxO[i.av](this.row):void 0===this.gxO[i.av]?i.fld?gx.fn.getControlValue(i.fld):"":this.gxO[i.av],(u=gx.fn.vStructForOld(i.av))&&("date"==u.type||"dtime"==u.type)&&"string"==typeof r&&(r=new gx.date.gxdate(r)),this.isValidation&&r instanceof gx.date.gxdate&&!r.HasDatePart&&(u=new gx.date.gxdate(""),u.assign_date(r),u.JsonNullFormat=gx.date.jsonNullFormat.YearOne,r=u),void 0!==i.grid?(v=r,c=[],n.each(this.gxO.Grids,function(n,u){var e,o,s;if(u.gridId===i.grid){if(e=u.parentRow?u.parentRow.gxId:"",t)for(r={pRow:e,c:[],hc:[],hsh:[],v:v},o=1;o<=u.lastRowId;o++)f=gx.grid.getPaddedRowId(o),s=t.isuc?gx.fn.getControlValue(t.fld+"_"+f+e):t.val(f+e),r.c.push(s),i.hsh&&r.hsh.push(gx.fn.getHash(y,t.fld,f+e)),gx.lang.emptyObject(t.hc)||r.hc.push(gx.fn.getControlValue("GXHC"+t.fld+"_"+f+e));else gx.lang.isArray(r)&&(r={pRow:e,c:r,v:r[Number(gx.fn.currentGridRowImpl(i.grid))-1]});c.push(r)}}),r=c):i.hsh&&(t&&t.grid?(f=gx.fn.currentGridRowImpl(t.grid)||"",""===f&&(r=this.parmFromHidden(t,this.gxO))):f="",a.push({hsh:gx.fn.getHash(this.gxO.CmpContext,i.fld,f),row:f}))),e.push(void 0!==r?r:null));return{input:e,hashed:a}},refreshOutputParms:function(){for(var r=this.getParmsMetadata("output"),n,t,i=0,u=r.length;i<u;i++)(n=r[i],(n=this.getParmVarVStruct(n))&&n.grid&&"function"==typeof n.c2v&&"function"==typeof n.val)&&(t=gx.fn.currentGridRowImpl(n.grid),void 0!==n.val(t)&&n.v2c(t))},getParmVarVStruct:function(n){var t;return void 0!==n.fld?n.fld?this.gxO.getValidStructFld(n.fld):null:this.grid&&this.row&&(t=this.gxO.getGridById(this.grid))&&(n=t.grid.getColumnForVar(n.av))?this.gxO.getValidStruct(n.gxId):void 0},addGXStateParms:function(n){var t={};gx.notifications&&gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID")&&(t.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(t)||(n.gxstate=t)},beforeCall:function(){f&&gx.fn.objectOnpost()},call:function(){var i,r,t;return o=n.Deferred(),i=gx.O,gx.setGxO(this.gxO),this.grid&&this.row&&(r=gx.fn.currentGridRowImpl(this.grid),gx.fn.setCurrentGridRow(this.grid,this.row)),this.beforeCall(),t=this.getInputParms(),f?(this.parms=t.input,this.hashedParms=t.hashed,this.doAjaxCall(!1,this.disableForm)):(this.doClientSideCall(),this.refreshOutputParms()),this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,r),gx.setGxO(i),o.promise()},doAjaxCall:function(n,t){var r=this.to_json(),i;gx.evt.setProcessing({status:!0,ctx:"doAjaxCall"});!1!==t&&this.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[r,n]);i=gx.ajax.getPostInfo(this.gxO,r,n);i.handler=this.ajaxCallHandler.closure(this);i.error=this.ajaxCallError.closure(this);i.handleAllStatusCodes=!0;i.url=gx.ajax.serviceUrl((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));i.reqData=r;i.always=this.callback;i.contentType="application/json";this.beforeAjaxCall(i);gx.http.doCall(i)},beforeAjaxCall:gx.emptyFn,doClientSideCall:function(){var n=this.callback();o.resolve(n)},ajaxCallError:function(){o.resolve(!1);i.endFeedback()},afterAjaxCallHandler:function(n,t,i){i=i||gx.O;gx.evt.setProcessing({status:!1,ctx:"afterAjaxCallHandler"});o.resolve(!n);n&&(i.endFeedback(),gx.fx.obs.notify("gx.onafterevent",[t]))},ajaxCallHandler:function(n,t,i){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;gx.http.lastStatus=i.status;var n=!1,r;i.status==gx.http.STATUS_FORBIDDEN?(gx.util.alert.showError(gx.getMessage("GXM_runtimeappsrv")+" ("+i.status+")"),n=!0):gx.http.checkResponseStatus(i,this.isValidation)?n=!0:200>i.status||299<i.status?(gx.dom.writeError(i.responseText,gx.getMessage("GXM_runtimeappsrv"),i.status),n=!0):gx.http.validJsonResponse(i,t)?(r=gx.json.evalJSON(t),null==r?gx.dom.writeError(t.toString(),gx.getMessage("GXM_runtimeappsrv"),i.status):(gx.csv.lastEvtResponse=r,t={response:r,isPostBack:!0,context:{fullAjaxCall:!0},gxObject:this.gxO,gridId:this.grid,row:this.row},this.beforeProcesResponse(t),gx.ajax.setJsonResponse(t).done(function(){gx.fx.obs.notify("gx.onafterevent",[r])}))):n=!0;this.afterAjaxCallHandler(n,r,this.gxO)},beforeProcesResponse:gx.emptyFn,startFeedback:function(){this.gxO.startFeedback(!1,this.isValidation)}}},maxGETLength:function(n){return n.AjaxSecurity?600:1350},getImageUrl:function(n,t){var i=n[t];return gx.lang.emptyObject(i)?"":("object"==typeof i&&(n[t]=gx.ajax.resolveImageUrl(i)),gx.util.resourceUrl(gx.basePath+gx.staticDirectory+n[t],!0))},imageGuidToUrl:function(n){try{if(!gx.lang.emptyObject(this.resourceProvider)){var t=gx.ajax.objectUrl(this.resourceProvider)+"?image,"+encodeURIComponent(n)+",,"+encodeURIComponent(gx.theme);return gx.http.callBackend_simple(t,!0,!0,"GET",null,!0),gx.http.lastResponse}}catch(i){gx.dbg.logEx(i,"gxcallrpc.js","getImageUrl")}return n},resolveImageUrl:function(n){for(var t,i=0;i<n.length;i++)if(t=n[i],t.l==gx.languageCode&&t.t==gx.theme)return(t.i?"Resources/":"")+t.p},sendHeader:function(n){try{if(!gx.lang.emptyObject(this.resourceProvider))return gx.http.callBackend_simple(location.href,!0,!0,"HEAD",null,!0,!0,n),!0}catch(t){}return!1},encryptParms:function(n,t){return n.AjaxSecurity?gx.sec.encrypt(t):t},doPost:function(n,t,i,r){!1!==i&&gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[n,t]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);t=this.getPostInfo(gx.O,n,t);t.url=gx.ajax.serviceUrl(n);var u=gx.O;t.onReady=function(){!1!==i&&u.endFeedback()};t.always=r;gx.http.doCall(t)},getPostInfo:function(n,t,i){return t={},t.formNode=gx.dom.form(),t.method="POST",t.encoding="UTF-8",t.useCash=!1,t.gxO=n,!0===i&&(t.sync=!0),t.handler=gx.http.postHandler,this.multipartInfo(t),t},multipartInfo:function(n){gx.dom.hasSelectedFile()&&(n.multipart=!0,n.mimetype="text/html",n.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(t,i){var r=void 0!==t.refresh_form,u,f;if("GET"==(t.refresh||t.refresh_form))gx.http.reload(!0);else return u="RFR",i.IsMasterPage&&(u+="_MPAGE"),r=r||!gx.pO.fullAjax?gx.pO:i,f=r.fullAjax,r.executeServerEvent(u,!gx.pO.fullAjax,null,!0,f);return n.Deferred().resolve()},doRefresh:function(n){var t=n.IsMasterPage?"RFR_MPAGE":"RFR",n=gx.pO.fullAjax?n:gx.pO;n.executeServerEvent(t,!0,null,!0,n.fullAjax)},dispatchCommands:function(n,t,i,r){var i=i||{},u,e,h=i.ignoreCmds||[],o,r=void 0===r?0:r,t=t||gx.O,s,f;if(n&&0<n.length){for(s=n.length,f=r;f<s;f++)if(r=n[f],u=Object.keys?Object.keys(r)[0]:"",!gx.util.inArray(u,h)){if(r.set_focus&&gx.fn.usrSetFocus(r.set_focus),r.print&&gx.printing.print(r.print),r.close&&(u=[],r.close.values instanceof Array&&(u=r.close.values),gx.fn.closeWindow(u,{parmsMetadata:r.close.metadata,updateParms:i.updateParms},t)),void 0!==r.refresh||void 0!==r.refresh_form||""===r.cmp_refresh){gx.ajax.dispatchRefreshCommand(r,t).then(function(){gx.ajax.dispatchCommands(n,t,i,f+1)});return}if(r.redirect&&(u=r.redirect,u.url=gx.ajax.removeGXParms(u.url),gx.http.redirect(u.url,1===u.forceDisableFrm,2===u.forceDisableFrm,t)),r.calltarget&&gx.nav.callFromServerRedirect(r.calltarget.url,r.calltarget.target),r.callback&&r.callback.apply(r.callback.scope,r.args||[]),r.cmp_refresh&&(u=gx.pO.getWebComponent(r.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",u)),r.popup){n.length>f+1&&(gx.lang.isArray(r.popup)?r.popup[7]=n.slice(f+1):r.popup.OncloseCmds=n.slice(f+1));gx.popup.open(r.popup,t);break}if(r.ucmethod&&(e=gx.getObj(r.ucmethod.CmpContext,r.ucmethod.IsMasterPage))){if(u=gx.O,gx.setGxO(e),(e=gx.O.getUserControl(r.ucmethod.Control))&&"function"==typeof e[r.ucmethod.Method])try{e[r.ucmethod.Method].apply(e,r.ucmethod.Parms);o=!0}catch(c){gx.dbg.logEx(c,"gxcallrpc.js","Failed to execute usercontrol method: "+r.ucmethod.Method)}gx.setGxO(u)}r.exomethod&&(gx.ajax.dispatchExoMethod(r.exomethod),o=!0);r.exoprop&&gx.ajax.dispatchExoProperty(r.exoprop)}o&&t.showMessages(!0)}gx.fn.usrSetFocus_commit()},resolveExoObject:function(n,t){var i=n[t],r,u,f;if(!i){for(i=t.split("."),r=window,u=0,f=i.length;u<f;u++)if(r=r[i[u]],void 0===r)return;i=r}return i},dispatchExoMethod:function(n){var r=gx.getObj(n.CmpContext,n.IsMasterPage),u,t,f;if(r){u=gx.O;gx.setGxO(r);try{(t=this.resolveExoObject(r,n.ObjectName))&&"GlobalEvents"===n.ObjectName?t.executeMethod(n.Method,n.Parms):n.IsEvent?gx.fx.obs.notify(n.Method,n.Parms):t?(f=t[n.Method])?f.apply(t,n.Parms):i("method","Method not found",n.Method):i("method","Object not found",n.ObjectName)}catch(e){gx.dbg.logEx(e,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(u)}}},dispatchExoProperty:function(n){var t=gx.getObj(n.CmpContext,n.IsMasterPage),r,u;if(t){r=gx.O;gx.setGxO(t);try{(u=this.resolveExoObject(t,n.ObjectName))?u[n.PropertyName]=n.Value:i("property","Object not found",n.ObjectName)}catch(f){gx.dbg.logEx(f,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(r)}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(n,t,i,r,u,f,e,o){if(t=t||gx.O,n&&0<n.length)for(i=n.length,f=0;f<i;f++){var s=n[f];s.load?(r=t.getGridById(s.load.grid,o))&&(s.load.props.values=s.load.values,r.loadNewRows(s.load.props)):s.addlines&&(gx.lang.doCall(gx.fn.setJsonValues,u),gx.lang.doCall(gx.fn.setJsonProperties,e,o),(r=t.getGridById(s.addlines.grid,o))&&r.getNewRows(s.addlines.count))}},willLeavePage:function(n){if(n)for(var i=n.length,t=0;t<i;t++)if(n[t].close)return!0;return!1},getRedirectCommand:function(n){var r,t,i;if(n)for(r=n.length,t=0;t<r;t++){if(i=n[t],i.popup)break;if(i.redirect)return i}return null},saveJsonResponse:function(n){this.lastJsonResponse=n},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){return this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands,this.lastJsonResponse},setPostResponse:function(n,t,i){return this.setJsonResponse({response:n,isPostBack:!0,gxObject:t||gx.O,context:i})},setJsonResponse:function(t){var o=n.Deferred(),i=t.response,e=t.isPostBack,p=t.afterCmpLoaded,r=t.gxObject,s=t.gridId,h=t.row,w=t.context||{},l=!!t.isValidation,f=gx.fn,u=gx.lang.doCall,a,v,c=this.willLeavePage(i.gxCommands),k=this.getShouldUpdatePropertyFunction(i),y,b;return r&&(a=gx.O,gx.O=r),s&&h&&(v=gx.fn.currentGridRow(s),gx.fn.setCurrentGridRow(s,h)),gx.evt.srvCommand?(gx.evt.srvCommand=!1,u(gx.ajax.dispatchCommands,i.gxCommands,r),o.resolve(c)):(y=this.getRedirectCommand(i.gxCommands),y&&1===y.redirect.forceDisableFrm?(u(gx.ajax.dispatchCommands,i.gxCommands,r,{ignoreCmds:["refresh","cmp_refresh"]}),o.resolve(c)):c?(u(gx.ajax.dispatchCommands,i.gxCommands,r),o.resolve(c)):(u(gx.ajax.dispatchPreCommands,i.gxCommands,r,i.gxComponents,i.gxHiddens,i.gxValues,i.gxGrids,i.gxProps,h),u(f.clearCompontHiddens,i.gxComponents),b=u(f.setJsonHiddens,r,i.gxHiddens),u(f.setJsonComponents,i.gxComponents,i.DynComponentMap,i.gxHiddens,function(y){var g;gx.http.loadStyles();gx.updateTheme();e&&gx.fn.installComponents(!1);typeof p=="function"&&p();a&&(gx.O=a);var nt=u(f.setJsonValues,i.gxValues,l,s,h,k),tt=u(f.setJsonProperties,i.gxProps,h),d=[],it=n.map(y,function(n){return n=f.cmpContextFromCtrl(n),(n=gx.pO.WebComponents[n])?gx.lang.objToArray(n.UserControls).concat(n.getUserControlGrids()):void 0});l||!r.isTransaction()&&r.fullAjax||gx.util.balloon.clearAll();f.enableDisableDelete();e&&(d=u(f.loadJsonGrids,i.gxGrids,e));l&&gx.ajax.transformValidationMessages(t,r,i.gxMessages);u(f.setErrorViewer,i.gxMessages);e&&(gx.pO.supportAjaxEvents&&(g=gx.lang.arrayUnique(tt.concat(nt,it,d,b))),f.objectPostback(g,y),l||f.setFocusAfterLoad(!0),gx.dom.indexElements());w.fullAjaxCall&&!w.autoRefreshing&&(e||!gx.popup.currentPopup)&&r.endFeedback();u(gx.ajax.dispatchCommands,i.gxCommands,r);v&&gx.fn.setCurrentGridRowSafe(s,v);o.resolve(c)},e))),o},getShouldUpdatePropertyFunction:function(n){var i,t,r,u,f={};if(n.gxGrids)for(i=0;i<n.gxGrids.length;i++)for(u=n.gxGrids[i],t=0;t<u.Count;t++)for(r=0;r<u[t].Props.length;r++)f[u[t].Props[r][0]]=!0;return function(n){return!f[n]}},transformValidationMessages:function(n,t,i){t=t.cmpCtx||"MAIN";"undefined"!=typeof i[t]&&(i[t]={fields:n.validationInput,msgs:i[t]})},disableForm:function(n,t){gx.pO.startFeedback(t,void 0===n||n)},enableForm:function(n){n=n||gx.O;gx.pO&&gx.pO.endFeedback();n!=gx.pO&&n.endFeedback()},isFormEnabled:function(){var n=gx.getActiveContext();return n==top&&null!=gx.popup.getPopup()?!0:gx.pO?!n.gx.pO.isFeedbackOn()&&!n.gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){var t,i,r,u,f,e;!gx.ajax.formAutocomplete||gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||7>=gx.util.browser.ieVersion())||(t=gx.dom.form(),i=document.createElement("iframe"),i.id="gx_iframe_force_ajax_autocomplete",i.name="gx_iframe_force_ajax_autocomplete",i.style.cssText="display: none",i.src="/content/blank",document.body.appendChild(i),r=document.createElement("input"),r.type="submit",r.style.cssText="display: none",t.appendChild(r),u=t.target,f=t.action,t.target=i.name,t.action=i.src,e=n(r),gx.evt.attach(r,"click",function(n){return n.stopPropagation(),!0}),e.trigger("click"),setTimeout(function(){t.target=u;t.action=f;t.removeChild(r);document.body.removeChild(i)}))},suggest:function(n,t,i,r,u,f,e){return n=new gx.fx.suggestProvider(n,t,i,r),new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(i),n,i,u,f,e)},hideCode:function(n,t,i){for(var u=this.objectUrl()+"?",t="gxajaxHideCode_"+t,f=n.length,r=0;r<f;r++)t+=","+encodeURIComponent(eval(n[r]));return u+=gx.ajax.encryptParms(gx.O,t),gx.http.callBackend_impl(function(n){gx.fn.setVarValues(i,n)},u,!0,gx.http.modes.retval),this.lastStatus},callCrl:function(n,t,i){var r=i?gx.fn.setGridComboValues:gx.fn.setComboValues,u=i?t:gx.fn.screen_CtrlRef(t).name,i=this.objectUrl()+"?",n="gxajaxCallCrl_"+t+","+this.arrayToUrl(n),i=i+gx.ajax.encryptParms(gx.O,n);gx.http.callBackend_impl(function(n){r(u,n)},i,!0,gx.http.modes.retval)},refreshGrid:function(n,t){var s=gx.O,o;gx.setGxO(n.parentObject);var f="GET",e=gx.ajax.gxObjectUrl(n.parentObject)+"?",i="gxajaxGridRefresh_"+n.gridName+","+t,u;if(gx.fx.obs.notify("grid.onbeforerefresh",[n]),n.autoRefreshing=!0,gx.csv.autoRefreshing=n,o=n.grid.rows.length,n.setPagingVars(0,0),i.length>gx.ajax.maxGETLength(gx.O)){f="POST";u=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+n.gridName)];for(var i=t.split(","),r=0,h=i.length;r<h;r++)u.push("GXParm"+r+"="+i[r])}else e+=gx.ajax.encryptParms(gx.O,i);n.grid.mask();gx.http.doCall({method:f,url:e,reqData:u,handler:function(t,i,r){gx.http.postHandler(t,i,r,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[n,o,n.grid.rows.length])},always:function(){gx.csv.autoRefreshing=null;n.autoRefreshing=!1;n.grid.unmask();gx.setGxO(s)}})},newRows:function(n,t,i,r,u,f,e,o){var h=this.objectUrl()+"?",s=[],c=gx.O,n=gx.fn.gridObj(n,e?i+"_"+e:i,t),e=null,t="GET",e=null,i="gxajaxNewRow_"+i;if(s.push(i),s.push(r),s.push(u),s.push(f),(c.IsComponent||c.IsTypeComponent)&&s.push(c.CmpContext),s=s.concat(n.getParmsValues(!1,n.postingVariables,!1)),e=s.join(","),e.length>gx.ajax.maxGETLength(c)){for(t="POST",e=["GXEvent="+gx.ajax.encryptParms(c,i)],r=1,u=s.length;r<u;r++)e.push("GXParm"+(r-1)+"="+s[r]);e=e.join("&")}else h+=gx.ajax.encryptParms(c,e),e=null;gx.http.callBackend_simple(h,!0,null,t,e);(h=gx.http.lastResponse)&&(h=gx.json.evalJSON(h),o.call(n,h),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[h]))},loadCrl:function(n,t,i){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var r=this.objectUrl()+"?",n="gxajaxExecAct_"+n+","+this.arrayToUrl(t),r=r+gx.ajax.encryptParms(gx.O,n);gx.http.callBackend_impl(function(n){gx.fn.setVarValues(i,n)},r,!0,gx.http.modes.retval)}},udp:function(n,t,i){var r=this.objectUrl()+"?",n=n+","+this.arrayToUrl(t),r=r+gx.ajax.encryptParms(gx.O,n);gx.http.callBackend_impl(function(n){gx.fn.setVarValues(i,n)},r,!0,gx.http.modes.retval)},srvEvt:function(n,t,i,r){var u=this.objectUrl()+"?",n=n+","+t+","+this.arrayToUrl(i),u=u+gx.ajax.encryptParms(gx.O,n);gx.http.callBackend_impl(function(n){gx.fn.setVarValues(r,n)},u,!0,gx.http.modes.full)},validSrvEvt:function(i,r,u){var s=gx.fn.currentGridRowImpl(r),f,e,o;return(0<r&&(f=gx.fn.currentGridRowImpl(r),t(r,s,u)),gx.fx.delayedValidation)?(e=n.Deferred(),o=arguments,gx.fx.obs.addObserver("gx.validation",this,function(){return this.validSrvEvt_impl.apply(this,o).then(function(n){e.resolve(n);t(r,f,u)})},{single:!0,"async":!0}),e.promise()):this.validSrvEvt_impl.apply(this,arguments).then(function(n){return t(r,f,u),n})},validCliEvt:function(n,t,i,r){return r=r||gx.O,gx.evt.dispatcher.dispatch({eventName:n,fn:i},r,t,gx.fn.currentGridRowImpl(t),!1,void 0,void 0,gx.evt.dispatcher.types.validation)},validSrvEvt_impl:function(n,t,i){var i=i||gx.O,r=gx.fn.currentGridRowImpl(t);return gx.evt.dispatcher.dispatch(n,i,t,r,!0,void 0,void 0,gx.evt.dispatcher.types.validation).then(function(n){return i.refreshOlds(),n})},getParmsPostData:function(n){for(var i="",t=0;t<n.length;t++)0<t&&(i+="&"),i+="GXParm"+t+"="+this.parmToUrl(n[t],!0);return i},getCallerUrl:function(n){if(gx.stackSupported()){var n=(n=gx.call_stack_storage.get(gx.stackId(n)))||[],t=1==n.length&&n[0]!=gx.ajax.selfUrl()?n[0]:"";return 1<n.length?n[n.length-2]:t}return gx.fn.getHidden("sCallerURL")},pushReferer:function(n,t){var i;if(t="undefined"==typeof t?location.href:gx.absoluteurl(t),gx.stackSupported())"undefined"==typeof n&&(n=gx.popup.popuplvl()),i=gx.call_stack_storage.get(gx.stackId(n)),i=i||[],t!=gx.util.lastArray(i)&&i.push(t),gx.call_stack_storage.set(gx.stackId(n),i);else{var i=this.objectUrl()+"?",r="dyncall,PushReferer,"+encodeURIComponent(t),i=i+gx.ajax.encryptParms(gx.O,r);gx.http.callBackend_simple(i,!0,!0)}},windowClosed:function(n){if(gx.stackSupported())if(-1==n){var t=gx.stackId(gx.popup.popuplvl()),n=(n=gx.call_stack_storage.get(t))||[];n.pop();gx.call_stack_storage.set(t,n)}else gx.call_stack_storage.remove(gx.stackId(n));else t="",t=-1==n?",PopReferer":",DeleteReferer,"+n.toString(),n=this.objectUrl()+"?",n+=gx.ajax.encryptParms(gx.O,"dyncall"+t),gx.http.callBackend_simple(n,!0,!0)},aggSel:function(n,t,i){var r=this.objectUrl()+"?",n="gxajaxAggSel"+t+"_"+n+","+this.arrayToUrl(i),r=r+gx.ajax.encryptParms(gx.O,n);return gx.http.callBackend_impl(null,r,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(n,t,i,r,u){return gx.num.parseFloat(this.aggSel(n,t,u),i,r)},aggSelInteger:function(n,t,i){return parseInt(this.aggSel(n,t,i),10)},dynComponent:function(t,i,r,u){var f=n.Deferred(),t=gx.util.removeBaseUrl(t).toLowerCase();for(gx.gen.isDotNet()&&(t+=".aspx"),t=gx.ajax.objectUrl(t),r="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(r)+"&GXParm0="+encodeURIComponent(u),u=0;u<i.length;u++)r+="&GXParm"+(u+1).toString()+"="+encodeURIComponent("function"==typeof i[u].getUrlVal?i[u].getUrlVal():i[u]);return gx.http.doCall({method:"POST",url:t,reqData:r,handler:function(n,t){f.resolve(gx.json.evalJSON(t))},error:function(){f.reject()}}),f.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(n){return n.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(n){if(n&&n.ajaxSecurityToken){var t="GX_AUTH_"+(n.CmpContext?n.CmpContext:"")+n.ServerClass,t=t.toUpperCase(),n=gx.fn.getHidden(t)||n.InternalParms[t];return{id:t,value:n}}},arrayToUrl:function(n,t){for(var r="",u=n.length,i=0;i<u;i++)r+=this.parmToUrl(n[i],t)+",";return r},ControlValuesObject:function(n,t){var i=gx.fn.vStructForVar(gx.unprefixVar(n));return null!=i&&gx.html.controls.isMultiSelection(i.ctrltype)?(i=gx.fn.getControlGridRef(i.fld,i.grid),gx.dom.comboBoxToObj(i,t)):null},parmToUrl:function(n,t){var i=eval(n),r,n,u;return i instanceof Array&&2==i.length&&"string"==typeof i[0]&&"string"==typeof i[1]&&(r=gx.fn.vStructForVar(i[0]),null!=r&&(i=gx.fn.getGridCtrlProperty(r.grid,r.fld,i[1]))),t&&(r=gx.ajax.ControlValuesObject(n,i))&&(i=r),"object"==typeof i&&(i=gx.json.serializeJson(i)),("undefined"==typeof i||null==i)&&(r=!1,n&&0===n.indexOf("gx.O.")&&(n=gx.unprefixVar(n),u=gx.fn.getHidden(gx.O.CmpContext+n),null!=u&&"undefined"!=typeof u&&(i=u,r=!0)),r||(i="")),encodeURIComponent(i)},gxObjectUrl:function(n){return this.objectUrl(n.serviceUrl,n&&n.fullAjax?n.CmpContext:void 0)},objectUrl:function(n,t){var t=void 0!==t?t:gx.csv.cmpCtx,i="";return n?i=n:(i=t?gx.fn.getControlValue(t+"_CMPPGM"):gx.ajax.selfUrl(),null!=i&&(i=i.replace(/\?.*/,""),i=i.replace(/#[\s\S]*$/,"")),i=this.objnameFromUrl(i)),gx.absoluteurl(i)},objnameFromUrl:function(n){0<=n.indexOf("?")&&(n=n.split("?")[0]);var t=n.split("/"),i=t.length;return 0===i?n:t[i-1]},_init:function(){var n,t;if(this.resourceProvider=gx.fn.getHidden("GX_RES_PROVIDER"),gx.stackSupported()){if(n=gx.json.evalJSON(gx.fn.getHidden("GX_NAV")),n)for(t=0;t<n.length;t++)gx.ajax.pushReferer(gx.popup.popuplvl(),n[t]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function n(n,t){var i=$("#"+n.id+"_dp_trigger");return 0<i.length?i.get(0):t&&0<t.length&&(i=$("[data-gx-attached-ctrl~='"+n.id+"']"),0<i.length)?i.parent().get(0):void 0}this.init=function(n,t){this.id=n;this.balloonid=n+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=t||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr="";this.active=!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(n){this.hasMessage||(this.messageWar=n,this.hasMessage=!0)};this.setAsFormatError=function(){this.isFormatError=!0;gx.csv.setFormatError(this.id,!1)};this.setError=function(n){this.hasMessage||(this.messageErr=n,this.hasMessage=this.isError=!0,this.isFormatError&&gx.csv.setFormatError(this.id))};this.create=function(t,i,r,u){var f;return f=document.createElement("span"),f.id=t,f.className=r,t=document.createElement("div"),t.style.position="absolute",t.style.zIndex=100,t.style.display="none",u=document.createTextNode(u),f.appendChild(u),t.appendChild(f),"right"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition?(u=$(i).closest(".gx-attribute"),!0===gx.csv.overlap&&gx.runtimeTemplates&&0<u.length?u.append(t):(u=n(i))?0<=u.id.indexOf("_dp_trigger")?$(u).closest(".dp_container").append(t):$(u).after(t):$(i).after(t)):!0===gx.csv.overlap?$(i).after(t):$(i).before(t),!0===gx.csv.overlap?(f.style.position="static",f.style.zIndex="1"):(t.style.position="relative",f.style.position="relative"),f};this.getControlValue=function(){for(var t=[gx.fn.getControlValue(this.id)],n=0,i=this.sourceElements.length;n<i;n++)t.push(gx.fn.getControlValue(this.sourceElements[n]));return t.join(";")};this.groupControl=function(n){return(n=gx.dom.el(n))&&"INPUT"===n.nodeName&&"radio"===n.type&&(n=n.parentNode&&"SPAN"==n.parentNode.tagName?n.parentNode:gx.dom.findParentByTagName(n,"table")),n};this.hideBalloon=function(n){n=n.parentNode;try{n&&(n.style.display="none")}catch(t){gx.dbg.logEx(t,"gxballoon.js","hideBalloon")}};this.showBalloon=function(t){try{var u=gx.csv.messagePosition,e=gx.dom.el(this.id),o=t.parentNode,s=$(o),i,r,h=gx.popup.ispopup()?"flipfit":"none",f=e,c=n(e,this.sourceElements);gx.lang.requestAnimationFrame(function(){if(!0===gx.csv.overlap){switch(u){case"top":i="left bottom";r="left top";break;case"right":i="left center";r="right center";f=c||f;break;case"bottom":i="left top";r="left bottom";break;case"left":i="right center";r="left center"}s.fadeIn().css("display","block");s.position({my:i,at:r,of:f,collision:h})}else o.style.display=("top"==u||"bottom"==u)&&!1===gx.csv.overlap?"block":"inline"})}catch(l){gx.dbg.logEx(l,"gxballoon.js","showBalloon")}};this.show=function(n){var u,t,o,s,h,f,c,r,i,e;if(!(void 0!==document.readyState&&"complete"!=document.readyState)){try{if(!1===this.hasMessage)return!0;if(t=gx.dom.el(this.id),null===t&&null!==gx.csv.validatingUC&&(t=gx.csv.validatingUC.getContainerControl()),"hidden"==t.type?(u=gx.dom.byId("span_"+this.id),null!==u&&(t=u)):"INPUT"===t.nodeName&&"radio"===t.type&&(r=gx.dom.byName(gx.dom.id(t)),t.parentNode&&"SPAN"==t.parentNode.tagName?t=t.parentNode:(c=r[0],t=gx.dom.findParentByTagName(t,"table"))),r){for(u=[],i=0,e=r.length;i<e;i++)u.push(r[i]);r=u}else for(r=[t],i=0,e=this.sourceElements.length;i<e;i++)r.push(gx.dom.el(this.sourceElements[i]));if(this.active=h=!0,0<this.messageErr.length?(o="Error",s=this.messageErr):0<this.messageWar.length&&(o="Warning",s=gx.html.encode(this.messageWar)),""!==o&&(u=o+"Messages",gx.dom.addPrefixClass(t,o),(f=gx.dom.byId(this.balloonid))?(f.innerHTML=s,h=!1):f=this.create(this.balloonid,c?c:t,u,s)),gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl),gx.util.balloon.lastLbl=f,!0===n?gx.csv.oneAtAtime||this.showBalloon(f):this.showBalloon(f),!1===gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1e3*gx.csv.dismissSeconds);else if(h)for(gx.csv.oneAtAtime&&(gx.evt.attach(t,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(t,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this))),e=r.length,i=0;i<e;i++)"INPUT"===r[i].nodeName&&"radio"===r[i].type?gx.evt.attach(r[i],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(r[i],"blur",gx.util.balloon.cvsHide,this);this.errorValue=this.getControlValue()}catch(l){gx.dbg.logEx(l,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){var n,t,i;try{n=this.groupControl(this.id);i=this.getControlValue();i!=this.errorValue&&(this.errorValue=i,t=gx.dom.byId(this.balloonid),null!=t&&(n&&(gx.dom.removePrefixClass(n,"Error"),gx.dom.removePrefixClass(n,"Warning")),this.hideBalloon(t),this.active=!1))}catch(r){}},cvsMouseOutHandler:function(){if(this.active){var n=gx.dom.byId(this.balloonid);null!=n&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=n.id&&this.hideBalloon(n):this.hideBalloon(n))}},cvsMouseOverHandler:function(){if(this.active){var n=gx.dom.byId(this.balloonid);null!=n&&this.showBalloon(n)}},clearAll:function(){var n,t,i;this.timerOn=!1;for(i in this.balloons)n=this.balloons[i],t=gx.util.balloon.cvsHide.closure(n),n.clear(),t()},clear:function(n){var t,i,r;try{t=gx.csv.ctxControlId(n);this.balloons[t]&&(i=this.balloons[t],r=gx.util.balloon.cvsHide.closure(i),i.clear(),r())}catch(u){gx.dbg.logEx(u,"gxballoon.js","clear")}},getNew:function(n,t,i){var i=i||[],u,f,r,e=i.length;"undefined"!=typeof t&&(n=n+"_"+t);try{for(u=gx.fn.screen_CtrlRef(n),f=gx.dom.id(u),n=gx.csv.ctxControlId(f),r=0;r<e;r++)u=gx.fn.screen_CtrlRef(i[r]),f=gx.dom.id(u),i[r]=gx.csv.ctxControlId(f)}catch(o){gx.dbg.logEx(o,"gxballoon.js","getNew")}return this.balloons[n]?(t=this.balloons[n],t.sourceElements=i||[],t.clear()):(t=new this.impl,this.balloons[n]=t,t.init(n,i)),t}},function(n){var t=function(){var n={"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":"Asia/Amman Asia/Jerusalem Europe/Helsinki Asia/Damascus Africa/Cairo Asia/Gaza Europe/Minsk".split(" "),"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},i=function(n){return n=-n.getTimezoneOffset(),null!==n?n:0},f=function(){var n=i(new Date(2014,0,2)),t=i(new Date(2014,5,2)),r=n-t;return 0>r?n+",1":0<r?t+",1,s":n+",0"},e=function(){var n;if(!("undefined"==typeof Intl||"undefined"==typeof Intl.DateTimeFormat)&&(n=Intl.DateTimeFormat(),!("undefined"==typeof n||"undefined"==typeof n.resolvedOptions))&&(n=n.resolvedOptions().timeZone)&&(-1<n.indexOf("/")||"UTC"===n))return n},r=function u(n,t,i){var e;"undefined"==typeof t&&(t=864e5,i=36e5);for(var r=new Date(n.getTime()-t).getTime(),n=n.getTime()+t,o=new Date(r).getTimezoneOffset(),f=null;r<n-i;){if(e=new Date(r),e.getTimezoneOffset()!==o){f=e;break}r+=i}return 864e5===t?u(f,36e5,6e4):36e5===t?u(f,6e4,1e3):f},o=function(n,t,i,r){if("N/A"!==i)return i;if("Asia/Beirut"===t){if("Africa/Cairo"===r.name&&13983768e5===n[6].s&&14116788e5===n[6].e||"Asia/Jerusalem"===r.name&&13959648e5===n[6].s&&14118588e5===n[6].e)return 0}else if("America/Santiago"===t){if("America/Asuncion"===r.name&&14124816e5===n[6].s&&1397358e6===n[6].e||"America/Campo_Grande"===r.name&&14136912e5===n[6].s&&13925196e5===n[6].e)return 0}else if("America/Montevideo"===t){if("America/Sao_Paulo"===r.name&&14136876e5===n[6].s&&1392516e6===n[6].e)return 0}else if("Pacific/Auckland"===t&&"Pacific/Fiji"===r.name&&14142456e5===n[6].s&&13961016e5===n[6].e)return 0;return i},s=function(i,r){for(var v,f,e,u,c,l={},s=t.olson.dst_rules.zones,y=s.length,a=n[r],h=0;h<y;h++){for(v=s[h],f=s[h],e=0,u=0;u<i.length;u++)if(f.rules[u]&&i[u]){if(i[u].s>=f.rules[u].s&&i[u].e<=f.rules[u].e)e=0,e+=Math.abs(i[u].s-f.rules[u].s),e+=Math.abs(f.rules[u].e-i[u].e);else{e="N/A";break}if(864e6<e){e="N/A";break}}f=o(i,r,e,f);"N/A"!==f&&(l[v.name]=f)}for(c in l)if(l.hasOwnProperty(c))for(s=0;s<a.length;s++)if(a[s]===c)return c;return r},h=function(n){var i=function(){for(var n,i,o,u,s=[],f=0;f<t.olson.dst_rules.years.length;f++){n=t.olson.dst_rules.years[f];i=new Date(n,0,1,0,0,1,0).getTime();n=new Date(n,12,31,23,59,59).getTime();for(var e=new Date(i).getTimezoneOffset(),h=null,c=null;i<n-864e5;)o=new Date(i),u=o.getTimezoneOffset(),u!==e&&(u<e&&(h=o),u>e&&(c=o),e=u),i+=864e5;n=h&&c?{s:r(h).getTime(),e:r(c).getTime()}:!1;s.push(n)}return s}();return function(n){for(var t=0;t<n.length;t++)if(!1!==n[t])return!0;return!1}(i)?s(i,n):n};return{determine:function(){var r=navigator.userAgent.toLowerCase(),i=e();return i||(-1!=r.indexOf("firefox")&&"undefined"!=typeof Intl&&"undefined"!=typeof Intl.DateTimeFormat&&(r=Intl.DateTimeFormat(void 0,{timeZoneName:"long"}).format(new Date).toLowerCase(),-1!=r.indexOf("montevideo")||-1!=r.indexOf("uruguay"))&&(i="America/Montevideo"),i||(i=t.olson.timezones[f()]),"undefined"!=typeof n[i]&&(i=h(i))),{name:function(){return i}}}}}();t.olson=t.olson||{};t.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};t.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:"undefined"!=typeof define&&null!==define&&null!=define.amd?define([],function(){return t}):"undefined"==typeof n?window.jstz=t:n.jstz=t}();gx.livePrev=function(){return gx.ajax.getPostInfo("",!1),postInfo=gx.ajax.getPostInfo("",!1),{}}(gx.$);gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1?(gx.livePrevWS.IPNamesIdx+=1,gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx],gx.livePrev.port=gx.livePrevWS.FIRST_PORT,gx.livePrevWS.Connect()):gx.livePrev.port<gx.livePrevWS.LAST_PORT?(gx.livePrevWS.IPNamesIdx=0,gx.livePrev.port+=1,gx.livePrevWS.Connect()):gx.util.alert.showMessage("Can not Connect to LivePreview",{dismissmitAt:5e3})},onMessage:function(n){var r=function(n){var t=$.map(document.styleSheets,function(t){return t.href==n?t:null});if(0<t.length)return t[0]},t=function(n,t,i){return i((n||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase(),(t||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase())},i=function(n,i,r){var f=n.cssRules,u=f.length,e=!1,o=!1;$.each(f,function(r,f){f&&f.selectorText&&t(f.selectorText,i.replace(":","::"),function(n,t){return n==t})&&(n.deleteRule(r),u=r,e=!0)});e||$.each(f,function(f,e){e&&e.selectorText&&t(e.selectorText,i.replace(":","::")+",",function(n,t){return 0==n.indexOf(t)})&&(n.deleteRule(f),u=f,n.insertRule(e.selectorText+r.replace(/.*{/,"{"),u),o=!0)});o||n.insertRule(r,u)},u=function(n){var o=gx.getThemeElement(),u;if(o=r(o.href))for(var s=0==n.indexOf("@media",0),e=n.split(/{|}/),f=0;f<e.length-1;f+=2)u=e[f].replace(/(\r\n|\r|\n| *$)/gm,""),gx.lang.emptyObject(u)||(s?$.each(o.cssRules,function(n,r){if(s&&!r.selectorText){var o=r.cssText.split(/{/)[0];t(o.replace(/ all and/gm,""),u)&&(u=e[f+1].replace(/(\r\n|\r|\n| )/gm,""),i(r,u,u+" {"+e[f+2]+"}"))}}):i(o,u,u+" {"+e[f+1]+"}"))},n=gx.json.evalJSON(n);"KBOK"===n.Type?gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+gx.livePrev.port,{dismissmitAt:2e3}):"KBDoesNotMatchGUID"===n.Type?gx.livePrevWS.onError():"ThemeStyleChanged"===n.Type&&u(n.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=0;gx.livePrevWS.SocketConnect()},onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var n={};gx.livePrev.port=gx.livePrev.port||gx.livePrevWS.FIRST_PORT;n.port=gx.livePrev.port;n.wsProtocol="https:"===location.protocol?"wss://":"ws://";n.host=gx.livePrevWS.host+":"+n.port;n.resourceUrl="/live/";n.namespace="livepreview";n.maxRetries=10;n.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();gx.livePrevWS.webSocket=new gx.webSocket(n);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3e3)},_init:function(){if(!gx.lang.emptyObject(gx.livePreviewUri)){if(gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",gx.livePrevWS,gx.livePrevWS.onOpen,{single:!1}),gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:!1}),gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1}),gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1}),!gx.livePrevWS.clientGUID){var i=gx.livePrevWS,t=gx.http.getCookie("GXClientID"),t=t||gx.guid.generate();gx.http.setCookie("GXClientID",t,1,!1);i.clientGUID=t}var i="",t=[],n=gx.livePreviewUri.split("?");0<n.length&&(n=n[1],n=n.split(":"),2<n.length&&(i=n[1],t=n[2].substring(1,n[2].length-1).split(","),n=n[0]));gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=t;gx.livePrevWS.KBName=i;gx.livePrevWS.KBUUID=n;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,!1),gx.livePrevWS.Connect)}}};gx.nav=function(){var t=function(){var n={top:!0,right:!0,bottom:!0,left:!0};return function(t){return!!n[t.toLowerCase()]}}(),i=function(n){var t=n;return gx.gen.isDotNet()&&(t=n.replace(/\.aspx$/,"")),gx.gen.isJava()&&gx.pO.PackageName&&gx.text.startsWith(n,gx.pO.PackageName)&&(t=n.substring(gx.pO.PackageName.length+1)),t},r=function(n){var r=n.split("?"),t,i,u;if(0<r.length){for(t=2==r.length?r[1].split(gx.http.urlParameterSeparator(n)):[],i=0,u=t.length;i<u;i++)t[i]=gx.http.useNamedParameters(n)?decodeURIComponent(t[i].split("=")[1]):decodeURIComponent(t[i]);return{obj:r[0],args:t}}return!1},n={};return{setCallTarget:function(t,i){n[t.toLowerCase()]=i.toLowerCase()},willRedirect:function(r){return gx.pO&&!gx.pO.fullAjax?!0:!t(n[i(r).toLowerCase()]||"")},willRedirectByUrl:function(n){return n=r(n),this.willRedirect(n.obj,n.args)},call:function(r,u,f){var e=i(r),o=gx.pO.MasterPage,f=f||n[e.toLowerCase()]||"";delete n[e.toLowerCase()];gx.pO&&!gx.pO.fullAjax?gx.http.redirect(gx.http.formatLink(r,u),!1,!1,gx.pO):t(f)?o&&o.createObjectInTarget(f,e,u):gx.http.redirect(gx.http.formatLink(r,u),!1,!1,gx.pO)},callUrl:function(n,t){var i=r(n);i&&this.call(i.obj,i.args,t)},callFromServerRedirect:function(n,t){this.callUrl(n,t)}}}(gx.$),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){(function(){function f(n,t,i){return[parseFloat(n[0])*(a.test(n[0])?t/100:1),parseFloat(n[1])*(a.test(n[1])?i/100:1)]}function i(t,i){return parseInt(n.css(t,i),10)||0}function v(n){var t=n[0];return 9===t.nodeType?{width:n.width(),height:n.height(),offset:{top:0,left:0}}:null!=t&&t===t.window?{width:n.width(),height:n.height(),offset:{top:n.scrollTop(),left:n.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:n.outerWidth(),height:n.outerHeight(),offset:n.offset()}}n.ui=n.ui||{};var u,e,r=Math.max,t=Math.abs,o=Math.round,s=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,a=/%$/,y=n.fn.position;n.position={scrollbarWidth:function(){if(void 0!==u)return u;var r,t,i=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>");return t=i.children()[0],n("body").append(i),r=t.offsetWidth,i.css("overflow","scroll"),t=t.offsetWidth,r===t&&(t=i[0].clientWidth),i.remove(),u=r-t},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight?n.position.scrollbarWidth():0,height:i?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=null!=i[0]&&i[0]===i[0].window,u=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:r,isDocument:u,offset:!r&&!u?n(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r||u?i.width():i.outerWidth(),height:r||u?i.height():i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return y.apply(this,arguments);var u=n.extend({},u),k,a,p,w,b,nt,d=n(u.of),it=n.position.getWithinInfo(u.within),rt=n.position.getScrollInfo(it),g=(u.collision||"flip").split(" "),tt={},ut=d[0];return nt=v(d),d[0].preventDefault&&(u.at="left top"),a=nt.width,p=nt.height,w=nt.offset,0!==w.top+w.left||d.is(":visible")||(w=n(ut.parentElement).offset(),a=n(ut.parentElement).width()),b=n.extend({},w),n.each(["my","at"],function(){var n=(u[this]||"").split(" "),t,i;n.length===1&&(n=s.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]);n[0]=s.test(n[0])?n[0]:"center";n[1]=h.test(n[1])?n[1]:"center";t=c.exec(n[0]);i=c.exec(n[1]);tt[this]=[t?t[0]:0,i?i[0]:0];u[this]=[l.exec(n[0])[0],l.exec(n[1])[0]]}),1===g.length&&(g[1]=g[0]),"right"===u.at[0]?b.left+=a:"center"===u.at[0]&&(b.left+=a/2),"bottom"===u.at[1]?b.top+=p:"center"===u.at[1]&&(b.top+=p/2),k=f(tt.at,a,p),b.left+=k[0],b.top+=k[1],this.each(function(){var y,nt,h=n(this),c=h.outerWidth(),l=h.outerHeight(),ut=i(this,"marginLeft"),ft=i(this,"marginTop"),et=c+ut+i(this,"marginRight")+rt.width,ot=l+ft+i(this,"marginBottom")+rt.height,s=n.extend({},b),v=f(tt.my,h.outerWidth(),h.outerHeight());u.my[0]==="right"?s.left=s.left-c:u.my[0]==="center"&&(s.left=s.left-c/2);u.my[1]==="bottom"?s.top=s.top-l:u.my[1]==="center"&&(s.top=s.top-l/2);s.left=s.left+v[0];s.top=s.top+v[1];e||(s.left=o(s.left),s.top=o(s.top));y={marginLeft:ut,marginTop:ft};n.each(["left","top"],function(t,i){n.ui.position[g[t]]&&n.ui.position[g[t]][i](s,{targetWidth:a,targetHeight:p,elemWidth:c,elemHeight:l,collisionPosition:y,collisionWidth:et,collisionHeight:ot,offset:[k[0]+v[0],k[1]+v[1]],my:u.my,at:u.at,within:it,elem:h})});u.using&&(nt=function(n){var i=w.left-s.left,o=i+a-c,f=w.top-s.top,v=f+p-l,e={target:{element:d,left:w.left,top:w.top,width:a,height:p},element:{element:h,left:s.left,top:s.top,width:c,height:l},horizontal:o<0?"left":i>0?"right":"center",vertical:v<0?"top":f>0?"bottom":"middle"};a<c&&t(i+o)<a&&(e.horizontal="center");p<l&&t(f+v)<p&&(e.vertical="middle");e.important=r(t(i),t(o))>r(t(f),t(v))?"horizontal":"vertical";u.using.call(this,n,e)});h.offset(n.extend(s,{using:nt}))})};n.ui.position={fit:{left:function(n,t){var i=t.within,u=i.isWindow?i.scrollLeft:i.offset.left,e=i.width,o=n.left-t.collisionPosition.marginLeft,i=u-o,f=o+t.collisionWidth-e-u;t.collisionWidth>e?0<i&&0>=f?(u=n.left+i+t.collisionWidth-e-u,n.left+=i-u):n.left=0<f&&0>=i?u:i>f?u+e-t.collisionWidth:u:n.left=0<i?n.left+i:0<f?n.left-f:r(n.left-o,n.left)},top:function(n,t){var i=t.within,u=i.isWindow?i.scrollTop:i.offset.top,e=t.within.height,o=n.top-t.collisionPosition.marginTop,i=u-o,f=o+t.collisionHeight-e-u;t.collisionHeight>e?0<i&&0>=f?(u=n.top+i+t.collisionHeight-e-u,n.top+=i-u):n.top=0<f&&0>=i?u:i>f?u+e-t.collisionHeight:u:n.top=0<i?n.top+i:0<f?n.top-f:r(n.top-o,n.top)}},flip:{left:function(n,i){var r=i.within,u=r.offset.left+r.scrollLeft,h=r.width,s=r.isWindow?r.scrollLeft:r.offset.left,f=n.left-i.collisionPosition.marginLeft,r=f-s,c=f+i.collisionWidth-h-s,f="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,e="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,o=-2*i.offset[0];0>r?(u=n.left+f+e+o+i.collisionWidth-h-u,0>u||u<t(r))&&(n.left+=f+e+o):0<c&&(u=n.left-i.collisionPosition.marginLeft+f+e+o-s,0<u||t(u)<c)&&(n.left+=f+e+o)},top:function(n,i){var r=i.within,u=r.offset.top+r.scrollTop,h=r.height,s=r.isWindow?r.scrollTop:r.offset.top,f=n.top-i.collisionPosition.marginTop,r=f-s,c=f+i.collisionHeight-h-s,f="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,e="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,o=-2*i.offset[1];0>r?(u=n.top+f+e+o+i.collisionHeight-h-u,0>u||u<t(r))&&(n.top+=f+e+o):0<c&&(u=n.top-i.collisionPosition.marginTop+f+e+o-s,0<u||t(u)<c)&&(n.top+=f+e+o)}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var r,t,i,u,f=document.getElementsByTagName("body")[0];i=document.createElement("div");r=document.createElement(f?"div":"body");t={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&n.extend(t,{position:"absolute",left:"-1000px",top:"-1000px"});for(u in t)r.style[u]=t[u];r.appendChild(i);t=f||document.documentElement;t.insertBefore(r,t.firstChild);i.style.cssText="position: absolute; left: 10.7432222px;";i=n(i).offset().left;e=10<i&&11>i;r.innerHTML="";t.removeChild(r)}()})()})