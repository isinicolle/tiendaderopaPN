/**@preserve GeneXus 17.0.5.152802*/
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(n,t){typeof exports=="object"&&exports&&typeof exports.nodeName!="string"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(n.Mustache={},t(n.Mustache))})(this,function(n){function f(n){return typeof n=="function"}function l(n){return u(n)?"array":typeof n}function o(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(n,t){return n!=null&&typeof n=="object"&&t in n}function a(n,t){return n!=null&&typeof n!="object"&&n.hasOwnProperty&&n.hasOwnProperty(t)}function y(n,t){return v.call(n,t)}function w(n){return!y(p,n)}function k(n){return String(n).replace(/[&<>"'`=\/]/g,function(n){return b[n]})}function it(t,i){function lt(){if(ft&&!p)while(y.length)delete a[y.pop()];else y=[];ft=!1;p=!1}function ht(n){if(typeof n=="string"&&(n=n.split(g,2)),!u(n)||n.length!==2)throw new Error("Invalid tags: "+n);et=new RegExp(o(n[0])+"\\s*");v=new RegExp("\\s*"+o(n[1]));st=new RegExp("\\s*"+o("}"+n[1]))}var et,v,st,f,c,e,s,b,ot,l,k,ct;if(!t)return[];var it=[],a=[],y=[],ft=!1,p=!1;for(ht(i||n.tags),f=new r(t);!f.eos();){if(c=f.pos,s=f.scanUntil(et),s)for(k=0,ct=s.length;k<ct;++k)b=s.charAt(k),w(b)?y.push(a.length):p=!0,a.push(["text",b,c,c+1]),c+=1,b==="\n"&&lt();if(!f.scan(et))break;if(ft=!0,e=f.scan(tt)||"name",f.scan(d),e==="="?(s=f.scanUntil(h),f.scan(h),f.scanUntil(v)):e==="{"?(s=f.scanUntil(st),f.scan(nt),f.scanUntil(v),e="&"):s=f.scanUntil(v),!f.scan(v))throw new Error("Unclosed tag at "+f.pos);if(ot=[e,s,c,f.pos],a.push(ot),e==="#"||e==="^")it.push(ot);else if(e==="/"){if(l=it.pop(),!l)throw new Error('Unopened section "'+s+'" at '+c);if(l[1]!==s)throw new Error('Unclosed section "'+l[1]+'" at '+c);}else e==="name"||e==="{"||e==="&"?p=!0:e==="="&&ht(s)}if(l=it.pop(),l)throw new Error('Unclosed section "'+l[1]+'" at '+f.pos);return ut(rt(a))}function rt(n){for(var u=[],t,i,r=0,f=n.length;r<f;++r)t=n[r],t&&(t[0]==="text"&&i&&i[0]==="text"?(i[1]+=t[1],i[3]=t[3]):(u.push(t),i=t));return u}function ut(n){for(var u=[],r=u,i=[],t,e,f=0,o=n.length;f<o;++f){t=n[f];switch(t[0]){case"#":case"^":r.push(t);i.push(t);r=t[4]=[];break;case"/":e=i.pop();e[5]=t[2];r=i.length>0?i[i.length-1][4]:u;break;default:r.push(t)}}return u}function r(n){this.string=n;this.tail=n;this.pos=0}function i(n,t){this.view=n;this.cache={".":this.view};this.parent=t}function t(){this.cache={}}var c=Object.prototype.toString,u=Array.isArray||function(n){return c.call(n)==="[object Array]"},v=RegExp.prototype.test,p=/\S/,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},d=/\s*/,g=/\s+/,h=/\s*=/,nt=/\s*\}/,tt=/#|\^|\/|>|\{|&|=|!/,e;return r.prototype.eos=function(){return this.tail===""},r.prototype.scan=function(n){var i=this.tail.match(n),t;return!i||i.index!==0?"":(t=i[0],this.tail=this.tail.substring(t.length),this.pos+=t.length,t)},r.prototype.scanUntil=function(n){var i=this.tail.search(n),t;switch(i){case-1:t=this.tail;this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i);this.tail=this.tail.substring(i)}return this.pos+=t.length,t},i.prototype.push=function(n){return new i(n,this)},i.prototype.lookup=function(n){var h=this.cache,i,r,t,u,e,o;if(h.hasOwnProperty(n))i=h[n];else{for(r=this,o=!1;r;){if(n.indexOf(".")>0)for(t=r.view,u=n.split("."),e=0;t!=null&&e<u.length;)e===u.length-1&&(o=s(t,u[e])||a(t,u[e])),t=t[u[e++]];else t=r.view[n],o=s(r.view,n);if(o){i=t;break}r=r.parent}h[n]=i}return f(i)&&(i=i.call(this.view)),i},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(t,i){var u=this.cache,f=t+":"+(i||n.tags).join(":"),r=u[f];return r==null&&(r=u[f]=it(t,i)),r},t.prototype.render=function(n,t,r,u){var f=this.parse(n,u),e=t instanceof i?t:new i(t);return this.renderTokens(f,e,r,n,u)},t.prototype.renderTokens=function(n,t,i,r,u){for(var h="",e,o,f,s=0,c=n.length;s<c;++s)f=undefined,e=n[s],o=e[0],o==="#"?f=this.renderSection(e,t,i,r):o==="^"?f=this.renderInverted(e,t,i,r):o===">"?f=this.renderPartial(e,t,i,u):o==="&"?f=this.unescapedValue(e,t):o==="name"?f=this.escapedValue(e,t):o==="text"&&(f=this.rawValue(e)),f!==undefined&&(h+=f);return h},t.prototype.renderSection=function(n,t,i,r){function l(n){return c.render(n,t,i)}var c=this,o="",e=t.lookup(n[1]),s,h;if(e){if(u(e))for(s=0,h=e.length;s<h;++s)o+=this.renderTokens(n[4],t.push(e[s]),i,r);else if(typeof e=="object"||typeof e=="string"||typeof e=="number")o+=this.renderTokens(n[4],t.push(e),i,r);else if(f(e)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");e=e.call(t.view,r.slice(n[3],n[5]),l);e!=null&&(o+=e)}else o+=this.renderTokens(n[4],t,i,r);return o}},t.prototype.renderInverted=function(n,t,i,r){var f=t.lookup(n[1]);if(!f||u(f)&&f.length===0)return this.renderTokens(n[4],t,i,r)},t.prototype.renderPartial=function(n,t,i,r){if(i){var u=f(i)?i(n[1]):i[n[1]];if(u!=null)return this.renderTokens(this.parse(u,r),t,i,u)}},t.prototype.unescapedValue=function(n,t){var i=t.lookup(n[1]);if(i!=null)return i},t.prototype.escapedValue=function(t,i){var r=i.lookup(t[1]);if(r!=null)return n.escape(r)},t.prototype.rawValue=function(n){return n[1]},n.name="mustache.js",n.version="3.0.1",n.tags=["{{","}}"],e=new t,n.clearCache=function(){return e.clearCache()},n.parse=function(n,t){return e.parse(n,t)},n.render=function(n,t,i,r){if(typeof n!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+l(n)+'" was given as the first argument for mustache#render(template, view, partials)');return e.render(n,t,i,r)},n.to_html=function(t,i,r,u){var e=n.render(t,i,r);if(f(u))u(e);else return e},n.escape=k,n.Scanner=r,n.Context=i,n.Writer=t,n}),function(){window.onpageshow=function(n){n.persisted&&window.location.reload()}}();var gx=function(n){var r=/^(?:gx\.O\.)(.+)$/,u=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,f="gxtheme_css_reference",e=function(){return!0},t=function(){return!1};return{$:n.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,msg:{},NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:t,trueFn:e,numericLenDec:function(n){var t=n.split("."),i=t.length===2?t[0]:n,t=t.length===2?t[1]:"",r=(i.match(/9|Z/g)||[]).length,u=(t.match(/9|Z/g)||[]).length;return{Integers:r,Decimals:u}},rtPicture:function(n,t){return t&&t.getAttribute("data-gx-rt-picture")||n&&n.pic||""},dom:{_form:null,_avoidLeaksDiv:null,id:function(n){return n.id==undefined||n.id==""?n.name:n.id},byId:function(n,t){return typeof n=="string"?(t=t||document,t.getElementById(n)):n},byName:function(n){return n?document.getElementsByName(n):[]},byTag:function(n,t){return t=t||document,t.getElementsByTagName(n)},byClass:function(t,i,r){return!i&&(r=document||r,r.getElementsByClassName)?r.getElementsByClassName(t):n((i||"")+"."+t,r).toArray()},bySelector:function(t){return n(t).toArray()},scripts:function(n){var i=document.scripts,u,f,r,t;if(i||(i=document.getElementsByTagName("script")),typeof i!="undefined"){for(u=[],f=i.length,r=0;r<f;r++)n&&i[r].getAttribute("data-gx-external-script")!=null||(t=i[r].attributes.src,t&&t.value&&(t=t.value,t!="//:"&&u.push(t)));return u}return[]},getIntersectionObserver:function(n){var t=function(){n&&n(window.IntersectionObserver)};"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?t():gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"intersection-observer.js",!1),function(){t()})},_init:function(){gx.evt.processing=!1;gx.evt.userReadyCnt=1;gx.evt._userReady=!1;gx.evt.on_ready(this,function(){var t,i,o=gx.util.browser,u=[],f,r,e;if(document.querySelectorAll)u=document.querySelectorAll("input[type='hidden']");else for(f=gx.dom.byTag("input"),t=0,i=f.length;t<i;t++)f[t].getAttribute("type")=="hidden"&&u.push(f[t]);for(t=0,i=u.length;t<i;t++)u[t].setAttribute("autocomplete","off");n('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")});if(o.isChrome())for(r=document.querySelectorAll("select"),t=0,i=r.length;t<i;t++)r[t].value||(e=r[t].querySelectorAll("option[selected]"),e&&e.length&&(r[t].value=e[0].value));n('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")})});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"}},evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!1,skipPromptCtrl:!0,touchTimer:null,userReadyCnt:0,_userReady:!1,userReadyThreshold:2e3,userReadyThresholdFast:400,hooks:[],types:{VALUECHANGED:1,VALUECHANGING:2},serialRunner:function(){var n=[];return{addTask:function(t){n.push(t);n.length===1&&n[0]()},signalEndTask:function(){n.shift();n.length>0&&n[0]()}}},addHook:function(n,t,i){this.hooks.push({c:n,e:t,f:i})},attach:function(n,t,i,r,u){var f,o,s,h,e,c;if(u=u||{},typeof t=="string")f=i,r&&(f=i.closure(r)),u.single&&(o=f,s=!1,f=function(){s||(h&&clearTimeout(h),gx.evt.detach(n,t,o,u),o.apply(this,arguments),s=!0)},u.timeout&&(h=setTimeout(f,u.timeout))),n.addEventListener?n.addEventListener(t,f,u.useCapture||!1):n.attachEvent?n.attachEvent("on"+t,f):n["on"+t]=f,this.addHook(n,t,f);else if(gx.lang.isArray(t))for(e=0,c=t.length;e<c;e++)this.attach(n,t[e],i,r,u)},on_ready:function(n,t){gx.fx.obs.addObserver("gx.onload",n,t)},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(n,t,i){gx.pO.MasterPage&&n.req.setRequestHeader(i,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(n,t,i,r,u,f){gx.reinit(!f)},oncontentreplace:function(n,t,i,r,u,f,e,o){var h=gx.lang.getType(r),c=f==e?f:e,l=c?gx.lang.getType(c.toLowerCase()):!1,s=gx.ajax.getJsonResponse();s&&gx.fn.setJsonHiddens(null,s.gxHiddens,!1);h.prototype=new gx.GxObject;gx.setParentObj(new h);o?gx.setMasterPage(u):l&&gx.setMasterPage(new l);gx.ajax.clearJsonResponse();s?gx.ajax.setJsonResponse({response:s,isPostBack:!1,afterCmpLoaded:function(){o&&(u.restoreTargetComponents(),u.restoreExoEventHandlers());gx.objectLoad(s.gxGrids,s.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}).done(function(){gx.fn.setFocusAfterLoad(!0)}):gx.objectLoad()}}})})},onready:function(n){gx.lang.emptyObject(n)?document.readyState=="complete"?gx.evt.onload():setTimeout(function(){gx.evt.onready(null)},250):gx.util.browser.isIE()&&document.readyState=="complete"&&gx.evt.onload()},_init:function(){gx.evt.userReadyThresholdFast=gx.util.browser.isIE()?2e3:gx.evt.userReadyThresholdFast;document.gxReadyState="loading";gx.lang.doCallTimeout(function(){gx.evt.userReadyThreshold=gx.evt.userReadyThresholdFast},gx.evt,[],gx.evt.userReadyThreshold);gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||document.documentMode<=8||gx.util.browser.ieVersion()<=8&&!gx.util.browser.isWinCE())?this.attach(document,"readystatechange",this.onready):gx.util.browser.ieVersion()>=9&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini()?this.attach(document,"DOMContentLoaded",this.onload):gx.util.browser.isBlackBerry()?this.attach(window,"load",this.onload):gx.wi(function(){this.onready(null)},gx.evt);gx.wi(function(){this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",this.onmousedown);this.attach(document,["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup","touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},gx.evt)}},define:function(n,t,i){for(var r=0,u=window||this,f=n.split("."),e=f.length,r=0;r<e-1;r++)typeof u[f[r]]=="undefined"&&(u[f[r]]={}),u=u[f[r]];u[f[e-1]]=i;t||(u[f[e-1]].prototype=new gx.GxObject)},setParentObj:function(n){gx.pO=n;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout;gx.fx.obs.notify(gx.PARENT_OBJECT_EVT)},createParentObj:function(n){gx.spa&&gx.spa.started||(n instanceof gx.GxObject||(GxObj=new n),GxObj&&this.setParentObj(GxObj))},setExecutableComponent:function(n){gx.spa&&gx.spa.started||gx.wi(function(){gx.pO==null&&(gx.setParentObj(gx.createComponent(n,"")),gx.fn.objectOnload(undefined,!0))},this)},setMasterPage:function(n){gx.wpo(function(){gx.pO!=null&&(gx.pO.MasterPage=n,gx.fx.obs.notify(gx.SETMASTERPAGE_EVT))})},createMasterPage:function(n){gx.wpo(function(){var t;gx.spa.isNavigating()||(n instanceof gx.GxObject||(t=new n),t&&this.setMasterPage(t))},this)},addComponent:function(n,t){gx.pO!=null&&gx.pO.setWebComponent(n,t)},createComponent:function(n,t,i){var r=null,u,f;return u=gx.lang.getType(n),u!=null&&(u.prototype=new gx.GxObject,f=gx.csv.cmpCtx,gx.csv.cmpCtx=t,r=new u(t),i&&r.setContainer(i),gx.csv.cmpCtx=f,r.serviceUrl=gx.fn.getControlValue(r.CmpContext+"_CMPPGM")),r},getObj:function(n,t){return n==""?t==!0?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(n)},setGxO:function(){var n,t;return arguments.length==1&&typeof arguments[0]=="object"?(n=arguments[0].CmpContext,t=arguments[0].IsMasterPage,gx.O=arguments[0]):(n=arguments[0],t=arguments[1],gx.O=this.getObj(n,t)||gx.pO),gx.csv.cmpCtx=gx.O.CmpContext,gx.O},setVar:function(n,t){gx.O.setVariable(n,t)},getVar:function(n){return gx.O.getVariable(n)},prefixVar:function(n){return"gx.O."+n},unprefixVar:function(n){var i=r,t=i.exec(n);return t!=null&&t[1]?n=t[1]:(i=u,t=i.exec(n),t!=null&&t[1]&&(n=t[1])),n},getMessage:function(n){return gx.msg[n]==undefined?n:gx.msg[n]},setLanguageCode:function(n){gx.languageCode=n},setDateFormat:function(n){gx.dateFormat=n},setTimeFormat:function(n){gx.timeFormat=n},setCenturyFirstYear:function(n){gx.centuryFirstYear=n},setBlankWhenEmptyDate:function(n){gx.blankWhenEmpty=n},setDecimalPoint:function(n){gx.decimalPoint=n},setThousandSeparator:function(n){gx.thousandSeparator=n},setStaticDirectory:function(n){if(gx.staticDirectory=n,gx.staticDirectory=="")gx.staticDirectory="/";else{var t=gx.staticDirectory.length,i=!gx.isabsoluteurl(n)&&gx.staticDirectory.charAt(0)!="/",r=gx.staticDirectory.charAt(t-1)!="/";gx.staticDirectory=(i?"/":"")+gx.staticDirectory+(r?"/":"")}},getThemeElement:function(){return gx.dom.byId(f)},updateTheme:function(){var t=gx.fn.getHidden("GX_THEME"),n;t&&t!=this.theme&&(this.theme=t,n=gx.getThemeElement(),n&&n.href.search("/"+this.theme+".css")<0&&(n.href=n.href.replace(new RegExp("[^/]*.css"),this.theme+".css")))},setTheme:function(t){var u=gx.util.browser,f=u.isIE(),e=u.ieVersion(),i=gx.dom.fixes,r;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{t===undefined&&i.resetFixesStyleElement();gx.HTML5&&i.html5(t);t===undefined&&(f&&(n(document.documentElement).addClass("ie"),n(document.documentElement).addClass("ie"+e),gx.runtimeTemplates&&!Modernizr.flexbox&&n(document.documentElement).addClass("gx-align-fallback")),f&&e==10&&(r=document.createElement("style"),r.innerHTML="input::-ms-clear {display: none;}",document.body.appendChild(r)),i.setPopupMinWidth());i.fixTableResets(t)}catch(o){gx.dbg.logEx(o,"gxapi.js","setTheme")}},typedOld:function(n,t,i){switch(i){case"int":return this.OldInteger(n,t);case"decimal":return this.OldDecimal(n,t,!0);case"date":return this.OldDate(n,t);case"dtime":return this.OldDateTime(n,t);default:return this.Old(n,t)}},isInputEnabled:function(n){return n&&gx.evt.lastEvt==n?!0:!(gx.evt.processing&&!gx.csv.isvalidating()||gx.spa.isNavigating())},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:t,isJava:function(){return!this.net},resolveObjClass:function(n){var t=n;return gx.gen.isDotNet()&&(t=n.replace(/\.aspx$/,"")),gx.gen.isJava()&&gx.pO&&gx.pO.PackageName&&gx.text.startsWith(n,gx.pO.PackageName)&&(t=n.substring(gx.pO.PackageName.length+1)),t}},util:{executionContext:{getContext:function(){return gx.http.currentUrl()},changedContext:function(n){return n!==gx.util.executionContext.getContext()}},contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},compare:function(n,t,i){if(typeof n!=typeof i)return!1;if(typeof n=="string"&&t=="like"){var r=i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return r=gx.text.replaceAll(gx.text.replaceAll(r,"%",".*"),"_","."),new RegExp(r,"i").test(n)}switch(t){case">":return n>i;case">=":return n>=i;case"<":return n<i;case"<=":return n<=i;case"<>":return n!=i;case"=":default:return n==i}},isKnownContentType:function(n){for(var t in this.contentTypes)if(this.contentTypes[t]==n)return!0;return!1},getContentTypeFromExt:function(n){return n=n.split(/[#?]/)[0].split(".").pop().trim(),this.getContentType(n)},getContentType:function(n){var t,i;return gx.lang.emptyObject(n)?"text/html":(n=n.toLowerCase(),n=gx.text.trim(n),this.isKnownContentType(n))?n:(t=n.lastIndexOf("."),t!=-1&&(n=n.substring(t+1)),i=this.contentTypes[n],gx.lang.emptyObject(i))?"text/html":i},getFileName:function(n){var i=n.lastIndexOf("/"),r=n.lastIndexOf("\\"),u=i>r?i:r,t=n.lastIndexOf(".");return n?((t<0||u>t)&&(t=n.length),n.substring(u+1,t)):n},getFileType:function(n){var i=n.lastIndexOf("/"),r=n.lastIndexOf("\\"),t=n.lastIndexOf(".");return t<0||t<i||t<r?"":n.substring(t+1)},getWindowInfo:function(){var i="",n=!0,t=!1;try{if(t=window.location!=window.parent.location?!0:!1,t)try{n=window.frameElement.id||window.top.document.body;i=window.name}catch(r){n=!1}}catch(r){}return{insideIframe:t,canAccessFrame:n,frameId:i}},browser:function(){var n=navigator.userAgent,i=/; rv.([0-9]+)/,t;return{w3c:!0,ie5:!0,ie:n.indexOf("MSIE")!=-1||n.indexOf("Trident")!=-1,edge:n.indexOf("Edge")!=-1,ff:n.indexOf("Firefox")!=-1,winCE:n.indexOf("Windows CE")!=-1,iphone:n.indexOf("iPhone")!=-1,ipad:n.indexOf("iPad")!=-1,ipod:n.indexOf("iPod")!=-1,blackBerry:n.indexOf("BlackBerry")!=-1,operaMini:n.indexOf("Opera Mini")!=-1,opera:n.indexOf("Opera")!=-1,chrome:n.indexOf("Chrome")!=-1,android:n.indexOf("Android")!=-1,webkit:n.search(/webkit/ig)!=-1,safari:n.indexOf("Safari")!=-1,isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isSafari:function(){return this.safari},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},isAndroid:function(){return this.android},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()||this.isAndroid()},isCompatMode:function(){return document.compatMode=="BackCompat"},isOldIE:function(n){return gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=(n||8)},ieVersion:function(){var r=function(){var t,r,u,f;if(this.ie)try{if(r=n.indexOf("MSIE"),r>=0)return u=n.indexOf(";",r),f=n.substring(r+5,u),parseFloat(f,10);if(t=n.match(i),t.length>1)return parseFloat(t[1],10)}catch(e){gx.dbg.logEx(e,"gxapi.js","ieVersion")}else if(this.edge&&(t=n.match(/ Edge\/([0-9]+)\./),t.length>1))return parseFloat(t[1],10);return-1};return t||(t=r.call(this)),t},chromeVersion:function(){if(this.isChrome()){var t=n.match(/Chrome\/([0-9]+)/);if(t.length>1)return parseFloat(t[1],10)}},setupIE:function(){this.ieVersion()>=9&&!this.isCompatMode()&&(typeof Range=="undefined"||Range.prototype.createContextualFragment||(Range.prototype.createContextualFragment=function(n){var t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.outerHTML=n,t}));typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1);this.setupIE()}}}(),addOnce:function(n,t,i){n[i]==undefined&&(n[i]=t)},inArray:function(n,t){var r,i;if(n==null||!gx.lang.isArray(t))return!1;if(typeof t.indexOf=="function")return t.indexOf(n)!=-1;for(r=t.length,i=0;i<r;i++)if(t[i]==n)return!0;return!1},pushOnceSorted:function(n,t){for(var r=!0,i=0,u=t.length;i<u;i++){if(n==t[i]){r=!1;break}if(n<t[i]){t.splice(i,0,n);r=!1;break}}r&&t.push(n)},lastArray:function(n){return n.length>0?n[n.length-1]:null},noParmsUrl:function(n){var t=n.indexOf("?");return t!=-1&&(n=n.substring(0,t)),n},resolveUrl:function(n){return n?gx.isabsoluteurl(n)?n:gx.isRelativeToHost(n)?n.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())!=0?gx.util.resourceUrl(gx.basePath+n,!1):n:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+n,!1):n},resourceUrl:function(){var n;return function(t,i){var u,e;if(n||(n=new RegExp(gx.basePath+"(/|$)","i")),typeof t=="undefined")return"";if(t.indexOf("://")!=-1||t.charAt(0)==".")return gx.text.startsWith(t,gx.basePath)?t.substring(gx.basePath.length):t;var o=gx.basePath.length,f=gx.basePath.charAt(o-1)!="/",r=gx.basePath==""?0:t.search(n);return r==0&&!i?(t.charAt(0)=="/"?"":"/")+t:r!=-1||i?(u="",u=r!=-1&&gx.basePath.length>0?gx.text.replaceAll(t.substring(r+gx.basePath.length),"\\","/"):t,t.charAt(0)=="/"?location.protocol+"//"+location.host+t:(e=gx.basePath.length>0&&gx.basePath.charAt(0)!="/",f=f&&u.charAt(0)!="/",location.protocol+"//"+location.host+(e?"/":"")+gx.basePath+(f?"/":"")+u)):t}}(),sameAppUrl:function(n){return(n=new this.Url(n),n.isRelative())?!0:n.isSameApp(location.href)},removeBaseUrl:function(n){var u=gx.staticDirectory.length,i,f=gx.staticDirectory.charAt(u-1)!="/",e=gx.basePath.length>0,r,t;return i=gx.staticDirectory.charAt(0)=="/"?gx.staticDirectory.substring(1):gx.staticDirectory,r=new RegExp("(?:/)?(?:"+gx.basePath+(e?"/":"")+"(?:"+i+(f?"/":"")+")?)?((?:[\\S]*))"),t=r.exec(n),t!=null&&t[1]&&(n=t[1]),n},getIFrameEmptySrc:function(){return location.protocol=="https:"&&gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=6?"gx_blank.html":"about:blank"},Url:function(){var t=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,i=/^(([^@]+)@)?([^\:]+)(:(.+))?$/,n=function(n){function r(n,r){var f=t,u=f.exec(r),e=!gx.lang.emptyObject(u),o;e&&(n.protocol=u[2]?u[2]:"",o=u[4]?u[4]:"",n.path=u[5]?u[5]:"",n.query=u[7]?u[7]:"",n.hash=u[9]?u[9]:"",f=i,u=f.exec(o),e=!gx.lang.emptyObject(u),e&&(n.user=u[2]?u[2]:"",n.host=u[3]?u[3]:"",n.port=u[5]?u[5]:""))}this.url=n;this.protocol="";this.host="";this.port="";this.path="";this.query="";this.hash="";this.user="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(n){return n=new gx.util.Url(n),this.protocol==n.protocol&&this.host==n.host};r(this,n)};return n.parseWithAnchor=function(n){var t=document.createElement("a");return t.href=n,!t.protocol&&gx.util.browser.isIE()&&(t.href=t.href),t},n}(),regExp:{isMatch:function(n,t){var i=new RegExp(t).exec(n);return i!==null},replace:function(n,t,i){return n.replace(t,i)},split:function(n,t){return n.split(t)},matches:function(n,t){var i=new RegExp(t).exec(n);return i!==null?i:[]}},autoRefresh:{arTimer:null,getProps:function(){var n=gx.fn.getHidden("_GxRefreshTimeout");return n!=null&&(n=gx.json.evalJSON(n),n.Time=parseInt(n.Time)),n},install:function(){var n=this.getProps();n!=null&&(this.create(),n.Type=="focus"&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(this.arTimer==null){var n=this.getProps();n!=null&&(this.arTimer=setTimeout(function(){gx.http.reload()},n.Time*1e3))}},destroy:function(){gx.util.autoRefresh.arTimer!=null&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(n){var i="",r,t;if(n.indexOf("&")!=-1)for(r=n.length,t=0;t<r-1;t++)if(n[t]=="&"&&n[t+1]!="&"){i=i+n[t+1];break}return i},accessKeyCaption:function(n){var i="",r,t;if(n.indexOf("&")==-1)return n;for(r=n.length,t=0;t<r-1;t++)if(n[t]=="&"&&n[t+1]!="&"){i+=n.substring(t+1);break}else i+=n[t];return i},invalidFunc:function(n){throw"gxInvalidFunc: "+n;},urlValue:function(n){var t=n;return typeof t!="string"&&(t=gx.fn.getControlValueInt(n)),encodeURIComponent(t)},help:function(n){open(n,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init()}},guid:{generate:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(n){(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})}},lang:{inherits:function(n,t,i){var u=n.prototype,r;n.prototype=new t;for(r in u)typeof n.prototype[r]=="undefined"&&(n.prototype[r]=u[r]);typeof n.prototype.base=="undefined"&&(n.prototype.base=t);i===!0&&(n.prototype.constructor=function(){t.prototype.constructor.apply(this,arguments);u.constructor.apply(this,arguments)})},apply:function(n,t){if(n&&t&&typeof t=="object")for(var i in t)n[i]=t[i];return n},instanceOf:function(n,t){if(n==null||t==null)return!1;if(n instanceof t||t==String&&typeof n=="string"||t==Number&&(typeof n=="number"||typeof gx.num.dec!="undefined"&&n instanceof gx.num.dec.bigDecimal)||t==Array&&typeof n=="array"||t==Function&&typeof n=="function")return!0;if(typeof n=="string"||typeof n=="number"||typeof n=="array")return!1;for(var i=n.base;typeof i!="undefined";){if(i==t)return!0;i=i.base}return!1},clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},cloneDeep:function(n){return JSON.parse(JSON.stringify(n))},isDateType:function(n){return n=="date"||n=="dtime"},isNumericType:function(n){return n=="int"||n=="decimal"},isBooleanType:function(n){return n=="boolean"||n=="bool"},isFixedCharacterType:function(n){return n=="char"||n=="bits"},isCharacterType:function(n){return n=="char"||n=="svchar"||n=="bits"},isArray:function(n){return n&&typeof n.length=="number"&&typeof n.splice=="function"},booleanValue:function(n){return n==!0||n==!1?n:typeof n=="string"?n.toLowerCase()=="true"?!0:!1:!1},gxBoolean:function(n){if(typeof n=="undefined")return!1;if(typeof n=="boolean")return n;if(typeof n=="number"){if(n==0)return!1}else if(typeof n=="string"&&(n==""||n.toLowerCase()=="false"||n.replace(/^ */,"").replace(/ *$/,"")=="0"))return!1;return!0},emptyNum:function(n){return n&&n===0||!n},emptyObj:function(n){if(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}return!0},emptyObject:function(n){return n===undefined||n==null||n==""||typeof n=="number"&&isNaN(n)?!0:!1},supEval:function(n,t){var i=null;return i=t instanceof String||typeof t=="string"?n[t]:t,function(){return i.apply(n,arguments)}},getType:function(n){var t=null;try{for(var i=0,r=n.split("."),u=r.length;t===null&&i<u;)t=this.getTypeImpl(window,r,i++,u)}catch(f){gx.dbg.logEx(f,"gxapi.js","getType")}return t},getTypeImpl:function(n,t,r,u){var f=null;for(i=r;i<u;i++)if(n[t[i]])n=n[t[i]];else break;return i===u&&n&&typeof n=="function"&&(f=n),f},doEval:function(n,t){return t=t||window,t.execScript?t.execScript(n):eval.call?eval.call(t,n):eval(n)},doCall:function(){var n;try{var i=arguments[0],t=[],r=arguments.length;for(n=1;n<r;n++)t.push(arguments[n]);return i.apply(this,t)}catch(u){gx.dbg.logEx(u,"gxapi.js","doCall")}},doExecTimeout:function(n){clearTimeout(n.t);n.f.call()},doCallTimeout:function(n,t,i,r){var u=n.closure(t,i),f=setTimeout(u,r);return{f:u,t:f}},requestAnimationFrame:function(n,t){n=t?n.closure(t):n;window.requestAnimationFrame?window.requestAnimationFrame(n):window.setTimeout(n,10)},htmlDecode:function(){function i(i){return i&&typeof i=="string"&&(i=escape(i).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),t.innerHTML=i,i=n(t).text(),n(t).text("")),unescape(i)}var t=document.createElement("div");return i}(),arrayUnique:function(n){for(var i,t=n.concat(),r=0;r<t.length;++r)for(i=r+1;i<t.length;++i)t[r]===t[i]&&t.splice(i--,1);return t},objToArray:function(){var t=function(n){return[n]};return function(i){return n.map(i,t)}}()},cache:function(){var n=!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(n){return this.exceptionsRegEx?!!n&&n.search(this.exceptionsRegEx)==-1:!0},addRemoteFile:function(n){if(this.isCacheable(n)){n=gx.util.noParmsUrl(n);var t=gx.util.resourceUrl(n,!0);this.remoteFiles[t]=!0}},addLoadedFile:function(n){if(this.isCacheable(n)){n=gx.util.noParmsUrl(n);var t=gx.util.resourceUrl(n,!0);this.remoteFiles[t]=!0}},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(n){var t;if(n)for(t in this.remoteFiles)n.exec(t)&&(this.remoteFiles[t]=!1)},removeRemoteFile:function(n){n=gx.util.noParmsUrl(n);var t=gx.util.resourceUrl(n,!0);this.remoteFiles[t]=!1},fileLoaded:function(n){n=gx.util.noParmsUrl(n);var t=gx.util.resourceUrl(n,!0);return this.remoteFiles[t]?!0:!1},updateStyles:function(n,t){for(var s,h,f,u,i,e=[],o=n.length,r=0;r<o;r++)if(i=n[r],!gx.lang.emptyObject(i)){for(s=!1,h=t.length,f=0;f<h;f++)if(i==t[f]){s=!0;break}s||e.push(i)}for(u=gx.staticDirectory,u.charAt(0)=="/"&&(u=u.substring(1)),o=e.length,r=0;r<o;r++)i=e[r],i.charAt(0)!="/"&&(i=u+i),this.removeRemoteFile(i)},addInlineCode:function(n){this.inlineCode[n]=!0},deleteInlineCode:function(n){delete this.inlineCode[n]},codeLoaded:function(n){return this.inlineCode[n]?!0:!1},_init:function(){var u,e,i,o,f,t,r;if(!n){for(n=!0,u=gx.staticDirectory,u.charAt(0)=="/"&&(u=u.substring(1)),e=gx.dom.scripts(!0),f=e.length,t=0;t<f;t++)i=e[t],gx.lang.emptyObject(i)||(i.charAt(0)=="/"||gx.isabsoluteurl(i)||(i=u+i),this.addRemoteFile(i));for(o=gx.dom.styles(),f=o.length,t=0;t<f;t++)r=o[t],gx.lang.emptyObject(r)||(r.charAt(0)=="/"||gx.isabsoluteurl(r)||(r=u+r),this.addRemoteFile(r))}}}}(),json:{_nonSerializables:[],setNonSerializable:function(n){this.isNonSerializable(n)||this._nonSerializables.push(n)},isNonSerializable:function(n){for(var i=this._nonSerializables.length,t=0;t<i;t++)if(this._nonSerializables[t]==n)return!0;return!1},evalJSON:function(n,t){try{return window.JSON&&!t?n===undefined?n:JSON.parse(n):eval("("+n+")")}catch(i){gx.dbg.logEx(i,"gxapi.js","evalJSON")}return n},evalValidJSON:function(n){return eval("("+n+")")},serializeSDTJson:function(n,t,i){var r=gx.lang.cloneDeep(n);return r=gx.O.applySDTMapping(r,t,!1),gx.json.serializeJson(r,i)},serializeJson:function(n,t){var i,u,r,f,e;if(t&&window.JSON)return JSON.stringify(n);if(i=this.objToJson(n),i===null)i=this.arrayToJson(n);else return i;if(i===null){if(typeof n=="function")return null;u=[];for(r in n)(t||!this.isNonSerializable(r))&&(f=this.objToJson(r,!0),f!==null)&&(e=this.serializeJson(n[r]),typeof e=="string")&&u.push(f+":"+e);return"{"+u.join(",")+"}"}return i},objToJson:function(n,t){var i=typeof n,r;if(t){if(!gx.lang.emptyObject(n)){if(i=="string")return gx.text.escapeString(n);if(i=="number")return'"'+n+'"';if(typeof gx.num.dec!="undefined"&&n instanceof gx.num.dec.bigDecimal)return'"'+n.toString()+'"'}}else{if(i=="undefined")return i;if(i=="string")return gx.text.escapeString(n);if(i=="number"||i=="boolean")return n.toString();if(typeof gx.num.dec!="undefined"&&n instanceof gx.num.dec.bigDecimal)return'"'+n.toString()+'"';if(n===null)return"null";if(typeof n.json=="function"&&(r=n.json(),n!==r))return this.serializeJson(r)}return null},arrayToJson:function(n){var r,u,t,i;if(Array.isArray(n)){for(r=[],u=n.length,t=0;t<u;t++)i=this.serializeJson(n[t]),typeof i!="string"&&(i="undefined"),r.push(i);return"["+r.join(",")+"]"}return null},SDTFromJson:function(n,t,i,r){var u=gx.json.objFromJson(n,i,r);return u&&(n=gx.O.applySDTMapping(n,t,!0)),u},objFromJson:function(n,t,i){var u,r;try{if(u=this.evalValidJSON(t),Array.isArray(n)&&Array.isArray(u))while(n.length>u.length)n.shift();else for(r in n)typeof n[r]!="function"&&delete n[r];for(r in u)n[r]=u[r];return!0}catch(f){return gx.dbg.logEx(f,"gxapi.js","objFromJson"),i&&i.push({Id:"FromJson Error",Description:gx.dbg.exTxt(f),Type:0}),!1}}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()}},stackId:function(n){return"stack_"+gx.util.getWindowInfo().frameId+n},stackSupported:function(){return(gx.evt.clinav||gx.fn.getHidden("GX_CLI_NAV")=="true")&&gx.call_stack_storage.supported},csv:{},http:{currentUrl:function(){return location.href.replace(location.hash,"")},loadScript:function(t,i,r){var f=i,s=!1,h,e,o,l,v;typeof t!="string"&&(h=t.callback,s=t.isExternal,e=t.attris,t=t.url,f=function(){h&&h();i()});var y=gx.dom.byTag("head")[0],u,c=n("script[src='"+t+"']"),a=!0;if(c.length>0&&!r&&(s?c.remove():(u=c.get(0),a=!1)),l=function(n){var t=function(){n();u.removeAttribute("data-gx-loading-script")};typeof n=="function"&&(u.addEventListener?gx.evt.attach(u,["load","error"],t,{userCapture:!1}):u.onreadystatechange=function(){(u.readyState=="loaded"||u.readyState=="complete")&&t()})},u)v=u.getAttribute("data-gx-loading-script")!==null,v?l(f):f();else{if(u=document.createElement("script"),u.type="text/javascript",u.src=t,e)for(o in e)e.hasOwnProperty(o)&&u.setAttribute(o,e[o]);f&&u.setAttribute("async","");s&&u.setAttribute("data-gx-external-script","");l(f);a&&(y.appendChild(u),u.setAttribute("data-gx-loading-script",""))}}},storage:function(n){if(this._store=window.sessionStorage,this._prefix=n,this.supported=!1,this.set_string=function(n,t){this.supported&&(this._store[this._prefix+n]=t)},this.get_string=function(n){return this.supported?this._store[this._prefix+n]:null},this.set=function(n,t){this.set_string(n,gx.json.serializeJson(t))},this.get=function(n){var t=this.get_string(n);return t?gx.json.evalJSON(t):null},this.remove=function(n){this.supported&&this._store.removeItem(this._prefix+n)},typeof sessionStorage!="undefined")try{window.sessionStorage.setItem("storage.test",!0);window.sessionStorage.removeItem("storage.test");this.supported=!0}catch(t){gx.http.setCookie("GXLocalStorageSupport","false",1,!1)}},_setBasePath:function(){for(var t,o,f,i,r=gx.dom.scripts(),u=null,n=0,e=r.length;n<e;n++)if(r[n].indexOf("gxgral.js")>=0||r[n].indexOf("gxcore.js")>=0||r[n].indexOf("gxapiSD.js")>=0){u=r[n];break}if(t="",!gx.isRelativeToHost(u)||gx.isabsoluteurl(u))o=location.pathname.lastIndexOf("/"),t=o>1?location.pathname.substring(1,o):"";else for(f=u.split("/"),i=location.pathname.split("/"),f.splice(f.length-1,1),i.splice(i.length-1,1),n=0,e=i.length;n<e;n++)if(i[n]==f[n])t=t+(t==""?"":"/")+i[n];else break;gx.basePath=t},objectLoad:function(t,i){var r=n.Deferred(),f=gx.dom.fixes,u;return gx.evt.execLoad?(u=function(){gx.sec.loadKey();gx.runtimeTemplates===undefined&&(gx.runtimeTemplates=n("div[data-abstract-form]").length>0);var u=!0;gx.setTheme();gx.html.applyCustomHTMLAttributes();gx.fx.obs.addObserver("webcom.render",this,function(n){var t=n.getContainer(),i;t&&(gx.setTheme(t),gx.html.applyCustomHTMLAttributes(t),i=function(){typeof gx.pendingCmps!="undefined"&&(gx.pendingCmps-=1,gx.pendingCmps===0&&gx.fx.obs.notify("webcom.all_rendered"))},u||(gx.pendingCmps=gx.pendingCmps||0,gx.pendingCmps+=1,gx.plugdesign.applyTemplateObject({selector:"#"+t.id,deferred:!0}).then(i)))});gx.fx.obs.addObserver("grid.onafterrender",this,function(n,t){t||gx.dom.fixes.fixTableResets(n.container)});delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"unload",gx.evt.onunload);gx.fn.setFocusInit();gx.dom.fixes.createLegacyNotification();gx.cache._init();gx.fn.installComponents(!0,i);gx.http.loadStyles();t&&gx.fn.loadJsonGrids(t,!1);gx.plugdesign.init().done(function(){if(typeof gx.StorageTimeZone!="undefined"&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var n=jstz.determine().name();!gx.lang.emptyObject(n)&&gx.http.getCookie("GxTZOffset")!=n&&gx.http.setCookie("GxTZOffset",n,365,!1,"/")&&gx.config.timezone.reload&&gx.http.reload()}gx.evt.attach(window,"load",gx.http.applyDeferredStyles);gx.fn.objectOnload();gx.goReady(function(){gx.evt.setReady(!0,"goReady")});document.gxReadyState="complete";gx.util.autoRefresh.install();gx.fn.setOpacity("reset","body");gx.fx.obs.notify("gx.onload");gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();u=!1;r.resolve()})},gx.popup?gx.goInteractive():gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxi.js",!1),function(){gx.goInteractive()}),gx.wpo(function(){u()}),r.promise()):(r.resolve(),r.promise())},objectUnload:function(t){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.notifications.deinit();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(t);gx.plugdesign.deinit();gx._deinit();n(document).off("keypress keyup");gx.evt.detach(document,"keydown",gx.evt.onkeypress_hdlr)},_init_interactive:function(){gx.evt.dispatcher.initialize();gx.base64._init();gx.sec._init();gx.geolocation._init();gx.popup._init();gx.livePrevWS._init()},_init:function(){gx.wi(gx._init_interactive,gx);gx.lang.apply(this,{oldValues:[],oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});gx.dbg._init();gx.dom._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){var i,r,u,f,n,t;if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){for(gx.dom.purgeElement(document.body),gx.dom.purgeElement(gx.dom.form()),i=["onblur","onclick","onfocus","onchange"],r=gx.fn.getFormElements(),n=0,t=r.length;n<t;n++)gx.dom.purgeElement(r[n],i);for(u=gx.dom.byTag("span"),n=0,t=u.length;n<t;n++)gx.dom.purgeElement(u[n],i);for(f=gx.dom.byTag("img"),n=0,t=f.length;n<t;n++)gx.dom.purgeElement(f[n],i)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.printing._deinit();gx.core.audio._deinit();gx.O=null;gx.pO=null},reinit:function(n){gx.pO.clean(n);gx.objectUnload(n);gx._init()}}}(jQuery);gx.$.extend(gx.dbg,gxdbg);Object.defineProperty(gx.evt,"userReady",{get:function(){return gx._isReadyUI()}});gx.plugdesign=function(n){var t={},o=!1,u,f,h=1,i={},r={},s=function(n,t){return function(i){var u=n[i.property],r,f;if(u&&(r=u[i.control.id]),!r&&u&&(r=u[i.control.name]),r&&(f=r.fn.call(r.template,i.control,i.value)===!0,t)){i.cancel=f;return}}},e=function(n,t){t=t||{};t.deferred===!0&&window.requestIdleCallback?window.requestIdleCallback(n):gx.lang.requestAnimationFrame(n)};return{init:function(){return gx.plugdesign.initialized=!0,gx.fx.obs.addObserver("gx.plugdesign.onafterapplytemplate",this,gx.plugdesign.fixBootstrapGridLayout.closure(this)),gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange),gx.plugdesign.applyTemplateObject()},deinit:function(){gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);gx.plugdesign.initialized=!1;delete gx.runtimeTemplates},onBeforePropertyChange:s(i,!0),onAfterPropertyChange:s(r,!1),registerTemplate:function(n){t[n.name]=n},unRegisterTemplate:function(i){delete t[i];var r=gx.plugdesign.definition.templates;gx.plugdesign.definition.templates=n.grep(r,function(n){return n!==i})},getDOMContext:function(t,i,r,u,f,e){var o,s,h;for(i={},e&&(i.text=n(t).text()),o=0,h=t.attributes.length;o<h;o++)s=t.attributes[o],i[s.name]=s.value;return i.el=t,r&&(i.outerHTML=t.outerHTML),u&&(i.innerHTML=t.innerHTML),f&&(i=f.call(this,i,t)||i),i},assingUserAPI:function(n,t){t.fnc_isRO=n.fnc_isRO},getElements:function(t,i,r,u){u=u||{};var f;return(f=typeof t.selector=="function"?t.selector(i?i:""):i&&!t.global?n(i).find(t.selector):n(t.selector),r)?f.not(r):f},shouldApplyOnElement:function(t,i){return typeof i.selector=="function"?this.getElements(i).is(t):n(t).is(i.selector)},applyTemplateOnElement:function(u,f,o){o=o||{};var s=n.Deferred();return e(function(){var h,n,e,c;if((typeof u!="string"||(u=t[u],u))&&(o.checkInclusion!==!0||this.shouldApplyOnElement(f,u))){if(h=gx.plugdesign.getDOMContext(f,h,u.outerHTML,u.innerHTML,u.setContext),u.apply(f,h),u.initialize&&u.initialize(h),u.listeners){if(n=u.listeners,c=typeof n.control=="function"?n.control(h):n.control,n.before)for(e in n.before)n.before.hasOwnProperty(e)&&(i[e]||(i[e]={}),i[e][c]={id:c,fn:n.before[e],template:u});if(n.after)for(e in n.after)n.after.hasOwnProperty(e)&&(r[e]||(r[e]={}),r[e][c]={id:c,fn:n.after[e],template:u})}s.resolve()}}.closure(this),o),s},applyTemplateSelection:function(t,i,r,u){u=u||{};var o=n.Deferred(),s=[],e="data-gx-tpl-applied-"+t.name,f=this.getElements(t,i,r,u);return t.onDemandInvoke===!0||t.reDraw||(f=f.not("["+e+"]")),f.each(function(n,i){if(i)if(typeof t.reDraw=="function"&&i.getAttribute(e)!==null){var r;r=gx.plugdesign.getDOMContext(i,r,!1,!1,t.setContext);t.reDraw(r)}else s.push(gx.plugdesign.applyTemplateOnElement(t,i,u))}),n.when.apply(n,s).done(function(){t.outerHTML&&(f=this.getElements(t,i,r,u));f.attr(e,"");o.resolve()}.closure(this)),o},applyClassMapOnElement:function(n,t){var r,i,u;if(n.initialize&&(r=gx.plugdesign.getDOMContext(t,r,!1,!1,n.setContext)),Array.isArray(n.cssClass))for(i=0,u=n.cssClass.length;i<u;i++)gx.dom.addClass(t,n.cssClass[i]);else gx.dom.addClass(t,n.cssClass);n.initialize&&n.initialize(r)},applyClassSelection:function(n,t,i,r){var u=function(t){t.property=="Class"&&gx.dom.matchesSelector(t.control,n.selector)&&gx.plugdesign.applyClassMapOnElement(n,t.control)};this.getElements(n,t,i,r).each(function(t,i){i&&(gx.plugdesign.applyClassMapOnElement(n,i),gx.plugdesign.assingUserAPI(n,i),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,u,{unique:!1}))})},controlValueChanged:function(n,t){n&&gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:n,property:"Value",value:t}])},applyControlValue:function(n,t){gx.fn.setControlValue(n.id,t);gx.html.onchange(n,t)},applyTemplates:function(i,r,u,f,o){var s,c;return(o=o||{},s=n.Deferred(),i.length===0)?s.resolve():(c=n.map(i,function(i){var s=n.Deferred(),c;return typeof i=="string"?i=t[i]:(i.name=i.name||"auto-generated-"+h++,i=new gx.plugdesign.Template(i)),!f||typeof f=="function"&&f(i)?(c=function(){gx.plugdesign.applyTemplateSelection(i,r,u,o).done(function(){s.resolve()})},o.deferred===!0?e(c):(c(),s.resolve())):s.resolve(),s}),o.deferred===!0?n.when.apply(n,c).done(function(){s.resolve()}):s.resolve(),s)},applyClassMaps:function(t,i,r,u,f){var o=n.Deferred(),h=function(n,t){gx.plugdesign.applyClassSelection(t,i,r,f)},s=function(){t=n.grep(t,u||gx.trueFn);n.each(t,h);o.resolve()};return f.deferred===!0?e(s):s(),o},applyTemplateObject:function(t){var i,a,y;t=t||{};var r=t.selector,e=t.excluded,s=t.templateSelector,p=t.classMapSelector,h=n.Deferred(),c,l,v=n.Deferred();return(s=s||function(n){return n.onDemandInvoke!==!0},!gx.runtimeTemplates||!gx.plugdesign.initialized)?h.resolve().promise():(o?(l=this.applyTemplates(u,r,e,s,t),c=this.applyClassMaps(f,r,e,p,t),h.resolve()):(i=gx.plugdesign.definition,i.css&&n.each(i.css,function(n,t){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+t+"?"+gx.gxBuild,!1),!1,!0)}),a=[],i.js&&n.each(i.js,function(n,t){a.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+t+"?"+gx.gxBuild,!1))}),y=jQuery,jQuery=gx.$,gx.http.loadScripts(a,function(){o=!0;u=i.templates||[];f=i.class_maps||[];l=this.applyTemplates(u,r,e,s,t);c=this.applyClassMaps(f,r,e,undefined,t);jQuery=y;h.resolve()}.closure(this))),n.when.apply(n,[h,l,c]).done(function(){gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate",[t]);v.resolve()}),v.promise())},fixBootstrapGridLayout:function(){n(".container-fluid, .container").length===0&&n(".row").first().parent().toggleClass("container-fluid",!0)},Template:function(){var t=function(t){var i,r=[],u;if(t=t||{},!t.name){gx.dbg.write("A name must be specified",!0);return}if(!t.selector){gx.dbg.write("A selector must be specified",!0);return}if(t.listeners&&(u=t.listeners,!u.control&&(u.before||u.after))){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",!0);return}return this.preProcessTemplate=function(){var n=this.template,u=/\{\{\$(\w+)\$\}\}/g,t,i=0;for(r=[];(t=u.exec(n))!==null;)r[i]=t[1],n=n.replace(t[0],'<span id="hook_'+i+'"><\/span>'),i++;return n},this.postProcessTemplate=function(t){var i,e,u,f;if(r)for(i=0,e=r.length;i<e;i++)u=t[r[i]],f=n("#hook_"+i),u&&f.after(u),f.remove()},this.apply=function(t,r){var u=this,f,e=gx.util.browser.isIE(),o=!1;if(!i&&u.template&&(i=u.preProcessTemplate(),Mustache.parse(i)),i){if(f=Mustache.render(i,r),u.applyTo=="inner"){if(e)while(t.firstChild)t.removeChild(t.firstChild);t.innerHTML=f}else o=t===document.activeElement,t.parentNode&&!e?t.outerHTML=f:n(t).replaceWith(f);u.postProcessTemplate(r);o&&gx.fn.setFocus(t)}},gx.lang.apply(this,t),this};return t.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,onDemandInvoke:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,listeners:{}},t}()}}(gx.$);gx.plugdesign.definition={css:[],js:[],templates:["labels","atts-vars","readonly-atts-vars","checkbox","radio-button","prompt","prompt-trigger","datepicker","geolocation","multimedia-upload","navbar","navbar-textblock-link","navbar-textblock-text","textarea-auto-expand","image","usercontrol","errorviewer","password-atts-vars"],class_maps:[{selector:".control-group",cssClass:"form-group"},{selector:'.gx-attribute > input:not(.GeoLocOption):not([type="image"]):not([type="checkbox"]), .gx-attribute > select, .gx-attribute > textarea',cssClass:"form-control"},{selector:".gx-attribute > .input-group > input, .gx-attribute > .input-group > select, .gx-attribute > .input-group > textarea, .gx-attribute > .dp_container input",cssClass:"form-control"},{selector:"form",cssClass:"form-horizontal"},{selector:"div.gx-standard-grid > table",cssClass:"table-responsive",global:!0,first:!0},{selector:'.gx-button input, input[type="button"][data-gx-button], .gx-grid-paging-bar button',cssClass:["btn","btn-default"],first:!0},{selector:'.gx-navbar .gx-button input, .gx-navbar input[type="button"]',cssClass:"navbar-btn"},{selector:".BtnEnter",cssClass:"btn-primary",first:!0},{selector:".BtnDelete",cssClass:"btn-danger",first:!0},{selector:".Container",cssClass:"container",first:!0},{selector:"#MAINTABLE_MPAGE.PromptMainTable:not(.ContainerFluid)",cssClass:"ContainerFluid"},{selector:".ContainerFluid",cssClass:"container-fluid",first:!0},{selector:".ReadonlyResponsiveImageAttribute, .ResponsiveImage",cssClass:"img-responsive",first:!0},{selector:".BtnTextBlock > a",cssClass:["btn","btn-default"],first:!0}]};gx.html=function(n){var i="<style[^>]*>([\\s\\S]*?)<\/style>",e=new RegExp(i,"i"),o=new RegExp(i,"ig"),r="<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>",s=new RegExp(r,"i"),h=new RegExp("<link ([^>]*rel=['\"]?shortcut icon['\"]?[^>]*)>","i"),c=new RegExp(r,"ig"),u="<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>",f=new RegExp("<script[^>]*>[\\s\\S]*?(<script[^>]*>[\\s\\S]*?<.?/script>)","i"),l=/(<script[^>]*>\s*)\r?\n?<!--\s*\r?\n?(.*)\r?\n?\s*\/\/-->\s*\r?\n?(<.?\/script>)/ig,t=new RegExp("<script([^>]*)>([\\s\\S]*?)<\/script>","i"),a=/data-gx-external-script/;return HREF_ELEMENT_ATT_REGEX=/href=(['"]?)([^'">]*)\1/i,ID_ELEMENT_ATT_REGEX=/id=(['"]?)([^'">]*)\1/i,SRC_ELEMENT_ATT_REGEX_1=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i,SRC_ELEMENT_ATT_REGEX_2=/src=(['"]?)([^"']*)\1/i,INPUT_GXSTATE_REGEX=/<div><input type="hidden" name="GXState" value="{.*}"><\/div>/g,{encodeCaseFormat:function(n,t,i){return t==gx.html.controls.formats.TEXT?n=gx.html.encode(n,!1,i):t==gx.html.controls.formats.TEXT_W_SPACES&&(n=gx.html.encode(n,!0,i)),n},applyCustomHTMLAttributes:function(t){var i=t?n(t):n(document);i.find("input[data-msk-att], textarea[data-msk-att]").each(function(t,i){var r=n(i),u=r.attr("data-msk-att");r.attr(u,r.attr("data-"+u))})},encode:function(n,t,i){var r=["<",">","&"],u=["&lt;","&gt;","&amp;"];return t&&(r.push(" "),u.push("&nbsp;")),i&&(r.push("\n"),u.push("<br/>"),r.push("\r"),u.push("")),gx.text.charReplace(n,r,u)},getHidden:function(n,t){return'<input type="hidden" id="'+n+'" name="'+n+'" value="'+t+'">'},viewportWidth:function(){var n=document.documentElement;return n&&n.clientHeight?Math.max(n.clientWidth,document.body.clientWidth):document.body.clientWidth},viewportHeight:function(){var n=document.documentElement;return n&&n.clientHeight?Math.max(n.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(n,i){var r,e,s,f;for(i=i===undefined||i,i&&(n=n.replace(o,"")),n=n.replace(c,""),r=[];r;)if(r=n.match(t),r)e=this.nestedScripts(r,n),e>0&&(s=new RegExp(u.replace("{X}","{"+e+"}"),"i"),r=n.match(s)),f=r.lastIndex,f||(f=r.index+r[0].length),n=n.substring(0,r.index)+n.substring(f);else break;return n},setOuterHtml:function(n,t){n.outerHTML=t},setInnerHtml:function(t,i,r,u,f){var h=gx.dom.styles(),o=gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,e,s;gx.dom.shouldPurge()&&gx.dom.purge(t,!0);e=n(t).children("."+o).get(0);!e&&u&&(e=document.createElement("div"),gx.dom.addClass(e,o),gx.dom.addClass(e,"Form-fx"),t.appendChild(e));u&&gx.pO.fullAjax&&e&&gx.dom.hasClass(e,o)&&!gx.dom.hasClass(t,"transitioning")?(s=document.createElement("div"),s.innerHTML=this.cleanHtmlRefs(i,f),gx.dom.replaceWithFx(e,s.children[0])):n(t).html(this.cleanHtmlRefs(i,f));gx.util.browser.isIE()&&gx.cache.updateStyles(h,gx.dom.styles());r==!0&&this.processCode(i,!1)},setInnerText:function(t,i,r,u){var f=n(t);t.nodeValue!=null?t.nodeValue=i:gx.util.browser.isChrome()||t.innerText==null?gx.util.browser.isFirefox()||gx.util.browser.isChrome()?f.html(gx.html.encodeCaseFormat(i,r,u)):t.tagName=="TEXT"&&t.innerHTML!=null?f.html(i):f.html("<text>"+i+"<\/text>"):t.innerText=i},nodesFromText:function(n){var t=document.createElement("div"),r,u,i;for(t.style.visibility="hidden",t.style.display="none",document.body.appendChild(t),gx.dom.shouldPurge()&&gx.dom.purge(t,!0),t.innerHTML=n,r=[],u=t.childNodes.length,i=0;i<u;i++)r.push(t.childNodes[i].cloneNode(!0));return gx.dom.removeControlSafe(t),r},onTypeAvailable:function(n,t,i){try{var r=eval(gx.gen.resolveObjClass(n));i instanceof Array?t.apply(this,i):t()}catch(u){setTimeout(function(){gx.html.onTypeAvailable(n,t,i)},150)}},processCSS:function(n){var t,i,r;n!=""&&(t=document.createElement("style"),t.setAttribute("type","text/css"),i=document.getElementsByTagName("head")[0],i.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:(r=document.createTextNode(n),t.appendChild(r)))},nestedScripts:function(n,i){for(var r=n[0].match(f),u=i,e=0;r;)u=u.replace(r[1],""),e++,n=u.match(t),r=n?n[0].match(f):null;return e},processCode:function(i,r,f,o,c,v,y){var ft=i,rt=[],at=!1,et=[],nt=[],vt=[],d="",yt=[],p=[],ot,pt,b,w,ut,st,g,ht,tt,k,ct,wt,it,bt,lt;if(v=v===undefined||v,i!=""){if(v)while(p){if(p=i.match(e),p)b=p.lastIndex,b||(b=p.index+p[0].length),i=i.substring(b);else break;vt.push(p[1])}for(i=ft,p=[];p;){if(p=i.match(s),p)b=p.lastIndex,b||(b=p.index+p[0].length),i=i.substring(b);else break;w=p[1].match(HREF_ELEMENT_ATT_REGEX);idAttr=p[1].match(ID_ELEMENT_ATT_REGEX);w&&!gx.cache.fileLoaded(w[2])&&(nt.push({href:w[2],id:idAttr&&idAttr.length>2?idAttr[2]:null}),gx.cache.addRemoteFile(w[2]))}for(i=ft,p=[];p;){if(p=i.match(h),p)b=p.lastIndex,b||(b=p.index+p[0].length),i=i.substring(b);else break;n("head link[rel='shortcut icon'").remove();n(document.head).append(p[0])}for(i=ft.replace(INPUT_GXSTATE_REGEX,""),gx.util.browser.isIE()&&(i=i.replace(l,"$1$2$3")),p=[];p;){if(p=i.match(t),p)ot=this.nestedScripts(p,i),ot>0&&(pt=new RegExp(u.replace("{X}","{"+ot+"}"),"i"),p=i.match(pt)),b=p.lastIndex,b||(b=p.index+p[0].length),i=i.substring(b);else break;p[1]!=undefined&&p[1]!=""?(w=p[1].match(SRC_ELEMENT_ATT_REGEX_1),ut=!!p[1].match(a),w==null&&(w=p[1].match(SRC_ELEMENT_ATT_REGEX_2)),w&&!gx.cache.fileLoaded(w[2])?(st=w[2],gx.lang.emptyObject(w[3])||(st+="?"+w[3]),rt.push({url:st,isExternal:ut,callback:ut?undefined:function(n){return function(){gx.cache.addRemoteFile(n)}}(w[2],ut)})):w&&gx.cache.fileLoaded(w[2])?at=!0:!w&&p[2]&&et.push(p[2])):p[2]&&et.push(p[2])}if(r!=!0){if(d=et.join(";"),d!=""&&gx.lang.doEval(d),typeof f=="function")gx.http.loadScripts(rt,function(n,t){t instanceof Array?n.apply(this,t):n()}.closure(this,[f,o]),undefined,y);else for(g={},g.method="GET",g.useCash=!0,g.load=function(n,t){gx.lang.supEval(this,yt.push(t))}.closure(this),g.mimetype="text/plain",g.sync=!0,ht=rt.length,k=0;k<ht;k++)g.url=rt[k].url,gx.http.doCall(g);for(d=yt.join(""),d!=""&&gx.lang.doEval(d),tt=document.getElementsByTagName("style"),scrQty=nt.length,k=0;k<scrQty;k++){for(ct=!1,wt=tt.length,it=0;it<wt;it++)tt[k]&&(bt=tt[it].styleSheet&&tt[it].styleSheet.cssText?tt[it].styleSheet.cssText:tt[it].innerHTML,nt[k].href==bt&&(ct=!0));ct||(lt=gx.dom.byId(nt[k].id),lt?lt.href=nt[k].href:gx.http.loadStyle(nt[k].href,gx.emptyFn,!1,nt[k].id))}if(d=vt.join(""),gx.html.processCSS(d),ht==0&&typeof f=="function")if(at&&c)gx.html.onTypeAvailable(c,f,o);else o instanceof Array?f.apply(this,o):f()}}},getFieldLabel:function(t,i){var r,f=t.id,u=t.previousSibling;if(u&&u.tagName==="LABEL"&&u.htmlFor===f)labelEl=u;else if(t.tagName=="INPUT"||t.tagName=="SELECT"||t.tagName=="TEXTAREA"?r=t.id:t.tagName=="SPAN"?(r=n(t).attr("data-gx-enabled-id"),r||f.indexOf("span_")!==0||(r=f.substring(5))):gx.dom.hasClass(t,gx.uc.gxCssClass)&&(r=gx.uc.CtrlId(t.id)),gx.dom.hasClass(t,gx.html.multimediaUpload.gxCssClass)&&(r=gx.html.multimediaUpload.CtrlId(t.id)),r)return n("label[for='"+r+"']",i).get(0)},multimediaUpload:{gxCssClass:"gx-multimedia-upload",getInputFileEl:function(t){return n("#"+t+"[type='file']")[0]},CtrlId:function(n){return n.replace(/_ct$/,"")},resolveFileName:function(n,t){return n||t||""},onOptionChange:function(n){var t=this.getElements(n),u=t.uriOption,i=t.fileField,r=t.uriField;u.checked?(gx.dom.removeClass(i,"field-selected"),gx.dom.addClass(r,"field-selected")):(gx.dom.removeClass(r,"field-selected"),gx.dom.addClass(i,"field-selected"))},imageLoadHandler:function(t,i){var u=function(n){var t=n.tagName=="IMG"?"src":"href";return!n[t]||n[t]==document.location.href||n[t].charAt(n[t].length-1)=="/"};if(gx.dom.removeClass(i,"gx-multimedia-unknown"),gx.dom.removeClass(i,"gx-multimedia-download"),!t||u(t)?gx.dom.addClass(i,"gx-multimedia-empty"):gx.dom.removeClass(i,"gx-multimedia-empty"),u(t)&&i&&!u(i)&&(gx.dom.removeClass(i,"gx-multimedia-empty"),(t.tagName!=="IMG"||u(t))&&gx.dom.addClass(i,"gx-multimedia-download")),gx.util.browser.isIE()&&t&&t.tagName=="IMG"){var r=n(t),f=parseInt(r.css("maxWidth")),e=parseInt(r.css("maxHeight"));f<t.width&&(r.css("height",gx.dom.addUnits(f*t.height/t.width)),r.css("width",gx.dom.addUnits(f)));e<t.height&&(r.css("width",gx.dom.addUnits(e*t.width/t.height)),r.css("height",gx.dom.addUnits(e)))}},dialogCloseHandler:function(n,t){var i=this.getElements(n);t.style.display="none";n.appendChild(t);i.uriOption.checked?this.refreshPreviewImg(n,i.uriField):this.refreshPreviewImg(n,i.fileField);i.action.focus();gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler)},prevImgClickHandler:function(t,i){t=t||event;var r=gx.evt.source(t);n(r).closest(".gx-multimedia-empty").length>0&&this.actionClickHandler(t,i)},actionClickHandler:function(t,i){var s=gx.html.multimediaUpload.isModal,r,u,o;t=t||event;t.preventDefault?t.preventDefault():t.returnValue=!1;r=this.getElements(i);u=r.button;r.fieldsCt.style.display="block";var f=130,e=500,h=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(i.style.position="static",r.fileField.style.marginTop="0",r.uriField.style.marginTop="0",f=230);gx.runtimeTemplates&&(h=!1,n(window).width()<e&&(e=n(window).width()-20,f=170));o=gx.popup.openDialog({parentElement:i,w:e,h:f,contentHtml:r.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:h,isModal:s===undefined||s,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[i,r.fieldsCt,u])}});r.fileOption.focus();gx.evt.attach(u,"click",o.close,o,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(n,t){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1;var i=this.getElements(t);i.uriField.value="";i.fileField.value="";i.uriOption.checked=!1;i.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[t]);this.clearPreviewImg(t);this.imageLoadHandler(i.previewImg,i.previewLink)},keypressHandler:function(n){var t=n.event;t.keyCode==13&&(n.cancel=!0,gx.popup.currentPopup.close())},tapHandler:function(n){var t=this.getElements(n);t.action.focus()},getElements:function(t){t=gx.dom.byId(t);var u=n(t),o=u.find(".change-action")[0],f=u.find(".clear-action")[0],e=null,i=n(f).next()[0],r=u.find(".fields-ct");return i.tagName=="A"?(e=i,i=i.firstChild):i.tagName!="IMG"&&(i=null),{previewLink:e,action:o,clearAction:f,previewImg:i,fieldsCt:r[0],uriField:r.find("input[type='text']")[0],fileField:r.find("input[type='file']")[0],uriOption:r.find("input[type='radio'][value='uri']")[0],fileOption:r.find("input[type='radio'][value='file']")[0],button:r.find("input[type='button']")[0]}},getContainer:function(n){for(var t=gx.dom.byId(n);t;){if(gx.dom.hasClass(t,gx.html.multimediaUpload.gxCssClass))return t;t=t.parentNode}return null},setPreviewImage:function(n,t){n=gx.dom.byId(n);var i=this.getElements(n),r=gx.util.Url.parseWithAnchor(t);r.protocol.search(/^https?:/)<0&&i.uriOption.checked||(this.clearPreviewImg(n),i.previewImg&&gx.text.startsWith(gx.util.getContentTypeFromExt(t),"image")&&(i.previewImg.tagName=="IMG"&&(i.previewImg.src=t),this.imageLoadHandler(i.previewImg,i.previewLink)))},setPreviewLink:function(n,t){n=gx.dom.byId(n);var i=this.getElements(n);i.previewLink&&t&&i.previewLink&&(i.previewLink.href=t);this.imageLoadHandler(i.previewImg,i.previewLink)},clearPreviewImg:function(n){n=gx.dom.byId(n);var t=this.getElements(n);t&&t.previewImg&&t.previewLink&&(t.previewImg.src="",t.previewLink.href="")},refreshPreviewImg:function(n,t){var i,r,u;if(n=gx.dom.byId(n),i=this.getElements(n),i.previewImg&&t.tagName=="INPUT"){if(t==i.fileField){if(t.files&&(r=t.files[0],r))if(r.type.match(/image.*/))u=new FileReader,u.onload=function(n,t,i){t.src=n.target.result;i.href=n.target.result}.closure(this,[i.previewImg,i.previewLink],!0),u.readAsDataURL(r);else{i.previewLink.href="#";i.previewLink.className="gx-multimedia-download";this.clearPreviewImg(n);return}t.gxctrldeleted&&this.clearPreviewImg(n)}else t==i.uriField&&(i.previewImg.src=t.value,i.previewLink.href=t.value);this.imageLoadHandler(i.previewImg,i.previewLink)}},setType:function(n,t){n=gx.dom.byId(n);var i=this.getElements(n);i.fileOption.checked=t;i.uriOption.checked=!t;t&&(i.uriField.value="");this.onOptionChange(n)},getOptionValue:function(n){n=gx.dom.byId(n);var t=this.getElements(n);return t.fileOption.checked?"file":"uri"},createControl:function(n){var t,i,u,r;n=gx.dom.byId(n);n._created||(n._created=!0,t=this.getElements(n),gx.dom.addClass(t.fileField,"field-selected"),t.action.setAttribute("gxfocusable","1"),i=document.createElement("input"),i.type="button",i.className="BtnEnter",i.value=gx.getMessage("GXM_uploadconfirmoption"),t.fieldsCt.appendChild(i),u=this.imageLoadHandler.closure(this,[t.previewImg,t.previewLink]),r=this.onOptionChange.closure(this,[n]),u(),t.previewImg&&gx.evt.attach(t.previewImg,"load",u),r(),gx.evt.attach(t.uriOption,"click",r),gx.evt.attach(t.fileOption,"click",r),gx.evt.attach(t.action,"click",this.actionClickHandler.closure(this,[n],!0)),gx.evt.attach(t.previewImg.parentNode,"click",this.prevImgClickHandler.closure(this,[n],!0)),gx.evt.attach(t.clearAction,"click",this.clearActionHandler.closure(this,[n],!0)),gx.evt.attach(n,"touchstart",this.tapHandler.closure(this,[n])))}},controls:function(){var r={},t={label:'<label class="gx-label {{className}} control-label" {{{additionalAtts}}} for="{{relatedElement}}">{{caption}}<\/label>',radio:['<span class="{{className}}" style="{{style}}">',"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"data-gxoch0="{{data-gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}<\/label>',"{{/values}}","<\/span>"]},i=function(n,i){var u=gx.lang.isArray(t[n])?t[n].join(""):t[n];return r[n]||(r[n]=!0,Mustache.parse(u)),Mustache.render(u,i)},u=/\"/g;return{applyTemplate:i,types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27,formGroup:28,formGroupEnd:29},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(n){return n=="combo"||n=="dyncombo"||n=="listbx"||n=="dynlistbx"?!0:!1},eventJSCode:function(n,t,i,r,u){var f="",e;return n==4&&i?f=i:n==1?f="gx.fn.closeWindow();":n==7?(e="",r&&u&&(e=",'"+r.gridName+"','"+u.gxId+"'"),f="gx.evt.execCliEvt( "+t+e+",this);"):(n==6||n==5)&&(f="gx.evt.execEvt("+t+",this,"+r.gridId+");"),f},onJsEventAttributes:function(n,t,i){var r=gx.GxObject,u=" "+r.GX_EVENT_DATA_ATTR+'="'+n+'"';return scriptAttribute="",n===4&&(scriptAttribute=" "+r.GX_EVENT_CODE_DATA_ATTR+'="'+n+'"'),i?u+=t?" "+r.GX_EVENT_CONDITION_DATA_ATTR+'="'+i+'"'+scriptAttribute:scriptAttribute:t&&(u+=scriptAttribute),u+" "},startAnchor:function(n,t,i,r,u,f,e){var o=e?' class="'+e+'"':"",c=gx.GxObject,s=this.onJsEventAttributes(t,i,r),h;r?n.append('<a href="#"'+s+o+">"):i?n.append('<a href="#"'+s+o+">"):u&&(h=u.replace(/(\\")/ig,"\\u0022"),n.append('<a href="'+h+'"'),f!=""&&n.append(' target="'+f+'"'),n.append(o+">"))},endAnchor:function(n,t,i,r){(t||i||r)&&n.append("<\/a>")},onJSEvent_impl:function(n,t,i){var r=[];return i!=""&&r.push('jsevent="'+i+'" '),r.push(n+'="if( '),t!=""?r.push("gx.evt.jsEvent(this)) {"+t+'} else return false;"'):r.push('!gx.evt.jsEvent(this)) return false;"'),r.join("")},onJSEvent:function(n,t,i,r){n.append(" ");n.append(this.onJSEvent_impl(t,i,r))},htmlControl:function(n,t,i,r,f){this.id=n||"";this.width=t||0;this.widthUnit="px";this.height=i||0;this.heightUnit="px";this.cssClass=r||"";this.roClass="";this.ownCssClass="";this.style="";this.title=f||"";this.value="";this.type=-1;this.dataType="";this.visible=!0;this.enabled=!0;this.rtEnabled=!1;this.link="";this.linkTarget="";this.jsEvent="";this.hasJsLink=!1;this.extraAttributes="";this.grid=null;this.row=null;this.column=null;this.gridId="";this.gridRow="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){return this.buffer.clear(),this._getHtml(),this.buffer.toString()};this.append=function(n){return this.buffer.append(n)};this.tagAtt=function(n,t){return t=t.toString(),t=t.indexOf('"')>=0?t.replace(u,"&quot;"):t,this.buffer.append(" "+n+(t?'="'+t+'"':""))};this.persistValue=function(){var n=this.getVStruct();!gx.lang.emptyNum(this.column.gxId)&&n&&(this._persistValue?this._persistValue():n.v2v&&n.v2v(this.value))};this.setIndividualProp=function(n,t){this[n]=n=="enabled"||n=="visible"||n=="isPassword"||n=="autoComplete"||n=="hasJsLink"?gx.lang.gxBoolean(t):t};this.setGridData=function(n){this.grid=n.grid;this.row=n.row;this.gridId=n.gridId;this.gridRow=n.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}};this.getVStruct=function(){return this.grid.parentObject.GXValidFnc[this.column.gxId]};this.getEventContext=function(){var n=this.grid.parentObject;return gx.json.serializeJson([n.CmpContext,n.IsMasterPage])}},singleLineEdit:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt){this.id=n;this.inputType=k;this.step=d;this.title=e;this.placeholder=o;this.width=g;this.widthUnit=nt;this.height=tt==17?0:tt;this.heightUnit=it;this.maxLength=rt;this.visible=p!=0;this.enabled=w!=0;this.rtEnabled=b!=0;this.isPassword=ut!=0;this.format=ft;this.link=u;this.linkTarget=f;this.style=l;this.cssClass=c;this.roClass=a;this.columnClass=v;this.columnHeaderClass=y;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);vt&&(this.rtEnabled||this.enabled)&&(t=pt);this.formattedValue=pt===""?"":gx.lang.emptyObject(t)?gx.applyPicture(this.vStruct,gx.html.encodeCaseFormat(pt||"",ft)):gx.html.encodeCaseFormat(t,ft);this.extraAttributes=i;this.jsScrCode=h;this.usrOnclick=s;this.eventName=r;this.parentId=et;this.hasTheme=ot;this.autoComplete=st!=0;this.autoCorrection=ht!=0;this.value=pt||"";this.domainName=lt;this.rtPicture=yt};this._getHtml=function(){var h="",n="",i=this.getVStruct(),e,t,r,o,u,f,c,s;if(this.width==0&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr"),this.width>0&&(this.widthUnit=="chr"?h=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";"),this.height>0&&this.heightUnit!="row"&&(this.style=this.style+";height: "+this.height+this.heightUnit+";"),n=this.style,this.style=this.style+(this.visible?"":";display:none;"),(this.rtEnabled||this.enabled)&&((this.dataType==gx.types.date||this.dataType==gx.types.dateTime)&&(this.append("<div"),this.tagAtt("id",this.id+"_dp_container"),this.column.align!=""&&this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),this.style!=""&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">")),this.row.ownerGrid.isFreestyle||this.column.titleformat!==undefined&&this.column.titleformat!=gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"<\/label>"),this.append("<input"),this.isPassword==!0?this.tagAtt("type","password"):(this.tagAtt("type",this.inputType),this.step&&(this.inputType=="number"||this.inputType=="range")&&(this.tagAtt("step",this.step),e=Math.pow(10,this.maxLength)-1,this.tagAtt("min",-1*e),this.tagAtt("max",e),this.inputType=="search"&&(this.extraAttributes+=' onsearch="this.onchange();"')),this.dataType==gx.types.geolocation&&(this.extraAttributes+=" data-gx-geolocation")),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue),this.append(h),this.title!=""&&this.tagAtt("title",this.title),this.placeholder!=""&&this.tagAtt("placeholder",this.placeholder),this.autoComplete||this.tagAtt("autocomplete","off"),this.tagAtt("spellcheck",this.autoCorrection.toString()),this.inputType!="date"&&this.inputType!="datetime"&&this.inputType!="datetime-local"&&this.tagAtt("maxlength",this.maxLength),this.cssClass!=""&&this.tagAtt("class",this.cssClass),this.rtPicture!=""&&this.tagAtt("data-gx-rt-picture",this.rtPicture),t=this.style,this.column.align!=""&&(t+=";text-align:"+this.column.align),r=!this.enabled&&this.rtEnabled?";display:none;":"",t+=r,t!=""&&this.tagAtt("style",t),this.append(this.extraAttributes),gx.fn.controlFiresEvent(i)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,i.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext())),this.append(">"),this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(o=this.grid.parentObject.getValidStructFld(this.id),o.dp!=undefined&&(o.dp.f==0&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),r=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+r),this.append(">")),this.append("<\/div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)),!this.enabled){if(u="",this.rtEnabled||this.grid.addHiddenControl(this.id,this.dataType==gx.types.date||this.dataType==gx.types.dateTime?this.formattedValue:this.value),u=this.hasTheme?gx.fn.prefixROClass(this.parentId==0?this.cssClass:this.roClass):this.cssClass,f="",this.format!=gx.html.controls.formats.RAW_HTML&&(gx.runtimeTemplates&&this.append('<p class="form-control-static">'),n=n+(this.visible?"":";display:none;"),this.append("<span"),gx.runtimeTemplates&&this.append(" data-gx-tpl-applied-readonly-atts-vars"),this.append(this.extraAttributes),u!=""&&this.tagAtt("class",u),n!=""&&this.tagAtt("style",n),gx.O.DSO&&this.tagAtt("data-gx-readonly",""),this.title!=""&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),gx.fn.controlFiresEvent(i)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,i.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.append(">"),f=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,f,this.usrOnclick,this.link,this.linkTarget)),this.isPassword)for(c=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength),s=0;s<c;s++)this.append("*");else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,f,this.usrOnclick,this.link),this.append("<\/span>"),gx.runtimeTemplates&&this.append("<\/p>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},multipleLineEdit:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){this.id=n;this.visible=u!=0;this.enabled=f!=0;this.rtEnabled=e!=0;this.width=o;this.widthUnit=s;this.height=h;this.heightUnit=c;this.style=l;this.cssClass=a;this.columnClass=v;this.columnHeaderClass=y;this.maxLength=p;this.extraAttributes=i;this.autoresize=w!=0;this.format=r;this.link=t;this.linkTarget=k;this.placeholder=d;this.value=ut||"";this.autoCorrection=g!=0;this.domainName=tt;this.maxTextLines=b;this.jsScrCode=rt};this._getHtml=function(){var n=this.getVStruct(),t;this.style=this.style+(!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"");(this.rtEnabled||this.enabled)&&(this.row.ownerGrid.isFreestyle||this.column.titleformat!==undefined&&this.column.titleformat!=gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"<\/label>"),this.append("<textarea"),this.placeholder!=""&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),this.widthUnit=="chr"?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,this.maxTextLines>1&&this.tagAtt("data-gx-text-maxlines",this.maxTextLines),this.heightUnit=="row"?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",this.maxLength),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.cssClass!=""&&this.tagAtt("class",this.cssClass),this.style!=""&&this.tagAtt("style",this.style),this.title!=""&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(gx.html.encodeCaseFormat(this.value,gx.html.controls.formats.TEXT,!1)),this.append("<\/textarea>"));this.enabled||(t=this.visible?"":"display:none;",this.autoresize||(t+='overflow="hidden";'),this.rtEnabled||this.grid.addHiddenControl(this.id,this.value),this.cssClass=gx.fn.prefixROClass(this.cssClass),this.append("<span "),this.append(this.extraAttributes),this.cssClass!=""&&this.tagAtt("class",this.cssClass),t!=""&&this.tagAtt("style",t),gx.O.DSO&&this.tagAtt("data-gx-readonly",""),this.title!=""&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),n.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,n.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.format===gx.html.controls.formats.TEXT_W_SPACES&&this.tagAtt("data-text-format",gx.html.controls.formats.TEXT_W_SPACES),this.append(">"),gx.html.controls.startAnchor(this,this.jsScrCode,!!n.evt,"",this.link,this.linkTarget),this.append(gx.html.encodeCaseFormat(this.value,this.format,!0)),gx.html.controls.endAnchor(this,!!n.evt,"",this.link),gx.html.controls.specificDomainCtrls(this),this.append("<\/span>"))}},blob:function(n,t,i,r,u,f,e){this.base(n,t,i,r,u);this.type=gx.html.controls.types.blob;this.display=f||0;this.contentType=e||"text/html";this.url="";this.parameters="";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st){this.id=n;this.value=t;this.contentType=i||"text/html";this.linkTarget=u;this.parameters=f;this.display=e;this.visible=s!=0;this.enabled=o!=0;this.alt=h;this.title=c;this.borderWidth=l;this.autoresize=a!=0;this.width=v;this.widthUnit=y;this.height=p;this.heightUnit=w;this.vSpace=b;this.hSpace=k;this.jsScrCode=d;this.usrOnclick=g;this.eventName=nt;this.style=tt;this.cssClass=it;this.columnClass=rt;this.columnHeaderClass=ut;this.extraAttributes=ft;this.extraDisplayAttributes=et;this.jsDynCode=ot;this.url=gx.util.resolveUrl(st)};this._getHtml=function(){var n="",i,t,r,u;this.style=this.style+(this.visible?"":";display:none;");this.append('<div class="gx-tbldsp-container"');this.tagAtt("border",0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");this.tagAtt("title",gx.lang.emptyObject(this.title)?this.id:this.title);this.append("><div>");i=this.contentType.toLowerCase().indexOf("image/")!=-1;this.display==0?(i?(this.append("<img"),this.tagAtt("alt",this.alt),(this.url==""||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))&&(this.url=gx.ajax.getImageUrl(gx,"blankImage")),this.tagAtt("src",this.url)):(this.append("<object"),this.tagAtt("type",this.contentType),this.url==""&&(this.url="about:blank"),this.tagAtt("data",this.url)),this.tagAtt("id","Object_"+this.id),this.style=this.style+"display:block;",this.width==0||this.autoresize||(this.style=this.style+"width:"+this.width+this.widthUnit+";"),this.height==0||this.autoresize||(this.style=this.style+"height:"+this.height+this.heightUnit+";"),this.tagAtt("style",this.style),n=this.cssClass!=""?"BlobContent"+this.cssClass:this.cssClass,this.enabled||(n=gx.fn.prefixROClass(n)),this.tagAtt("class",n),this.append(this.extraDisplayAttributes),this.append(">"),i?this.append("<\/img>"):(this.append(this.parameters),this.append("<\/object>"))):this.display==1&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=this.url!=""?this.style+"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),this.linkTarget!=""&&this.tagAtt("target",this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("><\/a>"));this.append("<\/div><div>");this.enabled&&(t="",gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data"),r=gx.dom.byId(this.id),this.grid&&this.grid.parentObject.isTransaction()&&r&&this.value===r.value?(u=this.id+"_hook",this.append("<div"),this.tagAtt("id",u),this.append(">"),this.append("<\/div>"),this.grid.addControlToReuse({el:r,hookId:u})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(t=t+"display:none;"),this.width!=0&&(t=t+"width:"+this.width+";"),this.tagAtt("style",t),this.tagAtt("value",this.value),n=this.cssClass!=""?"BlobInput"+this.cssClass:this.cssClass,this.enabled||(n=gx.fn.prefixROClass(n)),this.tagAtt("class",n),i&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">")));this.append("<\/div><\/div>")}},radio:function(t,r,u,f,e){this.base(t,r,u,f,e);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.possibleValues=n.v||[];this.id=t;this.title=i;this.visible=r!=0;this.enabled=u!=0;this.columns=f;this.orientation=e;this.style=o;this.cssClass=s;this.columnClass=h;this.columnHeaderClass=c;this.jsScrCode=l;this.usrOnclick=a;this.eventName=v;this.extraAttributes=y;this.value=p};this._getHtml=function(){var t,r,u;this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));t=[];this.enabled||t.push(gx.fn.prefixROClass(this.cssClass));t.push("gx-radio-button");this.orientation==1&&t.push("gx-radio-button-vertical");r=t.join(" ");u=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style=this.style+(this.visible?"":";display:none;");this.append(i("radio",{id:this.id,className:r,style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,gxoch0:gx.html.controls.onJSEvent_impl("data-gxoch0",u,this.usrOnclick),values:n.map(this.possibleValues,function(n,t){return{itemId:this.id+"_"+t,itemValue:n[0],itemDesc:n[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(n[0].toString())}}.closure(this))}))}},comboBox:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){this.possibleValues=n.v||[];this.id=t;this.title=o;this.visible=s!=0;this.enabled=h!=0;this.rtEnabled=c!=0;this.rows=i;this.format=l;this.width=a;this.widthUnit=v;this.height=y;this.heightUnit=p;this.style=w;this.cssClass=b;this.columnClass=k;this.columnHeaderClass=d;this.formattedValue=nt;this.jsScrCode=u;this.usrOnclick=r;this.eventName=f;this.extraAttributes=g;this.value=it;this.rawValue=n};this._getHtml=function(){var i,f,e,u,r,n,t;if(this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString())),this.width>0&&(this.style=this.style+";width: "+this.width+this.widthUnit),this.height>0&&(this.style=this.style+";height: "+this.height+this.heightUnit),i=this.style+" ;overflow:hidden;",f=this.enabled||this.rtEnabled,this.style=this.style+(!this.visible||!this.enabled&&this.rtEnabled?";display:none;":""),f){e=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");this.rows>1&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.title!=""&&this.tagAtt("title",this.title);this.cssClass!=""&&this.tagAtt("class",this.cssClass);this.style!=""&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"data-gxoch0",e,this.usrOnclick);for(this.append(">"),r=this.possibleValues.length,n=0;n<r;n++)t=this.possibleValues[n],this.append("<option"),this.tagAtt("value",t[0]),gx.text.trim(t[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected"),this.append(">"),this.append(t[1]),this.append("<\/option>");this.append("<\/select>")}if(!this.enabled){for(this.rtEnabled||this.grid.addHiddenControl(this.id,this.value),u="",u=gx.fn.prefixROClass(this.cssClass),i=i+(this.visible?"":";display:none;"),this.append("<span "),this.tagAtt("id","span_"+this.id),this.title!=""&&this.tagAtt("title",this.title),u!=""&&this.tagAtt("class",u),i!=""&&this.tagAtt("style",i),gx.O.DSO&&this.tagAtt("data-gx-readonly",""),f||this.tagAtt(gx.GxObject.GX_DATA_RAW_VALUE_ATTR,gx.json.serializeJson(this.rawValue)),this.append(this.extraAttributes),this.append(">"),r=this.possibleValues.length,n=0;n<r;n++)if(t=this.possibleValues[n],gx.text.trim(t[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(t[1]);break}this.append("<\/span>")}}},listBox:function(n,t,i,r,u,f){this.base(n,t,i,r,u);this.type=gx.html.controls.types.listBox;this.rows=f},checkBox:function(n,t,i,r,u,f,e,o){this.base(n,t,i,r,u);this.type=gx.html.controls.types.checkBox;this.caption=f||"";this.checkedValue=e;this.uncheckedValue=o;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a){this.id=n;this.title=t;this.visible=r!=0;this.enabled=u!=0;this.checkedValue=f;this.caption=e;this.style=o;this.cssClass=s;this.columnClass=h;this.columnHeaderClass=c;this.extraAttributes=l;this.value=a;this.labelCaption=i};this._getHtml=function(){var t=this.getVStruct(),n,i;this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));n=this.cssClass;this.enabled||(n=gx.fn.prefixROClass(this.cssClass));this.style=this.style+(this.visible?"":";display:none;");this.append("<label");this.tagAtt("for",this.id);n!=""&&this.tagAtt("class",n);this.style!=""&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);i=this.value.toString()==this.checkedValue.toString();i?(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);this.title!=""&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);gx.fn.controlFiresEvent(t)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.append(this.caption);this.append("<\/label>")}},imageReadOnly:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st){this.id=n;this.accessKey=r;this.visible=f!=0;this.enabled=e!=0;this.alt=o;this.title=s;this.borderWidth=h;this.autoresize=c!=0;this.width=l;this.widthUnit=a;this.height=v;this.heightUnit=y;this.vSpace=p;this.hSpace=w;this.link=t;this.linkTarget=i;this.jsScrCode=b;this.usrOnclick=k;this.eventName=d;this.style=g;this.cssClass=nt;this.columnClass=tt;this.columnHeaderClass=it;this.align=rt;this.extraAttributes=ut;this.useMap=ft;this.jsDynCode=et;this.imgSrcSet=ot;this.imageUrl=st;this.value=st};this._getHtml=function(){var i=this.getVStruct(),t,n;this.grid.addHiddenControl(this.id,this.imageUrl);this.eventName!=""&&gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));t=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);t!=""&&(this.accessKey=t);this.style=this.style+(this.visible?"":";display:none;");n=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);this.enabled&&this.link!=""&&gx.html.controls.startAnchor(this,this.jsScrCode,n,this.usrOnclick,this.link,this.linkTarget,"gx-image-link");this.append("<img");this.tagAtt("src",this.value);this.imgSrcSet&&this.tagAtt("srcset",this.imgSrcSet);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");this.accessKey!=""&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);this.vSpace!=0&&this.tagAtt("vspace",this.vSpace);this.hSpace!=0&&this.tagAtt("hspace",this.hSpace);this.align!=""&&this.tagAtt("align",this.align);(this.cssClass==""||this.borderWidth>0)&&(this.tagAtt("border",this.borderWidth),this.cssClass!=""&&(this.style=this.style+";border-width: "+this.borderWidth));this.tagAtt("alt",this.alt||this.title);this.title!=""&&this.tagAtt("title",this.title);this.width>0&&(this.style=this.style+";width: "+this.width+this.widthUnit);this.height>0&&(this.style=this.style+";height: "+this.height+this.heightUnit);this.cssClass!=""&&this.tagAtt("class",this.cssClass);this.style!=""&&this.tagAtt("style",this.style);this.useMap!=""&&this.tagAtt("usemap",this.useMap);this.extraAttributes&&this.append(this.extraAttributes);i.evt&&(this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,i.fld),this.tagAtt(gx.GxObject.GX_EVENT_DATA_ATTR,""),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.usrOnclick&&this.tagAtt(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR,this.usrOnclick));this.append(">");this.enabled&&this.link!=""&&n==""&&gx.html.controls.endAnchor(this,n,this.usrOnclick,this.link)};this._persistValue=function(){var n=this.getVStruct();n.v2v&&n.v2v(this.imageUrl)}},multimedia:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.multimedia;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){this.id=n;this.text=t;this.display=i!=0;this.visible=r!=0;this.enabled=u!=0;this.autoresize=f!=0;this.width=e;this.widthUnit=o;this.height=s;this.heightUnit=h;this.jsScrCode=c;this.usrOnclick=l;this.eventName=a;this.style=v;this.cssClass=y;this.columnClass=p;this.columnHeaderClass=w;this.extraInputAttributes=b;this.jsDynCode=d;this.readOnly=g!=0;this.isBlob=gx.lang.gxBoolean(nt);this.multimediaUrl=tt;this.value=gx.util.resolveUrl(tt)};this.startMultimediaUploadControl=function(n,t,i,r){var f=(r||"")+(t?"":"display:none;"),u;return i>0&&(r+="width:"+i),u=['<div id="',n,'_ct" class="',gx.html.multimediaUpload.gxCssClass,'" style="',f,'">'],u.join("")};this.endMultimediaUploadControl=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var b=[],it=gx.html.multimediaUpload.getInputFileEl(this.id),k="checked",d="",g=t,nt=n.match(/([\w]+)(_\d{4})$/),tt=nt[1]+"_GXI"+nt[2],w;return(y||y===undefined)&&(k="",d="checked",g=""),w=['<div id="',n,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',n,'Option" type="radio" value="file" ',d,"/>",gx.getMessage("GXM_uploadfileoption"),"<\/label>",'<label class="option">','<input name="',n,'Option" type="radio" value="uri" ',k,"/>",gx.getMessage("GXM_uploadurioption"),"<\/label>",'<input type="text" class="field ',c,'" id="',tt,'" name="',tt,'" value="',g,'" ',a," />"],b.push(w.join("")),w=it?['<div id="',n,'_hook"><\/div>']:['<input type="file" class="field ',c,'" id="',n,'" name="',n,'" accept="',p,'" ',a,"/>"],b.push(w.join("")),w=["<\/div>","<\/div>"],b.push(w.join("")),b.join("")};this.getPreviewHtml=function(){var t=gx.fn.prefixROClass(this.cssClass||""),n=this.value,i=n?' href="'+n+'"':"",r=this.readOnly||!this.enabled,u=r?this.id:"",f="",e=" gx-multimedia-ro";return f=gx.text.startsWith(gx.util.getContentTypeFromExt(n),"image")||!r&&n===""?["<a",' class="',e,'"',' target ="_blank"',i,">",'<img id = "Object_',this.id,'" class = "',t,'" alt = "',this.alt,'" src = "',n,'" />','<span id="',u,'" class="',this.placeHolderClass,'"><\/span>',"<\/a>"]:["<a",n?" download":"",' class="',e,'"',' target = "_blank"',i,">",'<span id = "',u,'" class = "',t," ",this.placeHolderClass,'" title = "',gx.getMessage("GXM_multimediaalttext"),'"><\/span>',"<\/a>"],f.join("")};this._getHtml=function(){if(!this.readOnly&&this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"<\/a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"><\/a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl),this.append(this.getPreviewHtml()),!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var n=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&n&&this.grid.addControlToReuse({el:n,hookId:this.id+"_hook"})}};this._persistValue=function(){var n=this.getVStruct();n.v2v&&n.v2v(this.multimediaUrl)}},image:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at){this.id=n;this.accessKey=r;this.visible=f!=0;this.enabled=e!=0;this.alt=o;this.title=s;this.borderWidth=h;this.autoresize=c!=0;this.width=l;this.widthUnit=a;this.height=v;this.heightUnit=y;this.vSpace=p;this.hSpace=w;this.link=t;this.linkTarget=i;this.jsScrCode=b;this.usrOnclick=k;this.eventName=d;this.style=g;this.cssClass=nt;this.columnClass=tt;this.columnHeaderClass=it;this.align=rt;this.extraInputAttributes=ut;this.extraImageAttributes=ft;this.useMap=et;this.jsDynCode=ot;this.readOnly=st!=0;this.isBlob=gx.lang.gxBoolean(ht);this.isAttribute=gx.lang.gxBoolean(ct);this.imgSrcSet=lt;this.multimediaUrl=at;this.value=gx.util.resolveUrl(at);this.themeName=u;this.className=nt;ct&&(this.className=gx.fn.prefixROClass(nt));var vt=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(vt);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.heightUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,this.style,this.className,this.columnClass,this.columnHeaderClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.imgSrcSet,this.value)};this.getPreviewHtml=function(){var n=this.value,t=gx.fn.prefixROClass(this.cssClass||""),r=this.value?' href="'+this.value+'"':"",i=['<a target="_blank"',' class="gx-multimedia-ro"',">",'<img id="Object_',this.id,'" class="',t,'" alt="',this.alt,'" src="',n,'" />','<span class="',this.placeHolderClass,'"><\/span>',"<\/a>"];return i.join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"<\/a>");this.append('<a gxfocusable="1" href="" class="action clear-action"><\/a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var n=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&n&&this.grid.addControlToReuse({el:n,hookId:this.id+"_hook"})}}},video:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},audio:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},file:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.audio;this.placeHolderClass="gx-download-placeholder"},textBlock:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.textBlock;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){this.id=n;this.visible=h!=0;this.enabled=c!=0;this.rtEnabled=l!=0;this.format=a;this.title=s;this.link=t;this.linkTarget=i;this.jsScrCode=o;this.usrOnclick=r;this.eventName=u;this.extraAttributes=f;this.cssClass=e;this.value=gx.text.replaceAll(v,"�","'")};this._getHtml=function(){var t,i=this.getVStruct(),r=this.enabled||this.rtEnabled,n;this.format!=gx.html.controls.formats.RAW_HTML&&(this.format==gx.html.controls.formats.HTML?(t=(this.visible?";display:inline;":";display:none;")+this.extraAttributes,this.append("<div ")):(t=(this.visible?"":";display:none;")+this.extraAttributes,this.append("<span ")),this.tagAtt("id",this.id),this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled"),this.cssClass!=""&&this.tagAtt("class",this.cssClass),this.tagAtt("data-gxformat",this.format),t!=""&&this.tagAtt("style",t),this.title!=""&&this.tagAtt("title",this.title),gx.fn.controlFiresEvent(i)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,i.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.append(">"));n="";r?(n=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,n,this.usrOnclick,this.link,this.linkTarget)):n="";this.append(gx.html.encodeCaseFormat(this.value,this.format));r&&gx.html.controls.endAnchor(this,n,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("<\/div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("<\/span>");this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1)}},label:function(n,t,r,u,f){this.base(n,t,r,u,f);this.type=gx.html.controls.types.label;this.setProperties=function(n,t,i,r,u,f){this.referencedEl=n;this.labelCaption=t;this.labelClass=i;this.extraStyle=f;this.addAttributes=[r===0?"data-gx-sr-only":"",this.extraStyle?'style="'+this.extraStyle+'"':""].join(" ")};this._getHtml=function(){this.append(i("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,relatedElement:this.referencedEl}))}},button:function(n,t,i,r,u,f){this.base(n,t,i,r,u);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=f||"rounded";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.reset=y;this.id=n;this.title=u;this.accessKey=f;this.style=e;this.cssClass=o;this.visible=s!=0;this.enabled=h!=0;this.buttonStyle=c;this.jsScrCode=r;this.usrOnclick=i;this.eventName=l+(this.jsScrCode==5?"+'"+this.gridRow+"'":"");this.extraAttributes=a;this.jsCode=t;this.jsDynCode=v;this.caption=p};this._getHtml=function(){var i=this.getVStruct(),r,t,n;this.style=this.style+(this.visible?"":";display:none;");r="BaseRBtn R"+this.cssClass;this.buttonStyle=="rounded"&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),this.style!=""&&this.tagAtt("style",this.style),this.tagAtt("class",r),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");t="button";this.reset==1?t="submit":this.reset==0&&(t="reset");this.tagAtt("type",t);n=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);n==""&&(n=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));n!=""&&(this.accessKey=n);this.tagAtt("name",this.id);this.tagAtt("id",this.id);this.tagAtt("value",this.caption);this.title!=""&&this.tagAtt("title",this.title);this.accessKey!=""&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);this.style!=""&&this.tagAtt("style",this.style);this.enabled||this.append(" disabled");this.append(gx.html.controls.onJsEventAttributes(this.jsScrCode,this.jsCode,this.usrOnclick));this.append(this.extraAttributes);gx.fn.controlFiresEvent(i)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,i.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.buttonStyle=="rounded"&&this.append("<\/span><\/span><\/span><\/span>")}},grid:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=function(n){this.containerName=n;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("><\/div>")}},userControl:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(n,t){this.containerName=n;this.id=this.containerName;this.visible=t!=0};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.uc.gxCssClass);this.append("><\/div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.userControlContainer;this.parentName="";this.containerName="";this.setProperties=function(n,t){this.parentName=n;this.containerName=t;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class","gx_usercontrol_child");this.append(">")}},webComponent:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.webComponent;this.controlName="";this.content="";this.setProperties=function(n){var e,u,r;this.controlName=n;var o=this.grid.parentObject.getComponentData(this.controlName),i=o.Prefix,t=this.grid.gxComponentContext+"gxHTMLWrp"+i+this.gridRow,s=gx.dom.byId(t),f="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+i+this.gridRow);s!=null?(e=t+"_hook",this.grid.addComponentToDraw({create:!1,existingEl:e,el:t,p:this.grid.gxComponentContext+i+this.gridRow}),t=e):gx.lang.emptyObject(gx.csv.lastEvtResponse)||gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents)||(u=gx.csv.lastEvtResponse.gxComponents[t],gx.lang.emptyObject(u)?f="":(f=gx.html.cleanHtmlRefs(u),r=gx.fn.getHidden(this.grid.gxComponentContext+i+this.gridRow),r||(r=o.GXClass),gx.lang.emptyObject(r)||this.grid.addComponentToDraw({load:!0,n:r.toLowerCase(),p:this.grid.gxComponentContext+i+this.gridRow,c:u})));this.id=t;this.content=f};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);this.append("<\/div>")}},embeddedPage:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c){this.id=n;this.value=t;this.visible=i!=0;this.width=r;this.widthUnit=u;this.height=f;this.heightUnit=e;this.borderStyle=o;this.align=s;this.title=h;this.scrollbars=c};this._getHtml=function(){this.style=this.style+(this.visible?"":";display:none;");this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);this.height>0&&this.tagAtt("height",this.height+this.heightUnit);this.width>0&&this.tagAtt("width",this.width+this.widthUnit);this.title!=""&&this.tagAtt("title",this.title);this.id!=""&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));this.value!=""&&this.tagAtt("src",this.value);this.cssClass!=""&&this.tagAtt("class",this.cssClass);this.style!=""&&this.tagAtt("style",this.style);this.append(">");this.append("<\/iframe>")}},table:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.table;this.cellSpacing="";this.cellPadding="";this.backColor="";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){this.id=n;this.visible=t!=0;this.cssClass=i;this.background=r;this.backColor=u;this.borderColor=f;this.align=e;this.title=o;this.borderWidth=s;this.cellPadding=h;this.cellSpacing=c;this.height=l;this.width=a;this.rules=v;this.heightUnit=y;this.widthUnit=p;this.style="";this.header=w};this._getHtml=function(){var t=this.getVStruct(),n;this.style=this.style+(this.visible?"":";display:none;");this.background!=""&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+this.background+");");this.backColor!=""&&(n=parseInt(this.backColor),n=isNaN(n)?this.backColor:gx.color.html(n).Html,this.style=this.style+"background-color: "+n+";");this.borderColor!=""&&(n=parseInt(this.borderColor),n=isNaN(n)?this.borderColor:gx.color.html(n).Html,this.style=this.style+"border-color: "+n+";");this.borderWidth!=""&&(this.style=this.style+"border-width: "+this.borderWidth+";");this.height!=""&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");this.width!=""&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);this.borderWidth!=""&&this.tagAtt("border",this.borderWidth);this.cellSpacing!==""&&this.tagAtt("data-cellspacing",this.cellSpacing);this.cellPadding!==""&&this.tagAtt("data-cellpadding",this.cellPadding);this.rules!=""&&this.rules!="none"&&this.tagAtt("rules",this.rules);this.title!=""&&this.tagAtt("title",this.title);this.cssClass!=""&&this.tagAtt("class",this.cssClass);this.style!=""&&this.tagAtt("style",this.style);t.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">");this.header!=""&&(this.append("<caption>"),this.append(this.header),this.append("<\/caption>"))}},row:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.row;this.backColor="";this.borderColor="";this.align="";this.verticalAlign="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(n,t,i){t&&(this.cssClass=this.ownCssClass?t+(this.ownCssClass?" "+this.ownCssClass:""):t);this.style=i};this._getHtml=function(){this.append("<tr");this.id!=""&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);this.backColor!=""&&(this.style=this.style+"background-color:"+this.backColor+";");this.borderColor!=""&&this.tagAtt("bordercolor",this.borderColor);this.align!=""&&this.tagAtt("align",this.align);this.verticalAlign!=""&&this.tagAtt("data-cell-valign",this.verticalAlign);this.style!=""&&this.tagAtt("style",this.style);this.cssClass!=""&&this.tagAtt("class",this.cssClass);this.oncontextmenu!=""&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.cell;this.style="";this.background="";this.backColor="";this.borderColor="";this.align="";this.verticalAlign="";this.colSpan="";this.rowSpan="";this.className="";this.setProperties=function(n,t,i){if(this.background=n,this.cssClass=i,t&&t!=""){var r=t.indexOf("style=");r>0&&(this.style=t.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")}};this._getHtml=function(){this.append("<td");typeof this.width!="undefined"&&this.width!=0&&this.tagAtt("width",this.width);typeof this.height!="undefined"&&this.height!=0&&this.tagAtt("height",this.height);this.background!=""&&this.tagAtt("background",this.background);this.backColor!=""&&(this.style+="background-color:"+this.backColor+";");this.style!=""&&this.tagAtt("style",this.style);this.borderColor!=""&&this.tagAtt("bordercolor",this.borderColor);this.align!=""&&this.tagAtt("align",this.align);this.verticalAlign!=""&&this.tagAtt("data-cell-valign",this.verticalAlign);this.colSpan!=""&&this.tagAtt("colspan",this.colSpan);this.rowSpan!=""&&this.tagAtt("rowspan",this.rowSpan);this.cssClass!=""&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(n,t,i,r,u){this.base(n,t,i,r,u);this._getHtml=function(){this.append("<div");this.id!=""&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);this.backColor!=""&&(this.style=this.style+"background-color:"+this.backColor+";");this.borderColor!=""&&this.tagAtt("bordercolor",this.borderColor);this.align!=""&&this.tagAtt("align",this.align);this.verticalAlign!=""&&this.tagAtt("data-cell-valign",this.verticalAlign);this.style!=""&&this.tagAtt("style",this.style);this.tagAtt("class","row "+(this.cssClass||""));this.oncontextmenu!=""&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},responsiveCell:function(n,t,i,r,u){this.base(n,t,i,r,u);this._getHtml=function(){this.append("<div");typeof this.width!="undefined"&&this.width!=0&&this.tagAtt("width",this.width);typeof this.height!="undefined"&&this.height!=0&&this.tagAtt("height",this.height);this.background!=""&&this.tagAtt("background",this.background);this.backColor!=""&&(this.style+="background-color:"+this.backColor+";");this.style!=""&&this.tagAtt("style",this.style);this.borderColor!=""&&this.tagAtt("bordercolor",this.borderColor);this.align!=""&&this.tagAtt("align",this.align);this.verticalAlign!=""&&this.tagAtt("data-cell-valign",this.verticalAlign);this.colSpan!=""&&this.tagAtt("colspan",this.colSpan);this.rowSpan!=""&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(n,t,i,r,u,f,e,o,s){this.id=n;this.caption=t;this.visible=i!=0;this.width=r;this.widthUnit=u;this.height=f;this.heightUnit=e;this.cssClass=o;this.extraAtts=s};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.cssClass!=""&&this.tagAtt("class",this.cssClass);var n="-moz-border-radius:3pt;";this.width!="0"&&(n+="width: "+this.width+this.widthUnit+";");this.height!="0"&&(n+="height: "+this.height+this.heightUnit+";");this.visible||(n+="display:none;");this.tagAtt("style",n);this.extraAtts!=""&&this.append(this.extraAtts);this.append(">");this.append("<legend");this.cssClass!=""&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("<\/legend>")}},div:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.div;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c){this.id=n;this.visible=t!=0;this.width=i;this.widthUnit=r;this.height=u;this.heightUnit=f;this.cssClass=e;this.align=o;this.vAlign=s;this.extraAtts=h;this.extraStyle=c};this._getHtml=function(){var t=this.getVStruct(),i=this.align&&this.align.toLowerCase()!="left",r=this.vAlign&&this.vAlign.toLowerCase()!="top",n=this.visible?"":";display:none;";this.height!=""&&(n=n+"height: "+this.height+this.heightUnit+";");this.width!=""&&(n=n+"width: "+this.width+this.widthUnit+";");n=n+this.extraStyle;this.append("<div");this.id&&this.tagAtt("id",this.id);this.cssClass!=""&&this.tagAtt("class",this.cssClass);n!=""&&this.tagAtt("style",n);this.extraAtts!=""&&this.append(this.extraAtts);i&&this.tagAtt("data-align",this.align.toLowerCase());r&&this.tagAtt("data-valign",this.vAlign.toLowerCase());gx.fn.controlFiresEvent(t)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">");(i||r)&&this.append('<div data-align-outer=""><div data-align-inner="">')}},divEnd:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.divEnd;this.setProperties=function(n,t){this.align=n;this.vAlign=t};this._getHtml=function(){var n=this.align&&this.align.toLowerCase()!="left",t=this.vAlign&&this.vAlign.toLowerCase()!="top";(n||t)&&this.append("<\/div><\/div>");this.append("<\/div>")}},formGroup:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.formGroup;this.setProperties=function(n){this.captionPosition=n};this._getHtml=function(){this.captionPosition===1&&this.append('<div class="form-group gx-form-group">')}},formGroupEnd:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.formGroupEnd;this.setProperties=function(n){this.captionPosition=n};this._getHtml=function(){this.captionPosition===1&&this.append("<\/div>")}},specificDomainCtrls:function(n){var i,r,t;if(n.domainName==gx.domains.component&&n.enabled==0){var i=n.enabled?";display:none;":"",u=n.id+"_comp_trigger",f=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\"+gx.theme+"\\Select.png",!1);n.append("<img");n.tagAtt("src",f);n.tagAtt("id",u);n.tagAtt("class","");n.tagAtt("style",i+" margin-left:2px; cursor:pointer;");n.tagAtt("onclick","gx.popup.openUrl('"+n.value+"')");n.append("/>");t=[];t.push(n.column.gxId)}else n.dataType==gx.types.geolocation&&(i=n.enabled?"":";display:none;",r=n.id+"_geoLocMe",n.append("<img"),n.tagAtt("src",gx.ajax.getImageUrl(gx,"myLocationImage")),n.tagAtt("id",r),n.tagAtt("class","GeoLocOption"),n.tagAtt("style",i),n.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),n.append(">"),t=[],t.push(n.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.file,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl);gx.lang.inherits(this.formGroup,this.htmlControl);gx.lang.inherits(this.formGroupEnd,this.htmlControl)}}}()}}(gx.$);gx.util.Observable=function(){return{observers:[],initialObservers:[],addObserver:function(){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(n,t,i,r){r=r||{};(r.unique===!1||this.indexOf(n,t,i)<0)&&(this.observers.push({e:n,o:t,f:i,cfg:r}),r.doNotDelete===!0&&this.initialObservers.push({e:n,o:t,f:i,cfg:r}))},deleteObserver:function(n,t,i){new gx.thread.Mutex(this,this.deleteObserverSync,[n,t,i])},deleteObserverSync:function(n,t,i){var r=this.indexOf(n,t,i);r>=0&&this.observers.splice(r,1)},removeAll:function(){this.observers=this.initialObservers.slice()},indexOf:function(n,t,i){for(var r,f=this.observers.length,u=0;u<f;u++)if(r=this.observers[u],r&&r.e==n&&r.o==t&&r.f==i)return u;return-1},notify_count:0,notify:function(n,t,i){var e,f,o,u,r;for(t||(t=[]),e=this.observers.length,this.notify_count+=1,f=[],u=0;u<e;u++)if(r=this.observers[u],r&&r.e==n&&!r.removed)try{r.cfg&&r.cfg.single&&(r.removed=!0);o=r.f.apply(r.o,t);r.cfg&&r.cfg.async&&f.push(o)}catch(s){gx.dbg.logEx(s,"gxfx.js","gx.obs.notify")}gx.$.when.apply($,f).then(function(){if(this.notify_count-=1,this.notify_count===0)for(var n=this.observers.length-1;n>=0;n--)this.observers[n].removed&&this.observers.splice(n,1);i&&i()}.closure(this))}}};gx.fx={GX_DATA_SUGGEST_LENGTH:"data-gx-suggest-length",GX_DATA_SUGGEST:"data-gx-suggest",delayedSuggest:function(){gx.$.each(gx.suggestControls,function(n,t){gx.fx.installSuggest(t,!0)})},installSuggest:function(n,t){var r,u,i;if(!t&&document.readyState&&document.readyState!="complete"){gx.suggestControls[n.id]=n;return}try{r=gx.O.getValidStructFld(n.id);r&&!gx.lang.emptyObject(r.gxsgprm)&&(u=r.grid>0?gx.fn.currentGridRowImpl(r.grid):"main",i=r.gxsgprm,i.installed||(i.installed={}),i.installed[u]||(gx.ajax.suggest(gx.O,i[1],n.id,i[0],i[3],i[2]),i.installed[u]=!0,$(n).attr(gx.fx.GX_DATA_SUGGEST,"true"),$(n).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,$(n).val().length)))}catch(f){gx.dbg.logEx(f,"gxfx.js","installSuggest")}},updateSuggestParms:function(n){var r,t,i;if(n)for(r=n.length,t=0;t<r;t++)i=gx.fn.validStruct(n[t]),i&&typeof i.c2v=="function"&&i.c2v()},firesuggest:function(n,t,i,r){if(this.updateSuggestParms(r),n.textbox.value)return t.requestSuggestions(n.sdtParms,function(){t.values?n.autosuggest(t.values,i):n.hideSuggestions();delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")});if(n.textbox.value==="")gx.evt.onchange_impl(n.textbox);delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(n,t,i,r,u,f){this.cur=-1;this.IFrameControl=null;this.layer=null;this.provider=t;this.textbox=n;typeof this.textbox.GXonblur=="undefined"&&(this.textbox.GXonblur=n.onblur);this.ControlRefresh=i;this.typeahead=r;this.suggestParms=u||[];this.sdtParms=f||[];this.requestSuggestions=function(n,t,i){gx.fx.delayedValidation=!0;var r=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(n,t,i,r)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();$(this.layer).hide()};this.highlightSuggestion=function(n){for(var t,r=this.layer.childNodes.length,i=0;i<r;i++)t=this.layer.childNodes[i],t==n?t.className="current":t.className=="current"&&(t.className="")};this.init=function(){var n=function(n){n||(n=window.event);this.handleKeyUp(n)},t=function(n){n||(n=window.event);this.handleKeyDown(n)},i=function(){this.hideSuggestions();this.textbox.GXonblur()};gx.evt.attach(this.textbox,"keyup",n.closure(this));gx.evt.attach(this.textbox,"keydown",t.closure(this));gx.evt.attach(this.textbox,"blur",i.closure(this));gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,"input",n.closure(this));this.createDropDown()};this.nextSuggestion=function(){var n=this.layer.childNodes,t;n.length>0&&(this.cur=this.cur<n.length-1?this.cur+1:0,t=n[this.cur],this.highlightSuggestion(t),this.pickvalue(t.firstChild.nodeValue))};this.previousSuggestion=function(){var n=this.layer.childNodes,t;n.length>0&&(this.cur=this.cur>0?this.cur-1:n.length-1,t=n[this.cur],this.highlightSuggestion(t),this.pickvalue(t.firstChild.nodeValue))};this.selectRange=function(n,t){if(this.textbox.createTextRange){var i=this.textbox.createTextRange();i.moveStart("character",n);i.moveEnd("character",t-this.textbox.value.length);i.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(n,t);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(n){var t,r,u,f,e,i;for(this.cur=-1,t=null,this.setupLayer(),gx.dom.shouldPurge()&&gx.dom.purge(this.layer,!0),this.layer.innerHTML="",this.IFrameControl||(r=!1,u="gxAutosuggestIFrame",this.IFrameControl=gx.dom.byId(u),this.IFrameControl||(r=!0,this.IFrameControl=document.createElement("IFRAME"),this.IFrameControl.src="about:blank",this.IFrameControl.id=u),f=$(this.IFrameControl),f.css({zIndex:1,display:"none",position:"absolute"}),this.IFrameControl.frameBorder="0",r&&document.body.appendChild(this.IFrameControl)),e=n.length,i=0;i<e;i++)t=document.createElement("div"),t.appendChild(document.createTextNode(n[i].d)),t.style.width=this.textbox.offsetWidth,this.layer.appendChild(t);this.layer.style.left=this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()};this.typeAhead=function(n){var t,i;(this.textbox.createTextRange||this.textbox.setSelectionRange)&&(t=this.textbox.value.length,this.pickvalue(n),i=n.length,t<i&&this.selectRange(t,i))};this.pickvalue=function(n,t){for(var r=this.aSuggestions.length,i=0;i<r;i++)if(this.aSuggestions[i].d==n){this.textbox.value=n;t===!0&&gx.evt.fireEvent(this.textbox,"input");gx.evt.onchange_impl(this.textbox,undefined,!0);return}};this.autosuggest=function(n,t){this.aSuggestions=n;var i=this.aSuggestions.length;if(t&&this.aSuggestions!=null&&i==1)this.typeAhead(this.aSuggestions[0].d),this.hideSuggestions();else{if(this.textbox==gx.csv.lastControl&&this.aSuggestions!=null&&i>0&&(i==1&&this.aSuggestions[0].d!=this.textbox||i>1)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()}};this.createDropDown=function(){var n="gxAutosuggestElement",t=!1;this.layer=gx.dom.byId(n);this.layer||(t=!0,this.layer=document.createElement("div"),this.layer.className="suggestions",this.layer.id=n);this.setupLayer();t&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(n){n=n||window.event;var t=gx.evt.source(n);n.type=="mousedown"?(gx.evt.cancel(n,!0),this.pickvalue(t.firstChild.nodeValue,!0),this.hideSuggestions(),window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)):n.type=="mouseover"?this.highlightSuggestion(t):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var n=this.textbox,t=0;n!=null&&n.tagName!="BODY";)t+=n.offsetLeft,n=n.offsetParent;for(n=this.textbox;n!=null&&n.tagName!="BODY";)t-=n.scrollLeft,n=n.parentNode;return t};this.getTop=function(){for(var n=this.textbox,t=0;n!=null&&n.tagName!="BODY";)t+=n.offsetTop,n=n.offsetParent;for(n=this.textbox;n!=null&&n.tagName!="BODY";)t-=n.scrollTop,n=n.parentNode;return t};this.handleKeyDown=function(n){switch(n.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(n){var t=n.keyCode,i,r;t==9?this.hideSuggestions():t==8||t==46?this.requestSuggestions(this,this.provider,!1):t<32||t>=33&&t<46||t>=112&&t<=123?t===0&&(i=this.textbox.value.length,r=parseInt($(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH)||"0",10),i!==r&&this.requestSuggestions(this,this.provider,this.typeahead)):this.requestSuggestions(this,this.provider,this.typeahead);$(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,this.textbox.value.length)};this.init()},suggestProvider:function(n,t,i,r){this.requestSuggestions=function(u,f,e,o){for(var l=gx.ajax.gxObjectUrl(n)+"?",h="gxajaxSuggest_"+r,c=t.length,s=0;s<c;s++)h+=","+encodeURIComponent(gx.fn.evalCtxScope(n,t[s]));for(h+=","+encodeURIComponent(o===undefined?gx.fn.getControlValue_impl(i):o),c=u.length,s=0;s<c;s++)h+=","+encodeURIComponent(gx.fn.evalCtxScope(n,u[s]));l+=gx.ajax.encryptParms(n,h);gx.http.doCall({method:"GET",url:l,handler:function(n,t){var i=gx.json.evalJSON(t);this.values=gx.fx.returnSuggestValues(this.VarRefresh,i[0]);f()},error:e,obj:this})}},returnSuggestValues:function(n,t){return t},addElement:function(n,t,i){if(!this.elementExists(n,t,i)){var r=t.id;i===!0&&(r+=t.types.sort().join(""));n.splice(0,0,t);n[r]=t}},elementExists:function(n,t,i){var r=t.id;return(i===!0&&(r+=t.types.sort().join("")),n[r])?!0:!1},deleteElement:function(n,t,i){var u=t,e,o,r,f;for(i&&(u+=i.sort().join("")),e=n[u],e&&delete n[u],o=n.length,r=0;r<o;r++)if(f=n[r],f.id==t)if(i){if(this.matchingTypes(i,f.types)){n.splice(r,1);break}}else{n.splice(r,1);break}return n},matchingTypes:function(n,t){for(var u,f,i,e=t.length,r=0;r<e;r++){for(u=!1,f=n.length,i=0;i<f;i++)t[r].toLowerCase()==n[i].toLowerCase()&&(u=!0);if(!u)return!1}return!0},findControl:function(n,t,i,r){var u=gx.dom.el(i),f,e;return u!=null&&$(u).css("display")!=="none"?u:(u=gx.fn.getRONode(i,!1),r&&u!=null&&$(u).is(":visible"))?u:(u=gx.dom.el("gxHTMLWrp"+i),u!=null)?u:(r&&!n.id&&n.tagName==="A"&&(n=n.parentNode),f="(^"+(r?"("+gx.fn.getRONodePrefix()+")?":"")+"v?"+i+"_(?:(?:[0-9]){4})+$)",e=new RegExp(f),n!=null&&e.test(n.id))?n:null},isUnderMouse:function(n){var r=gx.evt.mouse.x,u=gx.evt.mouse.y,t=gx.dom.position(n),i=gx.dom.dimensions(n);return r>=t.x&&r<=t.x+i.w&&u>=t.y&&u<=t.y+i.h?!0:n.tagName=="DIV"&&i.w===0&&i.h===0&&n.firstChild&&(t=gx.dom.position(n.firstChild),i=gx.dom.dimensions(n.firstChild),r>=t.x&&r<=t.x+i.w&&u>=t.y&&u<=t.y+i.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(n){return n=="dblclick"?this.dblclicks:this.generics},addEventHandler:function(n,t,i,r){i=gx.lang.emptyObject(n)?i:n.CmpContext+i;var u={id:t+i,cId:i,type:t,obj:n,hdl:r},f=this.getEventHandlers(t);gx.fx.addElement(f,u,!1)},deleteEventHandlers:function(n){for(var t,o,i,s=[this.dblclicks,this.generics],h=s.length,r=0;r<h;r++){var u=[],f=s[r],e=f.length;for(t=0;t<e;t++)o=f[t],o.obj==n&&u.push(o);for(e=u.length,i=0;i<e;i++)gx.fx.deleteElement(f,u[i].id)}},hasEventHandler:function(n,t){for(var f,i,o=gx.evt.source(t),e=this.getEventHandlers(n),s=e.length,r=!1,u=0;u<s&&!r;u++)f=e[u],i=gx.fx.findControl(o,f.obj,f.cId,!0),i!=null&&(r=t.currentTarget===i||gx.fx.isUnderMouse(i));return r},delayedDispatch:function(n){return gx.fx.dom.hasEventHandler("dblclick",n)},raiseEvent:function(n,t){var e=gx.evt.source(t),o=$(e),s=gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,u,h,r,i,f;for(n=="dblclick"&&(clearTimeout(parseInt(o.attr(s),10)),o.removeAttr(s)),u=this.getEventHandlers(n),h=u.length,r=0;r<h;r++)i=u[r],f=gx.fx.findControl(e,i.obj,i.cId,!0),f!=null&&gx.fx.isUnderMouse(f)&&i.hdl.call(i.obj)},highlight:function(n,t,i){var u=gx.color.fromRGB(t[0],t[1],t[2]),r=gx.dom.getStyle(n,"backgroundColor"),f=r=="transparent"||r=="rgba(0, 0, 0, 0)";return{play:function(){n.style.backgroundColor=u.Html;setTimeout(this.end,i)},end:function(){var t=r;f&&(t="transparent");n.style.backgroundColor=t}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(n,t,i){i&&(gx.evt.setEventRow(n,this.dragCtrl),this.obj=i.call(n,this.dragCtrl),this.obj.gxDragTypes=t)},drop:function(n,t,i){i&&i.call(t,n,this.dragCtrl,this.obj)},noDrop:function(){var n=this.noDropCtrl;n!=null&&n.gxDndClassName&&(n.className=n.gxDndClassName+"NoAcceptDrag")},out:function(){var n=this.dropCtrl;n&&n.gxClassName&&(n.className=n.gxClassName);this.dropCtrl=null;n=this.noDropCtrl;n!=null&&n.gxClassName&&(n.className=n.gxClassName);this.noDropCtrl=null},over:function(){var n=this.dropCtrl;n!=null&&n.gxDndClassName&&(n.className=n.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){this.clonCtrl!=null&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var n=this.clonCtrl,t;n!=null&&(this.toHdl==null&&(n.dropLeft=parseFloat(n.style.left||"0"),n.dropTop=parseFloat(n.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored()?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(t=this.nextCoords(),this.moveDragControl(t.X,t.Y)))},nextCoords:function(){var n=this.clonCtrl,r=parseFloat(n.style.left||"0"),u=parseFloat(n.style.top||"0"),t=0,i=0;return r>=u?(t=r-1,i=n.dropTop-(n.dropTop-n.originalTop)*(n.dropLeft-t)/(n.dropLeft-n.originalLeft)):(i=u-1,t=n.dropLeft-(n.dropTop-i)*(n.dropLeft-n.originalLeft)/(n.dropTop-n.originalTop)),t<=n.originalLeft&&(t=n.originalLeft),i<=n.originalTop&&(i=n.originalTop),{X:t,Y:i}},moveControl:function(n){if(this.clonCtrl==null){var i=10,t=document.createElement("DIV");t.style.position="absolute";n.gxDndClassName&&(t.className=n.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(t,!0);t.innerHTML=this.dragInfo();gx.fn.setOpacity(50,t);document.body.appendChild(t);t.originalLeft=gx.evt.mouse.x-i;t.originalTop=gx.evt.mouse.y-i;t.diffLeft=i;t.diffTop=i;this.clonCtrl=t}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var n=this.clonCtrl;if(n==null)return!0;var t=parseFloat(n.style.left||"0"),i=parseFloat(n.style.top||"0"),r=t-n.originalLeft,u=i-n.originalTop;return r<=0&&u<=0?!0:!1},moveDragControl:function(n,t){try{var i=this.clonCtrl;i!=null&&(i.style.left=n-i.diffLeft+"px",i.style.top=t-i.diffTop+"px")}catch(r){this.deleteClonControl()}},dragInfo:function(){var n,i,t,r;if(this.obj!=null){n="";i="";for(t in this.obj){if(t!="gxDragTypes"){if(r=[n],typeof this.obj[t]=="function")continue;i+=t+": "+this.obj[t]+"<\/br>";n=r[0]}if(n>=5){i+="...";break}n++}return i}return""},deleteHandlers:function(n){gx.thread.Mutex(this,this.deleteHandlersSync,[n])},deleteHandlersSync:function(n){for(var i=[],r=this.sources.length,u,f,t=0;t<r;t++)u=this.sources[t],u.obj!=n&&i.push(u);for(this.sources=i,i=[],r=this.targets.length,t=0;t<r;t++)f=this.targets[t],f.obj!=n&&i.push(f);this.targets=i},addSource:function(n,t,i,r,u){gx.thread.Mutex(this,this.addSourceSync,[n,t,i,r,u])},addSourceSync:function(n,t,i,r,u){t=gx.lang.emptyObject(n)?t:n.CmpContext+t;var f={id:t,cssClass:i,types:r,obj:n,hdl:u};gx.fx.addElement(this.sources,f,!1)},addTarget:function(n,t,i,r,u){gx.thread.Mutex(this,this.addTargetSync,[n,t,i,r,u])},addTargetSync:function(n,t,i,r,u){t=gx.lang.emptyObject(n)?t:n.CmpContext+t;var f={id:t,cssClass:i,types:r,obj:n,hdl:u};gx.fx.addElement(this.targets,f,!0)},deleteSource:function(n){gx.thread.Mutex(this,this.deleteSourceSync,[n])},deleteSourceSync:function(n){this.sources=gx.fx.deleteElement(this.sources,n)},getSource:function(n){for(var i,t,u=gx.evt.source(n),f=this.sources.length,r=0;r<f;r++)if(i=this.sources[r],this.dragCtrl=gx.fx.findControl(u,i.obj,i.id),t=this.dragCtrl,t!=null&&(t.gxClassName=t.className,t.gxDndClassName=i.cssClass,gx.fx.isUnderMouse(t)))return i;return this.dragCtrl=null,this.obj=null,null},getTarget:function(n,t){for(var r,i,f=gx.evt.source(n),e=this.targets.length,u=0;u<e;u++)if(r=this.targets[u],i=gx.fx.findControl(f,r.obj,r.id),i!=null&&(i.gxClassName=i.className,i.gxDndClassName=r.cssClass,gx.fx.isUnderMouse(i)))return gx.fx.matchingTypes(t,r.types)?(this.noDropCtrl=null,this.dropCtrl=i,r):(this.out(),this.noDropCtrl=i,this.noDrop(),null);return this.out(),null}},notifications:{queuedEvents:[],initialize:function(n){if(n.notifications||(n.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage.notifications",n,gx.fx.notifications.notify.closure(n),{single:!1,doNotDelete:n.IsMasterPage}),gx.fx.obs.addObserver("gx.onafterevent",n,gx.fx.notifications.fireQueuedEvents.closure(n),{single:!1,doNotDelete:n.IsMasterPage})),!this.webSocket){n.fullAjax||gx.dbg.write('Warning: WebNotifications are not supported with "Web User Experience": "Previous versions". You must use Smooth.');var t=gx.fn.getHidden("GX_WEBSOCKET_PORT"),i=gx.basePath&&gx.basePath.length>0?"/":"";this.webSocket=new gx.webSocket({port:t,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:location.protocol==="https:"?"wss://":"ws://",host:t?location.hostname+":"+t+"/":location.host+"/",resourceUrl:i+(gx.gen.isDotNet()?"gxwebsocket.svc?":"gxwebsocket?"),basePath:gx.basePath,namespace:"notifications"})}},deinit:function(){gx.fx.notifications.queuedEvents=[]},addTracker:function(n,t,i,r,u,f){gx.fx.notifications.initialize(n);n.notifications[t||""]={gxO:n,handler:u,eventName:i,type:r,noWait:f}},notify:function(n){var i=gx.json.evalJSON(n),r=i.GroupName||"",t=this.notifications[r];t&&(gx.fx.notifications.queuedEvents.push({notifObj:t,data:i}),(t.noWait||gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){for(var n,t,f,r,e,u,i=0;i<gx.fx.notifications.queuedEvents.length;i++)if(n=gx.fx.notifications.queuedEvents[i],!n.executed){if(gx.fx.notifications.queuedEvents.splice(i--,1),t=n.notifObj.gxO,n.executed=!0,!gx.lang.emptyObject(n.data.Object)&&n.data.Object.toUpperCase()!=t.ServerClass.toUpperCase())continue;f=n.notifObj.type;r=n.notifObj.eventName;r?(e=t.isServerEvent(r),u={},u[f[0][0]]=n.data,t.setEventParameters(n.notifObj.type,u),gx.evt.dispatcher.dispatch(t.getServerEventName(r),t,0,0,e,undefined,undefined,!0)):n.notifObj.handler(n.data)}}},ctx:{setters:[],trackers:[],deleteHandlers:function(n){gx.thread.Mutex(this,this.deleteHandlersSync,[n])},deleteHandlersSync:function(n){for(var i=[],r=this.setters.length,u,f,t=0;t<r;t++)u=this.setters[t],u.obj!=n&&i.push(u);for(this.setters=i,i=[],r=this.trackers.length,t=0;t<r;t++)f=this.trackers[t],f.obj!=n&&i.push(f);this.trackers=i},addSetter:function(n,t,i,r,u){gx.thread.Mutex(this,this.addSetterSync,[n,t,i,r,u])},addSetterSync:function(n,t,i,r,u){t=gx.lang.emptyObject(n)?t:n.CmpContext+t;var f={id:t,cssClass:i,types:r,obj:n,hdl:u};gx.fx.addElement(this.setters,f,!1)},addTracker:function(n,t,i){gx.thread.Mutex(this,this.addTrackerSync,[n,t,i])},addTrackerSync:function(n,t,i){var r=n.CmpContext+n.IsMasterPage.toString(),u={id:r,cssClass:"",types:t,obj:n,hdl:i};gx.fx.addElement(this.trackers,u,!0)},deleteSetter:function(n){gx.thread.Mutex(this,this.deleteSetterSync,[n])},deleteSetterSync:function(n){this.setters=gx.fx.deleteElement(this.setters,n)},notify:function(n,t,i){gx.thread.Mutex(this,this.notifySync,[n,t,i])},notifySync:function(n,t,i){var h,r,c,o;if(n&&n.forcedFocus){n.forcedFocus=!1;return}var f,e=gx.lang.emptyObject,s=function(n,t){var i=gx.O;gx.setGxO(n);t();gx.setGxO(i)},u=null;if(e(t)||e(i))for(h=this.setters.length,f=0;f<h;f++)if(r=this.setters[f],e(n)){if(u=gx.fx.findControl(null,r.obj,r.id),u!=null&&e(u.onfocus)&&gx.fx.isUnderMouse(u)){s.apply(this,[r.obj,function(){gx.evt.setEventRow(r.obj,u);t=r.types;i=r.hdl.call(r.obj,u)}]);break}}else if(n.id==r.id){s.apply(this,[r.obj,function(){u=n;gx.evt.setEventRow(r.obj,u);t=r.types;i=r.hdl.call(r.obj,u)}]);break}if(!e(t)&&(i||i===""))for(c=this.trackers.length,f=0;f<c;f++)o=this.trackers[f],gx.fx.matchingTypes(t,o.types)&&s.apply(this,[o.obj,function(){o.hdl.call(o.obj,null,u,i)}])}}};gx.date=function(){var n=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\.?([0-9]{1,3})?\s?(AM|PM)?/i,i=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?[\.:]?([0-9]{1,3})?\s?(AM|PM)?/i,r=new RegExp("^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$"),u=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,t=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(n){return this.getDay()==n.getDay()&&this.getMonth()==n.getMonth()&&this.getFullYear()==n.getFullYear()?!0:!1},toJson:function(){var n=new gx.date.gxdate("");return n.assign_date(this),n.json()},isoString:function(n){return n.toISOString()},jsonNullFormat:{Default:0,YearOne:1},gxdate:function(r,u){this.json=function(){var r=this.TimeFmt,n,t,i;return this.TimeFmt=24,n=this.HasTimePart,t=this.HasDatePart,this.HasTimePart=!0,this.HasDatePart=!0,i=this.getStringWithFmt("Y4MD")+" "+(n?this.getTimeString(!0,!0,!0,this.Value.getMilliseconds()>0):"00:00:00"),this.TimeFmt=r,this.HasTimePart=n,this.HasDatePart=t,i};this.mapCTODFormatToPattern=function(n){return n=="ANSI"?"Y4MD":n};this.emptyDateString=function(n){return n.indexOf("Y4")==-1?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":n=="Y4MD"?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(n){if(n=this.mapCTODFormatToPattern(n),this.Value-t==0)return this.emptyDateString(n);var i=n,f,e,r,u=this.FormatPos(n);return this.JsonNullFormat===gx.date.jsonNullFormat.YearOne?(f="01",e="01",r="0001"):(f=gx.text.padl(this.Value.getDate().toString(),2,"0"),e=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),r=gx.text.padl(this.Value.getFullYear().toString(),4,"0")),i=i.replace("D",f+(u.DPos<3?"/":"")),i=i.replace("M",e+(u.MPos<3?"/":"")),n.indexOf("Y4")==-1?(r=r.slice(2,4),i=i.replace("Y",r+(u.YPos<3?"/":""))):i=i.replace("Y4",r+(u.YPos<3?"/":"")),i};this.getString=function(n){return gx.lang.emptyObject(n)&&(n=gx.dateFormat),this.getStringWithFmt(n)};this.toISOString=function(){return this.Value.toISOString()};this.toString=function(){var n=this.HasTimePart?" "+this.getTimeString(!0,!0):"";return this.getString()+n};this.gxdtoc=function(n,t){var i=this.getStringWithFmt(this.mapCTODFormatToPattern(n));return i.replace("/",t)};this.getUrlVal=function(){var n,t,i;if(gx.date.isNullDate(this))return"";this.HasDatePart?(n=gx.text.padl(this.Value.getDate().toString(),2,"0"),t=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),i=gx.text.padl(this.Value.getFullYear().toString(),4,"0")):(n="01",t="01",i="0001");var r=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",u=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",f=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",e=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return i+t+n+r+u+f+e};this.getTimeString=function(n,t,i,r){var e,o,f,u;if(gx.date.isNullDate(this)&&gx.blankWhenEmpty)return e="",i&&(e+="  "),n&&(e+="   "),t&&(e+="   "),r&&(e+="    "),e;o="";f=this.Value.getHours();i=i||!0;this.TimeFmt==12&&f>=12?(f>12&&(f=f-12),o=" PM"):this.TimeFmt==12&&(o=" AM");var s=this.HasTimePart?gx.text.padl(f.toString(),2,"0"):"",h=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",c=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",l=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return f===0&&o!==""&&(s="12"),u="",i&&(u=s),n&&(u=u+":"+h),t&&(u=u+":"+c),r&&(u=u+"."+l),u+o};this.FormatPos=function(n){var u,i,r,t;return n=="ANSI"?(u=1,i=2,r=3):(t=n.indexOf("Y4"),u=t==-1?n.indexOf("Y")+1:t+1,i=n.indexOf("M"),t!==0&&i++,r=n.indexOf("D"),t!==0&&r++),{YPos:u,MPos:i,DPos:r}};this.assign_date=function(n){n instanceof gx.date.gxdate?(this.Value=n.Value,this.HasTimePart=n.HasTimePart,this.HasDatePart=n.HasDatePart):this.Value=n===undefined?t:n};this.toUTC=function(){if(gx.date.isNullDate(this)||typeof gx.StorageTimeZone=="undefined"||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var n=new gx.date.gxdate("");return n.Value.setTime(this.Value.getTime()+this.Value.getTimezoneOffset()*6e4),n.HasTimePart=this.HasTimePart,n.HasDatePart=this.HasDatePart,n};this.fromUTC=function(){if(gx.date.isNullDate(this)||typeof gx.StorageTimeZone=="undefined"||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var n=new gx.date.gxdate("");return n.Value.setTime(this.Value.getTime()-this.Value.getTimezoneOffset()*6e4),n.HasTimePart=this.HasTimePart,n.HasDatePart=this.HasDatePart,n};this.assign_string=function(t,r,u,f){var b=n,e=b.exec(t),k=0,d,nt,w,h;if(e!=null&&(d=t.indexOf(e[0]),d>0&&gx.text.substring(t,d,1)=="."&&(e=null)),e==null)t.indexOf("  /  /  ")!=-1&&(u=!0);else for(nt=e.length,w=1;w<nt;w++)gx.lang.emptyObject(e[w])||k++;var c=this.FormatPos(r),o=0,l=0,a=0,s=0,v=0,y=0,p=0;try{if(this.HasDatePart=!0,c.DPos+c.MPos+c.YPos==6&&e!=null&&k>=3){if(e[c.YPos]!=null&&(o=parseInt(e[c.YPos],10)),isNaN(o))throw"InvalidDate";if(o<this.FYearOfCentury?o+=2e3:o<100?o+=1900:o<1e3&&(o+=1e3),e[c.MPos]!=null&&(l=parseInt(e[c.MPos],10)-1),isNaN(l)||l<0||l>11)throw"InvalidDate";if(e[c.DPos]!=null&&(a=parseInt(e[c.DPos],10)),isNaN(a)||a<0||a>gx.date.maxDays(l,o))throw"InvalidDate";}else this.HasDatePart=!1;if(this.HasTimePart=!1,h=0,e==null?(b=i,e=b.exec(t),e!=null&&(h=1,this.HasTimePart=!0)):k>3&&(h=4,this.HasTimePart=!0),this.HasTimePart&&!u){if(e[h]!=null&&(s=parseInt(e[h],10)),gx.lang.emptyObject(e[h])||isNaN(s)){this.HasTimePart=!1;throw"InvalidHour";}if(e[h+1]!=null&&(v=parseInt(e[h+1],10)),isNaN(v)&&(v=0),e[h+2]!=null&&(y=parseInt(e[h+2],10)),isNaN(y)&&(y=0),e[h+3]!=null&&(p=parseInt(e[h+3],10)),isNaN(p)&&(p=0),!this.validTime(t.toLowerCase().indexOf("m")!=-1,s,v,y,p))throw"InvalidHour";(t.indexOf("PM")!=-1||t.indexOf("pm")!=-1)&&s<12&&(s+=12);(t.indexOf("AM")!=-1||t.indexOf("am")!=-1)&&s==12&&(s=0)}}catch(g){if(f)throw g;else g=="InvalidDate"&&(o=0,l=0,a=0,s=0,v=0,y=0,p=0),g=="InvalidHour"&&(s=0,v=0,y=0,p=0)}this.Value=new Date(o,l,a,s,v,y,p);o+l+a+s+v+y+p>0&&(!this.HasTimePart||u)&&this.Value.getDate()!=a&&(this.Value=new Date(Date.UTC(o,l,a,s+12,v,y,p)))};this.validTime=function(n,t,i,r,u){return n&&t>12?!1:!n&&(t>24||t==24&&i+r>0)?!1:i<=59||r<=59||u<=999};this.compare=function(n){return typeof n=="string"?this.compare_string(n):this.compare_date(n)};this.compare_string=function(n){var t=new gx.date.gxdate(n);return this.compare_date(t.Value)};this.compare_date=function(n){var t;return n?(t=n instanceof gx.date.gxdate?n.Value:n,this.HasTimePart?this.Value-t:this.Value.getFullYear()>t.getFullYear()?1:this.Value.getFullYear()<t.getFullYear()?-1:this.Value.getMonth()>t.getMonth()?1:this.Value.getMonth()<t.getMonth()?-1:this.Value.getDate()>t.getDate()?1:this.Value.getDate()<t.getDate()?-1:0):null};this.JsonNullFormat=gx.date.jsonNullFormat.Default;this.TimeFmt=gx.timeFormat||12;this.SFmt=u||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;typeof r=="string"?this.assign_string(r,this.SFmt):this.assign_date(r)},isANSIDateTime:function(t){if(typeof t=="string"){var i=n;if(i.test(t))return!0}return!1},isANSIDate:function(n){if(typeof n=="string"){var t=r;if(t.test(n))return!0}return!1},isLeapYear:function(n){return n%400==0?!0:n%100==0?!1:n%4==0?!0:!1},dateObject:function(n){return n instanceof this.gxdate?n.Value:typeof n=="string"?new this.gxdate(n,this.isANSIDate(n)?"Y4MD":undefined).Value:n instanceof Date?n:new Date},gxdateObject:function(n){if(n instanceof this.gxdate)return n;if(typeof n=="string")return new this.gxdate(n,this.isANSIDate(n)?"Y4MD":undefined);if(n instanceof Date){var t=new this.gxdate("");return t.assign_date(n),t}return new this.gxdate("")},clonedDate:function(n,t){var i=new this.gxdate("");return i.assign_date(t),n instanceof this.gxdate&&(i.SFmt=n.SFmt,i.HasTimePart=n.HasTimePart,i.HasDatePart=n.HasDatePart),i},nullDate:function(){return new this.gxdate("").Value},now:function(){var n=this.today();return n.HasTimePart=!0,n.HasDatePart=!0,n},today:function(){var n=new this.gxdate("");return n.assign_date(new Date),n},ctot:function(n,t){return new this.gxdate(n,t)},ctod:function(n,t){var i=new this.gxdate(n,t);return i.Value.setHours(0,0,0,0),i},ymdtod:function(n,t,i){var r=new this.gxdate(n+"/"+t+"/"+i,"ANSI");return r.Value.setHours(0,0,0,0),r},ymdhmstot:function(n,t,i,r,u,f){return new this.gxdate(n+"/"+t+"/"+i+" "+r+":"+u+":"+f,"ANSI")},hour:function(n){return new this.gxdate(n).Value.getHours()},minute:function(n){return new this.gxdate(n).Value.getMinutes()},second:function(n){return new this.gxdate(n).Value.getSeconds()},millisec:function(n){return n*864e5},day:function(n){return new this.gxdate(n).Value.getDate()},month:function(n){return new this.gxdate(n).Value.getMonth()+1},year:function(n){return new this.gxdate(n).Value.getFullYear()},addDays:function(n,t){return this.addMill(n,this.dayToMillisec(t))},addSec:function(n,t){return this.addMill(n,this.secToMillisec(t))},addMill:function(n,t){var i=this.dateObject(n).clone(),r=new this.gxdate,u;return r.assign_date(i),u=i.getMilliseconds(),i.setMilliseconds(u+t),r.getString(this.isANSIDate(n)?"Y4MD":undefined)},secDiff:function(n,t){return this.millisecToSec(this.milliDiff(n,t))},daysDiff:function(n,t){return this.millisecToDay(this.milliDiff(n,t))},milliDiff:function(n,t){var i=this.gxdateObject(n),r=this.gxdateObject(t);return n=i.Value.valueOf(),t=r.Value.valueOf(),n-t},dayToMillisec:function(n){return n*864e5},secToMillisec:function(n){return n*1e3},millisecToDay:function(n){return n/864e5},millisecToSec:function(n){return n/1e3},dateParm:function(n){return typeof n=="string"?new this.gxdate(n):n},urlDate:function(n,t){var r,i;return(r=typeof n.value!="undefined"?n.value:gx.dom.spanValue(n)||n,i=new this.gxdate(r,t),!this.isNullDate(i))?i.Value.getFullYear().toString()+gx.text.padl((i.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(i.Value.getDate().toString(),2,"0"):""},urlDateTime:function(n,t){var r,i;if(r=typeof n.value!="undefined"?n.value:gx.dom.spanValue(n)||n,i=new this.gxdate(r,t),i.HasDatePart){if(!this.isNullDate(i))return i.Value.getFullYear().toString()+gx.text.padl((i.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(i.Value.getDate().toString(),2,"0")+gx.text.padl(i.Value.getHours().toString(),2,"0")+gx.text.padl(i.Value.getMinutes().toString(),2,"0")+gx.text.padl(i.Value.getSeconds().toString(),2,"0")+(i.Value.getMilliseconds()===0?"":gx.text.padl(i.Value.getMilliseconds().toString(),3,"0"))}else return"00010101"+gx.text.padl(i.Value.getHours().toString(),2,"0")+gx.text.padl(i.Value.getMinutes().toString(),2,"0")+gx.text.padl(i.Value.getSeconds().toString(),2,"0");return""},isNullDate:function(n){n instanceof this.gxdate&&(n=n.Value);var t=this.nullDate();return t.getFullYear()!=n.getFullYear()?!1:t.getMonth()!=n.getMonth()?!1:t.getDate()!=n.getDate()?!1:t.getHours()!=n.getHours()?!1:t.getMinutes()!=n.getMinutes()?!1:t.getSeconds()!=n.getSeconds()?!1:t.getMilliseconds()!=n.getMilliseconds()?!1:!0},dtoc:function(n,t,i){var r=new this.gxdate(n,this.isANSIDate(n)?"Y4MD":undefined);return r.gxdtoc(t,i)},dttoc:function(n,t,i){var f=new this.gxdate(n,this.isANSIDateTime(n)?"Y4MD":undefined),r=gx.dateFormat,u="";return(t>0&&(t>8&&r.indexOf("Y4")==-1&&(r=r.replace("Y","Y4")),u=f.getStringWithFmt(r)+" "),i>0)?u+f.getTimeString(i>3,i>=8,i>1,i>=12):u},nulldate_toc:function(n,t){var r=new this.gxdate(""),i,u;return(r.HasTimePart=!0,r.HasDatePart=!0,i=gx.dateFormat,u="",n>0&&(n>8&&i.indexOf("Y4")==-1&&(i=i.replace("Y","Y4")),u=r.getStringWithFmt(i)+" "),t>0&&!gx.blankWhenEmpty)?u+r.getTimeString(t>3,t>=8,t>1,t>=12):u},addyr:function(n,t){return this.addmth(n,12*t)},addmth:function(n,t){var r=this.gxdateObject(n),i;return n=new Date(this.dateObject(n).getTime()),i=n.getDate(),n.setDate(1),n.setMonth(n.getMonth()+t*1),n.setDate(Math.min(i,this.maxDays(n.getMonth(),n.getFullYear()))),this.clonedDate(r,n)},dtadd:function(n,t){var r=this.gxdateObject(n),i;return n=new Date(this.dateObject(n).getTime()),i=n.getMilliseconds(),n.setMilliseconds(i+t*1e3),this.clonedDate(r,n)},dtdiff:function(n,t){return n=this.dateObject(n),t=this.dateObject(t),(n-t)/1e3},maxDays:function(n,t){return[31,this.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][n]},eom:function(n){var i=this.gxdateObject(n),t;return n=this.dateObject(n),n=new Date(n.getTime()),t=this.maxDays(n.getMonth(),n.getFullYear()),n.setDate(t),this.clonedDate(i,n)},dow:function(n){return(n=this.dateObject(n),n.equalsNoTime(this.nullDate()))?0:n.getDay()+1},age:function(n,t){var r,i,u,o,f,e;if(i=this.dateObject(n),r=this.dateObject(t),e=this.nullDate(),i.equalsNoTime(e)||r.equalsNoTime(e)||i.equalsNoTime(r))return 0;if(r>=i){if(o=r.getUTCHours()*36e5+r.getUTCMinutes()*6e4+r.getUTCSeconds()*1e3-(i.getUTCHours()*36e5+i.getUTCMinutes()*6e4+i.getUTCSeconds()*1e3),r.getUTCDate()>i.getUTCDate()||r.getUTCDate()==i.getUTCDate()&&o>=0)u=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds()));else for(u=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth()-1,i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds())),f=r.getUTCMonth()-1,f==-1&&(f=11);u.getUTCMonth()!=f;)u.setUTCDate(u.getUTCDate()-1);return u.getUTCMonth()>=i.getUTCMonth()?u.getUTCFullYear()-i.getUTCFullYear():u.getUTCFullYear()-1-i.getUTCFullYear()}return 0},valid_date:function(n,t,i,r,f,e,o,s){var nt=o||!1,tt=u,y,it=!1,p=n.value,a="",w=i,h="",c="^[ ]*(",rt=t>0?"GXM_invaliddate":"GXM_invalidtime",b,l,v,k,ut,d,g;if(a=gx.num.replaceFullWidthNumerals(p),a=a.split("\n")[0],i=i=="YMD"?1:0,f=f==12?1:0,tt.test(a)?(it=!0,a="",p=""):t>0&&(a.length===4||a.length===5&&a[2]==="/")&&(b=(new Date).getFullYear().toString().substring(t===10?0:2),a=i===1?b+a:a+b),c=t>0?t==8?c+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":i===0?nt?c+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":c+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":nt?c+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":c+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":c+"( )?( )?( )?",r>0&&(c=c+"(",t>0&&(c=c+"[ ]*"),c=c+"([0-9]{1,2})",c=r>2?c+"(:?([0-9]{1,2}))?":c+"(( )?)?",c=r>5?c+"(:?([0-9]{1,2}))?":c+"(( )?)?",c=r>8?c+"(\\.?([0-9]{1,3}))?":c+"(( )?)?",c=f==1?c+"[ ]*(a|am|p|pm)?":c+"(( )?)?",c=c+")?"),c=c+")?[ ]*$",y=new RegExp(c,"i"),y.test(a)){l=a.match(y);t>0?(v="/",a.indexOf("-")>0&&(v="-"),l[2]?h=l[2]+v+l[3]+v+l[4]:(h=s==1?"        ":"  "+v+"  "+v+"  ",t==10&&(h+="  "))):h="";r>0&&(t>0&&(h=h+" "),s!=1||l[6]||l[8]||l[10]||l[12]?(l[6]?h=h+l[6]:it?(k=a.match(tt),h=k[4]?h+k[4]:h+(f==1?"12":"00")):h=h+(f==1?"12":"00"),r>2&&(h=l[8]?h+":"+l[8]:h+":00"),r>5&&(h=l[10]?h+":"+l[10]:h+":00"),r>8&&(h=l[12]?h+"."+l[12]:h+".000"),f==1&&(ut=l[13]?l[13].substr(0,1):"a",h=ut.toLowerCase()=="p"?h+" PM":h+" AM")):h=h+"        ");d=new this.gxdate("",w);try{d.assign_string(h,w,r<=0,!0);gx.text.trim(h)!==""&&(h=this.formatDateTime(r,t,w,d))}catch(ft){return gx.fn.alert(n,gx.getMessage(rt)),gx.csv.setFormatError(n),!1}return h!=p&&(n.value=h,navigator.userAgent.indexOf("Firefox/2")!=-1&&n.onchange(),g=gx.O.getValidStructFld(n),g&&gx.O.refreshDependantGrids(g)),gx.csv.setFormatError(n,!1),!0}return gx.fn.alert(n,gx.getMessage(rt)),gx.csv.setFormatError(n),!1},formatDateTime:function(n,t,i,r){var f="",u;return n>0&&r.HasTimePart&&(f=r.getTimeString(n>=4,n>=8,undefined,n>=12)),u=i,t>8&&u.indexOf("Y4")==-1&&(u=u.replace("Y","Y4")),t>0?r.getStringWithFmt(u)+(r.HasTimePart?" "+f:""):r.HasTimePart?f:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();gx.text={stringBuffer:function(n){this.capacity=n||10;this.buffer=[];this.append=function(n){return this.buffer.push(n),this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return this.buffer.length===0?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var t=arguments[0],i=arguments.length,n=1;n<i;n++)t=t.replace("%"+n,gx.text.rtrim(arguments[n].toString()));return t},formatString:function(n,t,i,r){var f,e,s;if(i)return gx.text.padl("",t,"*");if(!gx.lang.emptyObject(r)&&this.startsWith(r,"@")&&r.indexOf("!")>0){var u="",o=this.padr("",n?n.length:0,"!"),h=this.replaceAll(o,"!"," ");if(n)for(f=0,e=0;f<h.length&&e<n.length;)s=n[e],this.isSeparator(o[f])?(s==o[f]?(e++,u=u+s):u=u+h[f],f++):(u=u+this.getCaret(o,s,f,u),f++,e++);else u=h;return gx.text.rtrim(u)}return n},getCaret:function(n,t,i,r){var f,u;switch(n[i]){case"9":return isNaN(t)?" ":t;case"X":return t;case"A":case"M":case"!":return t.toUpperCase();case"Z":if(t>="1"&&t<="9")return t;if(t=="0"){for(f=!0,u=0;u<i;u++)if(r[u]!=" "){f=!1;break}return f?" ":"0"}}return" "},isSeparator:function(n){return n!="9"&&n!="X"&&n!="!"&&n!="Z"&&n!="A"&&n!="M"},replaceAll:function(n,t,i){return n.toString().indexOf(t)!=-1?String(n).split(t).join(i):n},charReplace:function(n,t,i){for(var e,o,r,f="",s=n.length,u=0;u<s;u++){for(e=!1,o=t.length,r=0;r<o;r++)if(n.charAt(u)==t[r]&&r<i.length){f+=i[r];e=!0;break}e===!1&&(f+=n.charAt(u))}return f},length:function(n){return n.length},upper:function(n){return n.toUpperCase()},lower:function(n){return n.toLowerCase()},padr:function(n,t,i){var e=n.length,f=t-e,r,u;if(f<1)return n.substring(0,t);for(r=n,u=0;u<f;u++)r+=i;return r},padl:function(n,t,i){var e=n.length,f=t-e,r,u;if(f<1)return n.substring(0,t);for(r="",u=0;u<f;u++)r+=i;return r+n},ltrimstr:function(n,t,i){return this.ltrim(gx.num.str(n,t,i))},ltrim:function(n){return n.toString().replace(/^ */,"")},rtrim:function(n){return n.toString().replace(/ *$/,"")},trim:function(n){return this.rtrim(this.ltrim(n))},chr:function(n){return String.fromCharCode(n)},like:function(n,t){if(t===null)return!1;t=t.replace(new RegExp("([\\.\\\\\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!\\<\\>\\|\\:\\-])","g"),"\\$1");var i=new RegExp(t.replace(/%/g,".*").replace(/_/g,"."));return i.test(n)},compare:function(n,t){return this.rtrim(n).localeCompare(this.rtrim(t))},concat:function(n,t,i){return this.rtrim(n)+i+t},space:function(n){for(var t="",i=0;i<n;i++)t+=" ";return t},substring:function(n,t,i){return i<0?n.toString().substring(t-1):n.toString().substring(t-1,t-1+i)},tostring:function(n){return n.toString()},toformattedstring:function(n){return n.toString().replace(".",gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(n,t){var i=gx.text.escapeMapping[t];return i?i:(i=t.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))},escapeString:function(n){return this.escapeRegex.start.test(n)?'"'+n.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+n+'"'},indexOf:function(n,t,i){return i>n.length?0:(i<=0&&(i=1),n.indexOf(t,i-1)+1)},lastIndexOf:function(n,t,i){return i>n.length?0:(i<=0&&(i=n.length),n.lastIndexOf(t,i-1)+1)},endsWith:function(n,t){return n.indexOf(t,n.length-t.length)!==-1},startsWith:function(n,t){return this.indexOf(n,t)==1},contains:function(n,t){return this.indexOf(n,t)>0},charAt:function(n,t){return n.charAt(t-1)}};gx.num=function(){var t=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,n=function(n,t,i,r){var u=gx.lang.instanceOf,f=typeof gx.num.dec=="undefined"?null:gx.num.dec.bigDecimal,e=gx.thousandSeparator,o=gx.decimalPoint;return(typeof i=="string"&&(i=gx.num.parseFloat(i,e,o)),typeof r=="string"&&(r=gx.num.parseFloat(r,e,o)),u(i,f)&&u(r,Number))?i[n](new f(r.toString())).toString():u(i,Number)&&u(r,f)?new f(i.toString())[n](r).toString():u(i,Number)&&u(r,Number)||typeof gx.num.dec=="undefined"?t(i,r):i[n](r)};return{str:function(n,t,i){if(typeof n=="string")return n;var r;return typeof t=="undefined"&&(t=10),(typeof i=="undefined"||t-1<=i)&&(i=0),r=n.toFixed(i),r.length<=t?gx.text.padl(r,t," "):gx.text.padr("",t,"*")},compare:function(n,t){return typeof n=="number"&&typeof t=="number"?n>t?1:n===t?0:-1:(typeof n=="number"&&(n=new gx.num.dec.bigDecimal(n.toString())),typeof t=="number"&&(t=new gx.num.dec.bigDecimal(t.toString())),gx.lang.instanceOf(n,gx.num.dec.bigDecimal)&&gx.lang.instanceOf(t,gx.num.dec.bigDecimal)?n.compareTo(t):n-t)},maxNumericPrecision:function(){return 15},extractValue:function(n,t){var u,i,r;if(t=gx.num.replaceFullWidthNumerals(t),gx.lang.instanceOf(t,Number)||this.overflowNumber(t))return t;if(i=t===undefined?"":t,n)for(u=n.charAt(0)=="+"||n.charAt(0)=="-"?n.replace(/[\+\-\d,*\.*Z*\s]+/,""):n.replace(/[\d,*\.*Z*\s]+/g,""),n.lastIndexOf(".")!=n.indexOf(".")&&(i=gx.text.replaceAll(i,".","")),r=0;r<u.length;r++)i=i.replace(u.charAt(r),"");return gx.text.trim(i)},formatNumber:function(n,t,i,r,u,f,e){var et,o,h,w,s,tt,it,p,c,a,rt,b,l,ut,v;if(!i||n===""&&e==="Blank")return n?n.toString():"";n=gx.lang.emptyObject(n)?"0":n;var k=i.indexOf(",")!=-1?gx.thousandSeparator:"",d=gx.decimalPoint,y,g=!1,ft=gx.numericLenDec(i),nt=ft.Integers;if(t=ft.Decimals,typeof n=="string"&&k&&(n=gx.text.replaceAll(n,k,"")),typeof n=="string"&&(n=n.replace(d,".")),gx.num.overflowNumber(n))return n;try{et=typeof gx.num.dec!="undefined"&&n instanceof gx.num.dec.bigDecimal;n=!et&&t===0?gx.num.trunc(n,0).toString():gx.num.setScale(n,t,d)}catch(ot){n=n.toString()}if(o=n.split("."),o[0]||(o[0]="0"),o[1]||(o[1]=""),f)if(o[1].length>t&&o[1].replace(/0*$/,"").length>t)throw"InvalidNumber";else if(u&&o[0].charAt(0)=="-"&&o[0].replace(/0*/,"").length>nt||!u&&o[0].charAt(0)=="-"||o[0].replace(/[+]?0*/,"").length>nt)throw"InvalidNumber";if(s=o[0].substring(0,nt),n<0&&(u=!0),o[1].length<t){for(tt=o[1],h=o[1].length+1;h<=t;h++)tt+="0";o[1]=tt}if(it="",u&&s.charAt(0)=="-"&&(it="-",s=s.substring(1)),k&&s.length>3){for(p=s,s="",w=3;w<p.length;w+=3)h=p.slice(p.length-w,p.length-w+3),s=k+h+s+"";w=p.substr(0,p.length%3==0?3:p.length%3);s=w+s}if(d=o[1]?d:"",t>0?(y=i.split("."),y[1]==gx.text.padr("",t,"Z")&&(g=!0)):(y=new Array(i),y.length>0&&gx.text.replaceAll(gx.text.replaceAll(y[0],",",""),"Z","").length===0&&(g=!0)),c=0,a="",y.length>1)for(rt=y[1],h=0;h<rt.length;h++)b=rt.charAt(h),b=="9"||b=="Z"?o[1].length>c?(a=a+o[1].charAt(c),c++):a=a+"0":b!="."&&b!=","&&(a=a+b);for(l="",ut=y[0],c=s.length-1,h=ut.length-1;h>=0;h--)v=ut.charAt(h),v=="9"||v=="Z"?c>=0?(v=="Z"&&Number(s.substring(0,c+1))===0||(l=s.charAt(c)+l),c--):l=(v=="9"?"0":"")+l:v!="Z"&&v!=","?l=v+l:v==","&&s.charAt(c)==k&&(l=s.charAt(c)+l,c--);return g&&(l=="0"||l==="")&&a.replace(/0+$/,"").length===0?"":it+l+(a?d+a:"")},add:function(t,i){return n("add",function(n,t){return n+t},t,i)},subtract:function(t,i){return n("substract",function(n,t){return n-t},t,i)},multiply:function(t,i){return n("multiply",function(n,t){return n*t},t,i)},divide:function(t,i){return n("divide",function(n,t){return n/t},t,i)},negate:function(n){return gx.lang.instanceOf(n,Number)||typeof gx.num.dec=="undefined"?-n:n.negate()},pow:function(t,i){return n("pow",function(n,t){return Math.pow(n,t)},t,i)},mod:function(t,i){return n("remainder",function(n,t){return n%t},t,i)},setScale:function(n,t){var i,r,u;if(gx.lang.instanceOf(n,Number))return n.toFixed(t);if(typeof n=="string"&&(n=gx.text.trim(n)),n.length<this.maxNumericPrecision()||typeof gx.num.dec=="undefined"){if(n.length===0&&t===0)return"0";if(i=n.split("."),i[1]||(i[1]=""),i[1].length<t){for(u=i[1],r=i[1].length+1;r<=t;r++)u+="0";return i[1]=u,i[0]+(i[1]===""?"":".")+i[1]}return Number(parseFloat(n)).toFixed(t)}return new gx.num.dec.bigDecimal(n).setScale(t,gx.num.dec.ROUND_UP).toString()},parseFloat:function(n,t,i){if(gx.lang.instanceOf(n,Number)||this.overflowNumber(n))return n;var r=this.toInvariant(n,t,i);return r.length>this.maxNumericPrecision()&&typeof gx.num.dec!="undefined"?new gx.num.dec.bigDecimal(r):parseFloat(r)},toInvariant:function(n,t,i){return typeof n=="number"||typeof gx.num.dec!="undefined"&&n instanceof gx.num.dec.bigDecimal?n:gx.text.replaceAll(n,t,"").replace(i,".")},parseInt:function(n,t,i){if(typeof n=="number")return n;var r=n;return r=gx.text.replaceAll(n,i,""),parseInt(r,t)},overflowNumber:function(n){return/\*(\**)/.test(n)},urlDecimal:function(n,t,i){if(typeof n!="undefined"){var r=typeof n.value!="undefined"?n.value:n;return r=this.parseFloat(r,t,i),r.toString()}return""},random:function(){return Math.random()},intval:function(n){var t=0;return n=typeof n!="undefined"?n.toString():"",t=n.length<gx.num.maxNumericPrecision()||typeof gx.num.dec=="undefined"?parseInt(n,0):new gx.num.dec.bigDecimal(n).setScale(0,gx.num.dec.ROUND_UP),isNaN(t)&&(t=0),t},val:function(n){n=gx.text.trim(n).replace(",",".");var t=this.parseFloat(n);return isNaN(t)&&(t=0),t},trunc:function(n,t){var r=n,i,u,f;if(n=n.toString(),i=n.indexOf("."),i!=-1){if(u=n.substring(0,i),t===0)return Number(u);f=n.substring(i+1,i+1+t);n=u+"."+f;r=gx.num.parseFloat(n);isNaN(r)&&(r=0)}return r},round:function(n,t){return t>=0?parseFloat(gx.num.decimalAdjust("round",n,-t).toFixed(t)):gx.num.roundNeg(n,t)},decimalAdjust:function(n,t,i){return typeof i=="undefined"||+i==0?Math[n](t):(t=+t,i=+i,isNaN(t)||!(typeof i=="number"&&i%1==0))?NaN:(t=t.toString().split("e"),t=Math[n](+(t[0]+"e"+(t[1]?+t[1]-i:-i))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+i:i)))},roundNeg:function(n,t){n=n.toString();var r=n.indexOf("."),f="0000000000000000000000",e="",i="",s="",u=0,c=parseInt(t,0)+1,l=""+f.substring(1,c),a="."+l+"5",h=parseFloat(a),o;return r==-1?(i=f,e=""+n):r===0?(e="0",u=0+parseFloat(n)+parseFloat(h),n=u+f,i=""+n.substring(1,n.length)):(u=parseFloat(n)+h,e=u.toString().substring(0,r),n=""+u+f,i=""+n.substring(r+1,r+1+parseInt(t,0))),i=i.substring(0,parseInt(t,0)),s=e+"."+i,o=parseFloat(s),isNaN(o)&&(o=0),o},normalize_decimal_sep:function(n,t,i,r){var u=r.lastIndexOf(i);return n.indexOf(".")>=0&&i==","&&u==-1&&r.lastIndexOf(".")==r.indexOf(".")?r=r.replace(".",i):n.indexOf(t)==-1&&i=="."&&u==-1&&r.lastIndexOf(",")==r.indexOf(",")&&(r=r.replace(",",i)),r},truncate:function(n,t,i){var r=n.lastIndexOf(t),u=n,f;return r!=-1&&(f=i>0?1:0,u=n.slice(0,r+parseInt(i,10)+f)),u},valid_decimal:function(n,t,i,r){var u=n.value,o=!0,f=gx.O.getValidStructFld(n),s=gx.rtPicture(f,n),h,e;if(r=s?gx.numericLenDec(s).Decimals:r,u=this.normalize_decimal_sep(s,t,i,u),gx.lang.emptyObject(f)||(u=gx.num.extractValue(s,u)),h=new RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+t+"[0-9]{3})*(\\"+i+"[0-9]*)?)?[ ]*$"),u)if(h.test(u)){e=gx.num.truncate(u,i,r);try{gx.lang.emptyObject(f)||(e=gx.num.formatNumber(e,f.dec,s,f.len,f.sign,!0,f.emptyAsNull));i!="."&&n.tagName=="SELECT"&&(e=gx.num.toInvariant(e,t,i))}catch(c){o=!1}o&&e!=gx.text.trim(n.value)&&(n.value=e,navigator.userAgent.indexOf("Firefox/2")!=-1&&n.onchange())}else o=!1;else o=!0;o?gx.csv.setFormatError(n,!1):(gx.csv.setFormatError(n),gx.fn.alert(n,gx.getMessage("GXM_badnum")))},valid_integer:function(n,t){var e,i,u,r=gx.O.getValidStructFld(n),f=gx.lang.emptyObject(r);if(i=n.value,f||(i=gx.num.extractValue(gx.rtPicture(r,n),i)),e=f||gx.rtPicture(r,n).indexOf(",")==-1?new RegExp("^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$"):new RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+t+"[0-9]{3})*[ ]*$"),u=!0,i)if(e.test(i)){try{f||(i=gx.num.formatNumber(i,r.dec,gx.rtPicture(r,n),r.len,r.sign,!0,r.emptyAsNull))}catch(o){u=!1}i!=gx.text.trim(n.value)&&(n.value=i,navigator.userAgent.indexOf("Firefox/2")!=-1&&n.onchange())}else u=!1;else u=n.type==="number"&&typeof n.validity!="undefined"?n.validity.valid:!0;u?gx.csv.setFormatError(n,!1):(gx.csv.setFormatError(n),gx.fn.alert(n,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(n){return typeof n=="string"?n.replace(t,function(n){return n.charCodeAt()==8213||n.charCodeAt()==12540?String.fromCharCode(45):String.fromCharCode(n.charCodeAt()-65248)}):n}}}();gx.color={rgb:function(n,t,i){return n*65536+t*256+i},css:function(n){return n.substring(0,3)=="rgb"?eval(n):n.charAt(0)=="#"?parseInt(n.substring(1),16):0},html:function(n){var t=this.toHex(n),i;return gx.lang.emptyObject(t)&&(t="000000"),t=gx.text.padl(t,6,"0"),i={},i.Hexa=t,i.Html="#"+t,i.R=parseInt(t.substring(0,2),16),i.G=parseInt(t.substring(2,4),16),i.B=parseInt(t.substring(4,6),16),i},fromRGB:function(n,t,i){var r={};return typeof n!="undefined"&&typeof t!="undefined"&&typeof i!="undefined"&&(r.Hexa=this.toHex(n)+this.toHex(t)+this.toHex(i),r.Html="#"+r.Hexa,r.R=n,r.G=t,r.B=i),r},ARGBToHex:function(n){var t=this.toHex(n>>16&255),i=this.toHex(n>>8&255),r=this.toHex(n&255);return t+i+r},toHex:function(n){var r,i,t;if(n===undefined)return"000000";if(n<0)return gx.color.ARGBToHex(n);if(r="0123456789ABCDEF",n===0)return n+"0";for(i=0,t="";n!==0;)i=n%16,n=(n-i)/16,t=r.charAt(i)+t;return t.length%2!=0&&(t="0"+t),t}};gx.grid=function(n){return{drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3,"0":"none","1":"uniform","2":"header","3":"report"},getImplClass:function(n,t){if(t){gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0);gx.lang.inherits(gx.ui.grid,n.isResponsive?gx.grid.responsiveGrid:gx.grid.impl,!0);gx.lang.inherits(t,gx.ui.grid,!0);var i=new t(gx.$);return n&&(i.ParentObject=n.parentObject,i.ControlName=n.gridName,n.parentObject.setUserControl(i)),i}return n.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(n){var t=n;return t=n!=undefined?n:1,t!=0?t:9999},setActiveGridRow:function(n,t){typeof n=="string"&&(n=gx.O.getGrid(n),n=n?n.grid:null);n&&n.gxAllowSelection&&(gx.csv.currentGridSelection=n,typeof t!="undefined"&&(n.toggleRowHoverById(n.gxHoveredRowId,!1),n.gxHoveredRowId=parseInt(t,10)-1,gx.grid.clearActiveGridHandlerInstalled||(gx.fx.obs.addObserver("gx.onclick",this,gx.grid.clearActiveGridHandler),gx.grid.clearActiveGridHandlerInstalled=!0)))},clearActiveGrid:function(n){n&&gx.csv.currentGridSelection!==n.grid||(delete gx.csv.currentGridSelection,delete gx.grid.clearActiveGridHandlerInstalled,gx.fx.obs.deleteObserver("gx.onclick",this,gx.grid.clearActiveGridHandler))},clearActiveGridHandler:function(n){var i=gx.evt.source(n.event),r=gx.fn.rowGridId(i),t=gx.fn.getGridObj(r);t&&t.grid.gxAllowSelection||gx.grid.clearActiveGrid()},handleKeyUpEvt:function(n){var t=gx.csv.currentGridSelection,i=!1;if(!t||!t.gxAllowSelection||t.gxAllowHovering)return i;switch(n.keyCode){case 38:case 40:t.ownerGrid.setSelection(t.ownerGrid.getSelection(),!0);gx.evt.cancel(n,!0);i=!0}return i},handleKeyPressEvt:function(n){var t=gx.csv.currentGridSelection,i=!1,r;if(!t||!t.gxAllowHovering&&!t.gxAllowSelection)return i;r=t.gxAllowHovering;switch(n.keyCode){case 38:r?i=t.setPreviousRowHovered():t.ownerGrid.setPreviousRowSelected(!1);gx.evt.cancel(n,!0);break;case 40:r?i=t.setNextRowHovered():t.ownerGrid.setNextRowSelected(!1);gx.evt.cancel(n,!0);break;case 13:i=t.ownerGrid.setSelection(t.gxHoveredRowId)&&t.gxOnLineActivate}return i},grid:function(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt){var ei="gx-grid",oi="gx-standard-grid",si="gx-freestyle-grid",hi="gx-responsive-grid",ci=0,gt=1,ti="gx-infinite-scrolling-container",ri="gx-infinite-scrolling-element",ui=function(n){return e.toUpperCase()+(h?"_MPAGE":"")+"_"+n},ii=function(n){return function(t){var i=this.parentObject.getGridById(u,t||gx.fn.currentGridRow(u));return n.call(this,i||this)}.closure(this)}.closure(this),dt,kt,fi,ni;this.parentObject=t;this.parentObject["sub"+f+"_Rows"]=ii(function(n){return n.grid.pageSize/n.grid.gxGridCols});this.parentObject[ui("nFirstRecordOnPage")]=ii(function(n){return n.grid.firstRecordOnPage});this.parentObject[ui("nEOF")]=ii(function(n){return n.grid.eof});this.gridLvl=i;this.gridLvlName=r;this.gridId=u;this.gridName=f;this.realGridName=e;this.containerName=o||this.gridName+"Container";this.parentName=c||"";this.pagingParms=[];this.lvlKey=l||[];this.isFreestyle=a||!1;this.isResponsive=at||!1;this.allowSelection=y||!1;this.allowHovering=this.allowSelection&&p||!1;this.allowCollapsing=ct||!1;this.collapsed=!1;this.sortable=!0;this.selectionColor=null;this.hoverColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=ft||!1;this.hasAddlines=et||!1;this.hasForEachLine=ot||!1;this.width=nt!=undefined?nt:0;this.widthUnit=tt||"";this.height=it!=undefined?it:0;this.heightUnit=rt||"";this.gridCols=v!=undefined?v:1;this.gridCols=this.gridCols!=0?this.gridCols:9999;this.gridRows=w!=undefined?w:5;this.gridResponsiveCols=vt||[1,1,1,1];this.usePaging=b||!1;this.usePaging=this.usePaging&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=k||!1;this.defaultSetsContext=d||!1;this.boundedCollType=g||"";this.boundedCollName=lt||"";this.contextMenu=null;this.gxContainerCtrl=null;this.lastRefreshParms="";this.gxComponentContext=s;this.isMasterPageGrid=h;this.htmlTags="";this.onLineActivate=ht;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.IsValidState=[];this.implClass=st;this.grid=gx.grid.getImplClass(this,st);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=this.gxComponentContext;this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=ut!=undefined?ut:"New Row";this.grid.beforeRenderCallbacks=[];this.grid.isAbstract=wt;this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.useUserControlModelValues=function(){return this.isUsercontrol&&!this.grid.useNativeChildControls};this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.grid.selectedRows=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.grid.useHiddensForControlValues=this.isUsercontrol&&(this.grid.useHiddensForControlValues||this.grid.useHiddensForControlValues==="undefined");this.gxCreateGridCode=function(n){var i,u,f=new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+n,this.gridName,this.containerName+"_"+n,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaultSetsContext,this.boundedCollType,this.width,this.widthUnit,this.height,this.heightUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing,this.boundedCollName,this.isResponsive,this.gridResponsiveCols,!1,ci,this.grid.isAbstract,this.InverseLoading),t=this.grid,r=f.grid;if(r.ControlLvl=this.gridLvl,r.GridId=this.gridId,r.GridRow=n,r.GridBaseName=this.gridName,t.Properties)for(i in t.Properties)r.setProp(i,t.Properties[i],t[i],t.PropTypes[i]);if(t.DynProperties)for(u=0,len=t.DynProperties.length;u<len;u++)i=t.DynProperties[u],r.setDynProp(i,t.Properties[i],t[i],t.PropTypes[i],!0);return f}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;this.grid.eof=this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.InfiniteScrolling=yt;this.InverseLoading=bt;this.ScrollType=pt;this.isAbstract=wt;this.addColumnDinCode=function(n,t){this.gxAddColumnsCode.push(function(){n.apply(this,t)})};this.addSingleLineEdit=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){this.addColumnDinCode(this.addSingleLineEdit,arguments);var rt=this.newColumn(r,e,l,o);rt.visible=w;rt.htmlName=i;rt.gxId=t;rt.gxAttId=n;rt.gxAttName=f;rt.gxTooltip=u;rt.gxWidthUnit=s;rt.gxColSize=c;rt.gxSetsContext=k;rt.gxCssClass=g;rt.gxColumnClass=tt;rt.gxColumnHeaderClass=it;rt.gxControl=new gx.html.controls.singleLineEdit;rt.gxControl.column=rt;rt.gxControl.isPassword=d;rt.gxControl.visible=rt.visible;rt.gxControl.dataType=rt.type;rt.gxControl.clickEvent=a;this.grid.addColumn(rt)};this.addPostingVar=function(n){this.postingVariables.push(n)};this.addMultipleLineEdit=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){this.addColumnDinCode(this.addMultipleLineEdit,arguments);var k=this.newColumn(r,f,a,e);k.visible=y;k.htmlName=i;k.gxId=t;k.gxAttId=n;k.gxAttName=u;k.gxWidthUnit=o;k.gxSetsContext=p;k.gxColumnClass=b;k.gxControl=new gx.html.controls.multipleLineEdit;k.gxControl.column=k;k.gxControl.dataType=k.type;k.gxControl.visible=k.visible;k.gxControl.heightUnit=h;k.gxControl.clickEvent=v;this.grid.addColumn(k)};this.addBlob=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){this.addColumnDinCode(this.addBlob,arguments);var y=this.newColumn(r,f,"left",s);y.visible=l;y.htmlName=i;y.gxId=t;y.gxAttId=n;y.gxAttName=u;y.gxWidthUnit=c;y.gxSetsContext=a;y.gxColumnClass=v;y.gxControl=new gx.html.controls.blob;y.gxControl.column=y;y.gxControl.dataType=y.type;y.gxControl.visible=y.visible;y.gxControl.height=o;y.gxControl.width=s;this.grid.addColumn(y)};this.addRadioButton=function(n,t,i,r,u,f,e,o,s,h,c){this.addColumnDinCode(this.addRadioButton,arguments);var l=this.newColumn(r,f,"left","");l.visible=s;l.htmlName=i;l.gxId=t;l.gxAttId=n;l.gxAttName=u;l.gxSetsContext=h;l.gxColumnClass=c;l.gxControl=new gx.html.controls.radio;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.vertical=o;l.gxControl.visible=l.visible;l.gxControl.clickEvent=e;this.grid.addColumn(l)};this.addComboBox=function(n,t,i,r,u,f,e,o,s,h,c,l,a){this.addColumnDinCode(this.addComboBox,arguments);var v=this.newColumn(r,f,"left",c);v.visible=s;v.htmlName=i;v.gxId=t;v.gxAttId=n;v.gxAttName=u;v.gxSetsContext=h;v.gxWidthUnit=l;v.gxColumnClass=a;v.gxControl=new gx.html.controls.comboBox;v.gxControl.column=v;v.gxControl.dataType=v.type;v.gxControl.rtEnabled=o==1;v.gxControl.visible=v.visible;v.gxControl.clickEvent=e;this.grid.addColumn(v)};this.addListBox=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){this.addColumnDinCode(this.addListBox,arguments);var y=this.newColumn(r,f,"left",c);y.visible=s;y.htmlName=i;y.gxId=t;y.gxAttId=n;y.gxAttName=u;y.gxSetsContext=h;y.gxWidthUnit=l;y.gxColumnClass=a;y.gxControl=new gx.html.controls.listBox;y.gxControl.column=y;y.gxControl.dataType=y.type;y.gxControl.rows=v!==undefined?v:4;y.gxControl.rtEnabled=o==1;y.gxControl.visible=y.visible;y.gxControl.clickEvent=e;this.grid.addColumn(y)};this.addCheckBox=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){this.addColumnDinCode(this.addCheckBox,arguments);var p=this.newColumn(r,e,"left",a);p.visible=c;p.htmlName=i;p.gxId=t;p.gxAttId=n;p.gxAttName=f;p.gxChecked=o;p.gxUnChecked=s;p.gxSetsContext=l;p.gxWidthUnit=v;p.gxColumnClass=y;p.gxControl=new gx.html.controls.checkBox;p.gxControl.column=p;p.gxControl.checkedValue=o;p.gxControl.uncheckedValue=s;p.gxControl.dataType=p.type;p.gxControl.visible=p.visible;p.gxControl.clickEvent=h;this.grid.addColumn(p)};this.addBitmap=function(n,t,i,r,u,f,e,o,s,h,c,l){this.addColumnDinCode(this.addBitmap,arguments);var a=this.newColumn(h,"","left",r);a.htmlName=t;a.gxId=i;a.gxAttId=n;a.gxWidthUnit=u;a.gxControl=new gx.html.controls.image;a.gxControl.column=a;a.gxControl.dataType=a.type;a.gxControl.width=r;a.gxControl.widthUnit=u;a.gxControl.height=f;a.gxControl.heightUnit=e;a.gxControl.clickEvent=o;a.gxCssClass=c;a.gxColumnClass=l;this.grid.addColumn(a)};this.addVideo=function(n,t,i,r,u,f,e,o,s,h,c,l){this.addColumnDinCode(this.addVideo,arguments);var a=this.newColumn(h,"","left",r);a.htmlName=t;a.gxId=i;a.gxAttId=n;a.gxWidthUnit=u;a.gxControl=new gx.html.controls.video;a.gxControl.column=a;a.gxControl.dataType=a.type;a.gxControl.width=r;a.gxControl.widthUnit=u;a.gxControl.height=f;a.gxControl.heightUnit=e;a.gxControl.clickEvent=o;a.gxCssClass=c;a.gxColumnClass=l;this.grid.addColumn(a)};this.addAudio=function(n,t,i,r,u,f,e,o,s,h,c,l){this.addColumnDinCode(this.addAudio,arguments);var a=this.newColumn(h,"","left",r);a.htmlName=t;a.gxId=i;a.gxAttId=n;a.gxWidthUnit=u;a.gxControl=new gx.html.controls.audio;a.gxControl.column=a;a.gxControl.dataType=a.type;a.gxControl.width=r;a.gxControl.widthUnit=u;a.gxControl.height=f;a.gxControl.heightUnit=e;a.gxControl.clickEvent=o;a.gxCssClass=c;a.gxColumnClass=l;this.grid.addColumn(a)};this.addFile=function(n,t,i,r,u,f,e,o,s,h,c,l){this.addColumnDinCode(this.addVideo,arguments);var a=this.newColumn(h,"","left",r);a.htmlName=t;a.gxId=i;a.gxAttId=n;a.gxWidthUnit=u;a.gxControl=new gx.html.controls.file;a.gxControl.column=a;a.gxControl.dataType=a.type;a.gxControl.width=r;a.gxControl.widthUnit=u;a.gxControl.height=f;a.gxControl.heightUnit=e;a.gxControl.clickEvent=o;a.gxCssClass=c;a.gxColumnClass=l;this.grid.addColumn(a)};this.addTextBlock=function(n,t,i){this.addColumnDinCode(this.addTextBlock,arguments);var r=this.newColumn("","","left");r.gxId=i;r.htmlName=n;r.gxControl=new gx.html.controls.textBlock;r.gxControl.column=r;r.gxControl.dataType=r.type;r.gxControl.clickEvent=t;this.grid.addColumn(r)};this.addLabel=function(n){this.addColumnDinCode(this.addLabel,arguments);var t=this.newColumn("","","left");t.htmlName=n;t.gxControl=new gx.html.controls.label;t.gxControl.column=t;this.grid.addColumn(t)};this.addButton=function(n,t){this.addColumnDinCode(this.addButton,arguments);var i=this.newColumn("","","left");i.htmlName=t;i.gxId=n;i.gxControl=new gx.html.controls.button;i.gxControl.column=i;i.gxControl.dataType=i.type;this.grid.addColumn(i)};this.addGrid=function(n){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(n);var t=this.newColumn("","","left");t.htmlName=n.getContainerControlId();t.gxControl=new gx.html.controls.grid;t.gxControl.column=t;this.grid.addColumn(t)};this.addUsercontrol=function(n,t,i,r,u,f,e,o,s,h){var a,l,c;this.addColumnDinCode(this.addUsercontrol,arguments);a="";l=this.parentObject;l.GridUCsProps&&l.GridUCsProps[u]&&(a=l.GridUCsProps[u].title||"");c=this.newColumn(a,"","left");c.gxUCId=n;c.gxUCLastId=t;c.gxUCClassName=i;c.gxUCContainerName=r;c.gxUCControlName=u;c.gxUCFieldName=f;c.gxShowFunc=e;c.gxC2VFuncs=o;c.gxV2CFuncs=s;c.visible=h;c.gxControl=new gx.html.controls.userControl;c.gxControl.column=c;c.gxControl.dataType=c.type;c.htmlName=u.toUpperCase();c.isUserControl=!0;this.grid.addColumn(c)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.userControlContainer;n.gxControl.column=n;n.gxControl.dataType=n.type;this.grid.addColumn(n)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("<\/div>")};this.addWebComponent=function(){this.addColumnDinCode(this.addWebComponent,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.webComponent;n.gxControl.column=n;n.gxControl.dataType=n.type;this.grid.addColumn(n)};this.addEmbeddedPage=function(){this.addColumnDinCode(this.addEmbeddedPage,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.embeddedPage;n.gxControl.column=n;n.gxControl.dataType=n.type;this.grid.addColumn(n)};this.addHtmlCode=function(n){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(n)};this.startTable=function(n,t,i){this.addColumnDinCode(this.startTable,arguments);var r=this.newColumn("","","left");r.gxId=t;r.htmlName=n+"_"+t;r.gxControl=new gx.html.controls.table;r.gxControl.column=r;r.gxControl.width=i;r.gxControl.dataType=r.type;this.grid.addColumn(r)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("<\/table>")};this.startRow=function(n,t,i,r,u,f){this.addColumnDinCode(this.startRow,arguments);var e=this.newColumn("","","left");e.gxControl=new gx.html.controls.row;e.gxControl.column=e;e.gxControl.title=n;e.gxControl.align=t;e.gxControl.verticalAlign=i;e.gxControl.backColor=r;e.gxControl.borderColor=u;e.gxControl.cssClass=f;e.gxControl.ownCssClass=f;e.gxControl.dataType=e.type;this.grid.addColumn(e)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("<\/tr>")};this.startCell=function(n,t,i,r,u,f,e,o,s,h){this.addColumnDinCode(this.startCell,arguments);var c=this.newColumn("","","left");c.gxControl=new gx.html.controls.cell;c.gxControl.column=c;c.gxControl.title=n;c.gxControl.align=t;c.gxControl.verticalAlign=i;c.gxControl.backColor=r;c.gxControl.borderColor=u;c.gxControl.height=f;c.gxControl.width=e;c.gxControl.colSpan=o;c.gxControl.rowSpan=s;c.gxControl.cssClass=h;c.gxControl.dataType=c.type;this.grid.addColumn(c)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("<\/div>"):this.currentBuffer.append("<\/td>")};this.startGroup=function(n,t,i,r,u){this.addColumnDinCode(this.startGroup,arguments);var f=this.newColumn("","","left");f.htmlName=n;f.gxControl=new gx.html.controls.group;f.gxControl.column=f;f.gxControl.id=n;f.gxControl.caption=t;f.gxControl.height=i;f.gxControl.width=r;f.gxControl.cssClass=u;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("<\/fieldset>")};this.startDiv=function(n,t,i,r){this.addColumnDinCode(this.startDiv,arguments);var u=this.newColumn("","","left");u.gxId=n;u.htmlName=t+"_"+n;u.gxControl=new gx.html.controls.div;u.gxControl.column=u;u.gxControl.width=r;u.gxControl.height=i;u.gxControl.dataType=u.type;this.grid.addColumn(u)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.divEnd;n.gxControl.column=n;this.grid.addColumn(n)};this.startFormGroup=function(n,t,i,r){this.addColumnDinCode(this.startFormGroup,arguments);var u=this.newColumn("","","left");u.gxId=n;u.htmlName=t+"_"+n;u.gxControl=new gx.html.controls.formGroup;u.gxControl.column=u;u.gxControl.width=r;u.gxControl.height=i;u.gxControl.dataType=u.type;this.grid.addColumn(u)};this.endFormGroup=function(){this.addColumnDinCode(this.endFormGroup,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.formGroupEnd;n.gxControl.column=n;this.grid.addColumn(n)};this.newColumn=function(n,t,i,r){var f=this.getColumnType(t),u=new gx.grid.column(n,f,r,i);return this.currentBuffer=u.buffer,u.htmlName="",u.gxId="",u.gxAttId="",u.gxAttName="",u};this.getColumnType=function(n){var t;switch(n){case"decimal":case"int":t=gx.types.numeric;break;case"date":t=gx.types.date;break;case"dtime":t=gx.types.dateTime;break;case"boolean":t=gx.types.bool;break;case"GeneXus\\Geolocation":t=gx.types.geolocation;break;default:t=gx.types.character}return t};this.addOldComponent=function(n,t){typeof this.oldCmps[n]=="undefined"&&(this.oldCmps[n]=[]);this.oldCmps[n].push(t)};this.updateOldComponents=function(){for(var t,i,r,u=this.grid.rows.length,n=0;n<u;n++)delete this.oldCmps[this.grid.rows[n].gxId];for(t in this.oldCmps){for(i=this.oldCmps[t];i.length>0;)r=i.shift(),gx.fn.deleteHidden(r);delete this.oldCmps[t]}};this.addHidden=function(n){this.hiddens.push(n)};this.addHiddenControl=function(n,t,i){gx.fn.setHidden(n,t);i!=!0&&this.addHidden(n)};this.clearHiddens=function(){for(var t,n=0;n<this.hiddens.length;n++)t=this.hiddens[n],gx.fn.deleteHidden(t);this.hiddens=[]};dt={};this.setHtmlTags=function(n){var r,i,t;gx.lang.apply(dt,n);r="";i=' style="';i+=dt.Visible=="0"?"display:none;":"";r+=' class="'+dt.Class+'"';t=gx.lang.emptyObject;i+=t(dt.Background)?"":"background:"+dt.Background+";";i+=!t(dt.Backcolor)&&dt.Backcolor!="0"?"background-color:"+gx.color.html(dt.Backcolor).Html+";":"";i+=!t(dt.Bordercolor)&&dt.Bordercolor!="0"?"border-color:"+gx.color.html(dt.Bordercolor).Html+";":"";i+=!t(dt.Borderwidth)&&dt.Borderwidth!="0"?" border-width:"+dt.Borderwidth+";":"";i+=!t(dt.Width)&&dt.Width!="0"?" width:"+gx.dom.addUnits(dt.Width,this.width==dt.Width?this.widthUnit:"")+";":"";i+=!t(dt.Height)&&dt.Height!="0"?"max-height:"+gx.dom.addUnits(dt.Height,this.height==dt.Height?this.heightUnit:"")+";":"";r+=t(dt.Align)?"":' align="'+dt.Align+'"';r+=t(dt.Tooltiptext)?"":' title="'+dt.Tooltiptext+'"';r+=t(dt.Cellpadding)?"":' data-cellpadding="'+dt.Cellpadding+'"';r+=t(dt.Cellspacing)?"":' data-cellspacing="'+dt.Cellspacing+'"';r+=i+'"';this.htmlTags=gx.text.trim(r);this.grid.gxHtmlTags=this.htmlTags;t(dt.Width)||(this.grid.gxWidth=dt.Width);t(dt.Height)||(this.grid.gxHeight=dt.Height)};kt={};this.setGridStyles=function(n){gx.lang.apply(kt,n);this.grid.header=n.Header;this.visible=kt.Visible!=undefined?gx.lang.gxBoolean(kt.Visible):!0;this.setSortable(kt.Sortable!=undefined?gx.lang.gxBoolean(kt.Sortable):!0);this.background=kt.Background!=undefined?kt.Background:"";this.cssClass=kt.Class!=undefined?kt.Class:"";this.titleBackstyle=kt.Backcolorstyle!=undefined?kt.Backcolorstyle:gx.grid.styles.none;this.titleFont=kt.Titlefont!=undefined?kt.Titlefont:"";this.linesFont=kt.Linesfont!=undefined?kt.Linesfont:"";this.borderWidth=kt.Borderwidth!=undefined?kt.Borderwidth:"";this.toolTipText=kt.Tooltiptext!=undefined?kt.Tooltiptext:"";try{this.backcolor=kt.Backcolor!=undefined?gx.color.html(kt.Backcolor).Html:"";this.titleBackcolor=kt.Titlebackcolor!=undefined?gx.color.html(kt.Titlebackcolor).Html:"";this.titleForecolor=kt.Titleforecolor!=undefined?gx.color.html(kt.Titleforecolor).Html:"";this.linesBackcolorOdd=kt.Backcolorodd!=undefined?gx.color.html(kt.Backcolorodd).Html:"";this.linesBackcolorEven=kt.Backcoloreven!=undefined?gx.color.html(kt.Backcoloreven).Html:"";this.bordercolor=kt.Bordercolor!=undefined?gx.color.html(kt.Bordercolor).Html:""}catch(t){gx.dbg.logEx(t,"gxgrid.js","setGridStyles")}this.borderWidth=kt.Borderwidth!=undefined?kt.Borderwidth:"";this.toolTipText=kt.Tooltiptext!=undefined?kt.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;this.cssClass!=""&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&this.gridCols<=0?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=function(n){var i,t;if(this.sortable!=n)for(this.sortable=n,i=this.grid.columns.length,t=0;t<i;t++)this.grid.columns[t].sortable=n};this.lastRowId=0;this.addRow=function(n){var u,l,a,f,r=this.lastRowId++,w=gx.grid.rowId(r+1),t=new gx.grid.row(r,n,w,this.grid.gxParentRowId),o,v,i,y,h,c;for(t.gxCmpContext=this.gxComponentContext,t.Grids=n.Grids,t.ownerGrid=this,t.gxLvl=this.gridLvl,this.setRowHiddens(n.Hiddens),o=this.grid.columns,v=o.length,i=0;i<v;i++){if(y=o[i],r!==0)for(f=this.grid.rows[0].gxProps[i],l=n.Props[i].length,a=this.grid.rowsValues?f.length-1:f.length,u=l;u<a;u++)t.gxProps[i].push(f[u]);var p=n.Props[i],e=p[p.length-1],s=this.grid.rowsValues;s&&!this.autoRefreshing&&(h=s[r],h!==undefined&&h.length>0&&(e=s[r][i]));t.values[i]=e;this.grid.rowsValues&&t.gxProps[i].push(e);this.parentObject.isTransaction()&&(c=this.columnIndexInKey(y.gxAttId),c!=-1&&(t.gxKeyValues[c]=e))}return this.isFreestyle&&(t.IsNew=!0,this.installChildGrids(t)),this.grid.addRow(t),t};this.installChildGrids=function(n){for(var i,t,r,f=this.childGrids.length,u=0;u<f;u++)i=this.childGrids[u],t=i.gxCreateGridCode(n.gxId),t.grid.parentGxObject=this.parentObject,r=(t.isMasterPageGrid?"MP":this.grid.gxCmpContext)+t.realGridName+"Container",t.gxContainerDivName=r+"Div_"+n.gxId,t.gxContainerDataName=r+"Data_"+n.gxId,t.gxContainerValuesName=r+"DataV_"+n.gxId,n.gxGrids.push(t),t.parentGrid=this,t.parentRow=n,this.parentObject.setGrid(t),i.copyPropertiesTo(t),t.grid.gxCmpContext=this.grid.gxCmpContext,t.grid.gxParentRowId=n.gxId,this.installChildGridColumns(t,i)};this.installChildGridColumns=function(n,t){for(var r=t.gxAddColumnsCode.length,i=0;i<r;i++)t.gxAddColumnsCode[i].call(n)};this.copyPropertiesTo=function(n){n.cssClass=this.cssClass;n.titleBackstyle=this.titleBackstyle;n.titleBackcolor=this.titleBackcolor;n.linesBackcolorOdd=this.linesBackcolorOdd;n.linesBackcolorEven=this.linesBackcolorEven;n.grid.gxCssClass=this.grid.gxCssClass;n.grid.gxTitleClass=this.grid.gxTitleClass;n.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;n.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;n.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;n.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(n){if(n&&this.parentObject.isTransaction())for(var t in n)gx.fn.setHidden(t,n[t])};this.executeEvent=function(n,t){gx.evt.setGridEvt(this.gridId.toString(),t);this.instanciateRow(t);this.parentObject[n].call(this.parentObject,t)};this.getHiddenName=function(n){var t="";return this.parentRow&&(t="_"+this.parentRow.gxId),this.grid.gxCmpContext+this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+n+t};this.updatePagingVars=function(n,t){n==undefined&&t==undefined?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):(this.grid.eof=n,this.grid.firstRecordOnPage=t)};this.setPagingVars=function(n,t){this.grid.eof=n;this.grid.firstRecordOnPage=t;gx.fn.setHidden(this.getHiddenName("nEOF"),n);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),t)};this.clearDefaultEventHandlers=function(){var t=0,r,n,u,f,i;if(this.defaultDragable||this.defaultSetsContext)for(t=this.grid.rows.length,n=0;n<t;n++)r=this.containerName+"Row_"+this.grid.rows[n].gxId,this.defaultDragable&&gx.fx.dnd.deleteSource(r),this.defaultSetsContext&&gx.fx.ctx.deleteSetter(r);for(t=this.grid.columns.length,n=0;n<t;n++)if(u=this.grid.columns[n],u.gxSetsContext==!0)for(f=this.grid.rows.length,i=0;i<f;i++)gx.fx.ctx.deleteSetter(u.htmlName+"_"+this.grid.rows[i].gxId)};this.setDefaultEventHandlers=function(){var i=0,s=this.additiveResponse?this.firstAdditiveRow:0,h=this.getRowAsTypes(),c,f,r,o,t,n,u,a,e,l;if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType))for(i=this.grid.rows.length,n=s;n<i;n++)t=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[n].gxId,f=gx.dom.byId(t),f!=null&&(f.gxGrid=this.containerName,f.gxGridName=this.gridName,f.gxId=this.grid.rows[n].gxId),t=this.containerName+"Row_"+this.grid.rows[n].gxId,r=function(n){return this.returnRowData(n)}.closure(this),this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,t,this.cssClass,h,r),this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,t,this.cssClass,h,r);else c=this.grid.gxCmpContext+this.containerName+"Div",r=function(){return this.returnGridData()}.closure(this),this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,c,this.cssClass,[this.boundedCollType],r),this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,c,this.cssClass,[this.boundedCollType],r);if(this.parentGrid)for(o=gx.fx.ctx.setters[this.gxComponentContext+this.realGridName+"ContainerTbl"],i=this.grid.rows.length,n=s;n<i;n++)t=this.containerName+"Row_"+this.grid.rows[n].gxId,o&&o.hdl&&gx.fx.ctx.addSetter(this.parentObject,t,this.cssClass,h,o.hdl);if(!this.additiveResponse)for(i=this.grid.columns.length,n=0;n<i;n++)if(u=this.grid.columns[n],u.gxSetsContext==!0)for(a=this.grid.rows.length,e=s;e<a;e++)l=gx.dom.el(this.gxComponentContext+u.htmlName+"_"+this.grid.rows[e].gxId,!0),l!=null&&(l.gxHtmlName=u.htmlName,gx.fx.ctx.addSetter(this.parentObject,u.htmlName+"_"+this.grid.rows[e].gxId,"",[u.gxAttName],this.returnColumnContext))};this.infinite_scrolling_ensure_loading_scroll=function(){if(!this.mock_element){var t=n("#"+this.getGridInnerTableId());this.mock_element=n('<div class="gx-grid-loading" style="visibility:hidden;">'+gx.getMessage("GXM_Loading")+"<\/div>");this.mock_element.insertAfter(t)}};this.infinite_scrolling_before_scroll=function(){this.infinite_scrolling_ensure_loading_scroll();this.isScrolling!==!0&&(this.mock_element.css("visibility","visible"),this.isScrolling=!0)};this.hide_loading_message=function(){this.mock_element&&this.mock_element.css("visibility","hidden")};this.remove_loading_message=function(){this.mock_element&&(n(this.mock_element).remove(),this.mock_element=undefined)};this.infinite_scrolling_after_scroll=function(){var t=this.getGridInnerTableId(),i=n("#"+t);this.fixColumnsWidth(this.fixedColumnsWidth);this.isScrolling=!1;this.hide_loading_message()};this.fixColumnsWidth=function(t){if(!this.isFreestyle){var i=this.getGridInnerTableId(),r=n("#"+i);rows=r.find("tbody tr[data-gxrendering_row]");n.each(rows,function(i,r){n(r).children().map(function(n,i){i.style.width=t[n]+"px";i.style.maxWidth=t[n]+"px"})});rows.removeAttr("data-gxrendering_row")}};this.unInstallScrollListener=function(){this.ScrollingElement&&(n(this.ScrollingElement).scrollTop(0),this.remove_loading_message(),this.ScrollingElement.removeEventListener("scroll",this.ScrollingHandler,{passive:!0}))};this.installScrollListener=function(t){var u=gx.grid.scrollingThreshold||4,f=function(){var e,r,f,s,o,h;return this.InverseLoading?t.scrollTop<=t.clientHeight*30/100:(this.ScrollType==gt?(s=n(window),e=n(document).height(),r=fi(),f=s.height()):(e=t.scrollHeight,r=t.scrollTop,f=t.clientHeight),o=r,h=i.lastPosition,i.lastPosition=o,o<h)?!1:e-r-f<f*u}.closure(this),r=this,i={allow:!0,reallow:function(){i.allow=!0;i.runAfterReallow&&(i.runAfterReallow=!1,r.ScrollingHandler())},lastPosition:0,runAfterReallow:!1,delay:300};this.ScrollingHandler=function(){gx.lang.requestAnimationFrame(function(){if(i.allow){var n=r,t=n.grid;n.isScrolling!==!0&&!t.isLastPage()&&f()&&(n.infinite_scrolling_before_scroll(),t.changeGridPage("NEXT",!1));i.allow=!1;setTimeout(i.reallow,i.delay)}else i.runAfterReallow=!0})};this.infinite_scrolling_ensure_loading_scroll();t.addEventListener("scroll",this.ScrollingHandler,{passive:!0})};this.installFixedGridHeader=function(){var f,c,l,o,s,a;if(!this.usePaging&&!this.InfiniteScrolling&&!this.isFreestyle&&this.grid.gxHeight&&this.grid.rows.length>0&&(f=this.getContainerControl(),f)){var i=n(f),v=this,r=this.getGridInnerTableId(),t=n("#"+r),y=t.find("tbody tr:first").children(),h=n("#"+r+"> tbody"),u=n("#"+r+"> thead > tr"),p=n("#"+r+"> thead"),e=gx.util.browser.isOldIE();this.fixedContainerWidth||(this.fixedContainerWidth=t.width());this.fixedColumnsWidth||(this.fixedColumnsWidth=y.map(function(){return n(this).width()}).get());i.addClass(ti);(!this.width||e)&&(e?(i.addClass("gx-grid-fixed-header-ie7"),i.wrap("<div style='position:relative;'>"),t.css("width",""),i.width(this.fixedContainerWidth+n.position.scrollbarWidth()+2),c=p.position(),u.css("top",c.top),l=u.outerHeight(!0),i.css("paddingTop",gx.dom.addUnits(l,"px")),t.attr("data-bkgstyle",""),o=t.css("background-color"),s=u.css("background-color"),o&&(!s||s==="transparent")&&u.css("background-color",o)):t.width(this.fixedContainerWidth+n.position.scrollbarWidth()+2));this.fixedColumnsWidth.length>0&&(t.find("thead tr").children().each(function(t,i){n(i)[0].style.width=v.fixedColumnsWidth[t]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));h.addClass(ri);a=e?i:h;t.css("max-height","");a.css({"max-height":gx.dom.addUnits(this.grid.gxHeight,this.grid.gxHeight==this.height?this.heightUnit:"px")})}};fi=function(){var n=window.pageXOffset!==undefined,t=(document.compatMode||"")==="CSS1Compat";return n?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop};this.handleInfiniteScrolling=function(){var i,f,e,r,t,l,a,s;if(this.InfiniteScrolling&&(i=this.getContainerControl(),i&&(f=n(i),f.removeClass(ti),this.grid.rows.length>0))){if(e=this,r=this.getGridInnerTableId(),this.ScrollType==gt)t=window,this.fixedColumnsWidth=[];else{this.ScrollingHeight&&n(t).css({height:this.ScrollingHeight});var u=n("#"+r),y=u.find("tbody tr:first").children(),o=n("#"+r+">tbody"),c=n.grep(this.grid.columns,function(n){return n.visible==!0}).length;this.fixedColVisibleCount!=c&&(this.fixedColVisibleCount=c,this.isFreestyle||(this.fixedColntainerWidth=u.width(),this.fixedColumnsWidth=y.map(function(){return this.offsetWidth}).get()));f.addClass(ti);this.isFreestyle||u.width(this.fixedColntainerWidth+n.position.scrollbarWidth()+2);!this.isFreestyle&&this.fixedColumnsWidth.length>0&&(u.find("thead tr").children().each(function(t,i){n(i)[0].style.width=e.fixedColumnsWidth[t]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));t=o.length>0?o[0]:i;n(t).addClass(ri)}if(this.ScrollingHeight&&this.ScrollType!=gt&&n(t).css({height:this.ScrollingHeight}),this.ScrollingElement=t,this.infinitScrollingInstalled=!0,l=this.InverseLoading?this.grid.firstItemSelector:this.grid.lastItemSelector,a=this.infinite_scrolling_before_scroll.closure(this),!this.ScrollingHeight&&(this.isFreestyle||this.grid.rows.length>=this.grid.pageSize&&this.grid.pageSize>0)&&(this.ScrollType!=gt&&(s=n(t).height()-2,n(t).css({height:s})),this.ScrollingHeight=s),t){var h=0,p=10,w=function(){var n=!1;return h==p?(h=0,!1):(n=this.InverseLoading?t.scrollTop==0:this.ScrollType==gt?gx.popup.ispopup()?document.body.scrollHeight<document.body.clientHeight:document.body.scrollHeight<=document.body.clientHeight:t.clientHeight==t.scrollHeight,n&&h++,n)}.closure(this),v=function(){if(!this.grid.isLastPage()&&w())return a(),this.grid.changeGridPage("NEXT",!1).then(function(){e.InverseLoading&&(t.scrollTop=t.scrollHeight);v()})}.closure(this);gx.lang.requestAnimationFrame(function(n,t,i,r){v();this.installScrollListener(n,t,i,r)}.closure(this,[this.ScrollingElement,r,o,l]))}}};this.returnColumnContext=function(n){var t="";return(t=n.nodeName=="SPAN"?gx.dom.spanValue(n):gx.fn.getControlValue_impl(n.id),t!=null)?t:""};this.returnRowData=function(n){var r={},u=this.grid.getRowByGxId(n.gxId),f,t,i;if(u)for(f=this.grid.columns.length,t=0;t<f;t++)i=this.grid.columns[t].gxAttName,i!=""&&(r[i]=u.values[t]);return r};this.returnGridData=function(){for(var i,f,e,n,r,u=[],o=this.grid.rows.length,t=0;t<o;t++)for(i={},u[t]=i,f=this.grid.rows[t],e=this.grid.columns.length,n=0;n<e;n++)r=this.grid.columns[n].gxAttName,r!=""&&(i[r]=f.values[n]);return u};this.doDrop=function(n){var t=n.length!=undefined?ropObj.length:1;this.getNewRows(t,null,function(t){this.addDropedRows(t,n)})};this.addDropedRows=function(n,t){var n,r,i;if(n.gxHiddens&&gx.fn.setJsonHiddens(null,n.gxHiddens),n=n.gxContainer?n.gxContainer:n,r=t.length,r!=undefined)for(i=0;i<r;i++)this.setDroppedRow(n[i],t[i]);else this.setDroppedRow(n[0],t);this.setNewRows(n)};this.setDroppedRow=function(n,t){for(var e=this.grid.columns.length,i=0;i<e;i++){var f=n.Props[i],r=this.grid.columns[i].gxAttName,u="";r!=""&&t[r]!=undefined&&(u=t[r]);f.Value=u;f.FormattedValue=u}};this.getRowAsTypes=function(){for(var t,i=[],r=this.grid.columns.length,n=0;n<r;n++)t=this.grid.columns[n].gxAttName,t!=""&&i.push(t);return i};this.addRows=function(n){var r=n.Count,t,i;for(this.grid.rowsValues=n.values,t=0;t<r;t++)i=n[t],this.addRow(i)};this.lastRowIsModified=function(){if(this.grid.rows.length==0)return!1;var n=this.grid.rows[this.grid.rows.length-1];return n.gxExists()?!0:n.gxIsMod()?!0:!1};this.getNewRows=function(n,t,i){var r=i!=undefined?i:this.setNewRows,u=gx.util.browser.isFirefox()?"keypress":"keydown";t==null||(t.type==u&&(t.charCode==32||t.keyCode==32||t.keyCode==13)||t.type=="click")&&(this.grid.rows.length==0||this.lastRowIsModified())?(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,n+this.lastRowId,this.lastRowId+1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,r),gx.csv.pkDirty=!1,t!=null&&gx.evt.cancel(t,!0)):t!=null&&(t.keyCode==32||t.keyCode==13)&&gx.evt.cancel(t,!0)};this.setNewRows=function(n){return this.setNewRows_impl(n,function(){this.refreshGrid({loadChildGrids:!1});this.grid.execShowFunction&&this.grid.execShowFunction()})};this.loadNewRows=function(n){n.gxHiddens&&gx.fn.setJsonHiddens(null,n.gxHiddens);var n=n.gxContainer?n.gxContainer:n;return this.setNewRows_impl(n,function(n){this.loadGrid({rowProps:n,isPostback:!0,addRows:!0})})};this.setNewRows_impl=function(n,t){var n,r,i;if(n.gxHiddens&&gx.fn.setJsonHiddens(null,n.gxHiddens),n=n.gxContainer?n.gxContainer:n,n.Count!=undefined){for(i=0,this.grid.rowsValues||(this.grid.rowsValues=[]),this.grid.rowsValues=this.grid.rowsValues.concat(n.values),i=0;i<n.Count;i++)r=this.addRow(n[i]),gx.fn.setCurrentGridRow(this.gridId,r.gxId);n.Count>0&&(this.addingRows=!0,t.call(this,n),this.addingRows=!1,this.setFocusFirstControl(n[0]))}return r};this.gxNewRowFocused=function(n){n.style.textDecoration="underline";var t=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(n,t,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(n){var t=gx.evt.source(n);t!=undefined&&n.ctrlKey&&n.keyCode==46&&(this.setRowDeleted(t),gx.evt.cancel(n,!0))};this.gxHasDuplicateKey=function(){for(var n,t,e,i,u=[],f=this.grid.rows,o=f.length,r=0;r<o;r++)if(n=f[r],(n.gxExists()||n.gxIsMod())&&!n.gxDeleted()){for(t="",e=n.gxKeyValues.length,i=0;i<e;i++)t+=n.gxKeyValues[i].toString();if(u[t]!=undefined)return!0;u[t]=1}return!1};this.columnIndexInKey=function(n){for(var i=this.lvlKey.length,t=0;t<i;t++)if(this.lvlKey[t]==n)return t;return-1};this.refreshVars=[];this.addRefreshingVar=function(n){var i,u,t,e,h,f,o,r,s,c;if(!gx.lang.emptyObject(n))if(i="",u=function(){this.filterVarChanged()},this.refreshVars[this.refreshVars.length]=n,n.fld){if(t=gx.dom.el(this.gxComponentContext+n.fld,!1,!0),t!=undefined&&gx.lang.emptyObject(n.hc)&&(i=t.type=="radio"||t.type=="checkbox"?"click":t.tagName=="SELECT"?"change":gx.evt.eachKeyAutorefreshType(n.type)?["keyup","input"]:"blur",i!=""))if(t.type=="radio")for(e=gx.dom.byName(this.gxComponentContext+n.fld),h=e.length,f=0;f<h;f++)gx.evt.attach(e[f],i,u,this);else t.type=="search"&&(i=[i,"search"]),gx.evt.attach(t,i,u,this)}else if(o=this.parentObject.VarControlMap[n.rfrVar],o&&(r=this.parentObject.getValidStructFld(o.id),r&&r.isuc))for(s in r.ucInstances)r.ucInstances.hasOwnProperty(s)&&(c=r.ucInstances[s],c.autoRefreshFn=u.closure(this))};this.refreshParms=[];this.addRefreshingParm=function(n){gx.lang.emptyObject(n)||(this.refreshParms[this.refreshParms.length]=n)};this.doRefresh=function(){var n=this.getRefreshParmsUrl();this.callAsyncRefresh(n)};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var n=this.getRefreshParmsUrl();this.lastRefreshParms!=n&&(this.lastRefreshParms=n,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=function(){for(var n,i,r,u=this.refreshVars.length,t=0;t<u;t++)if(n=this.refreshVars[t],typeof n.rfrVar=="undefined"&&(i=gx.fn.getHidden(this.gxComponentContext+"GXH_"+n.fld),r=n.val(),i!==undefined&&i!=r))return!0;return!1};this.getRefreshParmsUrl=function(n){return this.getParmsValues(n,this.refreshParms,!0).join(",")};this.getParmsValues=function(n,t,i){var k=gx.O,c,o,d=t.length,s=[],a,l,r,e,p,w,u,f,h,v,y,b;for(gx.setGxO(this.parentObject),a=function(n,t,i,r){if(i===!0){var u=gx.ajax.ControlValuesObject(t,n);u&&r.push(encodeURIComponent(gx.json.serializeJson(u)))}r.push(n)},l=0;l<d;l++)r=t[l],r&&(typeof r.c2v=="function"&&r.c2v(),typeof r.v2bc=="function"&&r.v2bc.call(gx.O),typeof r.rfrVar!="undefined"&&(o=gx.fn.vStructForVar(r.rfrVar),o||(o=gx.fn.getVarControlMapForVar(r.rfrVar),o&&!n&&(e=this.parentObject.getValidStructFld(o.id),e&&e.isuc&&(p=e&&e.grid?gx.fn.currentGridRowImpl(e.grid):undefined,w=e.getUCInstance(p)||e.uc,w.execC2VFunctions()))),o&&(typeof r.rfrProp=="undefined"||this.isValueProperty(r.rfrProp))&&(c=o.type))),typeof r.rfrVar!="undefined"?(u=ctrlName=colVStruct=undefined,typeof r.rfrProp!="undefined"?(typeof r.gxAttId!="undefined"&&(f=this.grid.getColumnByGxAttId(r.gxAttId)),f||(f=this.grid.getColumnForVar(r.rfrVar)),f?(h=r.rfrProp.toLowerCase(),u=f.hasOwnProperty(h)?f[h]:f.gxControl[h],this.isValueProperty(h)&&f.gxControl.type==gx.html.controls.types.image&&(u=gx.util.removeBaseUrl(u)),colVStruct=this.parentObject.getValidStruct(f.gxId),colVStruct&&this.isValueProperty(h)&&(c=colVStruct.type)):u=""):(typeof this.parentObject.VarControlMap[r.rfrVar]!="undefined"&&(ctrlName=this.parentObject.VarControlMap[r.rfrVar].id),gx.lang.emptyObject(this.parentObject[r.rfrVar])?typeof u=="undefined"&&typeof ctrlName!="undefined"&&(u=gx.fn.getHidden(this.gxComponentContext+ctrlName)):u=this.parentObject[r.rfrVar],typeof u=="object"&&c!="date"&&c!="dtime"&&(u=gx.json.serializeJson(u))),u=typeof u=="undefined"?"":u,a(this.getFormattedParm(u,c),r.rfrVar,i,s)):typeof r.gxGrid=="string"?(v=gx.O.getGridByBaseName(r.gxGrid),typeof r.rfrProp=="string"&&r.rfrProp=="Rows"&&s.push(v?v.grid.pageSize:9999)):gx.lang.emptyObject(r.hc)?(a(this.getFormattedVStructParm(r),r.gxvar,i,s),gx.fn.setHidden(this.gxComponentContext+"GXH_"+r.fld,r.val())):(y=gx.fn.getHidden(this.gxComponentContext+"GXH_"+r.fld),b=n&&typeof y!="undefined"?y:this.parentObject[r.hc],s.push(encodeURIComponent(b)));return this.parentObject.IsComponent&&s.push(encodeURIComponent(this.parentObject.CmpContext)),gx.setGxO(k),s};this.initRefreshParms=function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl(!0))};this.isValueProperty=function(n){return typeof n!="undefined"&&n.toLowerCase()=="value"};this.getFormattedVStructParm=function(n){var i,t;return n.type=="date"||n.type=="dtime"?(t=gx.dom.el(this.gxComponentContext+n.fld),i=typeof t.value!="undefined"?t.value:gx.dom.spanValue(t)||t):i=n.val(),this.getFormattedParm(i,n.type)};this.getFormattedParm=function(n,t){return t==="date"?n=gx.date.urlDate(n,gx.dateFormat):t==="dtime"&&(n=gx.date.urlDateTime(n,gx.dateFormat)),encodeURIComponent(n)};this.callAsyncRefresh=function(n,t){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);this.refreshTimer!=null&&(window.clearTimeout(this.refreshTimer),this.refreshTimer=null,gx.evt.setReady(!0,"callAsyncRefresh"));gx.evt.setReady(!1,"callAsyncRefresh");var i=gx.util.executionContext.getContext();this.refreshTimer=window.setTimeout(function(){gx.util.executionContext.changedContext(i)||(this.autoRefreshing||gx.evt.processing?this.callAsyncRefresh(n):(gx.fx.obs.addObserver("grid.onafterrefresh",gx.evt,gx.evt.notifyRefreshGrid,{single:!0}),typeof n=="undefined"&&(n=this.getRefreshParmsUrl()),gx.ajax.refreshGrid(this,n),gx.evt.setReady(!0,"callAsyncRefresh"),this.refreshTimer=null))}.closure(this),t||400)};this.updatePropsHidden=function(n){var t=this.getDataHiddenName();gx.fn.setHidden(t,n)};this.updatePagingVarsAfterRefresh=function(n){if(this.usePaging){var t=this.grid.gxGridName.toUpperCase()+"_nEOF",i=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(n[t],n[i])}};this.getSelection=function(){var t,n,i;if(this.allowSelection)for(t=this.grid.rows.length,n=0;n<t;n++)if(i=this.grid.rows[n],i.selected)return n;return-1};this.setNextRowSelected=function(n){var t=Math.min(this.getSelection()+1,this.grid.rows.length);this.setSelection(t,n);this.grid.keepGridItemVisible(t)};this.setPreviousRowSelected=function(n){var t=Math.max(this.getSelection()-1,0);this.setSelection(t,n);this.grid.keepGridItemVisible(t)};this.setProperty=function(n){if(n.Selectedindex){var t=Number(n.Selectedindex);if(t==-1)this.setSelection(t);else return this.setSelectionRowCtrl(this.grid.getRowByPos(t))}return!1};this.setSelection=function(n,t){if(this.allowSelection){if(n==-1)return this.grid.setRowSelected(undefined,"",undefined,undefined,t),!0;if(n>=0){var i=this.getRowCtrlByIdx(n);return this.setSelectionRowCtrl(i,t)}}return!1};this.setSelectionRowCtrl=function(n,t){return this.allowSelection&&n?(this.grid.setRowSelected(n,n.getAttribute("data-gxrow"),undefined,undefined,t),!0):!1};this.getRowCtrlByIdx=function(n){return gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+gx.grid.rowId(n+1))};this.blankGridRows=function(){this.InfiniteScrolling&&(this.additiveResponse=this.grid.firstRecordOnPage!=0);this.InfiniteScrolling&&this.additiveResponse||(this.lastRowId=0,this.grid.rows=[],delete this.grid.rowsValues)};this.setRowDeleted=function(n){var t=null;t=typeof n=="string"?this.grid.getRowByGxId(n):n.gxId==undefined?this.getRowFromHtmlCtrl(n):n;t.setDeleted(!t.gxDeleted());this.setRowModified(t.gxId);gx.fn.removeGridRow(t.gxId,this.gridId.toString());this.refreshGrid({loadChildGrids:!1});gx.dom.indexElements()};this.setFocusFirstControl=function(n){for(var r,i,t=0;t<n.Count;t++)if(r=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId),r&&(i=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[t].htmlName+"_"+r.gxId),i!=undefined&&gx.fn.isAccepted(i))){gx.grid.lastFocusCtrl=this.grid.columns[t].gxId;gx.fn.setFocus(i);break}};this.instanciateRow=function(n){var h=gx.O,e,f,s,u,o,t,r,i;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=this;try{if(t=n,typeof t=="string"&&(t=this.grid.getRowByGxId(n)),t!=null)for(gx.fn.setCurrentGridRow(this.gridId,t.gxId),o=t.values.length,u=0;u<o;u++)r=this.grid.columns[u],r.gxId!=""&&(i=this.parentObject.getValidStruct(r.gxId),i&&(this.useUserControlModelValues()?i.v2v&&(i.v2v(this.grid.properties[t.id][r.index].value),gx.fn.setHidden(this.grid.properties[t.id][r.index].id,this.grid.properties[t.id][r.index].value)):typeof i.c2v=="function"&&i.c2v()));else for(gx.fn.setCurrentGridRow(this.gridId,n),o=this.grid.columns.length,u=0;u<o;u++)r=this.grid.columns[u],r.gxId!=""&&(i=this.parentObject.getValidStruct(r.gxId),i&&typeof i.c2v=="function"&&i.c2v());e=this.parentObject.UserControls;for(s in e)e.hasOwnProperty(s)&&(f=e[s],f.GridId===this.gridId&&f.GridRow===t.gxId&&(this.parentObject[f.DesignContainerName]=f))}catch(c){gx.dbg.logEx(c,"gxgrid.js","instanciateRow")}return gx.setGxO(h),!0};this.setRenderProp=function(n,t,i,r){this.grid.setProp(n,t,i,r)};this.setRenderDynProp=function(n,t,i,r){this.grid.setDynProp(n,t,i,r)};this.addRenderEventHandler=function(n,t){this.grid.addEventHandler(n,t)};this.cleanup=function(){gx.grid.clearActiveGrid(this);this.parentObject=null;this.parentGrid=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid.rows=null;this.grid.selectedRows=null;this.grid=null;this.unInstallScrollListener()};this.loadGrid=function(t){var u,s,o,l,a,v,f,r;gx.dbg.logPerf("loadGrid_"+this.gridName);var t=t||{},i=t.rowProps,y=t.isPostback,e=t.addRows,p=t.isNestedLoad;if(this.isNestedLoad=this.isNestedLoad||p,s=gx.O,gx.setGxO(this.parentObject),this.isLoading=!0,o=this.parentObject.isTransaction(),o&&this.contextMenu==null&&(this.contextMenu=new gx.grid.contextMenu(this)),i!=undefined){var h=i.GridName?i[i.GridName.toUpperCase()+"_nEOF"]:undefined,c=i.GridName?i[i.GridName.toUpperCase()+"_nFirstRecordOnPage"]:undefined,f=this.getContainerControl();f!=null&&(this.autoRefreshing?this.updatePagingVarsAfterRefresh(i):this.updatePagingVars(h,c),this.InfiniteScrolling&&(this.additiveResponse=this.grid.firstRecordOnPage!=0),y&&(e||(i.values=this.getValuesFromHidden()),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents()),this.deleteGridData(),this.grid.setContainerDelayed(f),this.additiveResponse||this.clearHiddens(),this.setRowsProperty(),l=this.getSelection(),this.autoRefreshing?this.updatePagingVarsAfterRefresh(i):this.updatePagingVars(h,c),e||this.blankGridRows(),this.setHtmlTags(i),this.setGridStyles(i),this.setDeleteMethod(i.DeleteMethod),this.setSelectionAndHover(i.Allowselection,i.Selectioncolor,i.Allowhover,i.Hovercolor,i.Selectedindex),this.setCollapsing(i.Allowcollapsing,i.Collapsed),this.setSflColumns(i.SflColumns),this.setColumnsProperties(i.Columns),e||this.addRows(i),this.updateOldComponents(),this.initRefreshParms(),a=this.getGridInnerTableId(),v=n("#"+a).attr("data-gx-grid-nodata")!==undefined,u=this.refreshGrid({addRows:e&&!v,loadChildGrids:null,fromAutoRefresh:this.autoRefreshing}),this.setProperty({Selectedindex:l+1}))}else this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=o||this.isFreestyle?9999:this.gridRows,f=this.getContainerControl(),f!=null?(this.grid.setContainerDelayed(f),r=this.getRowsFromHidden(),r!=null?(r.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(r),this.setGridStyles(r),this.setDeleteMethod(r.DeleteMethod),this.setSelectionAndHover(r.Allowselection,r.Selectioncolor,r.Allowhover,r.Hovercolor,r.Selectedindex),this.setCollapsing(r.Allowcollapsing,r.Collapsed),this.setSflColumns(r.SflColumns),this.setColumnsProperties(r.Columns),this.updatePagingVars(),this.addRows(r),this.initRefreshParms(),this.addingRows=!0,u=this.refreshGrid(),this.addingRows=!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),u=this.refreshGrid())):u=this.loadWrappedGridChilds();return this.isLoading=!1,gx.setGxO(s),gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded"),u};this.loadWrappedGridChilds=function(){var f=n.Deferred(),t,i,e,r,u;try{if(t=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId),typeof t!="undefined"){for(t=parseInt(t),i=0;i<t;i++)for(e=this.grid.columns.length,r=0;r<e;r++)u=this.grid.columns[r],u.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(i+1),c:u});this.setupGridUsercontrols(this.GridUserControls)}}catch(o){gx.dbg.logEx(o,"gxgrid.js","loadWrappedGridChilds")}return f.resolve(),f};this.getRowsFromHidden=function(){var t=this.getDataHiddenName(),n=gx.fn.getHidden(t);return(gx.json.setNonSerializable(t),typeof n=="string")?gx.json.evalJSON(n):typeof n=="object"?n:null};this.deleteGridData=function(){var n=this.getDataHiddenName();gx.json.setNonSerializable(n)};this.getValuesFromHidden=function(){var t=this.getValuesHiddenName(),n=gx.fn.getHidden(t),i;return gx.lang.emptyObject(n)&&(n=gx.fn.getControlValue(t)),gx.json.setNonSerializable(t),i=null,n!=null&&n!=""&&(i=gx.json.evalJSON(n)),i};this.getContainerControlId=function(){return this.gxContainerDivName!=undefined?this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+"Div"};this.getContainerControl=function(){if(!this.gxContainerCtrl){var n=gx.dom.byId(this.getContainerControlId());n&&(this.gxContainerCtrl=n,n.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(n,ei),this.isResponsive&&gx.dom.addClass(n,hi),gx.dom.addClass(n,this.isFreestyle?si:oi),n.gxGridName=this.grid.gxGridName)}return this.gxContainerCtrl};this.getHiddenSuffix=function(){return this.grid.gxParentRowId==""?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return this.gxContainerDataName!=undefined?this.gxContainerDataName:this.grid.gxCmpContext+this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return this.gxContainerValuesName!=undefined?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(n){var f,t,r,i,u;try{if(!gx.lang.emptyObject(n))for(f=n.length,t=0;t<f;t++){r=this.grid.columns[t];for(i in n[t])u=n[t][i],i=this.fixColumnPropName(i),this.isUsercontrol&&(r[i]=u),r[i.toLowerCase()]=u;this.checkPromptColumn(r)}}catch(e){gx.dbg.logEx(e,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(n){var t,i;try{if(this.isPromptColumn(n)&&(t=gx.fn.getAttachedCtrl(n.htmlName),t&&t.info&&t.info.controls)){var r=!1,u=!1,e=t.info.controls.length;for(i=0;i<e;i++){var o=t.info.controls[i],f=this.grid.getColumnByGxId(o),s=gx.lang.gxBoolean(f.enabled),h=gx.lang.gxBoolean(f.visible);s&&(u=!0);h&&(r=!0)}u||(n.enabled="0");r||(n.visible="0")}}catch(c){gx.dbg.logEx(c,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(n){return n=="Horizontalalignment"?"align":n};this.setDeleteMethod=function(n){var i=this.parentObject.isTransaction(),t;i&&(t=this.parentObject.Gx_mode=="DSP",!t&&n&&n=="none"&&(t=!0),this.deleteMethod=t?gx.grid.deleteMethods.none:gx.grid.deleteMethod)};this.setSelectionAndHover=function(n,t,i,r,u){try{typeof n!="undefined"&&(this.allowSelection=gx.lang.gxBoolean(n));typeof t!="undefined"&&(this.selectionColor=null);typeof r!="undefined"&&(this.hoverColor=null);this.allowSelection&&typeof t!="undefined"&&(typeof i!="undefined"&&(this.allowHovering=gx.lang.gxBoolean(i)),t=eval(t),this.selectionColor=typeof t[0]!="undefined"?gx.color.fromRGB(t[0],t[1],t[2]):gx.color.html(t),this.allowHovering&&typeof r!="undefined"&&(r=eval(r),this.hoverColor=typeof r[0]!="undefined"?gx.color.fromRGB(r[0],r[1],r[2]):gx.color.html(r)));this.grid.gxAllowSelection=this.allowSelection;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxHoverColor=this.hoverColor;this.grid.selectedRows=[];u=Number(u||0);u>0&&(this.grid.Selectedindex=u-1)}catch(f){gx.dbg.logEx(f,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(n,t){try{n!==undefined&&(this.allowCollapsing=gx.lang.gxBoolean(n),this.grid.gxAllowCollapsing=this.allowCollapsing);t!==undefined&&(this.collapsed=gx.lang.gxBoolean(t),this.grid.gxCollapsed=this.collapsed)}catch(i){gx.dbg.logEx(i,"gxgrid.js","setCollapsing")}};this.setSflColumns=function(n){try{gx.lang.emptyObject(n)&&n!==0||(this.gridCols=gx.grid.validGridColsValue(parseInt(n)),this.grid.gxGridCols=this.gridCols,this.gridCols>1&&this.gridRows>0&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols))}catch(t){gx.dbg.logEx(t,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(n){return n.gxAttId.indexOf&&n.gxAttId.indexOf("prompt_")!=-1?!0:!1};this.setRowsProperty=function(){var n=gx.fn.getHidden(this.getHiddenName("Rows"));if(n!=null){try{this.gridRows=parseInt(n,10)}catch(t){gx.dbg.logEx(t,"gxgrid.js","setRowsProperty")}this.grid.pageSize=this.gridRows*(this.gridCols>1?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var i,n,r=this.grid.columns.length,t=0;t<r;t++)i=this.grid.columns[t],n=this.parentObject.getValidStruct(i.gxId),n&&n.gxsgprm&&n.gxsgprm.installed&&(n.gxsgprm.installed={})};this.refreshCollection=function(n){var u,t,i,r;try{for(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),u=n.length,t=0;t<u;t++){var f={Props:[]},e=n[t],o=this.grid.columns.length;for(i=0;i<o;i++)r=this.grid.columns[i],f.Props[r.index]=[e[r.gxAttName]];this.addRow(f)}this.refreshGrid({loadChildGrids:!1,fromAutoRefresh:!1,fromCollection:!0})}catch(s){gx.dbg.logEx(s,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(t){var f=n.Deferred(),t=t||{},o=t.loadChildGrids,s=t.fromAutoRefresh,e=t.fromCollection,h=t.isNestedLoad,c=t.immediateApplyInfiniteScroll,i,r,u;return this.isNestedLoad=this.isNestedLoad||h,this.DatePickersControls=[],this.GridUserControls=[],this.GridComponents=[],this.GridControls=[],this.ColumnPropertiesAfterRender=[],this.additiveResponse||(t.addRows||this.clearDefaultEventHandlers(),this.clearHiddens()),this.crearInstalledSuggests(),this.setRowsProperty(),this.parentRow==undefined||gx.lang.emptyObj(this.parentRow.Grids)||(i=this.parentRow.Grids[this.realGridName],i!=null&&(this.setHtmlTags(i),this.setGridStyles(i),this.setColumnsProperties(i.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(i))),r=!1,u=function(){var u;this.setupGridControls(this.GridControls);this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridUsercontrols(this.GridUserControls);this.installFixedGridHeader();var i=this,e=this.getGridInnerTableId(),o=this.grid.scroll_last_row_selector(this.gridRows),s=this.grid.scroll_first_row_selector(this.gridRows);this.grid.firstItemSelector="#"+e+s;this.grid.lastItemSelector="#"+e+o;u=function(t){var r=function(){if(!i.InfiniteScrolling){f.resolve();return}if(c)i.handleInfiniteScrolling();else{var n=i.getContainerControl();gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",i,i.handleInfiniteScrolling,{single:!0}):gx.fn.isVisible(n)?gx.ol(i.handleInfiniteScrolling,i):gx.dom.getIntersectionObserver(function(t){var r=new t(function(){gx.fn.isVisible(n)&&(r.disconnect(),i.handleInfiniteScrolling())},{root:document.body});r.observe(n)})}f.resolve()},u=n.map(t,function(n){return n.onLoadDeferred});n.when.apply(n,u).done(r)};this.setupGridComponents(this.GridComponents).then(function(){var f=n.map(i.GridComponents,function(n){return gx.pO.getWebComponent(n.p)});i.isFreestyle&&i.loadRowsGrids(r,t);gx.fx.obs.notify("grid.onafterrender",[i.grid,i.isNestedLoad]);i.isNestedLoad?(i.isNestedLoad=!1,u(f)):i.additiveResponse?gx.pendingCmps?gx.fx.obs.addObserver("webcom.all_rendered",i,function(){i.infinite_scrolling_after_scroll()}):i.infinite_scrolling_after_scroll():i.applyTemplateObject().then(function(){u(f)});i.additiveResponse=!1});this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.updateRcdCount();this.setDefaultEventHandlers();this.setSelection(this.grid.Selectedindex)},u=u.closure(this),this.grid.doSort(),o==!1?this.grid.render(r,!1,e,u,t):(r=!0,this.grid.render(r,s,e,u,t)),f};this.getGridInnerTableId=function(){return this.gxComponentContext+this.containerName+"Tbl"};this.applyTemplateObject=function(n){var n=n||{},t=this.isFreestyle&&!this.parentObject.IsComponent?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";return gx.$.extend(n,{selector:"#"+this.getContainerControl().id,excluded:t}),gx.plugdesign.applyTemplateObject(n)};ni="gx-wc-bkp_"+s+"_"+f;this.getComponentsBackupContainer=function(){var n=gx.dom.byId(ni);return n||(n=document.createElement("div"),n.id=ni,n.style.display="none",document.body.appendChild(n)),n};this.destroyComponentsBackup=function(){var n=gx.dom.byId(ni),t;n&&(t=n.parentNode,t&&gx.dom.removeControlSafe(n))};this.backupComponents=function(){var e,i,n,o,t,s,h,c,u,f;try{if(!this.additiveResponse)for(e=this.grid.rows.length,i=0;i<e;i++){for(n=this.grid.rows[i],o=this.grid.columns.length,t=0;t<o;t++)if(s=this.grid.columns[t],s.gxControl.type==gx.html.controls.types.webComponent){var l=n.gxProps[t],a=l[0],v=this.parentObject.getComponentPrefix(a),y=this.gxComponentContext+"gxHTMLWrp"+v+n.gxId,r=gx.dom.byId(y);r&&(r.parentNode.removeChild(r),h=this.getComponentsBackupContainer(),h.appendChild(r))}for(c=n.gxGrids.length,u=0;u<c;u++)f=n.gxGrids[u],f&&f.isFreestyle&&f.backupComponents()}}catch(p){gx.dbg.logEx(p,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(n){var o=this.getContainerControl(),i,r,u,f,t,e;if(!o)return[];if(i=o.firstChild,r=[],i.querySelectorAll)r=gx.fn.toArray(i.querySelectorAll("td[data-colindex='"+n+"'], th[data-colindex='"+n+"']"));else{for(u=gx.dom.byTag("TD",i),f=gx.dom.byTag("TH",i),t=0,e=u.length;t<e;t++)u[t].getAttribute("data-colindex")==n&&r.push(u[t]);for(t=0,e=f.length;t<e;t++)f[t].getAttribute("data-colindex")==n&&r.push(f[t])}return r};this.applyPropEntireColumn=function(n,t,i){for(var u=this.getEntireGridColumn(n),r=0;r<u.length;r++)gx.fn.setCtrlPropertyImpl(u[r],t,i)};this.setupFixedColumnProperties=function(){for(var t,n=0;n<this.ColumnPropertiesAfterRender.length;n++)t=this.ColumnPropertiesAfterRender[n],this.applyPropEntireColumn(t.colIndex,t.ptyName,t.ptyValue)};this.addColPropertyAfterRender=function(n,t,i){var u={colIndex:n,ptyName:t,ptyValue:i},f="gxpty"+t+n,r=this.ColumnPropertiesAfterRender[f];r?this.ColumnPropertiesAfterRender[r]=u:(r=this.ColumnPropertiesAfterRender.push(u)-1,this.ColumnPropertiesAfterRender[f]=r)};this.setupCellAttributes=function(n){var t,i,r,u;for(t in n)if(i=n[t],r=gx.dom.byId(t),r)for(u in i)r.setAttribute(u,i[u])};this.setupGridControls=function(n){for(var t=0,r=n.length;t<r;t++){var u=n[t],i=gx.dom.byId(u.hookId),f=i.parentNode;f&&(f.insertBefore(u.el,i),gx.dom.removeControlSafe(i))}};this.setupGridComponents=function(){var t=function(n,t){for(var f=n.length,r,u,i=0;i<f;i++)if((r=n[i],r.create!==!1)&&(u=gx.createComponent(r.n,r.p),u!=null)){if(gx.addComponent(u),u.readServerVars(),r.load)u.onload(undefined,!0);i==f-1&&t.resolve()}},i=function(n){for(var i=n.length,t=0;t<i;t++)gx.dom.removeClass(n[t],gx.GxObject.WEBCOMPONENT_LOADING_CLASS_NAME)};return function(r){var e=n.Deferred(),u,s=r.length,h=[],c,f,o,a,l;for(s==0&&e.resolve(),c=[],u=0;u<s;u++)f=r[u],f.create===!1?(o=gx.dom.byId(f.existingEl),o&&(a=o.parentNode,l=gx.dom.byId(f.el),gx.dom.removeControlSafe(o),a.appendChild(l),c.push(l)),u==s-1&&e.resolve()):h.push(f.c);return gx.lang.requestAnimationFrame(i.closure(this,[c])),h.length>0&&gx.html.processCode(h.join(""),!1,t.closure(this,[r,e])),this.destroyComponentsBackup(),e.promise()}}();this.setupGridUsercontrols=function(n){var s=n.length,u,e,o,r;for(gx.uc.StartRender(),u=0;u<s;u++){var f=n[u].r,t=n[u].c,i=gx.uc.getNew(this.parentObject,t.gxUCId,t.gxUCLastId,t.gxUCClassName,t.gxUCContainerName+"_"+f,t.gxUCControlName,t.gxUCFieldName,this.gridLvl,this.gridId,f);for(i.DesignContainerName=t.gxUCContainerName,i.setC2ShowFunction(t.gxShowFunc),e=t.gxC2VFuncs.length,r=0;r<e;r++)i.addC2VFunction(t.gxC2VFuncs[r]);for(o=t.gxV2CFuncs.length,r=0;r<o;r++)i.addV2CFunction(t.gxV2CFuncs[r],t.gxUCFieldName);i.setGridProperties();i.setGridEventHandlers();this.parentObject.setUserControl(i);i.execV2CFunctions(!0);i.execShowFunction()}gx.uc.EndRender()};this.triggerDatePickersSetup=function(n){for(var r,o,s=n.length,i=0;i<s;i++){var u=n[i].CtrlId,h=n[i].Grid,c=n[i].Row,f=gx.O,t=null,e=gx.fn.controlIds(),l=e.length;for(r=0;r<l;r++)if(t=gx.fn.validStruct(e[r]),t.grid==h&&(o=f.CmpContext+t.fld+"_"+c,o==u))break;t!=null&&t.dp!=undefined&&gx.fn.installDatePicker(u,t,f,t.dp.f,t.dp.st,t.dp.wn,t.dp.mf,gx.fn.datePickerFormat(t.dp.pic,t.dp.dec,t.len),t.len,t.dp.dec)}};this.installImageControls=function(){var r=this.gxContainerCtrl,i=this.grid.newAdditiveRows?this.grid.newAdditiveRows.get(0):null,n,t,u;if(this.additiveResponse&&i&&i.childNodes[0]&&(r=i),n=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass,"",r),n[0])for(t=0,u=n.length;t<u;t++)gx.html.multimediaUpload.createControl(n[t])};this.addComponentToDraw=function(n){this.GridComponents.push(n)};this.addUsercontrolToDraw=function(n){this.GridUserControls.push(n)};this.addDatepickerToSetup=function(n){this.DatePickersControls.push(n)};this.addControlToReuse=function(n){var t=n.el.parentNode;t&&gx.dom.removeControlSafe(n.el);this.GridControls.push(n)};this.loadRowsGrids=function(n,t){t=t||{};for(var r=this.additiveResponse||t.addRows,u=this.grid.rows.length,i=r?this.firstAdditiveRow:0;i<u;i++)this.loadRowGrids(this.grid.rows[i],n)};this.loadRowGrids=function(n,t){for(var i,u,f,e=n.gxGrids.length,r=0;r<e;r++)i=n.gxGrids[r],i.grid.setContainerDelayed(gx.dom.byId(i.gxContainerDivName)),t?(i.parentRow==undefined||gx.lang.emptyObj(i.parentRow.Grids)||(u=i.getDataHiddenName(),f=i.parentRow.Grids[i.realGridName],gx.fn.setHidden(u,gx.json.serializeJson(f))),i.loadGrid({isNestedLoad:!0})):i.refreshGrid({isNestedLoad:!0}),n.IsNew=!1};this.updateRcdCount=function(){var n,t;(this.hasForEachLine||this.parentObject.isTransaction())&&(n=this.grid.gxParentRowId==""?"":"_"+this.grid.gxParentRowId,gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId+n,this.lastRowId.toString()));t=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_ROW");(this.lastRowId==0||parseInt(t,10)>this.lastRowId)&&(this.grid.instanciateSelectionVars("0000"),gx.fn.setCurrentGridRow(this.gridId,""))};this.updateControlValue=function(n,t,i){var r,u,f,e,o,s,h;try{if(r=this,i=i||gx.fn.currentGridRow(n.grid).toString(),u=i,f=i.length,f>4){if(e=i.substring(4,f),r=gx.fn.gridObj(this.gxComponentContext,this.gridName+"_"+e,this.isMasterPageGrid),!r)return;u=i.substring(0,4)}return o=parseInt(u,10)-1,t==!0&&r.setRowModified(i),s=r.getColumnIndexByName(n.fld),h=gx.dom.el(this.gxComponentContext+n.fld+"_"+i),r.updateRowValue(s,o,h),r}catch(c){gx.dbg.logEx(c,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(n,t,i){var o=n.lastIndexOf("_"),r,f,e;if(o!=-1){var s=n.substring(0,o),h=n.substring(o+1),u=this.grid.getRowByGxId(h);u&&(r=this.grid.getColumnByHtmlName(s),r&&(f=this.parentObject[i.gxvar],i.type=="decimal"&&gx.lang.instanceOf(f,Number)&&(f=f.toFixed(i.dec)),u.values[r.index]=f,u.gxProps[r.index]||(u.gxProps[r.index]={}),e=gx.dom.el(n),e&&e.tagName=="SELECT"&&(u.gxProps[r.index].Values=gx.dom.comboBoxToObj(e)),u.gxProps[r.index].Value=f,u.gxProps[r.index].FormattedValue=t))}};this.getColumnIndexByName=function(n){for(var i=this.grid.columns,r=i.length,t=0;t<r;t++)if(i[t].htmlName==n)return t;return-1};this.setRowModified=function(n){gx.fn.setHidden(this.grid.gxCmpContext+"nIsMod_"+this.gridLvl.toString()+"_"+n,1);this.parentGrid!=null&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(n)};this.validateRow=function(n){var t,i;if(n)try{t=n.getAttribute("data-gxgridid");gx.fn.setCurrentGridRow(t,n.gxrow);i=gx.fn.lastGridControl(t);gx.csv.validControls(gx.csv.lastId,i+1,!0,gx.O)}catch(r){gx.dbg.logEx(r,"gxgrid.js","validateRow")}};this.updateRowValue=function(n,t,i){var r=this.grid.getRowById(t),u=this.grid.columns[n],o,f,e;i.type=="checkbox"&&(i.value=i.checked?u.gxChecked:u.gxUnChecked);o=this.parentObject.getValidStruct(this.grid.columns[n].gxId);f=o.val(r.gxId);r.values[n]=f;gx.lang.emptyObject(r.gxProps[n])||(r.gxProps[n].Value=f,r.gxProps[n].FormattedValue=gx.fn.getControlValue(this.grid.columns[n].htmlName+"_"+r.gxId,"screen"));this.parentObject.isTransaction()&&(e=this.columnIndexInKey(u.gxAttId),e!=-1&&(r.gxKeyValues[e]=f));u.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+u.htmlName+"_"+r.gxId+"_gxBlob",f)};this.expandCollapse=function(t,i){var r,u,f,e;gx.evt.cancel(i,!0);r=gx.dom.byId(this.getGridInnerTableId());r!=null&&(this.collapsed?(n(r).removeAttr("data-gx-sr-only"),t.src=gx.ajax.getImageUrl(gx,"collapseImage")):(n(r).attr("data-gx-sr-only",""),t.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(f=this.gridName.lastIndexOf("_"),e=this.gridName.substring(f),u=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed"+e):u=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(u,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(n){var t=n.gxrow,i;return gx.lang.emptyObject(t)&&(i=n.id.lastIndexOf("_"),t=n.id.substring(i+1)),this.grid.getRowByGxId(t)};this.showContextMenu=function(n,t){this.contextMenu.show(n,t)}},contextMenu:function(n){this.gxgrid=n;this.controlName=this.gxgrid.containerName+"ContextMenu";this.rowClicked=null;this.contextEvent=null;this.eventSource=null;var t=new gx.text.stringBuffer;this.show=function(n,i){this.gxgrid.validateRow(n);this.contextEvent=i;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(i,!0);this.rowClicked=n;this.startMenu();t.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("<\/div>");this.endMenu()};this.startMenu=function(){t.clear();var n=this.getMenuCoords();t.append('<div onclick="').append(this.gxgrid.grid.gridObject()+".contextMenu.contextMenuClicked(event);").append('" onmouseover="');t.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');t.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");t.append("top:"+n.top+"; left:"+n.left+";").append('">')};this.endMenu=function(){t.append("<\/div>");var n=gx.dom.byId(this.controlName);n==null&&(n=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),n.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(n),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));gx.dom.shouldPurge()&&gx.dom.purge(n,!0);n.innerHTML=t.toString()};this.hide=function(){this.rowClicked=null;this.contextEvent=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};this.getMenuCoords=function(){var t=0,i=0,n=this.contextEvent;return n.pageX||n.pageY?(t=n.pageX,i=n.pageY):(n.clientX||n.clientY)&&(t=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=n.clientY+document.body.scrollTop+document.documentElement.scrollTop),{left:t,top:i}};this.contextMenuClicked=function(n){var t=gx.evt.source(n);this.handleContextMenuAction(t.id);this.hide()};this.handleContextMenuAction=function(n){switch(n){case"deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);break;case"undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},getPaddedRowId:function(n){var t=""+n,i="0000";return i.substring(0,i.length-t.length)+t},rowId:function(n){for(var t=n.toString();t.length<4;)t="0"+t;return t},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}}}(gx.$);gx.grid.impl=function(n){return function(t){var u=/style="([^"]*)"/ig,i,r;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.width="";this.align="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.ascSort=!0;this.usePaging=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName="";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.gxParentRowId="";this.gxHoveredRowId=null;this.tableClass="";this.headerClass="";this.footerClass="";this.editControlClass="";this.navigationClass="";this.navigationLinkClass="";this.highlightedNavigationLinkClass="";this.columnAutoHeaderClass="";this.columnHeaderTextClass="";this.oddRowClass="";this.oddRowCellClass="";this.evenRowClass="";this.evenRowCellClass="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";this.pagingButtonNextClass="PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;typeof Image!="undefined"?(this.ascLabel=new Image,this.descLabel=new Image):(this.ascLabel=null,this.descLabel=null);this.id=t;this.container=null;this.setContainerDelayed=function(n){this.container=n};this.addColumn=function(n){n.isGxRemove()&&(n.visible=!1);var t=this.columns.length;return n.index=t,n.table=this,this.columns[t]=n,typeof n.htmlName!="undefined"&&(this.columnsHtmlName[n.htmlName]=n),typeof n.gxId!="undefined"&&(this.columnsGxId[n.gxId]=n),typeof n.gxAttId!="undefined"&&(this.columnsGxAttId[n.gxAttId]=n),n};this.getColumnByIndex=function(n){return this.columns[n]};this.getColumnByCtrlType=function(t){return n.map(this.columns,function(n){return n.gxControl.type==t?n:null})};this.addRow=function(n,t){if(n.table=this,n!=null)return this.rows[this.rows.length]=n,typeof n.id!="undefined"&&(this.rowsById[n.id]=n),typeof n.gxId!="undefined"&&(this.rowsByGxId[n.gxId]=n),gx.lang.booleanValue(t)&&this.render(),n};this.getColumnByHtmlName=function(n){var t,i;return t=this.columnsHtmlName[n],typeof t=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<n.length&&(i=n.substring(0,this.gxCmpContext.length),i==this.gxCmpContext&&(n=n.substring(this.gxCmpContext.length,n.length),t=this.columnsHtmlName[n])),t};this.getColumnByGxId=function(n){return this.columnsGxId[n]};this.getColumnByGxAttId=function(n){return this.columnsGxAttId[n]};this.getColumnForVar=function(n){for(var i,t=0;t<this.columns.length;t++)if(i=this.parentGxObject.getValidStruct(this.columns[t].gxId),i&&i.gxvar==n)return this.columns[t];return null};this.getRowById=function(n){return this.rowsById[n]};this.getRowByGxId=function(n){return this.rowsByGxId[n]};this.setSort=function(n,t){n==this.sortColumn?this.ascSort=t==null?!this.ascSort:gx.lang.booleanValue(t):(this.sortColumn=n,this.ascSort=t==null?!0:gx.lang.booleanValue(t));this.doSort();this.ownerGrid.refreshGrid({immediateApplyInfiniteScroll:!0})};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(n,t){return this.gxCmpContext+t.htmlName+"_"+n.gxId};this.getControlId=function(n,t){return this.getControlName(n,t)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(n){return this.gxCmpContext+"delete"+this.gxGridName+"_"+n};this.showDeleteImage=function(n){var i,t;this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(i=this.isGxTrn(),i&&(t=gx.dom.byId(this.deleteImgId(n)),t&&(gx.fn.isVisible(t)||(t.style.display="inline",t.parentNode.nodeName=="A"&&(t.parentNode.style.display="inline")))))};this.appendDeleteHeader=function(n,t){var u,i,r;if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){if(u=this.isGxTrn(),i=!1,this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(t==gx.grid.deletePositions.left)i=!0;else return;else gx.grid.deletePosition==t&&(i=!0);u&&i&&(r="&nbsp;",this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(r=gx.grid.deleteTitle),n.append('<th class="'+this.columnAutoHeaderClass+'">'+r+"<\/th>"))}};this.appendDeleteImage=function(n,t,i){var l,e,h,a,r,u,o,v,s;if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&(l=this.isGxTrn(),l)){if(e=!1,h=!1,this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"&&(e=t.gxDeleted(),h=t.gxIsMod()||t.gxExists()),a=this.deleteImgId(t.gxId),r=!1,this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(i==gx.grid.deletePositions.left)r=!0;else return;else this.gxIsFreestyle||gx.grid.deletePosition!=i?this.gxIsFreestyle&&(u=gx.grid.deletePositionFree,i==gx.grid.deletePositions.left?r=u==gx.grid.deletePositions.topL||u==gx.grid.deletePositions.bottomL:i==gx.grid.deletePositions.right&&(r=u==gx.grid.deletePositions.topR||u==gx.grid.deletePositions.bottomR),i=u):r=!0;if(r){var y="<"+this.CELL_TAG+' class="gx-remove-row gx-remove-row-'+this.deleteImageAlign(i)+" gx-remove-row-"+this.deleteVerticalAlign(i)+'" style="text-align:'+this.deleteImageAlign(i)+";vertical-align:"+this.deleteVerticalAlign(i)+'">',p="<\/"+this.CELL_TAG+">",f="",c=!1;e&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?f=gx.grid.undeleteImage:h&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?f=gx.grid.deleteImage:e&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu?f=gx.grid.deleteImage:(f=gx.grid.deleteImage,c=!0);o="";n.append(y);this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(v=gx.fn.firstGridControl(this.ownerGrid.gridId),o=gx.grid.deleteTooltip,n.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+t.gxId+"');\""),n.append(' onfocus="gx.evt.onfocus(this,'+v+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+t.gxId+"',"+this.ownerGrid.gridId+')"'),s="",c&&(s+="display:none;"),s&&n.append(' style="'+s+'"'),n.append(">"));n.append('<img id="'+a+'" src="'+f+'"');o&&n.append(' title="'+o+'"');n.append(' style="border-style: none;');c&&n.append("display:none;");n.append('"');n.append(' class="gx-grid-delete"/>');this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&n.append("<\/a>");n.append(p)}}};this.deleteVerticalAlign=function(n){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var t="top";return(n==gx.grid.deletePositions.bottomL||n==gx.grid.deletePositions.bottomR)&&(t="bottom"),t}return"middle"};this.deleteImageAlign=function(n){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var t="right";return(n==gx.grid.deletePositions.bottomL||n==gx.grid.deletePositions.topL)&&(t="left"),t}return"center"};this.getRowByPos=function(n){return this.container.querySelector(" tbody>tr:nth-child("+n+")")};this.scroll_last_row_selector=function(n){return this.ownerGrid.additiveResponse?" tbody tr:nth-last-child("+Math.min(n/2,1)+")":" tbody tr:last-child"};this.scroll_first_row_selector=function(){return" tbody tr:first-child"};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(n,t){var r=this.ROW_TAG,u=this.ROW_BASE_CLASS,i;return this.gxIsFreestyle&&(r=this.CELL_TAG),i=u,i+=(i?" ":"")+(n?this.evenRowClass:this.oddRowClass)+(t?" RowDeleted":""),{cls:i,tag:r}};this.simpleAppendFn=function(n){return function(t){t.append(n)}};this.appendGridStyle=function(n){var i=u,t=i.exec(this.gxHtmlTags);t&&t.length>1&&n.append(t[1]);gx.lang.emptyObject(this.gxBackground)||n.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,!0)+"');");gx.lang.emptyObject(this.gxBorderWidth)||n.append(";border: solid "+this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?n.append(";"):n.append(this.gxBordercolor+";");this.ownerGrid.width>0&&n.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";")};this.appendGridAttributes=function(n){n.append(this.gxHtmlTags.replace(u,""));this.gxAllowCollapsing&&this.gxCollapsed&&n.append(" data-gx-sr-only ")};this.appendGridClassAttribute=function(n){this.gxHtmlTags.indexOf("class=")==-1&&n.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=function(n){n.append('<div valign="top" ><div>');n.append('<img class="collapse-icon" style="cursor:pointer;" src="');this.gxCollapsed?n.append(gx.ajax.getImageUrl(gx,"expandImage")):n.append(gx.ajax.getImageUrl(gx,"collapseImage"));n.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"><\/div><div>')};this.appendCollapsingWrapperEnd=function(n){n.append("<\/div><\/div>")};this.appendContainerStart=function(n,t){t.append("<table ");this.appendGridClassAttribute(t);t.append(' id="'+n+'" ');gx.lang.emptyObject(this.gxToolTipText)||t.append('title="'+this.gxToolTipText+'" ');t.append('style="');this.appendGridStyle(t);t.append('" ');this.appendGridAttributes(t);this.isAbstract||(t.append('data-bkgstyle="'),t.append(gx.grid.styles[this.gxTitleBackstyle]),t.append('" '));t.append(">");gx.lang.emptyObject(this.header)||(t.append("<caption>"),t.append(this.header),t.append("<\/caption>"))};this.appendContainerEnd=this.simpleAppendFn("<\/table>");this.appendHeaderText=function(n,t){gx.lang.emptyObject(this.headerText)||t.append('<tr><td colspan="'+n+'" class="'+this.headerClass+'">'+this.headerText+"<\/td><\/tr>")};this.appendFooterText=function(n,t){gx.lang.emptyObject(this.footerText)||t.append('<tr><td colspan="'+n+'" class="'+this.footerClass+'">'+this.footerText+"<\/td><\/tr>")};this.appendHeader=function(n,t){var o=n.length,s="cursor:"+(document.createTextRange?"hand":"pointer")+";",h=[],c=gx.ajax.getImageUrl(gx,"ascImage"),l=gx.ajax.getImageUrl(gx,"descImage"),f=0,r,u,i,e;for(t.append("<thead>"),t.append("<tr>"),this.appendDeleteHeader(t,gx.grid.deletePositions.left),u=0;u<o;u++)i=n[u],e=[i.gxColumnClass||i.gxControl.columnClass,i.columnheaderclass||"",this.columnAutoHeaderClass].join(" "),t.append('<th class="'+e+'"'),r="white-space:nowrap;",gx.lang.gxBoolean(i.visible)||(r+="display:none;"),i.width&&(i.gxWidthUnit||(i.gxWidthUnit="px"),r+="width:"+i.width+i.gxWidthUnit+";"),i.align&&(r+="text-align:"+i.align+";"),gx.lang.emptyObject(this.gxTitleBackColor)||this.gxTitleBackstyle!=gx.grid.styles.header&&this.gxTitleBackstyle!=gx.grid.styles.report||(r+="background-color:"+this.gxTitleBackColor+";",this.gxRealTitleBackColor=this.gxTitleBackColor),gx.lang.emptyObject(this.gxBackColor)||this.gxTitleBackstyle!=gx.grid.styles.uniform||(r+="background-color:"+this.gxBackColor+";",this.gxRealTitleBackColor=this.gxBackColor),gx.lang.emptyObject(this.gxTitleForeColor)||(r+="color:"+this.gxTitleForeColor+";"),gx.lang.emptyObject(this.gxTitleFont)||(r+=this.gxTitleFont),i.titlefontunderline?r+="text-decoration: underline;":i.titlefontstrikethru&&(r+="text-decoration: line-through;"),i.titlefontbold&&(r+="font-weight: bold;"),i.titlefontitalic&&(r+="font-style: italic;"),i.titlebackcolor&&(r+="background-color:"+gx.color.html(i.titlebackcolor).Html+";"),i.titleforecolor&&(r+="color:"+gx.color.html(i.titleforecolor).Html+";"),t.append(' style="'+r+';"'),t.append(' data-colindex="'+f+'"'),t.append(">"),f++,gx.lang.emptyObject(gx.text.trim(i.title))?t.append("&nbsp;"):(t.append("<span"),i.gxTooltip&&t.append(' title="'+i.gxTooltip+'"'),r="",i.sortable&&(r=s,t.append(' onclick="'+this.gridObject()+".grid.setSort("+i.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"")),t.append(">"),t.append(i.title),this.ascLabel!=null&&this.descLabel!=null&&(this.ascLabel.src=c,this.descLabel.src=l,i.sortable&&this.sortColumn==i.index&&t.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,h))),t.append("<\/span>")),t.append("<\/th>");this.appendDeleteHeader(t,gx.grid.deletePositions.right);t.append("<\/tr>");t.append("<\/thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("<\/tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");this.appendFooterWrapperEnd=this.simpleAppendFn("<\/tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("<\/tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");this.appendRowBreaksWrapperEnd=this.simpleAppendFn("<\/tbody><\/table><\/td>");this.appendRowPrefix=gx.emptyFn;this.appendCellPrefixStart=gx.emptyFn;this.appendCellPrefixEnd=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.headerClass=this.gxTitleClass;this.columnAutoHeaderClass=this.headerClass;this.columnHeaderTextClass=this.headerClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;n.each(this.beforeRenderCallbacks,function(n,t){t()});this.beforeRenderCallbacks=[]};this.drawEmptyContent=function(){var i=this.ownerGrid,t=i.getGridInnerTableId(),r;i.emptyText&&n("#"+t+" + .gx-text-gridnodata").length===0&&(r=n(document.createElement("div")).addClass("GridNoDataText gx-text-gridnodata").text(i.emptyText),r.insertAfter(n("#"+t)));this.rows.length===0?n("#"+t).attr("data-gx-grid-nodata",""):n("#"+t).removeAttr("data-gx-grid-nodata")};this.purgeGrid=function(){for(var i=["onblur","onclick","onfocus","onchange"],o=gx.dom.byTag("input",this.container),r,u,f,e,n=0,t=o.length;n<t;n++)gx.dom.purgeElement(o[n],i);for(r=gx.dom.byTag("textarea",this.container),n=0,t=r.length;n<t;n++)gx.dom.purgeElement(r[n],i);for(u=gx.dom.byTag("select",this.container),n=0,t=u.length;n<t;n++)gx.dom.purgeElement(u[n],i);for(f=gx.dom.byTag("span",this.container),n=0,t=f.length;n<t;n++)gx.dom.purgeElement(f[n],i);for(e=gx.dom.byTag("img",this.container),n=0,t=e.length;n<t;n++)gx.dom.purgeElement(e[n],i)};this.render=function(n,t,i,r,u){var e,o,s;n=!!n;e=this.ownerGrid.getGridInnerTableId();o=this.container;this.beforeRender();this.ownerGrid.additiveResponse&&this.doSort();s=this.drawGrid(e,n,t,i,u);gx.dom.shouldPurge()&&this.purgeGrid();var f=gx.dom.getActiveElement(),h=f?f.tagName.toUpperCase():"",c=f&&(f.id||f.name)&&h!="FORM"&&gx.dom.isChildNode(f,o),l=gx.dom.getCaretOffset(f);this.setGridHtml(this.container,s,u);this.ownerGrid.isNestedLoad||gx.dom.fixes.fixTableResets(this.container);this.ownerGrid.applyTemplateObject({deferred:!1});this.gxIsFreestyle||this.ownerGrid.instanciateRow(gx.fn.currentGridRowImpl(this.ownerGrid.gridId));this.ownerGrid.additiveResponse&&this.sortColumn!=-1&&this.ownerGrid.handleInfiniteScrolling();c&&setTimeout(function(){var n=gx.dom.el(f.id||f.name,!1,!0);n&&(gx.csv.disableFocus=!0,n.offsetWidth>0&&n.offsetHeight>0&&gx.fn.setFocus(n,function(){gx.dom.setCaretOffset(n,l)}))},10);this.drawEmptyContent();this.afterRender(e);r();this.rendered=!0};this.setGridHtml=function(t,i,r){r=r||{};gx.csv.IgnoreBlur=!0;var u,f,e=this.ownerGrid.InverseLoading,o,s,h=this.ownerGrid.additiveResponse||r.addRows;h?this.sortColumn!==-1?(t.innerHTML=i,gx.plugdesign.applyTemplateObject({selector:t})):(this.gxIsFreestyle?(u=document.createElement("div"),u.className="gx-sr-only",u.innerHTML=i,u.setAttribute("data-gx-grid-rendering-additive-rows",""),f=n(u),o=e?this.firstItemSelector:this.lastItemSelector,e?f.insertBefore(o):f.insertAfter(o)):e?f=n(i).insertBefore(this.firstItemSelector):u=n(i).insertAfter(this.lastItemSelector),this.newAdditiveRows=f,gx.plugdesign.applyTemplateObject({selector:f,deferred:!0}).then(function(){this.newAdditiveRows&&(s=this.newAdditiveRows.children(),e?s.insertBefore(this.newAdditiveRows):s.insertAfter(this.newAdditiveRows),this.newAdditiveRows.trigger("gx-grid:after-additive-rows-render"),this.newAdditiveRows.remove(),delete this.newAdditiveRows)}.closure(this))):t.innerHTML=i;gx.csv.IgnoreBlur=!1};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.drawGrid=function(n,t,i,r,u){var c,l,rt,ut,g,nt,p,ft,et,ot;u=u||{};var tt=this.isGxTrn(),v=this.gxIsFreestyle&&this.gxGridCols>1,e=new gx.text.stringBuffer,y=this.columns,w=y.length,s,h,o,b,it,k,a,f,d=this.ownerGrid.additiveResponse||u.addRows;if(!this.gxIsFreestyle&&tt&&w++,d||u.immediateApplyInfiniteScroll?(c=!d&&(this.firstRecordOnPage=="0"||this.sortColumn!=-1)?0:this.lastRenderedRow,l=this.rows.length,this.ownerGrid.firstAdditiveRow=c):Number(this.pageSize)!==0?(rt=this.getMaxPage(),this.currentPage<=0?this.currentPage=1:this.currentPage>rt&&(this.currentPage=rt),c=Math.max(this.pageSize*(this.currentPage-1),0),l=Math.min(c+this.pageSize,this.rows.length)):(c=0,l=this.rows.length),this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(e),ut=y.length,!this.gxIsFreestyle&&l>c)for(g=0;g<ut;g++)if(o=y[g],k=gx.lang.gxBoolean(o.visible),k){for(nt=!1,s=c;s<l&&!nt;s++)h=this.rows[s],f=o.gxControl,a=h.gxProps[o.index],r||f.setProperties.apply(f,a),f.visible&&(nt=!0);nt||(o.visible=!1)}if(d&&this.sortColumn==-1||(this.appendContainerStart(n,e),this.appendHeaderText(w,e),this.gxIsFreestyle||this.appendHeader(y,e),this.appendBodyWrapperStart(e)),p=!0,ft=function(){var i,g,w,et,rt,d,u;p=!p;h=this.rows[s];t&&s===c&&!gx.fn.currentGridRowImpl(this.gxId)&&gx.fn.setCurrentGridRow(this.gxId,h.gxId);var ft=h.gxDeleted(),n=new gx.text.stringBuffer,nt=this.getRowRenderingProps(p,ft,s,c,l),ot=v&&this.gxIsFreestyle&&(s>0&&s%this.gxGridCols==0||s===0&&this.gxGridCols>0);for(ot&&(s>0&&this.appendRowEnd(e,s,c,l),this.appendRowStart(e,s,c,l)),i="",this.gxTitleBackstyle==gx.grid.styles.report&&(i=p?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd),this.gxTitleBackstyle==gx.grid.styles.header&&(i=this.gxLinesBackcolorOdd),this.gxTitleBackstyle==gx.grid.styles.uniform&&(i=this.gxBackColor),(!this.gxIsFreestyle||this.gxIsFreestyle&&v)&&(this.appendRowPrefix(n,s,c,l),n.append("<"+nt.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+h.gxId+"'"),this.gxIsFreestyle||n.append(' data-gxrendering_row=""'),this.gxIsFreestyle&&v?(n.append(' data-gxrow="'+h.gxId.toString()+'"'),it=this.columns[1].gxControl.verticalAlign,it&&n.append(' data-cell-valign="'+it+'"')):n.append(' data-gxrow="'+h.gxId.toString()+'"'),n.append(' class="'+nt.cls+'"'),h.selected&&n.append(' data-selected="1"'),g="",i&&(g="background-color:"+i+";"),gx.lang.emptyObject(this.gxLinesFont)||(g+=this.gxLinesFont),g&&n.append(' style="'+g+'" '),n.append(">"),e.append(n.toString())),this.gxIsFreestyle&&(v&&this.appendRowBreaksWrapperStart(e,h),b=this.gxBuffer.toString(),e.append(b)),this.gxIsFreestyle||this.appendDeleteImage(e,h,gx.grid.deletePositions.left),this.appendCellPrefixStart(e,s,c,l,h,nt),w=0;w<ut;w++){if(o=y[w],k=gx.lang.gxBoolean(o.visible),a=h.gxProps[o.index],et=h.values[o.index],f=o.gxControl,this.gxIsFreestyle&&f.type==gx.html.controls.types.row&&o.index===0&&(f.isFreestyleRow=!0),f.setGridData({grid:this.ownerGrid,row:h,gridId:this.gxId,gridRow:h.gxId}),r?(delete f.formattedValue,f.value=et,f.id=o.htmlName+"_"+f.gridRow):(f.setProperties.apply(f,a),f.isFreestyleRow&&(f.cssClass=nt.cls)),t)delete gx.usrPtys[f.id];else if(gx.usrPtys[f.id]!==undefined)for(rt in gx.usrPtys[f.id])rt=="enabled"&&(f.rtEnabled=!0),f.setIndividualProp(rt,gx.usrPtys[f.id][rt]);ft&&(f.rtEnabled=!0,f.enabled=!1);d=this.parentGxObject.getValidStruct(o.gxId);typeof a.Value!="undefined"&&(f.value=gx.decimalPoint!="."&&d&&d.type=="decimal"&&typeof a.Value=="string"?a.Value.replace(".",gx.decimalPoint):a.Value);typeof a.FormattedValue!="undefined"&&(f.formattedValue=a.FormattedValue);typeof f.formattedValue=="undefined"&&(r&&d&&d.v2c?(f.persistValue(),d.v2c(h.gxId),f.formattedValue=gx.fn.getControlValue(f.id)):f.formattedValue=f.value);a.Values&&(f.possibleValues=a.Values.v);this.gxIsFreestyle&&f.type==gx.html.controls.types.row&&o.index===0&&(f.id=this.gxCmpContext+this.gxGridObject+"Row_"+h.gxId,tt&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&(f.oncontextmenu=this.gridObject()+".showContextMenu(this, event);"),i&&(f.style+="background-color:"+i+";"));this.gxIsFreestyle||(e.append("<"+this.CELL_TAG+' class="gx-attribute '+(f.columnClass||"")+'" data-cell-valign="'+o.valign+'"'),e.append(' data-colindex="'+w+'"'),u="",k||(u+="display:none;",!f.visible||o.isGxRemove()||this.ownerGrid.isPromptColumn(o)||this.ownerGrid.addColPropertyAfterRender(w,"Visible",1)),o.width?(o.gxWidthUnit||(o.gxWidthUnit="px"),u+="width:"+o.width+o.gxWidthUnit+";"):o.gxColSize&&(f.colSize=o.gxColSize),o.align&&(u+="text-align:"+o.align+";"),f.style&&(u+=f.style),u&&e.append(' style="'+u+'" '),e.append(">"));e.append(f.getHtml());this.gxIsFreestyle&&f.type==gx.html.controls.types.row&&o.index===0&&this.appendDeleteImage(e,h,gx.grid.deletePositions.left);f.persistValue();this.gxIsFreestyle||e.append("<\/"+this.CELL_TAG+">");this.gxIsFreestyle&&(o.index==this.columns.length-1&&this.appendDeleteImage(e,h,gx.grid.deletePositions.right),b=o.buffer.toString(),e.append(b))}this.appendCellPrefixEnd(e,s,c,l);this.gxIsFreestyle&&v?this.appendRowBreaksWrapperEnd(e):this.appendDeleteImage(e,h,gx.grid.deletePositions.right)},this.ownerGrid.InverseLoading)for(s=l-1;s>=c;s--)ft.apply(this);else for(s=c;s<l;s++)ft.apply(this);return this.gxIsFreestyle&&this.gxGridCols>0&&v&&this.appendRowEnd(e),this.lastRenderedRow=l,d||(this.appendBodyWrapperEnd(e),this.appendFooterWrapperStart(e),et=!this.ownerGrid.InfiniteScrolling&&(tt||this.hasPagingButtons()),et&&this.appendNavigationBar(w,e),this.appendFooterText(w,e),this.appendFooterWrapperEnd(e),this.appendContainerEnd(e),this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(e)),ot=e.toString(),e.clear(),e=null,ot};this.defineEventHandlers=function(){this.gxIsFreestyle||(gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this),gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this));this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[],!0),this);gx.evt.attach(this.container,"click",this.clickHandler,this);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this)};this.isGridRow=function(t){return t&&t.tagName.toLowerCase()==this.ROW_TAG&&t.getAttribute("data-gxrow")!=null&&n(t).closest(".gx-grid")[0]==this.container};this.getTargetRow=function(n,t){for(var i=n;i&&gx.dom.isChildNode(i,this.container);){if(this.isGridRow(i)&&(!t||t=="body"&&i.parentNode.tagName=="TBODY"||t=="header"&&i.parentNode.tagName=="THEAD"))return i;i=gx.dom.findParentByTagName(i,this.ROW_TAG)}};this.mouseOverHandler=function(n){if(!gx.runtimeTemplates&&this.gxAllowHovering){var t=this.getTargetRow(gx.evt.source(n));t&&t.getAttribute("data-selected")!="1"&&(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(t),this.gxHoveredRowId=parseInt(t.getAttribute("data-gxrow").substring(0,4),10)-1)}};this.mouseOutHandler=function(n){if(!gx.runtimeTemplates&&this.gxAllowHovering){var t=this.getTargetRow(gx.evt.source(n));t&&t.getAttribute("data-selected")!="1"&&this.endRowHover(t)}};this.contextMenuHandler=function(n){var t=this.getTargetRow(gx.evt.source(n));t&&this.ownerGrid.showContextMenu(t,n)};this.mouseDownHandler=function(n,t){var i=this.getTargetRow(gx.evt.source(n));i&&(t=typeof t=="undefined"?this.gxAllowSelection&&!this.gxIsFreestyle:t,this.setRowSelected(i,i.getAttribute("data-gxrow"),!1,t))};this.keyDownHandler=function(n){var t=this.getTargetRow(gx.evt.source(n));t&&this.ownerGrid.rowKeyPressed(n)};this.clickHandler=function(n){var t=gx.evt.source(n);t.parentNode&&gx.dom.hasClass(t.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(t,n)}.closure(this))};this.pagingHandler=function(n,t){var i="";gx.evt.cancel(t,!0);gx.dom.hasClass(n,this.pagingButtonDisabled)||(gx.dom.hasClass(n,this.pagingButtonFirstClass)?i="FIRST":gx.dom.hasClass(n,this.pagingButtonPreviousClass)?i="PREV":gx.dom.hasClass(n,this.pagingButtonNextClass)?i="NEXT":gx.dom.hasClass(n,this.pagingButtonLastClass)&&(i="LAST"),this.changeGridPage(i))};this.changeGridPage=function(t,i){var f=n.Deferred(),e=this.gxGridName.toUpperCase()+"PAGING",r=this.ownerGrid,u="",o,s;if(t)return r.InfiniteScrolling||this.mask(),gx.pO.fullAjax?(gx.setGxO(this.parentGxObject),u="E"+r.realGridName.toUpperCase()+"_"+t+"PAGE"+(r.isMasterPageGrid?"_MPAGE":""),r.parentGrid&&(o=r.parentGrid.gridId)):(gx.fn.setHidden(this.gxCmpContext+e,t),u=this.gxCmpContext+"E"+e+"."),s=function(){this.unmask();f.resolve()},gx.evt.execEvt(undefined,undefined,u,gx.evt.dummyCtrl,o,undefined,undefined,!1,s.closure(this),i),f.promise()};i="data-gxselected";this.setRowSelected=function(t,r,u,f,e){gx.grid.setActiveGridRow(this,r);f=f===undefined||f;e=e===undefined||e;var o=function(){var a=gx.O,s,o;if(!gx.lang.emptyObject(this.parentGxObject)){f&&!gx.runtimeTemplates&&t.gxOriginalBackcolor===undefined&&(t.gxOriginalBackcolor=t.style.backgroundColor);this.instanciateSelectionVars(r);var l=this.getRowByGxId(r),u,h=this.selectedRows||[],c=[];for(l&&h.push(l),u=0;u<h.length;u++)s=h[u],s.selected=s.gxId==r,s.selected?(f&&(gx.runtimeTemplates||(t.gxSBackcolor=t.gxOriginalBackcolor!==undefined?t.gxOriginalBackcolor:t.style.backgroundColor,this.gxSelectionColor&&(t.style.backgroundColor=this.gxSelectionColor.Html)),gx.dom.addClass(t,this.selectedRowClass),n(t).attr(i,"")),c.push(s)):f&&(o=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+s.gxId),o!=null&&o.gxSBackcolor!==undefined&&(gx.runtimeTemplates||(o.style.backgroundColor=o.gxSBackcolor)),gx.dom.removeClass(o,this.selectedRowClass),n(o).removeAttr(i));for(u=0;u<c.length;u++)this.instanciateSelectedRow(c[u],!e);gx.setGxO(a)}};u&&(f||gx.O.isTransaction())?setTimeout(o.closure(this),100):o.call(this)};this.instanciateSelectionVars=function(n){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,n);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",n.substring(0,4))};this.instanciateSelectedRow=function(n,t){var i,r;this.selectedRows=[n];this.setSelectedRowVars(n);this.gxOnLineActivate&&!this.ownerGrid.isLoading&&(gx.csv.instanciatedRowGrid=this.ownerGrid,t||(i=this.parentGxObject,i.fullAjax?(r=i.isServerEvent(this.gxOnLineActivate),gx.evt.dispatcher.dispatch(i.getServerEventName(this.gxOnLineActivate),i,this.ownerGrid.gridId,n.gxId,r)):i[this.gxOnLineActivate].call(i,n.gxId)))};this.setSelectedRowVars=function(n){for(var r,t,u=this.parentGxObject,f=this.columns.length,i=0;i<f;i++)r=this.columns[i],t=u.GXValidFnc[r.gxId],t!=null&&t.c2v&&t.c2v(n.gxId)};this.scrollIntoView=function(n,t,i){function s(n,i,r,u){return!1===t||r<=n+u&&n<=i+u?Math.min(r,Math.max(i,n)):(i+r)/2}function f(n,t,i,r){return{left:n,top:t,width:i,height:r,right:n+i,bottom:t+r,translate:function(u,e){return f(u+n,e+t,i,r)},relativeFromTo:function(e,o){var s=n,h=t;if(e=e.offsetParent,o=o.offsetParent,e===o)return u;for(;e;e=e.offsetParent)s+=e.offsetLeft+e.clientLeft,h+=e.offsetTop+e.clientTop;for(;o;o=o.offsetParent)s-=o.offsetLeft+o.clientLeft,h-=o.offsetTop+o.clientTop;return f(s,h,i,r)}}}for(var r,e,o,u=f(n.offsetLeft,n.offsetTop,n.offsetWidth,n.offsetHeight);r=n.parentNode;)e=r.offsetLeft+r.clientLeft,o=r.offsetTop+r.clientTop+i,u=u.relativeFromTo(n,r).translate(-e,-o),r.scrollTop=s(r.scrollTop,u.bottom-r.clientHeight+i,u.top,r.clientHeight),u=u.translate(e-r.scrollLeft,o-r.scrollTop),n=r};this.keepGridItemVisible=function(t,i){var f=gx.util.browser.isOldIE(),e=n(this.ownerGrid.getContainerControl()),r=f?e.closest(".gx-grid-fixed-header-ie7"):n("#"+this.ownerGrid.getContainerControlId()+" > table > tbody"),u,o;r.length>0&&r[0].offsetHeight<r[0].scrollHeight&&(u=this.ownerGrid.getRowCtrlByIdx(t),u&&(o=f?parseInt(e.css("paddingTop"),10):0,this.scrollIntoView(u,i,o)))};this.setNextRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId+1,!0,!1)};this.setPreviousRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId-1,!0,!0)};this.toggleRowHoverById=function(n,t,i){var r=this.ownerGrid.getRowCtrlByIdx(n),u=!1;return r&&(u=!0,t?(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(r),this.gxHoveredRowId=n,this.keepGridItemVisible(n,i)):this.endRowHover(r)),u};this.getRowByDOMCtrl=function(n){var t=parseInt(n.getAttribute("data-gxrow").substring(0,4),10)-1;return this.getRowById(t)};this.startRowHover=function(t){if(gx.runtimeTemplates){n(t).addClass("gx-row-hovered");return}t.gxOriginalBackcolor===undefined&&(t.gxOriginalBackcolor=t.style.backgroundColor);var i=this.getRowByDOMCtrl(t);this.gxAllowHovering&&this.gxHoverColor&&!i.selected&&(t.gxHBackcolor=t.style.backgroundColor,t.style.backgroundColor=this.gxHoverColor.Html)};this.endRowHover=function(t){if(gx.runtimeTemplates){n(t).removeClass("gx-row-hovered");return}var i=this.getRowByDOMCtrl(t);this.gxAllowHovering&&!i.selected&&t.gxHBackcolor!==undefined&&(t.style.backgroundColor=t.gxHBackcolor)};this.hasPagingButtons=function(){return this.usePaging&&this.pageSize>0&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(n,t){gx.lang.emptyObject(this.gxRealTitleBackColor)?t.append('<tr><td colspan="'+n+'" class="'+this.navigationClass+'" style="text-align: center;">'):t.append('<tr><td colspan="'+n+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">')};this.appendNavBarRowEnd=function(n){n.append("<\/td><\/tr>")};this.appendNavigationBar=function(n,t){var u=this.getRowCount(),f=n,i=(u>0||u===0&&!this.isFirstPage())&&this.usePaging,e=this.parentGxObject.Gx_mode,r=this.isGxTrn()&&!this.gxHasAddlines&&!(e=="DSP"||e=="DLT");this.navigationClass=this.gxFooterClass;this.gxIsFreestyle&&this.gxGridCols>1&&(f=this.gxGridCols);(i||r)&&this.appendNavBarRowStart(f,t);i&&(t.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">'),this.currentPage<=0&&(this.currentPage=1),t.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first"))),t.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous"))),t.append(this.buildPagingButton(this.pagingButtonNextClass,!this.isLastPage(),gx.getMessage("GXM_next"))),t.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last"))),t.append("<\/div>"));r&&t.append(this.buildLink("["+this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));(i||r)&&this.appendNavBarRowEnd(t)};this.buildPagingButton=function(n,t,i){var r='style="padding-left:20px;padding-bottom:5px;'+(t?"":"opacity:.7;cursor:default")+'"',u=t?"":" "+this.pagingButtonDisabled,f=t?"":" disabled";return'<button type="button" class="'+n+u+'"'+r+' title="'+i+'"'+f+"/>"};this.buildLink=function(n,t,i,r,u){var e="cursor:"+(document.createTextRange?"hand":"pointer")+";",f=this.navigationLinkClass,o=this.highlightedNavigationLinkClass,s=r!==undefined?'id="'+r+'"':"";return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+u+'" onblur="this.style.textDecoration = \'none\';"><span '+s+' style="'+e+'" class="'+f+'" onclick="'+t+'" onMouseOver="this.className=\''+o+"';window.status='"+i+"';return true;\" onMouseOut=\"this.className='"+f+"';window.status='';return true;\">"+n+"<\/span><\/a>"};this.isLastPage=function(){var n=this.eof;return n!="0"};this.isFirstPage=function(){var n=gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage;return n=="0"};this.getWebImageTag=function(n){return'<img border="0" src="/'+this.basePath+this.imgsDir+n.toString()+'"/>'};r=0;this.handleLabel=function(n){if(n.src){var t="img"+r;return r++,"<img name='"+t+"' border='0' src='"+n.src+"'>"}return n};this.sort=function(n,t){var f,c,e,o,s,l,i,h,r,u;if(n.table.isGxTrn())if(n.gxExists()||t.gxExists()||n.gxIsMod()||t.gxIsMod()){if(!n.gxExists()&&t.gxExists()||!n.gxIsMod()&&t.gxIsMod())return 1;if(n.gxExists()&&!t.gxExists()||n.gxIsMod()&&!t.gxIsMod())return-1}else return 0;f=n.table;c=f.getColumnByIndex(f.sortColumn);e=n.values[f.sortColumn];o=t.values[f.sortColumn];gx.lang.instanceOf(e,Array)||(e=[e]);gx.lang.instanceOf(o,Array)||(o=[o]);switch(c.type){case gx.types.numeric:s=function(n){return n=gx.num.parseFloat(n,gx.thousandSeparator,gx.decimalPoint),isNaN(n)&&(n=0),n};break;case gx.types.date:case gx.types.dateTime:s=function(n){try{n=new gx.date.gxdate(n).Value}catch(t){gx.dbg.logEx(t,"JSTable.js","sort")}return n.valueOf()};break;case gx.types.bool:s=function(n){return gx.lang.booleanValue(n)?1:0};break;default:s=function(n){return String(n).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(l=Math.max(e.length,o.length),i=0,h=0;i===0&&h<l;h++)r=e[h],r==null&&(i=-1),u=o[h],u==null&&(i=1),i===0&&(r=s(r),u=s(u),i=typeof r.localeCompare=="function"?r==u?0:r.localeCompare(u):r==u?0:r>u?1:-1),i!==0&&(i*=f.ascSort?1:-1);return i};this.mask=function(){var n=this.container||typeof this.getContainerControl=="function"&&this.getContainerControl();n.firstChild&&gx.dom.mask(n.firstChild)};this.unmask=function(){var n=this.container||typeof this.getContainerControl=="function"&&this.getContainerControl();n.firstChild&&gx.dom.unmask(n.firstChild)}}}(gx.$);gx.grid.column=function(n,t,i,r,u){this.table=null;this.index=-1;this.title=n||"";this.type=typeof t!="undefined"?t:gx.types.character;this.width=i||"";this.align=r||"left";this.valign=u||"middle";this.htmlName=null;this.visible=!0;this.enabled=!0;this.sortable=!0;this.colspan=1;this.rowspan=1;this.gxId=-1;this.gxAttId=-1;this.gxAttName="";this.gxWidthUnit="";this.gxChecked=undefined;this.gxUnChecked=undefined;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?this.gxAttName.indexOf("GxRemove")!=-1||this.gxAttName.indexOf("nRcdDeleted")!=-1:!1}};gx.grid.row=function(n,t,i,r){this.table=null;this.id=n;this.gxParentRowId=r||"";this.gxId=i+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=t.Props||[];this.gxRenderProps=t.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var n=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return n!=null?Number(n)!==0:!1};this.gxIsMod=function(){var n=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+this.gxId);return n!=null?Number(n)!==0:!1};this.gxDeleted=function(){var n=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return n!=null?Number(n)!==0:!1};this.setDeleted=function(n){var t=n?1:0;gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,t)}};gx.grid.responsiveGrid=function(n){var t=["xs","sm","md","lg"],i="row";return function(r){var u=new gx.grid.impl(r);return u.appendContainerStart=function(n,t){t.append("<div ");this.appendGridClassAttribute(t);t.append(' id="'+n+'" ');gx.lang.emptyObject(this.gxToolTipText)||t.append('title="'+this.gxToolTipText+'" ');t.append('style="');this.appendGridStyle(t);t.append('" ');this.appendGridAttributes(t);t.append(">")},u.getRowByPos=function(n){return this.container.querySelector((this.gxGridCols>1?" >DIV":" ")+">DIV[data-gxrow]:nth-child("+n+")")},u.scroll_last_row_selector=function(){return(this.gxGridCols>1?" >DIV":" ")+">DIV[data-gxrow]:last"},u.scroll_firt_row_selector=function(){return(this.gxGridCols>1?" >DIV":" ")+">DIV[data-gxrow]:first"},u.ROW_TAG="div",u.CELL_TAG="div",u.ROW_BASE_CLASS="row",u.getRowRenderingProps=function(i,r){var f=this.ROW_TAG,e=this.ROW_BASE_CLASS,o=this.gxGridResponsiveCols,u;return this.gxIsFreestyle&&(f=this.CELL_TAG,e=n.map(t,function(n,t){return["col-",n,"-",Math.floor(12/(o[t]||12))||1].join("")}).join(" ")),u=e,this.gxIsFreestyle||(u+=" "+(i?this.evenRowClass:this.oddRowClass)+(r?" RowDeleted":"")),{cls:u,tag:f}},u.appendGridClassAttribute=function(n){n.append(' class="'+this.gxCssClass+'"')},u.appendGridAttributes=function(n){this.gxAllowCollapsing&&this.gxCollapsed&&n.append(" data-gx-sr-only ")},u.appendContainerEnd=u.simpleAppendFn("<\/div>"),u.appendHeaderText=gx.emptyFn,u.appendFooterText=gx.emptyFn,u.appendHeader=gx.emptyFn,u.appendBodyWrapperStart=gx.emptyFn,u.appendBodyWrapperEnd=gx.emptyFn,u.appendFooterWrapperStart=u.simpleAppendFn("<div>"),u.appendFooterWrapperEnd=u.simpleAppendFn("<\/div>"),u.appendRowStart=function(n,t,r){t==r&&this.ownerGrid.additiveResponse!==!0&&n.append('<div class="'+i+'">')},u.appendRowEnd=function(n,t,i,r){t==r&&this.ownerGrid.additiveResponse!==!0&&n.append("<\/div>")},u.appendRowBreaksWrapperStart=function(n,t){n.append("<div>");this.appendDeleteImage(n,t,gx.grid.deletePositions.left)},u.appendRowBreaksWrapperEnd=u.simpleAppendFn("<\/div><\/div>"),u.appendRowPrefix=function(i,r,u){if(r!=u){var f=this.gxGridResponsiveCols,e=!1,o=n.map(t,function(n,t){return f[t]!=1&&r%f[t]==0||f[t]===0&&r%12==0?(e=!0,"visible-"+n):""}).join(" ");e&&i.append('<div class="clearfix '+o+'"><\/div>')}},u.appendCellPrefixStart=function(n,t,i,r,u){var f=u.gxDeleted()?" RowDeleted":"";this.gxGridCols==1&&(n.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+u.gxId+'" data-gxrow="'+u.gxId.toString()+'" class="row'+f+'"><div class="col-xs-12">'),this.appendDeleteImage(n,u,gx.grid.deletePositions.left))},u.appendCellPrefixEnd=function(n){this.gxGridCols==1&&n.append("<\/div><\/div>")},u.appendNavBarRowStart=function(n,t){t.append('<div class="'+this.ROW_BASE_CLASS+'"><div class="col-xs-12 '+this.navigationClass+'">')},u.appendNavBarRowEnd=function(n){n.append("<\/div><\/div>")},u}}(gx.$);gx.grid.flexGrid=function(n){var t,r=gx.dom,u,i;this.useNativeChildControls=!0;this.show=function(){var i;t=n("#"+this.getContainerControl().id);i=this.drawGrid(this.gxGridObject+"Tbl",!this.IsPostBack);this.setGridHtml(t.get(0),i);this.gxWidth&&t.width(r.addUnits(this.gxWidth,this.gxWidthUnit));this.gxHeight&&t.height(r.addUnits(this.gxHeight,this.gxHeightUnit))};this.destroy=function(){t&&t.hide()};this.appendGridAttributes=function(n){gx.grid.flexGrid.prototype.appendGridAttributes.apply(this,arguments);n.append(" data-gx-flex")};u={"flex-direction":"row","flex-wrap":"no-wrap","justify-content":"flex-start","align-items":"flex-start","align-content":"flex-start"};i=function(n,t,i){u[t]!==i&&n.append(t+": "+i+";")};this.appendGridStyle=function(n){gx.grid.flexGrid.prototype.appendGridStyle.apply(this,arguments);i(n,"flex-direction",this.FlexDirection);i(n,"flex-wrap",this.FlexWrap);i(n,"justify-content",this.JustifyContent);i(n,"align-items",this.AlignItems);i(n,"align-content",this.AlignContent)};this.getRowRenderingProps=function(){return{cls:"",tag:this.ROW_TAG}};this.appendRowStart=gx.emptyFn;this.appendRowEnd=gx.emptyFn;this.appendRowPrefix=gx.emptyFn;this.appendRowBreaksWrapperStart=function(n,t){this.appendDeleteImage(n,t,gx.grid.deletePositions.left)};this.appendRowBreaksWrapperEnd=this.simpleAppendFn("<\/div>");this.appendCellPrefixStart=function(n,t,i,r,u){this.gxGridCols==1&&(n.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+u.gxId+'" data-gxrow="'+u.gxId.toString()+'">'),this.appendDeleteImage(n,u,gx.grid.deletePositions.left))};this.appendCellPrefixEnd=function(n){this.gxGridCols==1&&n.append("<\/div>")};this.appendNavBarRowStart=function(n,t){t.append('<\/div><\/div><div class="'+this.navigationClass+'">')};this.appendNavBarRowEnd=function(n){n.append("<\/div>")};this.scroll_last_row_selector=function(){return" > DIV[data-gxrow]:last"};this.scroll_firt_row_selector=function(){return" > DIV[data-gxrow]:first"}};gx.lang.inherits(gx.grid.flexGrid,gx.grid.responsiveGrid);gx.GxObject=function(n){var t=function(){this.onLoadDeferred=n.Deferred();this._isTrn=null;this.Gx_mode="";this.ServerClass="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsMasterPage=!1;this.IsComponent=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.GridsUpper=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings={};this.UCBindingsHiddens={};this.GXValidFnc=[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls={};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.hasEnterEvent=!1;this.focusOnlyNEmb=!1;this.autoRefresh=!1;this.conditionsChanged=!1;this.fromValid=0;this.toValid=0;this.getValidStructFld_cache={};this.cmpRegex=t.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})+$/;this.postEventPopupCommands=[];this.targetsCounter=9996;this.feedbackTimeoutId=0;this.feedbackCallCounter=0;gx.lang.apply(this,new gx.util.Observable)};return t.GX_EVENT_CONTROL_DATA_ATTR="data-gx-evt-control",t.GX_EVENT_CONDITION_DATA_ATTR="data-gx-evt-condition",t.GX_EVENT_DATA_ATTR="data-gx-evt",t.GX_EVENT_CODE_DATA_ATTR="data-gx-evt-code",t.GX_EVENT_CONTEXT_DATA_ATTR="data-gx-context",t.GX_EVENT_CONTROL_DELAYED_ATTR="data-gx-click-delay",t.GX_EVENT_EXCLUDED_CTRLTYPES=["dyncombo","combo"],t.GX_EVENT_EVENT_IN_PROGRESS="data-gx-evt-inprogress",t.WEBCOMPONENT_CLASS_NAME="gxwebcomponent",t.WEBCOMPONENT_LOADING_CLASS_NAME="gxwebcomponent-loading",t.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body",t.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})([0-9]{4})?/,t}(gx.$);gx.fn=function(n){var u=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,f=".gx_usercontrol, .gxwebcomponent",t=function(n){return(n=n.replace(/\\/g,"."),gx.gen.isDotNet())?n.replace(/\.aspx$/,""):n},r=function(){var n=function(n,t){return n.gxIndex<t.gxIndex?-1:n.gxIndex>t.gxIndex?1:0};return function(t){return gx.fn.toArray(t).sort(n)}}();return{disableKeys:function(){gx.fx.obs.addObserver("gx.keypress",gx.fn,gx.fn.swallowKeys)},enableKeys:function(){gx.fx.obs.deleteObserver("gx.keypress",gx.fn,gx.fn.swallowKeys)},swallowKeys:function(n){n.cancel=!0;n.event.preventDefault()},attachedControls:function(){return gx.attachedControls},cancelWindow:function(n){this.closeWindow(n,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel})},closeWindow:function(n,t,i){var r,e,u,f;if(t=t||{},i=i||gx.O,typeof n=="string"){if(this.closeFromServer(n,t.parmsMetadata))return;n=[]}if(n||(n=[]),gx.popup.ispopup()&&(r=gx.popup.getPopup(),e=r.url?gx.util.noParmsUrl(r.url):"",!r.frameWindow||r.frameWindow.location.href.search(e+"(\\?.*)?$")!=-1||gx.grid.drawAtServer)){r.close(n,t,i);return}if(location.href.indexOf("gxCalledAsPopup")!=-1){this.closeWindowImpl();return}u=gx.ajax.getCallerUrl(gx.popup.popuplvl());gx.lang.emptyObject(u)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),f=gx.absoluteurl(u),gx.spa.started?(gx.spa.redirect(f),gx.ajax.enableForm(i)):(gx.evt.redirecting=!0,location.href=f))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():history.length>0?history.back():window.location.assign("about:blank")},closeFromServer:function(n,t){try{if(window.parent&&window.parent.gx)return!gx.popup.ispopup()||gx.grid.drawAtServer||window.parent.gx.grid.drawAtServer?window.parent.gx.fn.closeWindow(gx.json.evalJSON(n,!0),{parmsMetadata:gx.json.evalJSON(t,!0)}):gx.fn.closeWindow(gx.json.evalJSON(n,!0),{parmsMetadata:gx.json.evalJSON(t,!0)}),!0}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(n,t,i){gx.evt.execLoad=!1;i&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(n,{parmsMetadata:t})},invalidEmptyValue:function(n){var i,t;if(gx.lang.emptyObject(n.s)){for(i=n.v.length,t=0;t<i;t++)if(n.v[t][0]===n.s)return!1;return!0}return!1},trimSelectValue:function(n,t){return t=="int"?gx.text.trim(n):gx.text.rtrim(n)},selectedDescription:function(n,t){for(var r=n.v.length,i=0;i<r;i++)if(this.trimSelectValue(n.v[i][0],t)===n.s)return n.v[i][1];return null},setGridCheckBoxValue:function(n,t,i,r){this.setCheckBoxValue(n+"_"+t,i,r)},setGridDecimalValue:function(n,t,i){return this.setGridControlValue(n,t,i)},setGridControlValue:function(n,t,i,r){if(t!==undefined)return this.setControlValue(n+"_"+t,i,r)},setVarValues:function(n,t){for(var r,u=n.length,i=0;i<u;i++)r=gx.fn.vStructForVar(n[i]),r&&r.v2v?r.v2v(t[i]):eval(n[i]+'="'+t[i]+'"')},refreshControlOldValue:function(t){if(n(t).attr(gx.csv.GX_OLD_VALUE_ATTRIBUTE)!==undefined){var i=gx.fn.getControlValue(t.type=="radio"?t.name:gx.dom.id(t));gx.fn.setControlOldValue(t,i)}},setControlOldValue:function(n,t){var r,i,f,e,u;if(n)if(r=n.id,i=gx.O.getValidStructFld(r),t=gx.applyPicture(i,t,n),i&&i.gxgrid&&(i.gxgrid.IsValidState[r]=i.gxgrid.IsValidState[r]||{},i.gxgrid.IsValidState[r][gx.csv.GX_OLD_VALUE_ATTRIBUTE]=t),n.type=="radio")for(f=gx.dom.byName(n.name),e=f.length,u=0;u<e;u++)f[u].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,t);else n.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,t)},setControlGxValid:function(n,t){if(n&&n.id){var r=n.id,i=gx.O.getValidStructFld(r);i&&i.gxgrid&&(i.gxgrid.IsValidState[r]?i.gxgrid.IsValidState[r].gxvalid=t:i.gxgrid.IsValidState[r]={gxvalid:t});n.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,t)}},setControlValue:function(n,t,i){n=gx.csv.ctxControlId(n);this.setControlValueAny(n,t,i)},setControlValueAny:function(n,t,i){var r=gx.O.getValidStructFld(n),u,o=!1,s,f,e;u=gx.dom.el(n,r&&(r.ctrltype=="edit"||r.ctrltype=="checkbox"||r.ctrltype=="combo"));r&&(r.type=="dtime"||r.type=="date"?t===""?t=gx.date.nulldate_toc(r.len,r.dec):typeof t=="string"&&(t=new gx.date.gxdate(t)):gx.lang.isFixedCharacterType(r.type)&&(t=gx.text.rtrim(t)));t instanceof gx.date.gxdate?gx.lang.emptyObject(r)||(t=gx.date.formatDateTime(r.dec,r.len,gx.dateFormat,t)):gx.lang.instanceOf(t,Number)||typeof gx.num.dec!="undefined"&&t instanceof gx.num.dec.bigDecimal?gx.lang.emptyObject(r)||(t=gx.num.formatNumber(t,r.dec,gx.rtPicture(r,u),r.len,r.sign,!1,r.emptyAsNull)):typeof t!="string"||gx.lang.emptyObject(r)||(o=r.isPwd!=undefined,o?u!=null&&u.nodeName=="SPAN"&&(t=gx.text.formatString(t,r.len,r.isPwd)):t=gx.text.formatString(t,r.len,r.isPwd,gx.rtPicture(r,u)));this.persistGridControlValue(n,t);s=i||0;u!=null&&u.nodeName!="SPAN"?(this.setControlValue_impl(u,t,i),gx.csv.settingUIparms!==!0&&gx.fn.setControlOldValue(u,t)):gx.fn.setHidden(n,t);f=n;u!=null&&u.nodeName=="SPAN"&&(f=u);e=!1;e=r?r.multiline:u!=null&&u.tagName=="TEXTAREA";o?this.setControlValue_span_safe(f,gx.text.formatString(t,r.len,r.isPwd,gx.rtPicture(r,u),i,e)):this.setControlValue_span_safe(f,t,i,e)},setDecimalValue:function(n,t){this.setControlValue(n,t)},toDecimalValue:function(n,t,i){return gx.num.parseFloat(n,t,i)},toDatetimeValue:function(n,t){return new gx.date.gxdate(n,t)},setCheckBoxValue:function(n,t,i){try{n=gx.csv.ctxControlId(n);var r=gx.dom.byId(n);r||(r=gx.dom.form()[n]);r&&(r.checked=t.toString()==i.toString(),r.value=t)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(n,t,i){var f=n.lastIndexOf("_"),r,u,o,e;f!=-1&&(r=i?i:gx.O.getValidStructFld(n.substring(0,f)),r&&r.gxgrid&&(u=n.substring(f+1),u.length>4?(o=u.substring(4,u.length),e=gx.O.getGrid(r.gxgrid.gridName+"_"+o),e&&e.persistControlValue(n,t,r)):r.gxgrid.persistControlValue(n,t,r)))},setControlValue_span_safe:function(t,i,r,u){var e,f;(typeof t=="string"&&(t=gx.dom.byId("span_"+t)),t&&t.nodeName!=="SPAN"&&(e="span_",e+=typeof t=="string"?t:gx.dom.id(t),t=gx.dom.byId(e)),t!=null)&&(f=gx.dom.bySelector('[data-name="'+t.id+'"]'),f.length<2&&(f=[t]),n.each(f,function(n,t){gx.fn.setControlValue_fmt(t,i,r,u)}))},setControlValue_fmt:function(n,t,i,r){var u,f;try{if(n!=null)if(i==1)u=n.getAttribute("data-gxlink"),gx.lang.emptyObject(u)||n.firstChild!=null&&n.firstChild.nodeName=="A"&&(n=n.firstChild),gx.html.setInnerHtml(n,t,!0);else{for(i==0&&typeof t=="string"&&(t=t.replace(/ +/g," ")),f=n;n.firstChild!=null&&n.firstChild.nodeName!="#text";)n=n.firstChild;i==0&&(n.firstChild==null||n.firstChild.nodeName!="#text")&&n.nodeName!="A"?gx.html.setInnerText(f,t,i,r):gx.html.setInnerText(n,t,i,r)}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(t,i,r){var u;typeof t=="string"&&(t=gx.dom.el(t));i instanceof gx.date.gxdate&&(i=i.getString());t!=null&&(u=gx.dom.byName(t.id),(u.length<2||t.type==="radio")&&(u=[t]),n.each(u,function(n,t){if(t.type==="radio")gx.fn.setRadioValue(t.name,i);else if(gx.dom.isEditControl(t)||t.type=="textarea"){var u=t.value!==i&&gx.dom.getActiveElement()===t&&t.selectionStart!==t.selectionEnd&&t.selectionEnd>0;t.value=i;u&&gx.fn.setSelection(t)}else t.value!=undefined?t.value=i:gx.fn.setControlValue_span_safe(t,i,r)}))},setGridComboBoxValue:function(n,t,i){this.setComboBoxValue(n+"_"+t,i)},setComboBoxValue:function(n,t){var c=gx.util.browser.isIE(),r,u,f,o,s,l,h,e,i,a;if(n=gx.csv.ctxControlId(n),r=gx.dom.byId(n),r){u="";f=gx.O.getValidStructFld(n);gx.lang.emptyObject(f)||(u=f.type);u=="int"?t=gx.text.trim(t):u=="date"&&t instanceof gx.date.gxdate?t=t.getStringWithFmt("Y4MD"):u!="decimal"&&(t=gx.text.rtrim(t));o=t;s=!1;try{for(l=r.options.length,e=0;e<l;e++)if(i=r.options[e],a=gx.lang.isNumericType(u)?Number(i.value)==Number(t):gx.text.trim(i.value)==gx.text.trim(t),a){if(o=typeof i.innerText!="undefined"?i.innerText:i.text,r.selectedIndex=e,s=!0,i.setAttribute("selected","selected"),h=i,c)break}else c||i.removeAttribute("selected");h&&h.value!=r.value&&gx.util.browser.isFirefox()&&gx.dom.redrawControl(r);s||(r.selectedIndex=0);f.grid>0&&this.persistGridControlValue(n,t,f)}catch(v){gx.dbg.logEx(v,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(n,o,0)}},loadRadioButton:function(t,i,r){var u=n(t).parent().closest(".gx-radio-button"),e=n(t),f;f=n(gx.html.controls.applyTemplate("radio",{id:t.name,className:u.attr("class"),style:u.attr("style"),title:t.title,isDisabled:t.disabled,gxoch0:e.attr("data-gxoch0"),values:n.map(i,function(n,i){return{itemId:t.name+"_"+i,itemValue:n[0],itemDesc:n[1],isSelected:gx.text.trim(r.toString())==gx.text.trim(n[0].toString())}})}));u.replaceWith(f);gx.plugdesign.applyTemplateObject(f)},loadComboBox:function(n,t){this.setComboValues(n,t)},setGridComboValues:function(n,t){var f=this.controlGridId(n),i,u,r;if(f==0)this.setComboValues(n,t);else for(i=1;i<999;i++){if(u=gx.text.padl(i.toString(),4,"0"),r=gx.dom.el(n+"_"+u),r==null)break;this.setComboValues(r.name,t)}},setComboValues:function(n,t){var i=gx.dom.el(n),e=gx.util.browser,f,o,u,r;if(i!=null){for(f="",i.selectedIndex!=-1&&(f=i.options[i.selectedIndex].value);i.options.length>t.length;)i.remove(i.options.length-1);while(t.length>i.options.length)r=document.createElement("OPTION"),i.options.add(r);for(o=t.length,u=0;u<o;u++)r=i.options[u],r.value=t[u][0],e.isIE()&&e.ieVersion()>=9?r.innerText!=t[u][1]&&(r.innerText=t[u][1]):r.text!=t[u][1]&&(r.text=t[u][1]),(Number(r.value)?Number(r.value)==Number(f):gx.text.trim(r.value)==gx.text.trim(f))&&(i.selectedIndex=u);i.options.length==0?i.selectedIndex=-1:(i.selectedIndex==-1||i.selectedIndex>i.options.length-1)&&(i.options[0].selected=!0)}},getControlRefById:function(n){var t=this.validStruct(n);return t?t.grid==0?this.getControlRef(t.fld,!1):this.getControlGridRef(t.fld,t.grid):null},getControlRef:function(n,t){if(t||(n=gx.csv.ctxControlId(n)),n=="FORM")return document;var i=gx.dom.el(n);return i!=null?i:null},getControlRef_list:function(n){var i=gx.dom.byName(n),t;return i!=null?i:(t=gx.dom.byId(n),t!=null)?[t]:null},screen_CtrlRef:function(n){var t=this.getControlGridRef(n,this.controlGridId(n));return gx.lang.emptyObject(t)?null:(t.type=="hidden"&&(t=gx.dom.byId("span_"+gx.dom.id(t))),t)},screen_CtrlId:function(n){return this.getControlGridId(n,this.controlGridId(n))},getControlGridId:function(n,t,i){n=gx.csv.ctxControlId(n);var r=gx.dom.el(n);if(r)return n;try{return t==0?n:(i==undefined&&(i=this.currentGridRow(t)),n+"_"+i)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(n,t,i){var r,u;if(n=gx.csv.ctxControlId(n),(t==0||n.search(gx.csv.CTRL_ROW_INDEX_REGEXP)!==-1)&&(r=gx.dom.el(n),r))return r;try{if(t==0)return null;if(i==undefined&&(i=this.currentGridRow(t)),r=gx.dom.el(n+"_"+i),r)return r;if(u=gx.O.getComponentData(n),u)return gx.dom.el("gxHTMLWrp"+u.Prefix+i)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRowSafe:function(n,t){var i=gx.fn.getGridObj(n,t);return i&&i.grid.rows.length>=t?gx.fn.setCurrentGridRow(n,t):undefined},setCurrentGridRow:function(n,t){if(t!="0000")try{return gx.currentRows[n]=t}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","setCurrentGridRow")}return undefined},currentGridRowImpl:function(n){try{return gx.currentRows[n]}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","currentGridRowImpl")}return undefined},currentGridRow:function(n){var t=this.currentGridRowImpl(n);return t==undefined?"0001":t},gridDuplicateKey:function(n){var i=gx.fn.validStruct(n),t;return i!=undefined&&(t=i.gxgrid,t!=null&&(t=t.updateControlValue(i,!0),t))?t.gxHasDuplicateKey():!1},firstGridControl:function(n,t){var r=gx.fn.controlIds(),f=r.length,u;for(i=0;i<f;i++)if(u=gx.fn.validStruct(r[i],t),u!=undefined&&u.grid==n)return r[i];return-1},lastGridControl:function(n,t){var r=gx.fn.controlIds(),u;for(i=r.length-1;i>=0;i--)if(u=gx.fn.validStruct(r[i],t),u!=undefined&&u.grid==n)return r[i];return-1},getGridDateTimeValue:function(n,t){var i=this.getControlValue(n+"_"+t);return new gx.date.gxdate(i,gx.dateFormat)},getGridDecimalValue:function(n,t,i,r){return this.getDecimalValue(n+"_"+t,i,r)},getGridIntegerValue:function(n,t,i){return this.getIntegerValue(n+"_"+t,i)},getGridControlValue:function(n,t){return this.getControlValue(n+"_"+t)},getControlValue:function(n,t,i,r){return this.getControlValue_impl(gx.csv.ctxControlId(n,i),t,i,r)},getControlValue_impl:function(){var t=/_CMPPGM$/g,n=function(n,t){return n!=undefined?n:t};return function(i,r,u,f){var o,e,h,c,l,s;if(r=="hidden_only")return gx.fn.getHidden(i);if(i.search(t)>=0)return r==="nohidden"?null:gx.fn.getHidden(i);if(u=u||gx.O,f=f||(u?u.getValidStructFld(i):null),!f||!f.gxgrid||!f.gxgrid.grid||!f.gxgrid.grid.useHiddensForControlValues){if(e=f&&(f.ctrltype=="edit"||f.ctrltype=="checkbox"||f.ctrltype=="combo")?gx.dom.byId(i):gx.dom.el(i,!1,!0),e!=null&&u&&(f&&!e.gxtype&&(e.gxtype={type:f.type,len:f.len,dec:f.dec}),e.type=="checkbox"&&f.values&&f.values.length&&f.values.length>1?o=e.checked?f.values[0]:f.values[1]:e.type=="hidden"||e.type=="text"||e.type=="textarea"||e.type=="checkbox"?o=e.value:e.type=="radio"?o=gx.fn.getRadioValue(gx.dom.byName(i)):(e.nodeName=="SELECT"&&e.options.length>0?o=e.selectedIndex!=-1?r=="screen"?e.options[e.selectedIndex].text:e.options[e.selectedIndex].value:r=="screen"?e.options[0].text:e.options[0].value:f&&f.type!="date"&&f.type!="dtime"&&f.type!="bits"&&f.type!="audio"&&f.type!="video"&&f.type!="binaryfile"&&(o=e.value),(e.nodeName=="IMG"||e.nodeName=="INPUT"&&e.type=="image")&&(o=e.getAttribute("src"))),o!==undefined))return f&&f.type=="boolean"?gx.lang.gxBoolean(o):o;if(e=gx.dom.byId("span_"+i),e!=null)return h=gx.fn.getHidden(i),c=gx.fn.getControlValue_span(e),r=="screen"?n(c,h):n(h,c);if(e=gx.dom.form()[i],e!=null)return this.getControlValueInt(e);if(ControlList=gx.dom.byName(i),ControlList!=null){for(l=ControlList.length,s=0;s<l;s++)if(e=ControlList[s],e!=null)return this.getControlValueInt(e);if(e=ControlList[0],e)return e.value}}return e==null?r==="nohidden"?null:gx.fn.getHidden(i):""}}(),setRadioValue:function(t,i){var r,e,u,f;if(t=gx.csv.ctxControlId(t),r=gx.dom.byName(t),r!=null)for(e=r.length,u=0;u<e;u++)if(f=n(r[u]),gx.text.ltrim(r[u].value)==gx.text.ltrim(i)){f.attr("checked","");f.prop("checked",!0);return}},getRadioValue:function(n){for(var i=n.length,t=0;t<i;t++)if(n[t].checked)return n[t].value;return""},getRadioSelected:function(n){for(var i=gx.dom.byName(n),r=i.length,t=0;t<r;t++)if(i[t].checked)return i[t];return null},getControlValueInt:function(n){var r,i,t;if(n.length!=undefined&&n.tagName!="SELECT"&&typeof n[0]!="undefined"&&n[0].type=="radio")return this.getRadioValue(n);if(n.type=="checkbox")return n.checked;if(n.tagName=="SPAN")return r=gx.fn.getHidden(gx.dom.id(n)),r!=undefined?r:gx.fn.getControlValue_span(n);if(n.tagName=="INPUT"&&n.type=="text"&&(i=gx.dom.id(n),gx.O&&(t=gx.O.getValidStructFld(i),t&&typeof gx.rtPicture(t,n)!="undefined"))){if(t.type=="int")return this.getIntegerValue(i,gx.rtPicture(t,n).indexOf(",")!=-1?gx.thousandSeparator:"");if(t.type=="decimal")return this.getDecimalValue(i,gx.rtPicture(t,n).indexOf(",")!=-1?gx.thousandSeparator:"",gx.decimalPoint)}return n.value},getControlValue_span:function(n){while(n&&!n.nodeValue)n=n.childNodes[0];return n&&n.nodeValue?n.nodeValue:""},getDateTimeArrayValue:function(t){try{var i,u=function(t,i){return gx.lang.emptyObject(t)||n.each(t,function(n,r){t[n]=new gx.date.gxdate(r,i)}),""},r=this.getControlValue(t,"nohidden");return i=u(r,gx.dateFormat),i||(r=gx.fn.getHidden(gx.csv.ctxControlId(t)),i=u(r,"Y4MD")),i}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getDateTimeArrayValue")}return""},getDateValue:function(n){return this.getDateTimeValue(n)},getDateTimeValue:function(n){try{var t=this.getControlValue(n,"nohidden");return gx.lang.emptyObject(t)?(t=gx.fn.getHidden(gx.csv.ctxControlId(n)),new gx.date.gxdate(t,"Y4MD")):new gx.date.gxdate(t,gx.dateFormat)}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(n,t,i){var f=0,u=gx.O?gx.O.getValidStructFld(n):null,r=this.getControlValue(n,i,undefined,u);return(u&&r&&(r=gx.num.extractValue(gx.rtPicture(u),r)),gx.lang.isArray(r))?r:(r=typeof r!="undefined"?r.toString():"",r.length===0&&u&&u.emptyAsNull==="Blank")?r:(f=r.length<gx.num.maxNumericPrecision()||typeof gx.num.dec=="undefined"?gx.num.parseInt(r,10,t):new gx.num.dec.bigDecimal(gx.text.replaceAll(r,t,"")).setScale(0,gx.num.dec.ROUND_UP).toString(),isNaN(f)?0:f)},getDecimalValue:function(n,t,i,r){var u=gx.O?gx.O.getValidStructFld(n):null,f=this.getControlValue(n,r,undefined,u),o=gx.dom.el(n,u&&(u.ctrltype=="edit"||u.ctrltype=="checkbox"||u.ctrltype=="combo")),e;return(u&&f&&(f=gx.num.extractValue(gx.rtPicture(u,o),f)),typeof f!="undefined"&&f.length===0&&u&&u.emptyAsNull==="Blank")?"":gx.lang.isArray(f)?f:(e=gx.num.parseFloat(f||"",t,i),isNaN(e)?0:e)},getBlobValue:function(n){var t=gx.dom.byId("Object_"+n);if(t!=null){if(t.data&&!gx.text.endsWith(t.data,"about:blank"))return t.data}else if(t=gx.dom.byId("Link_"+n),t!=null)return t.getAttribute("href");return""},getVarControlMap:function(n,t){var n=n||gx.O,i,r;if(n)for(i in n.VarControlMap)if(typeof i!="function"&&(r=n.VarControlMap[i],r.id==t||n.CmpContext+r.id==t))return i;return null},getVarControlMapForVar:function(n){for(var t in gx.O.VarControlMap)if(typeof t=="string"&&t==n)return gx.O.VarControlMap[t];return null},v2c:function(n,t,i,r){n.v2c(r);typeof t=="undefined"&&(t=n.val(r));var u=gx.fn.getControlGridRef(n.fld,n.grid,r);gx.plugdesign.controlValueChanged(u,t);i&&(u.value="")},v2cMap:function(n){var t=this.getVarControlMapForVar(n),i;t!=null&&(i="",typeof t.grid=="number"&&t.grid!=0&&(i="_"+gx.fn.currentGridRowImpl(t.grid)),gx.fn.setHidden(gx.O.CmpContext+t.id+i,gx.O[n]))},c2vMap:function(n){var t=this.getVarControlMapForVar(n),i;t!=null&&(i="",typeof t.grid=="number"&&t.grid!=0&&(i="_"+gx.fn.currentGridRowImpl(t.grid)),gx.O[n]=gx.fn.getHidden(gx.O.CmpContext+t.id+i))},depsToVars:function(n){for(var r,i,t=0;t<n.length;t++)r=n[t],i=gx.fn.vStructForVar(r),gx.lang.emptyObject(i)||typeof i.c2v!="function"?this.c2vMap(r):i.c2v()},verticalFormula:function(n,t,i,r,u,f,e){var o=gx.fn.vStructForVar(n),v,s;gx.lang.emptyObject(o)?this.v2cMap(n):o.v2c(r);var y=gx.fn.currentGridRowImpl(i),l=gx.fn.getGridObj(i,r),h=0,a=!1;if(l){for(v=l.grid.rows.length,s=0;s<v;s++){var c=l.grid.rows[s],p=c.gxDeleted(),w=c.gxExists(),b=c.gxIsMod();!p&&(w||b)&&(gx.fn.setCurrentGridRow(i,c.gxId),e&&e.length>0?this.depsToVars(e):gx.lang.emptyObject(o)||typeof o.c2v!="function"?this.c2vMap(n):o.c2v(),u.call(gx.O)&&(a=!0,h=f(s,h)))}gx.fn.setCurrentGridRow(i,y);e&&e.length>0?this.depsToVars(e):gx.lang.emptyObject(o)||typeof o.c2v!="function"?this.c2vMap(n):o.c2v(r);a||(h=t)}else gx.dbg.write("verticalFormula: can´t find grid "+i+" at row "+r);return h},rowValueHandler:function(n,t,i,r,u,f,e){var o,s,h;try{o=gx.fn.vStructForVar(n)||gx.fn.getVarControlMapForVar(n);s=o?o.type:"decimal";switch(s){case"boolean":return r(n,t,i);case"int":case"decimal":return h=gx.num.parseFloat(gx.O[n],f,e),t==0?h:u(n,t,i,h);default:gx.dbg.write("Warning: Forumula not supported for: ",n,s)}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","Formula could not be calculated for Field: "+n)}},maxFrm:function(n,t,i,r,u,f,e,o){var s=function(n,t,i){return i||gx.O[n]},h=function(n,t,i,r){return r>i?r:i};return gx.fn.verticalFormula(n,t,u,f,e,function(t,u){return gx.fn.rowValueHandler(n,t,u,s,h,i,r)},o)},sumFrm:function(n,t,i,r,u,f,e,o){var s=function(n,t,i){return i||gx.O[n]},h=function(n,t,i,r){return r+i};return gx.fn.verticalFormula(n,t,u,f,e,function(t,u){return gx.fn.rowValueHandler(n,t,u,s,h,i,r)},o)},minFrm:function(n,t,i,r,u,f,e,o){var s=function(n,t,i){return i&&gx.O[n]},h=function(n,t,i,r){return r<i?r:i};return gx.fn.verticalFormula(n,t,u,f,e,function(t,u){return gx.fn.rowValueHandler(n,t,u,s,h,i,r)},o)},averageFrm:function(n,t,i,r,u,f,e,o){return gx.fn.verticalFormula(n,t,u,f,e,function(t,u){var f=gx.num.parseFloat(gx.O[n],i,r);return t==0?f:(u*t+f)/(t+1)},o)},countFrm:function(n,t,i,r,u,f){return gx.fn.verticalFormula(n,t,i,r,u,function(n,t){return n==0?1:t+1},f)},serialRule:function(n,t,i,r,u){var h,f,e,o,s;return(u=u||gx.O,h=gx.fn.getGridRowMode(gx.fn.gridLvl(i),i),h!="INS")?u[n]:(gx.lang.emptyObject(u[t])&&(u[t]=u[n]+r,o=gx.fn.vStructForVar(t),o&&o.v2c(),s=u.VarControlMap[n],s&&gx.fn.setControlValue(s.id,u[t])),f=u[t]||0,e=u[n]||0,r>0?Math.max(f,e):Math.min(f,e))},setReturnParms:function(n,t,i,r){var f,e,u,s,o,h,c;try{if(gx.csv.settingUIparms=!0,r)for(e=i.length,f=0;f<e;f++)u=gx.fn.vStructForVar(t[f]),r.grid.setCellValue.apply(r.grid,[u,i[f]]);else if(n&&t&&i&&(e=t.length,e==i.length)){for(gx.setGxO(n),s=null,f=0;f<e;f++)if(o=t[f],o)if(h=i[f],u=gx.fn.vStructForVar(o),gx.lang.emptyObject(u)&&(u=gx.fn.vStructForHC(o)),u){if(c=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(u.fld)),u.v2v&&(u.v2v(h),gx.fn.v2c(u,h)),typeof u.v2bc=="function"&&u.v2bc.call(n),gx.fn.isAccepted(c)){s=c;gx.evt.onchange_impl(c)}n.refreshDependantGrids(u)}else n.setVariable(o,h);s&&gx.fn.setFocus(s)}}catch(l){gx.dbg.logEx(l,"gxfrmutl.js","setReturnParms")}gx.csv.settingUIparms=!1},isOutputParm:function(n){return n&&n.IOType&&(n.IOType=="out"||n.IOType=="inout")?!0:!1},checkPopupFocus:function(n){var t,i;return gx.popup.ispopup()&&(t=gx.popup.getPopup(),t&&t.frameDocument&&(i=n.ownerDocument?n.ownerDocument:n.document,i.URL!=t.frameWindow.location.href))?(t.setFocusFirst(),!1):!0},persistControlProperty:function(n,t,i){var r=gx.fn.screen_CtrlId(gx.csv.ctxControlId(n));gx.usrPtys[r]||(gx.usrPtys[r]={});gx.usrPtys[r][t.toLowerCase()]=i},setCtrlProperty:function(n,t,i){var r,u;if(!gx.O){gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0});return}(r=null,r=n=="FORM"?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(n)),r!=null)&&(this.persistControlProperty(n,t,i),u=gx.O.getValidStructFld(n),this.setCtrlPropertyImpl(r,t,i,u))},setGridCtrlProperty:function(t,i,r){var u=gx.fn.screen_CtrlRef(t),f,e;if(u!=null&&(this.setCtrlPropertyImpl(u,i,r),f=gx.fn.controlGridId(t),f)){if(e=n(u).parent().closest("TD",n("[data-gxgridid="+f+"]").get(0)).get(0),!e)return;this.persistControlProperty(t,i,r);this.setCtrlPropertyImpl(e,i,r)}},getControls:function(t){var i=[t],r=this.getRONode(t.id,!1);return r&&i.push(r),n(i)},setCtrlPropertyImpl:function(t,i,r,u){var e,v,p,w,b,c,k,et,h,o,s,g,l,f,a,nt,y,u,rt;if(t!=null&&(t==document&&i=="Backcolor"&&(t=document.body,this.setCtrlPropertyImpl(gx.dom.form(),i,r)),u=u||gx.O.getValidStructFld(t.id),i!=="Enabled"&&i!=="Visible"||!u||!(u.grid>0)||!gx.fn.rowIsRemoved(u.grid,gx.fn.controlRowId(t)))){var ct=u?u.ctrltype:null,ut=t,ft={control:ut,property:i,value:r};if(gx.fx.obs.notify("gx.control.onbeforepropertychange",[ft]),!ft.cancel){v=n();switch(i){case"Picture":t.setAttribute("data-gx-rt-picture",r);u&&(u.v2c(),u.c2v());break;case"Caption":this.setCtrlCaption(t,r);break;case"Tooltiptext":t.title=r;break;case"Invitemessage":t.placeholder=r;break;case"Visible":if(t.nodeName=="INPUT"&&t.type=="button")this.setButtonVisibility(t,!this.propertyValueFalse(r));else{for(p=t.type==="checkbox",t.nodeName=="INPUT"&&(p&&n(t).parent().is("span:not(.gx-checkbox-wrapper)")?v=n(t).parent():t.type=="radio"&&(w=n(t).parent().closest(".gx-radio-button"),w.length>0&&(t=w[0])),b=gx.html.multimediaUpload.getContainer(t),b&&(t=b)),f=this.propertyValueFalse(r),c=t.gxusrdisabled&&!p?t.gxusrdisabled:!1,f?(o=gx.dom.byId("span_"+t.id),this.setVisible(t,!f),o&&this.setVisible(o,!f)):(o=this.getRONode(t.id,c),o&&this.setVisible(o,c),this.setVisible(t,!c)),h=0;h<v.length;h++)this.setVisible(v[h],!c);gx.fn.setDateCtrlProperties(t,!c,!f)}gx.fn.checkAttachedProperty(t.id,i,gx.lang.gxBoolean(r));break;case"Enabled":if(f=this.propertyValueFalse(r),t.type==="hidden")return;if(ct==="textblock"&&n(t).toggleClass("gx-disabled",f),(t.tagName==="SPAN"||t.tagName==="DIV"&&t.getAttribute("data-gxformat")==="1")&&f)return;if(t.nodeName==="INPUT"&&t.type==="radio")for(k=gx.dom.byName(t.name),et=k.length,h=0;h<et;h++)this.setEnabledProperty(k[h],!f);else(gx.dom.isEditControl(t)||t.type==="textarea"||t.type==="file"||t.tagName==="SELECT")&&t.type!=="password"?(o=this.getRONode(t.id,f),gx.fn.isVisible(t,0)||o&&gx.fn.isVisible(o,0)?(o&&this.setVisible(o,f),this.setEnabledProperty(t,!f),this.setVisible(t,!f),gx.fn.setDateCtrlProperties(t,!f,!0),gx.fn.checkAttachedProperty(t.id,i,!f),gx.fn.checkAttachedProperty(t.id,"Visible",!f)):(this.setEnabledProperty(t,!f),gx.fn.setDateCtrlProperties(t,!f,!1),gx.fn.checkAttachedProperty(t.id,i,!f))):this.setEnabledProperty(t,!f);break;case"Class":if(t==document){var d=n(gx.dom.form()),ot=n(document.body),st=d.attr("data-gx-class")||"";ot.removeClass(st).attr("class",r+" "+ot.attr("class"));d.removeClass(st).attr({"class":r+" "+d.attr("class"),"data-gx-class":r})}else e=this.getControls(t),e.attr("class",r),!gx.O.DSO&&r.indexOf("Readonly")<=0&&n(this.getRONode(t.id,!1)).attr("class",r+" Readonly"+r);break;case"Columnclass":s=t.parentNode;s&&s.tagName=="TD"&&this.setCtrlClass(s,"gx-attribute "+r);break;case"Columnheaderclass":s=t.parentNode;s&&s.tagName=="TD"&&(g=n(s).closest("table").find("th:nth-child("+(s.cellIndex+1)+")").get(0),g&&this.setCtrlClass(g,r));break;case"Link":this.setCtrlLink(this.getRONode(t.id,!1)||t,r);break;case"Linktarget":this.setCtrlLinkTarget(this.getRONode(t.id,!1)||t,r);break;case"Backcolor":l=gx.color.html(r);l&&t.gxGridName==undefined&&(e=this.getControls(t),e.css("background-color",l.Html));break;case"Background":e=this.getControls(t);e.css("background-image","url("+r+")");break;case"Forecolor":l=gx.color.html(r);l&&(e=this.getControls(t),e.css("color",l.Html));break;case"Fontbold":f=this.propertyValueFalse(r);e=this.getControls(t);e.css("fontWeight",f?"normal":"bold");break;case"Fontitalic":f=this.propertyValueFalse(r);e=this.getControls(t);e.css("fontStyle",f?"normal":"italic");break;case"Fontunderline":f=this.propertyValueFalse(r);e=this.getControls(t);e.css("textDecoration",f?"none":"underline");break;case"Fontstrikethru":f=this.propertyValueFalse(r);e=this.getControls(t);e.css("textDecoration",f?"none":"line-through");break;case"Fontname":e=this.getControls(t);e.css("fontFamily",r);break;case"Fontsize":e=this.getControls(t);e.css("fontSize",r+"pt");break;case"Filename":this.setBlobFilename(t,r);break;case"Filetype":this.setBlobFiletype(t,r);break;case"URL":this.setBlobUrl(t,r);break;case"IsBlob":this.setMultimediaType(t,r);break;case"Bitmap":t.src=r;break;case"SrcSet":r!==undefined&&(t.srcset=r);break;case"Multimedia":this.setMultimediaValue(t.id,r);break;case"Jsonclick":t.jsevent=r;break;case"Source":a=r;nt=a.indexOf("?");nt>0&&(a=a.substring(0,nt));t.src=a.indexOf(":")==-1&&a.indexOf("/")==-1?gx.ajax.objectUrl(r):gx.util.resourceUrl(r,!0);gx.evt.attach(t,"load",gx.dom.autofitIFrame);break;case"Values":if(t.tagName=="SELECT"||gx.dom.isRadio(t)||t.tagName=="SPAN")if(r=gx.json.evalJSON(r),t.tagName=="SELECT")r.isset!=!1&&(gx.fn.loadComboBox(t.id,r.v),gx.fn.setComboBoxValue(t.id,r.s));else if(gx.dom.isRadio(t))r.isset!=!1&&gx.fn.loadRadioButton(t,r.v,r.s);else{var ht=t.id.substring(5),tt="",it=r.s,u=gx.O.getValidStructFld(ht);gx.lang.emptyObject(u)||(tt=u.type);it=gx.fn.trimSelectValue(it,tt);r.s=it;gx.fn.setControlValue_span_safe(ht,gx.fn.selectedDescription(r,tt))}break;case"Width":t.width&&(t.width=r);t.style.width=gx.dom.addUnits(r);break;case"Height":t.height&&(t.height=r);t.style.height=gx.dom.addUnits(r);break;case"Ispassword":t.type=gx.lang.gxBoolean(r)?"password":"text"}y=gx.dom.id(t);y&&(u=gx.O.getValidStructFld(y),rt=y+(u&&u.grid&&u.grid>0?"":"_")+i,(gx.fn.createPtyCondition(i)||gx.fn.isHidden(rt))&&(r=r==!0?"1":r==!1?"0":r,gx.fn.setHidden(rt,r)));gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:ut,property:i,value:r}])}}},createPtyCondition:function(n){return(n=="Visible"||n=="Enabled")&&gx.O.isTransaction()},setEnabledProperty:function(n,t,i){var r=gx.dom.id(n),f=gx.lang.gxBoolean(t),u;if(f){if(delete gx.disabledControls[r],gx.fn.isAccepted(n,!1))return}else gx.util.addOnce(gx.disabledControls,n,r);gx.csv.isvalidating()==!0&&t&&gx.csv.validActivatedControl==null&&n!=gx.csv.lastControl&&(u=gx.O.getValidStructId(r),u>gx.O.fromValid&&u<=gx.O.toValid&&(gx.csv.validActivatedControl=n));n.gxusrdisabled=!t;n.disabled=n.gxdisabled?n.gxdisabled==!0?!0:n.gxusrdisabled:n.gxusrdisabled;(i===undefined||i)&&this.setEnabled(n,t)},setEnabled:function(t,i){var u,r,o,f,e;if(gx.lang.booleanValue(i)?gx.dom.removeClass(t,"gx-disabled"):gx.dom.addClass(t,"gx-disabled"),this.disabledAsSpan(t)){try{t.type=="checkbox"&&(r=t.parentNode);t.type=="radio"&&(o=n(t).parent().closest(".gx-radio-button"),r=o[0])}catch(s){}gx.lang.booleanValue(i)?(!gx.O.DSO&&r&&r.className.indexOf("Readonly")==0&&(r.className=r.className.substring(8)),this.isVisible(t)&&(this.setVisible(t,1),u=this.getRONode(t.id,!0),u&&this.setVisible(u,0))):(!gx.O.DSO&&r&&r.className.indexOf("Readonly")<0&&!gx.text.startsWith(r.className,"gx-")&&(r.className="Readonly"+r.className),this.isVisible(t)&&t.type!="password"&&t.type!="image"&&t.type!="checkbox"&&t.type!=="radio"&&(u=this.getRONode(t.id,!0),u&&(this.setVisible(t,0),this.setVisible(u,1),f=gx.O.getValidStructFld(t),e=0,!gx.lang.emptyObject(f)&&f.format&&(e=f.format),this.setControlValue_span_safe(u,gx.fn.getControlValue(gx.dom.id(t),"screen",undefined,f),e,t.type=="textarea"))))}},disabledAsSpan:function(n){var t=n.tagName.toUpperCase();return t!="IMG"&&!(t=="INPUT"&&n.type=="button")},setVisible:function(t,i){var r,u,e,f;n(t).toggleClass("gx-invisible",!gx.lang.booleanValue(i));t.style.display=i==0?"none":this.displayByType(t.nodeName);r=gx.O.getValidStructFld(t);u=t.parentNode;i&&r&&r.gxgrid&&!r.gxgrid.grid.gxIsFreestyle&&u.getAttribute("data-colindex")!=null?r.gxgrid.applyPropEntireColumn(u.getAttribute("data-colindex"),"Visible",i):(e=gx.fn.rowGridId(t),e&&(f=n(t).find("table")[0],f&&this.setVisible(f,i)))},getRONodePrefix:function(){return"span_"},prefixROClass:function(n){return gx.O.DSO||n===""||n.indexOf("Readonly")===0?n:"Readonly"+n},getRONode:function(n,t){var r,e;if(gx.lang.emptyObject(n))return null;var i=gx.dom.byId(n),u=this.getRONodePrefix()+n,f=gx.dom.byId(u);return f!=null?f:!t||i==null||i.nodeName==="INPUT"&&(i.type==="radio"||i.type==="checkbox")?null:(r=document.createElement("SPAN"),r.setAttribute("id",u),gx.O.DSO&&r.setAttribute("data-gx-readonly",""),this.setVisible(r,!1),r.className=gx.fn.prefixROClass(i.className),e=i.nodeName=="IMG"||i.nodeName=="INPUT"&&i.type=="image"?i.value:gx.fn.getControlValue(gx.dom.id(i),"screen"),r.appendChild(document.createTextNode(e||"")),i.parentNode.insertBefore(r,i),r)},setDateCtrlProperties:function(t,i,r){var e=gx.dom.byId(gx.dom.id(t)+"_dp_trigger"),u,f;e&&n(e).toggle(i);u=n(gx.dom.byId(gx.dom.id(t)+"_dp_container"));u&&(t.Flat&&n(t).hide(),f=n(".calendar",u),u.toggle(i&&r||!i&&r),f&&f.toggle(i&&r))},getGridCtrlProperty:function(n,t,i){var r,u;try{if(n!=0){if(r=this.getGridObj(n),r&&(u=r.grid.getColumnByHtmlName(t),u))return u[i.toLowerCase()]}else return this.getCtrlProperty(t,i)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(n,t){var r=gx.O.getValidStructFld(n),u=r&&r.grid>0?"_"+gx.fn.currentGridRowImpl(r.grid):"",i=gx.uc.getUserControlObj(gx.uc.userControlContainerId(n+u));return i!=null?i[t]:(i=this.screen_CtrlRef(n),!i)?void 0:t==="Picture"?gx.rtPicture(r,i):t==="Text"?this.getControlValue(n,"screen",undefined,r):t=="Visible"&&gx.fn.getRONode(i.id)?this.getCtrlProperty_impl(i,t)||this.getCtrlProperty_impl(gx.fn.getRONode(n),t):t=="Enabled"&&gx.fn.getRONode(i.id)?!this.getCtrlProperty_impl(gx.fn.getRONode(i.id),"Visible"):this.getCtrlProperty_impl(i,t)},getCtrlProperty_impl:function(t,i){var r,u;if(t==null)return"";switch(i){case"Tooltiptext":return t.title;case"Invitemessage":return t.placeholder;case"Visible":return t.nodeName==="INPUT"&&t.type==="radio"&&(r=n(t).parent().closest(".gx-radio-button"),r.length>0&&(t=r[0])),t.style.display!="none";case"Enabled":return t.disabled===undefined?n(t).hasClass("gx-disabled")?!1:!0:!t.disabled;case"Class":return t.className;case"Backcolor":return gx.color.css(t.style.backgroundColor);case"Forecolor":return gx.color.css(t.style.color);case"Width":return gx.dom.dimensions(t).w;case"Height":return gx.dom.dimensions(t).h;case"Caption":return this.getCtrlCaption(t);case"Fontbold":return t.style.fontWeight=="bold";case"Fontitalic":return t.style.fontStyle=="italic";case"Fontunderline":return t.style.textDecoration=="underline";case"Fontstrikethru":return t.style.textDecoration=="line-through";case"Fontname":return t.style.fontFamily;case"Filename":return t.value.split(/(\\|\/)/g).pop();case"Fontsize":return(u=parseInt(t.style.fontSize),isNaN(u))?12:u;case"Ispassword":return t.type=="password"}},displayByType:function(n){switch(n){case"TABLE":return!gx.util.browser.isIE()||gx.util.browser.ieVersion()>=8?"table":"block";case"P":case"DIV":return"block"}return""},setCtrlCaption:function(n,t){var u,r,i,f;try{if(u=gx.html.getFieldLabel(n),u)gx.fn.setControlValue_fmt(u,t,0,!1);else{switch(n.tagName){case"SPAN":case"DIV":case"FIELDSET":r=n.getAttribute("data-gxformat");i=gx.O.getValidStructFld(n);r==null&&(r=!gx.lang.emptyObject(i)&&i.format?i.format:0);f=!1;i&&(f=i.ctrltype==="edit"?i.multiline:!0);gx.fn.setControlValue_fmt(n,t,r,f);return;case"INPUT":n.type!="checkbox"&&(n.value=t);return}n.nodeName=="#document"&&(n.title=t)}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(t){var r=gx.html.getFieldLabel(t),i;if(r)return n(r).text();switch(t.tagName){case"SPAN":case"DIV":case"FIELDSET":if(i=t.getAttribute("data-gxformat"),i!=null&&i=="1")return t.innerHTML;while(t.firstChild!=null&&t.firstChild.nodeName!="#text")t=t.firstChild;return typeof t.innerText!="undefined"?t.innerText:t.textContent||t.text;case"INPUT":if(t.type!="checkbox")return t.value;break;default:return""}},propertyValueFalse:function(n){return typeof n=="string"&&(n=n.toLowerCase(),n=="false"||gx.num.parseFloat(n)==0)?!0:n==0},setButtonVisibility:function(n,t){var i=t?"":"none",f=n.parentNode,r,u,e;gx.lang.emptyObject(f)||f.nodeName!="SPAN"||(f.style.display=i,r=f.parentNode,gx.lang.emptyObject(r)||r.nodeName!="SPAN"||(r.style.display=i,u=r.parentNode,gx.lang.emptyObject(u)||u.nodeName!="SPAN"||(u.style.display=i,e=u.parentNode,gx.lang.emptyObject(e)||e.nodeName!="SPAN"||(e.style.display=i))));n.style.display=i},setBlobValue:function(n,t){var i=gx.dom.byId(n)||gx.dom.byId("Object_"+n);this.setBlobUrl(i,t)},setBlobFilename:function(n,t){if(n!=null){var i=gx.O.getValidStructFld(n);i&&gx.fn.setHidden(i.fld+"_Filename",gx.text.trim(t))}},setBlobFiletype:function(n,t){var r,i;n!=null&&(r=gx.O.getValidStructFld(n),r&&gx.fn.setHidden(r.fld+"_Filetype",gx.text.trim(t)),i=n,i.nodeName=="INPUT"&&i.type=="file"&&(i=gx.dom.byId("Object_"+n.id)),i!=null&&(t=gx.util.getContentType(t),this.setObjectCtrlType(i,t),gx.fn.setVisible(i,!0)))},resolveResourceUrl:function(n,t){if(n=="")return t?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.isabsoluteurl(n))if(gx.isRelativeToHost(n)){if(n.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())!=0)return gx.util.resourceUrl(gx.basePath+n,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+n,!1);return n},setBlobUrl:function(t,i){var u=gx.html.multimediaUpload.getContainer(t),f,r,o,e,s;u?(f=this.resolveResourceUrl(i,!1),gx.html.multimediaUpload.setPreviewImage(u,f),gx.html.multimediaUpload.setPreviewLink(u,f)):i.match(/^[a-z]:[\S]*/i)||t!=null&&(r=t,o=r.nodeName=="INPUT"&&r.type=="file",i===""&&i===""&&(e=n(r),e.wrap("<form>").closest("form").get(0).reset(),e.unwrap()),o&&(r=gx.dom.byId("Object_"+t.id)),r!=null&&(s=gx.util.getContentTypeFromExt(i),r=this.setObjectCtrlType(r,s)),r!=null?r.tagName=="IMG"?(i=this.resolveResourceUrl(i,!0),r.src=i):(i=i||"about:blank",r.data=i,gx.fn.setVisible(r,!0),this.resizeObject(r),gx.dom.redrawControl(r)):(r=gx.dom.byId("Link_"+t.id),r!=null&&(r.style.display=i!=""?"block":"none",r.href=i)))},setGridMultimediaValue:function(n,t,i,r){if(t!==undefined)return this.setMultimediaValue(n+"_"+t,i,r)},setMultimediaValue:function(n,t,i){var r=gx.dom.byId(gx.csv.ctxControlId(n)),e,u,c,o,s,h,f;r&&(e=gx.html.multimediaUpload.getContainer(r),u=this.resolveResourceUrl(i||t||"",!1),e?(c=gx.util.Url.parseWithAnchor(t),c.protocol.search(/^https?:/)>=0&&gx.html.multimediaUpload.setPreviewImage(e,u),o=t==""&&i==""||t!="",o||(s=gx.dom.byId(r.id+"_GXI"),s&&(s.value=i)),h=gx.dom.byId(n),h&&t==""&&(h.value=""),this.setMultimediaType(r,o),gx.html.multimediaUpload.setPreviewLink(e,u)):((r.tagName=="IMG"||r.tagName=="INPUT"&&r.type=="image")&&(r.src=u),f=r.parentNode,f&&f.tagName=="A"&&gx.dom.isMultimediaElement(r)&&(u?f.href=u:f.removeAttribute("href"))))},setMultimediaType:function(n,t){if(n){var i=gx.html.multimediaUpload.getContainer(n);i&&gx.html.multimediaUpload.setType(i,gx.lang.gxBoolean(t))}},setObjectCtrlType:function(n,t){var r=n,u,f,e,o;if(n.nodeName=="IMG"&&(!t||t.indexOf("image/")==0))return r;if((n.type!=t||n.nodeName=="OBJECT"&&t.indexOf("image/")==0)&&(r=t.indexOf("image/")==0?gx.html.nodesFromText('<img id="'+n.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+n.id+'" type="'+t+'">')[0],r)){try{for(u in n.attributes)if(u!="id"&&u!="type"&&u!="implementation"&&n[u])try{r[u]=n[u]}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","setObjectCtrlType")}}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","setObjectCtrlType")}if(f=n.parentNode,f){for(e=null,o=f.childNodes.length,i=0;i<o;i++)if(f.childNodes[i]==n){i<o-1&&(e=f.childNodes[i+1]);break}gx.dom.removeControlSafe(n);e!=null?f.insertBefore(r,e):f.appendChild(r)}}return r},resizeObject:function(n){var t=gx.lang.emptyObject;t(n.data)||n.data=="about:blank"||t(n.width)&&t(n.height)&&t(n.style.width)&&t(n.style.height)&&(n.style.width="200px",n.style.height="200px")},restoreLostCtrlOnGridRefresh:function(n,t,i){if(t.form==null){var u=gx.dom.id(t),r=gx.O.getValidStructFld(u);r&&(t.type!="checkbox"||r.gxgrid&&parseInt(n||0,10)!==parseInt(r.gxgrid.grid.firstRecordOnPage||0,10)||(t=gx.dom.el(t.id)||gx.dom.el(t.name),t.checked=i))}return t},checkboxClick:function(n,t,i,r,u){var e=t.checked,o=u?gx.getObj(u):null,f=typeof n=="object"?n:gx.fn.validStruct(n,o),h=f&&f.gxgrid?f.gxgrid.grid.firstRecordOnPage:0,c=f&&f.grid?f.grid:0,s=function(n){(n||gx.csv.validatingGrid===c)&&(t=this.restoreLostCtrlOnGridRefresh(h,t,e),gx.fn.setControlOldValue(t,t.value),t.checked=e,t.value=e?i:r,f&&(typeof f.c2v=="function"&&f.c2v(),typeof f.v2bc=="function"&&f.v2bc.call(gx.O),gx.csv.invalidateCtrl(t,!0)))}.closure(this);gx.pO.supportAjaxEvents&&gx.fx.obs.addObserver("gx.onaftervalidate",this,function(n){n!==gx.evt.types.VALUECHANGED&&s()},{single:!0});gx.fx.obs.notify("gx.validation",null,function(){gx.evt.fixWebKitOnFocus()&&t.onfocus();s.call(this,!0)});gx.pO.fullAjax||s.call(this,!0);o&&gx.util.browser.isIE()&&gx.setGxO(o)},setCtrlClass:function(n,t){n!=null&&(n.className=t)},setCtrlLink:function(t,i){var r,f,u,e;if(t!=null){if(i==""){this.unsetCtrlLink(t);return}if(t.tagName=="A"){t.href=i;return}r=t.firstChild;r&&r.tagName=="A"?r.href=i:(f=t.parentNode,f.tagName=="A"?f.href=i:(u=document.createElement("A"),u.href=i,r&&r.nodeName=="#text"?(gx.dom.shouldPurge()&&gx.dom.purge(u,!0),u.innerHTML=r.nodeValue,t.replaceChild(u,r)):(f.replaceChild(u,t),u.appendChild(t)),e=n(t).attr("data-gx-link-target"),e&&n(u).attr("target",e)))}},unsetCtrlLink:function(n){var t,i;if(n!=null&&(t=n.parentNode,t.tagName=="A"&&(i=t.firstChild,ParentTag2=t.parentNode,ParentTag2!=null))){while(i!=null)ParentTag2.insertBefore(i,t),i=t.firstChild;gx.dom.removeControlSafe(t)}},setCtrlLinkTarget:function(t,i){if(t!=null){var r=n(t);r.is("a")||(r=r.children());r.is("a")&&r.attr("target",i);n(t).attr("data-gx-link-target",i)}},isVisible:function(n,t){if(!n||gx.dom.hasClass(n,"gx-invisible")||n.tagName.toUpperCase()==="INPUT"&&n.type==="hidden"||n.style.display==="none")return!1;try{for(var i;n&&(typeof t=="undefined"||t>=0);){if(i=gx.dom.getComputedStyle(n),i&&(i.visibility=="hidden"||i.display=="none"))return!1;n=n.parentNode;typeof t!="undefined"&&t--}}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(n,t){var i=this.gridObjByLvl(n),u=null,r,f;if(i)return(i=gx.O.getGridById(i.gridId,t)||i,u=i.grid.getRowByGxId(t),u)?u.gxIsMod():!0;r=!1;try{f=this.getControlValue("nIsMod_"+n+"_"+t);r=f==1}catch(e){r=!1}return r},gridObjByLvl:function(n){for(var i=gx.O.Grids,r=i.length,t=0;t<r;t++)if(i[t].gridLvl==n)return i[t];return null},forceEnableControls:function(n){var t,r,i;for(t in gx.disabledControls)for(t=this.getControlRef_list(t),r=t.length,i=0;i<r;i++)try{t[i].type!="button"&&t[i].type!="submit"&&(t[i].disabled=n)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","forceEnableControls")}},alert:function(n,t){try{var i=gx.util.balloon.getNew(n.id);i.setError(t);i.show();gx.csv.invalidForcedCtrl=n}catch(r){gx.util.alert.showError(t)}},getGridRowMode:function(n,t){return this.getGridRowModeImpl(n,t,this.currentGridRow(t))},getGridRowModeImpl:function(n,t,i){var r=this.rowIsRemoved(t,i),u=this.getControlValue("nRcdExists_"+n+"_"+i);return r=="1"?"DLT":u=="0"?"INS":"UPD"},rowIsRemoved:function(n,t){var r=this.getGridObj(n),i;return r!=null&&(i=r.grid.getRowByGxId(t),i)?i.gxDeleted():!1},getGridObj:function(n,t){return gx.O.getGridById(n,t)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","changeCmpContext")}},initOld:function(n){gx.oldValues[n.id]==undefined&&(gx.oldValues[n.id]=n.value)},setFocusOnError:function(n){var i=gx.fn.controlGridId(n),r=gx.csv.ctxControlId(n),t=null;t=i==0?gx.dom.el(r):gx.fn.getControlGridRef(r,i);t!=null&&(gx.O.AnyError=1,gx.csv.anyError=!0,t.setAttribute("data-gxvalid","0"),gx.csv.stopOnError&&gx.fn.setFocus(t))},usrSetFocus:function(n){gx.usrPendingControl=n},usrSetFocus_commit:function(){gx.usrPendingControl&&(gx.fn.usrSetFocus_impl(gx.usrPendingControl),delete gx.usrPendingControl)},usrSetFocus_impl:function(n,t){var i,r;if(t===undefined&&(t=!0),i=gx.fn.screen_CtrlRef(n),i==null){gx.grid.setActiveGridRow(n,0);return}n=gx.dom.id(i);gx.csv.isvalidating()==!0?t?(r=function(n){gx.lang.doCallTimeout(gx.fn.usrSetFocus_impl,gx.fn,[n,!1],200)},gx.fx.obs.addObserver("gx.onaftervalidate",this,r.closure(gx.fn,[n]),{single:!0})):gx.usrFocusControl=n:(gx.fn.setFocus(i),delete gx.usrFocusControl)},setFocus:function(n,t){if(n){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(n.id)&&(n=gx.dom.byId(n.id),!n))return;gx.fn.setFocusSafe(n,function(n){gx.fn.setSelection(n);n.forcedFocus=!0;t&&t()})}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(n,t){var i=gx.csv.setFocusOnload,r,u;n&&(r=function(n,t){try{i&&t&&gx.fx.obs.addObserver("gx.onafterfocus",this,t.closure(this,[n]),{single:!0});n.focus()}catch(r){}!i&&t&&t(n)},gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",window,function(){r.call(this,n,t)},{single:!0}):(u=i?500:0,gx.lang.doCallTimeout(r,this,[n,t],u)))},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(n){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},arrayCtrlFocus:function(n){return n&&n.type=="radio"&&(n=gx.fn.getRadioSelected(n.name)||n),n},setFocusOnload:function(n){n=n===undefined?!0:!1;gx.wpo(function(){var t,i,r,f,u;if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){if(t=null,i=gx.pO.getUserFocus(),!gx.lang.emptyObject(i)){if(i=="notset")return;if(r=gx.pO.getUserControl(gx.uc.userControlContainerId(i)),gx.lang.emptyObject(r))gx.csv.userFocus=gx.fn.getControlRef(i);else{r.setFocusBase();return}}if(gx.csv.userFocus!="notset"){t=gx.csv.userFocus;gx.fn.isAccepted(t)||(gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?t=gx.csv.lastActiveControl:(f=gx.fn.firstAcceptedControl(gx.popup.ispopup()),t=gx.fn.arrayCtrlFocus(f)));try{t?(u=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=t,gx.csv.setFocusOnload=n,gx.fn.isAccepted(t)?gx.fn.setFocus(t,u):(gx.popup.setFocus(),u())):gx.popup.setFocus()}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","setFocusOnload")}}}})},setSelection:function(n){if(n&&gx.fn.isVisible(n))try{gx.csv.lastControl=n;(gx.dom.isEditControl(n)||n.type=="file")&&n.select?n.select():(n.nodeName=="TEXTAREA"||n.nodeName=="SELECT")&&(n.focus(),n.select&&n.select())}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setSelection")}},isAccepted:function(n,t,i){var t=t===undefined||t,i=i||gx.O,r=n!=null&&n.type&&n.type!=="hidden"&&!n.disabled&&!n.readOnly&&!gx.util.inArray(n.nodeName,["FIELDSET"])&&gx.fn.isVisible(n);if(!r)return!1;if(t){var f=gx.dom.id(n),u=i.getValidStructFld(f),e=i.getVariable("Gx_mode");gx.csv.lastGrid>0&&i.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));r=!gx.lang.emptyObject(u)&&u.nac?!u.nac.call(i):!0;i.setVariable("Gx_mode",e)}return r},enterHasFocus:function(){return gx.csv.lastControl==null?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(n,t){var i,o,s,h;t=t||gx.csv.lastControl;var f=gx.fn.getControlIndex(t),r=f,u=this.controlGridId(t.id||t.name),e=!1;if(n&&gx.dom.hasClass(t,"gx_newrow")&&(r=t.gxControlIdx,e=!0),r==-1)return!0;for(i=null,o=gx.fn.getFormElements(),i=gx.fn.searchFocus(++r,!0);;i=gx.fn.searchFocus(++r,!0))if(i==null||r==o.length)r=-1;else{if(n)break;if(gx.evt.isEnterEvtCtrl(i))break;if(i.nodeName=="INPUT"&&i.type!="submit"&&i.type!="button"&&i.type!="image")break}!e&&u&&gx.O.isTransaction()&&this.controlGridId(i.id||i.name)!=u&&(s=gx.O.getGridById(u),h=gx.dom.byId(s.containerName+"_NewRow"),i=h.parentNode,i.gxControlIdx=f);gx.fn.setFocus(i)},getFormElements:function(){return n.makeArray(n("button, fieldset, input, img, object, output, select, textarea"))},getControlIndex:function(n){var t=gx.fn.getFormElements().length-1;return el=this.controlIndex(n,0,t)},controlIndex:function(n,t,i){if(document.all){var u=gx.fn.getFormElements(),f=u[t].sourceIndex,e=u[i].sourceIndex,r=parseInt(t+(i-t)/2)+1,o=u[r].sourceIndex;if(t==i&&n.sourceIndex==f&&n.sourceIndex==e||n.sourceIndex==f)return t;if(n.sourceIndex==e)return i;if(n.sourceIndex==o)return r;if(n.sourceIndex>o&&n.sourceIndex<e)return this.controlIndex(n,r+1,i-1);if(n.sourceIndex>f&&n.sourceIndex<o)return this.controlIndex(n,t+1,r-1)}else return n.gxIndex},searchFocus:function(n,t){return t?this.searchFocusFwd(n):this.searchFocusBack(n)},searchFocusBack:function(n){for(var i=r(gx.fn.getFormElements()),t=n;t>=0;t--)if(gx.fn.isAccepted(i))return i[t];return null},searchFocusFwd:function(n){for(var i=r(gx.fn.getFormElements()),u=i.length,t=n;t<u;t++)if(gx.fn.isAccepted(i[t]))return i[t];return null},rowGridId:function(n){if(!n||!n.getAttribute)return null;var t=n.getAttribute("data-gxgridid");return t!=null?t:gx.fn.rowGridId(n.parentNode)},controlRowIndex:function(t){var i=n(t).parentsUntil(f);return i.filter("[data-gxrow]").attr("data-gxrow")||""},controlRowIdImpl:function(n){if(!n||!n.getAttribute)return null;var t=n.getAttribute("data-gxrow");return t!=null?t:gx.fn.controlRowIdImpl(n.parentNode)},controlRowId:function(n){var t=gx.fn.controlRowIdImpl(n),i;return t===null&&n&&n.id&&n.id.lastIndexOf("_")>0&&(i=n.id.lastIndexOf("_"),t=n.id.substring(i+1)),t},controlGridId:function(n){var r,t,i,u,f,e;try{if(i=gx.O.Grids,i)for(t=0,len=i.length;t<len;t++)if(i[t].grid.columnsHtmlName[n])return i[t].gridId;for(r=gx.fn.controlIds(),t=0,len=r.length;t<len;t++)if(u=gx.fn.validStruct(r[t]),gx.O.isSameField(u,n))return u.grid;if(f=gx.O.getComponentData(n),f&&(e=gx.fn.gridObjByLvl(f.lvl),e))return e.gridId}catch(o){}return 0},oldGridId:function(n){var r,u,t;try{for(r=gx.fn.controlIds(),u=r.length,i=0;i<u;i++)if(t=gx.fn.validStruct(r[i]),t!=undefined&&t.gxold==n)return t.grid}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(n,t){var i="no_mode";return(gx.csv.validatingGrid!=null?this.isLvlParmOld(gx.csv.lastGrid,n)&&(i=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)):this.isLvlParmOld(0,n)&&(i=gx.O.Gx_mode),i=="no_mode")?!0:i=="UPD"||gx.csv.validatingGrid==null?(window[n]=t,!0):!1},isLvlParmOld:function(n,t){var i,r;try{if(i=gx.O.getOldLvl(t),i>=0)return n>0?(r=gx.fn.gridLvl(n),i<r):!0}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(n){var r,u,t;try{for(r=gx.fn.controlIds(),u=r.length,i=0;i<u;i++)if(t=gx.fn.validStruct(r[i]),t!=undefined&&t.lvl!=undefined&&t.grid==n)return t.lvl}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(n){var r,u,t;try{for(r=gx.fn.controlIds(),u=r.length,i=0;i<u;i++)if(t=gx.fn.validStruct(r[i]),t!=undefined&&t.lvl==n)return t.grid}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(n){var t,r;try{for(t=gx.fn.controlIds(),i=0;i<t.length;i++)if(r=gx.fn.validStruct(t[i]),r!=undefined&&r.fld==n)return t[i]}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(n,t){var u,f,e,r;try{for(u=null,t&&(u=[]),f=gx.fn.controlIds(),e=f.length,i=0;i<e;i++)if(r=gx.fn.validStruct(f[i]),r!=undefined&&n(r))if(r.id=f[i],t)u.push(r);else return r}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","getVStruct")}return u},vStructForOld:function(n){return gx.fn.getVStruct(function(t){return t.gxold==n})},vStructForVar:function(n){return gx.fn.getVStruct(function(t){return t.gxvar==n})},vStructForVarWId:function(n,t){var r=gx.fn.getVStruct(function(t){return t.gxvar==n},!0),u=r[0],f=r.length,i;if(f>1)for(i=0;i<f;i++)if(u=r[i],u.id==t)break;return u},vStructForHC:function(n){return gx.fn.getVStruct(function(t){return t.hc==n})},firstCtrlAfterGrid:function(n,t){for(var r,u=gx.fn.lastCtrlId(),i=n;i<u;i++)if(r=gx.fn.validStruct(i),r!=undefined&&r.grid!=t)return i;return u},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(n){try{return gx.oldKeyValues[n]}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(n,t){try{return gx.oldKeyValues[n+gx.fn.currentGridRow(t)]}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","oldGridKey")}return""},setKey:function(n,t){n!=null&&(gx.oldKeyValues[n]=t)},unsetKey:function(n){n!=null&&(gx.oldKeyValues[n]=undefined)},setGridKey:function(n,t,i){n!=null&&(gx.oldKeyValues[n+gx.fn.currentGridRow(t)]=i)},unsetGridKey:function(n,t){n!=null&&(gx.oldKeyValues[n+gx.fn.currentGridRow(t)]=undefined)},removeGridRow:function(n,t){var e=gx.fn.rowIsRemoved(t,n),f,o,r,u;try{for(f=gx.fn.controlIds(),o=f.length,i=0;i<o;i++)r=gx.fn.validStruct(f[i]),r!=undefined&&r.grid==t&&(u=gx.dom.el(r.fld+"_"+n),u!=null&&(u.gxdisabled=e,u.disabled=e))}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(t,n)},controlFiresEvent:function(n){return n&&(n.evt||n.triggersEvt)},controlIds:function(n){return n=n||gx.O,n?n.getControlIds():[]},getControlContext:function(t){var r=null,i=gx.json.evalJSON(n(t).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)||"{}");return i&&i.length>1&&(r=gx.getObj(i[0],i[1])),r},validStruct:function(n,t){return t=t||gx.O,t.getValidStruct(n)},lastCtrlId:function(n){var i,t,r;if(n===!0){for(i=this.controlIds(),t=i.length-1;t>=0;t--)if(r=this.validStruct(i[t]),r.v2v&&(r.isacc===undefined||r.isacc==1))return i[t]}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(n,t){return t==0&&n==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(n){var i,r,t;try{var f=gx.fn.vStructsArray(),u=gx.fn.controlIds(),e=u.length;for(i=0;i<e;i++)if(r=f[u[i]],r!=null&&(t=gx.fn.getControlGridRef(r.fld,r.grid),t&&gx.fn.isAccepted(t)&&(n||t.type!="submit"&&t.type!="image"&&t.type!="button"&&t.type!="fieldset")))return t}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var n=gx.dom.byId(gx.csv.cmpCtx+"BTN_DELETE");n!=null&&gx.fn.setCtrlPropertyImpl(n,"Enabled",gx.getVar("Gx_mode")=="INS"?0:1)},setFocusAfterLoad:function(n){gx.csv.isvalidating()!=!0&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(n&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(n){var i=function(n){var i,t;try{for(i=n.length,t=0;t<i;t++)gx.fn.setCtrlPropertyImpl(n[t],"Enabled",0)}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","disableCtrl")}},t=gx.fn.getControlRef_list(n);if(t!=null)if(document.gxReadyState=="complete")i(t);else gx.evt.on_ready(this,i.closure(this,[t]))},refreshGridRowBC:function(n,t){var i,r;try{if(i=gx.O.getGridBC(n),i&&(r=gx.pO.getGridForColl(i.gxvar),gx.csv.validatingGrid&&r&&gx.csv.validatingGrid.gridId==r.gridId))return gx.fn.setGridHidden(n,t),t=t[parseInt(gx.fn.currentGridRow(r.gridId))-1],gx.O.bcToScreen(i,t),!0}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(n,t){return t=gx.O.applySDTVarMapping(t,n),this.refreshFormBC(n,t)||this.refreshGridRowBC(n,t)},refreshFormBC:function(n,t){try{var i=gx.O.getFormBC(n)||gx.O.getFormBCForVar(n);if(i)return gx.setVar(n,t),gx.fn.setGridHidden(n,t),gx.O.bcToScreen(i,t),!0}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(n){return gx.http.viewStateLoaded||gx.http.loadState(),typeof gx.http.viewState[n]!="undefined"},GX_HASH_PREFIX:"gxhash_",getHash:function(n,t,i){return gx.fn.getHidden(n+gx.fn.GX_HASH_PREFIX+t+(i?"_"+i:""))||gx.fn.getHidden(n+gx.fn.GX_HASH_PREFIX+t)},getHidden:function(n){return gx.http.viewStateLoaded||gx.http.loadState(),gx.http.viewState[n]},setHidden:function(n,t){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[n]=t},setGridHidden:function(n,t){var i=n,r=gx.fn.oldGridId(n);r>0&&(i=n+"_"+gx.fn.currentGridRowImpl(r));gx.fn.setHidden(i,t)},deleteHidden:function(n){gx.http.viewState&&delete gx.http.viewState[n]},setJsonHiddens:function(n,t,i){var e=[],u,o,r,f;i=i===undefined||i;for(r in t)i?gx.fn.setGridHidden(r,t[r]):gx.fn.setHidden(r,t[r]),f=gx.fn.getVarControlMap(n,r),u=t[r],gx.lang.emptyObject(f)||(n&&(o=n.VarControlMap[f],(o.type=="date"||o.type=="dtime")&&(u=new gx.date.gxdate(t[r],"Y4MD"))),gx.setVar(f,u)),gx.fn.vStructForOld(r)&&gx.setVar(r,u),n&&n.UCBindingsHiddens[r]&&(e=e.concat(gx.O.UCBindingsHiddens[r].uc));return e},filterHiddens:function(n,t){var r={};for(var i in t)i&&i.search(n)==0&&(r[i]=t[i]);return r},autoRefreshingControl:function(n,t){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&gx.csv.lastControl!=null&&gx.csv.lastControl.id==t+n},setJsonValues:function(n,t,i,r,u){var c,e,o,p,nt,f,w;if(!n)return[];var a=gx.O,tt=n.length,v=[],b,k,y,d=function(n,t,r){return n.grid==i?r:gx.fn.currentGridRow(n.grid)};for(c=0;c<tt;c++){var s=n[c],h=s.CmpContext,g=gx.lang.booleanValue(s.IsMasterPage),l=gx.setGxO(h,g);if(!gx.lang.emptyObject(gx.O))for(e in s)e!="CmpContext"&&e!="IsMasterPage"&&(!u||u(e))&&((o=s[e],typeof o=="object"&&gx.fn.refreshBC(e,s[e]))||typeof o!="function"&&(f=gx.fn.vStructForVar(e)||gx.O.getValidStructFld(e),f?f.v2v&&!gx.fn.autoRefreshingControl(f.fld,h)&&(p=gx.O.getGridById(f.grid),nt=p&&p.InfiniteScrolling,f.grid!=0&&(b=gx.dom.el(e,!1,!1),k=gx.fn.controlRowId(b)||d(f,i,r)),nt||(f.v2v(o),f.v2c(k))):e!="GX_FocusControl"||t?(f=gx.fn.vStructForHC(e),gx.lang.emptyObject(f)||gx.lang.emptyObject(f.hc)||f.grid||(f.hc==e?(l[f.hc]=o,gx.fn.setHidden(h+"GXH_"+f.fld,o)):f.hd==e&&(l[f.hd]=o)),f=gx.fn.vStructForHC(e),gx.lang.emptyObject(f)||(y="",f.grid!=0&&(y=d(f,i,r)),gx.fn.setHidden(h+"GXHC"+f.fld+"_"+y,o)),w=gx.fn.getVarControlMap(l,e),gx.lang.emptyObject(w)?gx.setVar(e,o):gx.setVar(w,o),gx.fn.setGridHidden(e,o),gx.O.UCBindings[e]&&(v=v.concat(l.UCBindings[e].uc))):a.CmpContext==h&&a.IsMasterPage==g&&(gx.usrFocusControl=o)))}return gx.setGxO(a),v},getPropertyControlRef:function(n,t,i){var r=gx.fn.getControlRef(n,!0);return r=r==null&&!i?gx.dom.byId("Object_"+n):r,r==null&&(r=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(n))),r==null&&t&&(r=gx.dom.el(n+"_"+t)),r},setJsonProperties:function(n,t){var r,u,e,w,s,h,i,a,f,v,o,y,p;if(!n)return[];var g=gx.O,nt=n.length,b=[];for(h=0;h<nt;h++){var c=n[h],k=c.CmpContext,d=gx.lang.booleanValue(c.IsMasterPage),tt=!!k&&!d,l=gx.setGxO(k,d);if(!gx.lang.emptyObject(gx.O))for(i in c)if((r=null,i!=="CmpContext"&&i!=="IsMasterPage"&&i!=="")&&(f=c[i],typeof f!="function"&&(u=l.getValidStructFld(i),i=="FORM"||u||i.indexOf("gxHTMLWrp")>=0||i.indexOf("ContainerDiv")>=0?(w=u&&(u.type=="bits"||u.type=="bitstr"||u.type=="audio"||u.type=="video"||u.type=="binaryfile"),r=gx.fn.getPropertyControlRef(i,t,!w)):r=gx.fn.getPropertyControlRef(i,t),v=!1,r&&r.gxGridName&&(a=gx.fn.gridObjFromGxO(r.gxGridName),v=a.setProperty(f)),!v)))if(e=l.getGridColumn(i,t),(r==null||a)&&gx.uc.isUserControl(i,l)||e&&e.isUserControl)s=i,e&&e.isUserControl&&(s=i+"_"+t),gx.uc.setProperties(s,f),b.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(s)));else{if(r==null&&e==null)continue;for(o in f)if(y=typeof f[o]=="object",e&&!y&&(e[o.toLowerCase()]=f[o]),r)if(r.parentElement||(r=gx.fn.getPropertyControlRef(i,t)),y)for(p in f[o])gx.fn.setCtrlPropertyImpl(r,p,f[o][p],u);else gx.fn.setCtrlPropertyImpl(r,o,f[o],u)}}return gx.setGxO(g),b},loadJsonGrids:function(n,t){var a=function(n){for(var t=0;t<n.length;t++)if(typeof n[t]=="string")return n[t];return""},v=function(n){var i="",r=n.lastIndexOf("_"),t;return r!==-1&&(t=n.substring(r+5),i=t?"_"+t:""),i},y=function(n,t,i){for(var f,e,u,i=i||[],r=0;r<n.Count;r++){f=n[r];for(e in f.Grids)u=gx.fn.gridObj(t,e+"_"+gx.text.padl((r+1).toString(),4,"0"),!1),u&&u.isUsercontrol&&i.push(u.grid)}return i},u=[],s,r,f,i;if(n)for(s=n.length,f=0;f<s;f++)try{if(i=n[f],i.Count!=undefined){var o=i.CmpContext,h=i.GridName,e=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(e)||e.gxComponentContext!=o&&e.gridName!=h||!gx.lang.emptyObject(e.boundedCollType)){var p=i.InMasterPage=="true"?!0:!1,c="",l="";i[0]&&i[0].Props&&i[0].Props[0]&&gx.lang.isArray(i[0].Props[0])&&(l=a(i[0].Props[0]));c=v(l);r=gx.fn.gridObj(o,h+c,p);r&&(u=u.concat(y(i,o)),r.isUsercontrol&&u.push(r.grid),t?gx.O.Grids[r.gridName]&&gx.O.Grids[r.gridName].parentGrid||r.loadGrid({rowProps:i,isPostback:t}):r.updatePropsHidden(i))}}}catch(w){gx.dbg.logEx(w,"gxfrmutl.js","loadJsonGrids")}return u},getErrorViewerCtrls:function(){var t=gx.dom.byClass("gx_ev"),i,r,n;if(t.length==0)for(t=[],i=gx.dom.byTag("span"),r=i.length,n=0;n<r;n++)i[n].getAttribute("data-gx-id")=="gxErrorViewer"&&t.push(i[n]);return t},setErrorViewer:function(t,i){var v,w,s,l,e,b,nt,k,h,a,y,tt,r,c,it,rt,p,d,o,u,f,g;if(i=i===undefined||i,gx.O.AnyError=0,t)try{gx.fx.obs.notify("gx.onmessages",[t]);v=gx.dom.byClass("gx_ev");w=v.length;for(s in t){if(e=t[s],gx.lang.isArray(e)||(l=e.fields,e=e.msgs),b=[],l)for(u=0,nt=l.length;u<nt;u++)gx.lang.isArray(l[u])||(k=gx.fn.vStructForVar(l[u].replace(/^gx\.O\./,"")),k&&b.push(k.fld));if(s=="MAIN"&&(s=""),typeof e!="undefined"){for(u=0;u<w;u++)if(f=v[u],f&&f.getAttribute("data-gx-id")==s+"gxErrorViewer"){h=gx.csv.setFocusOnload?f.innerHTML:"";break}a={};y=!1;for(tt in e)r=e[tt],r&&r.type==1&&(gx.O.AnyError=1),gx.lang.emptyObject(r.text)||typeof r!="function"&&(c=gx.fn.screen_CtrlRef(r.att),it=c&&n(c).is("[data-gxgridid].gx-invisible "+c.tagName),r.att!=""&&(it&&gx.fn.isVisible(c,0)||gx.fn.isVisible(c))?(o=a[r.att],o||(o=gx.util.balloon.getNew(r.att,undefined,r.id?b:[]),a[r.att]=o),r.type==1?o.setError(r.text):o.setMessage(r.text),y||r.id!=="ForeignKeyNotFound"||(y=!0)):(r.id!=="ForeignKeyNotFound"||y)&&r.id==="ForeignKeyNotFound"||(rt=r.type==1?"gx-error-message":"gx-warning-message",h+='<div class="'+rt+'">'+gx.html.encode(r.text)+"<\/div>"));p=!1;for(d in a)if(o=a[d],o.show()!=!1||p||(p=!0,gx.fn.setFocusOnError(d)),gx.csv.oneAtAtime)break;for(u=0;u<w;u++)f=v[u],f&&f.getAttribute("data-gx-id")==s+"gxErrorViewer"&&f.innerHTML!=h&&(gx.dom.shouldPurge()&&gx.dom.purge(f,!0),i?f.innerHTML=h:f.innerHTML+=h,h!=""&&(g=gx.fx.dom.highlight(f,[255,255,165],2500),g.play(),f.effect=g))}}gx.plugdesign.applyTemplateObject({templateSelector:function(n){return n.name==="errorviewer"},classMapSelector:function(){return!1}});gx.config.csv.scrollTopOnError&&gx.O.AnyError&&!p&&window.scrollTo(0,0)}catch(ut){gx.dbg.logEx(ut,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(n){var i=u,t=i.exec(n);return t?t[1]+t[2]:n},clearCompontHiddens:function(n){var t=[];for(var i in n)typeof n[i]!="function"&&t.push(gx.fn.cmpContextFromCtrl(i));try{gx.O.deleteComponentHiddens(t)}catch(r){except=!0;gx.dbg.logEx(r,"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(i,r,u,f,e){var o,h,s,v,y,w;try{var c=[],l=!1,b=gx.gen.isDotNet(),a=[];for(o in i)if(a.push(o),typeof i[o]!="function")try{h=i[o];h&&(s=gx.dom.byId(o),!s&&r&&(s=gx.dom.byId(r[o])),gx.lang.emptyObject(s)&&(n(document.body).append("<div id='"+o+"'><\/div>"),s=gx.dom.byId(o)),gx.lang.emptyObject(s)||(gx.html.setInnerHtml(s,h,!1,e),v=gx.fn.cmpContextFromCtrl(o),y=t(gx.fn.getHidden(v+"_CMPPGM")),c.push({type:v,name:y,html:h,container:s})))}catch(p){l=!0;gx.dbg.logEx(p,"gxfrmutl.js","setJsonComponents")}}catch(p){l=!0;gx.dbg.logEx(p,"gxfrmutl.js","setJsonComponents")}(c.length==0||l)&&typeof f=="function"?f(a):(w=n.map(c,function(n){return gx.fn.createComponentAsync(n,u)}),n.when.apply(n,w).done(function(){f(a)}))},cmpRegexCache:{},getCmpRegex:function(n){var t=this.cmpRegexCache[n];return this.cmpRegexCache[n]||(t=new RegExp("^"+n),this.cmpRegexCache[n]=t),t},processCodeCallback:function(n,t,i,r,u,f){gx.fn.createComponentObj(n,t,r);gx.fn.setJsonHiddens(u,i);f.resolve()},createComponentAsync:function(t,i){var u=n.Deferred(),f=t.type,r=t.name,h=t.html,s=t.container,e,o;u.then(function(){gx.fx.obs.notify("gx.onafterevent",[gx.csv.lastEvtResponse])});try{e=gx.O;o=gx.fn.filterHiddens(gx.fn.getCmpRegex(f),i);gx.cache.codeLoaded(f+r)?(gx.fn.createComponentObj(r,f,s),gx.fn.setJsonHiddens(e,o),u.resolve()):(gx.cache.addInlineCode(f+r),gx.html.processCode(h,!1,gx.html.onTypeAvailable,[r,gx.fn.processCodeCallback,[r,f,o,s,e,u]],r))}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","createComponentAsync");u.resolve()}return u},createComponentObj:function(n,t,i){var r=gx.createComponent(n,t,i);r!=null&&gx.addComponent(r)},cleanAttachedCtrls:function(){gx.attachedControls=[]},getAttachedCtrl:function(n){for(var i,r=gx.attachedControls.length,t=0;t<r;t++)if(i=gx.attachedControls[t],i.id==n)return i;return null},attachCtrl:function(n,t){var i=gx.fn.getAttachedCtrl(n);i==null&&gx.attachedControls.push({id:n,info:t})},doAttachs:function(t){for(var h=gx.fn.attachedControls(),a=h.length,v=gx.O,o,c=t&&t.length?n.map(t,gx.fn.cmpContextFromCtrl):undefined,i,u,l,f,s,r,e=0;e<a;e++)if(i=h[e],!c||n.inArray(i.info.wc,c)>=0)if(o=gx.setGxO(i.info.wc,i.info.mp),i.info.isPrompt&&o.isTransaction()&&o.Gx_mode=="DSP")gx.fn.setCtrlPropertyImpl(gx.dom.el(i.info.wc+i.info.id),"Visible",!1);else if(!i.attached){for(u=i.info.controls,l=u.length,s=[],r=0;r<l;r++)gx.fn.addAttach(u[r],i),f=gx.fn.validStruct(u[r]),gx.fn.checkAttachedPropertyVS(f,"Visible",!1),gx.fn.checkAttachedPropertyVS(f,"Enabled",!1),s.push(f.fld);i.attached=!0;n("#"+i.id).attr("data-gx-attached-ctrl",s.join(" "))}gx.setGxO(v)},addAttach:function(n,t){var i=gx.fn.validStruct(n);i.attachedCtrls==undefined&&(i.attachedCtrls=[]);i.attachedCtrls.push(t)},checkAttachedProperty:function(n,t,i){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(n),t,i)},checkAttachedPropertyVS:function(n,t,i){var r,f,u;if(n!=undefined&&(r=n.attachedCtrls,r!=undefined))for(f=r.length,u=0;u<f;u++)gx.fn.checkAttachedControlProperty(r[u],t,i)},checkAttachedControlProperty:function(n,t,i){var s=n.info.id,u,f;n=n.info;var r=!0,e=n.controls,o=n.wc,h=e.length;for(u=0;u<h;u++)if(f=gx.fn.getCtrlProperty(o+gx.fn.validStruct(e[u]).fld,t),r=i?f==i:r&&f==i,i&&r)break;r&&gx.fn.setCtrlPropertyImpl(gx.dom.el(o+s),t,i)},changeControlOpacity:function(n,t,i,r){var f=Math.round(r),u="";u=typeof n=="string"?n:n.id;t>i?(gx.fn.setOpacity(t,u),setTimeout(function(){gx.fn.changeControlOpacity(n,t-10,i,r)},f)):t<i?(gx.fn.setOpacity(t,u),setTimeout(function(){gx.fn.changeControlOpacity(n,t+10,i,r)},f)):gx.fn.setOpacity(i,u)},setOpacity:function(n,t){var r=t,i,u;typeof t=="string"&&(r=t=="body"?document.body:gx.dom.el(t));r!=null&&(i=r.style,u=n=="reset"?"":n/100,i.opacity=u,i.MozOpacity=u,i.filter="alpha(opacity="+(n=="reset"?100:n)+")")},fadeControl:function(n,t,i){t=="in"?gx.fn.changeControlOpacity(n,0,100,i):gx.fn.changeControlOpacity(n,100,0,i)},fadeIn:function(n,t){gx.fn.fadeControl(n,"in",t)},statusMsg:function(n){window.status=n},objectOnload:function(t,i){var r=n(document.body),u=r.attr("data-HasEnter")==="true",f=r.attr("data-Skiponenter")==="true";gx.evt.onkeypress_hdlr=gx.evt.onkeypress_hdlr||function(n){gx.evt.onkeypress(n,u,f)};gx.evt.attach(document,["keydown"],gx.evt.onkeypress_hdlr);n(document).on("keyup",function(n){gx.evt.onkeyup(n)});n(document).on("keyup",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(n){gx.evt.oncontrolvaluechanging(n)});if(gx.pO!=null){gx.pO.onload(t,i);gx.setGxO(gx.pO)}},objectOnUnload:function(n){if(gx.pO!=null)gx.pO.onunload(n)},objectOnpost:function(){gx.pO!=null&&gx.pO.onpost()},objectPostback:function(n,t){gx.pO!=null&&(gx.pO.postbackLoad(n,t),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(n){return gx.fn.gridObj(gx.O.CmpContext,n,gx.O.IsMasterPage)},gridObj:function(n,t,i){var r=gx.getObj(n,i);return r?r.getGrid(t):null},installComponents:function(n,i){var f=gx.fn.getHidden("GX_CMP_OBJS"),o,r,e,u;if(f!=undefined){o=gx.gen.isDotNet();for(r in f)(n||!gx.pO.getWebComponent(r))&&(e=t(f[r].toLowerCase()),u=gx.createComponent(e,r),u!=null&&(gx.addComponent(u,i),setTimeout(function(n){this.addComponentRemoteFiles(n)}.closure(this,[u]),1)))}},addComponentRemoteFiles:function(n){var t=n.getContainer();t&&(gx.html.processCode(t.innerHTML,!0),gx.dom.fitToParent(t))},datePickerFormat:function(n,t,i){var r=gx.dateFormat,s=r.substr(0,1),h=r.substr(1,1),c=r.substr(2,1),u=gx.fn.datePickerDateFormat(s,n),f=gx.fn.datePickerDateFormat(h,n),e=gx.fn.datePickerDateFormat(c,n),o=gx.fn.datePickerTimeFormat(t);return i>0&&t>0?u+"/"+f+"/"+e+" "+o:i>0?u+"/"+f+"/"+e:o},datePickerDateFormat:function(n,t){return n=="Y"&&t.substr(0,10)=="99/99/9999"?"%Y":n=="Y"?"%y":n=="M"?"%m":n=="D"?"%d":""},datePickerTimeFormat:function(n){var u=gx.timeFormat,t,i,r;if(u==12?(t="%I",i=" %p"):u==24?(t="%H",i=""):(t="",i=""),n==2)r="";else if(n==5)r=":%M";else if(n==8)r=":%M:%S";else return"";return t+r+i},installDatePicker:function(n,t,i,r,u,f,e,o,s,h){var c=u?"datetime":"date",l=new gx.ui.controls.datePicker({inputId:n,triggerId:n+"_dp_trigger",inline:r,inputType:c,weeksNumbers:f,mondayFirst:e,format:o,datePartLength:s,timePartLength:h,afterChange:gx.fn.datePickerChanged,vStruct:t,gxO:i});l.render()},datePickerChanged:function(n,t,r,u,f){var e,s,h,c,o,l;if(!n||n.dateClicked){if(f=f||gx.O,typeof u=="undefined")for(e=gx.fn.controlIds(),s=e.length,i=0;i<s;i++)if(u=gx.fn.validStruct(e[i]),h=u.grid!=0?"_"+gx.fn.currentGridRow(u.grid):"",c=f.CmpContext+u.fld+h,r.id==c)break;u!=null&&u.dp!=undefined&&(o=gx.date.isNullDate(t)?gx.date.nulldate_toc(u.len,u.dec):t.print(gx.fn.datePickerFormat(u.dp.pic,u.dp.dec,u.len)),o!=r.value&&(r.setAttribute("data-gxvalid","0"),r.value=o,r.onchange(),n&&n.callCloseHandler(),u.grid>0&&(l=gx.fn.getGridObj(u.grid)||u.gxgrid,l.setRowModified(gx.fn.currentGridRow(u.grid))),f.refreshDependantGrids(u)))}},toArray:function(n){var i,t,r;if(gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=8){for(i=[],t=0,r=n.length;t<r;t++)i[t]=n[t];return i}return Array.prototype.slice.call(n)},evalCtxScope:function(n,t){var r=gx.O,i;return gx.setGxO(n),i=eval(t),i instanceof Object&&(i=gx.json.serializeJson(i)),gx.setGxO(r),i}}}(gx.$);Function.prototype.closure=function(n,t,i){var o=gx.util.browser,u,e,f,r;return o.isIE()&&o.ieVersion()<8?(window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]),r=this,u=n.__objId,u||(__objs[u=n.__objId=__objs.length]=n),e=r.__funId,e||(__funs[e=r.__funId=__funs.length]=r),t||(t=[]),f=t.__argsId,f||(__args[f=t.__argsId=__args.length]=t),n=null,r=null,t=null,function(){var n,t;if(__funs){if(n=__args[f],i===!0&&(n=Array.prototype.slice.call(arguments,0),n=n.concat(__args[f])),n.length==0&&arguments.length>0&&(n=arguments),t=__funs[e].apply(__objs[u],n),__objs)try{delete __objs[u].__objId}catch(r){__objs[u].__objId=null}return __funs&&delete __funs[e].__funId,__args&&delete __args[f].__argsId,t}}):(r=this,function(){var u=t||arguments;return i===!0&&(u=Array.prototype.slice.call(arguments,0),u=u.concat(t)),r.apply(n||window,u)})};gx.thread={Map:function(){this.map={};this.add=function(n,t){this.map[n]=t};this.remove=function(n){delete this.map[n]};this.get=function(n){return n==null?null:this.map[n]};this.first=function(){return this.get(this.nextKey())};this.next=function(n){return this.get(this.nextKey(n))};this.nextKey=function(n){for(i in this.map){if(!n)return i;n==i&&(n=null)}return null}},Command:function(n,t,i){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){t.apply(n,i)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(n,t,i,r){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(n,t){gx.thread.Mutex.Wait.get(n).attempt(gx.thread.Mutex.Wait.get(t))};this.attempt=function(t){for(var i=t;i;i=gx.thread.Mutex.Wait.next(i.c.id))if(i.enter||i.number&&(i.number<this.number||i.number==this.number&&i.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+i.c.id+")",10);try{retVal=this.c.execute()}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","Mutex Call")}if(this.number=0,gx.thread.Mutex.Wait.remove(this.c.id),typeof r=="function")try{r.call(n,retVal)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(n,t,i);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};gx.INTERACTIVE_EVT="gx.onInteractive";gx.PARENT_OBJECT_EVT="gx.onCreateParentObject";gx.SETMASTERPAGE_EVT="gx.onSetMasterPage";gx.ONREADY_EVT="gx.onready";gx.ONAFTERLOAD_EVT="onafterload";gx.isInteractive=!1;gx.isReady=!1;gx.getActiveContext=function(){var n=window;return gx.popup.getPopup()&&gx.popup.getPopup().frameWindow&&(n=gx.popup.getPopup().frameWindow),n};gx.isReadyUI_impl=function(n){return n.gx.evt.userReadyCnt<1&&n.gx.evt.userReadyThresholdWait()&&n.gx.isInputEnabled()&&(n.gx.ajax.isFormEnabled()||gx.popup.getPopup()!=null)};gx.isReadyUI=function(){return gx._isReadyUI()};gx._isReadyUI=function(){return gx.isReadyUI_impl(gx.getActiveContext())};gx.goInteractive=function(){gx.isInteractive=!0;gx.fx.obs.notify(gx.INTERACTIVE_EVT)};gx.goReady=function(n){gx.isReady=!0;gx.fx.obs.notify(gx.ONREADY_EVT,[],n)};gx.goOnload=function(){gx.isLoaded=!0;gx.fx.obs.notify(gx.ONAFTERLOAD_EVT)};gx.observe_run=function(n,t,i,r){i[r]=function(i,r,u){var u=u||[];n()?i.apply(r,u):gx.fx.obs.addObserver(t,r,i.closure(r,u),{single:!0})}};gx.observe_run(function(){return gx.isLoaded},gx.ONAFTERLOAD_EVT,gx,"ol");gx.observe_run(function(){return gx.isReady},gx.ONREADY_EVT,gx,"wr");gx.observe_run(function(){return gx.pO&&gx.pO.MasterPage},gx.SETMASTERPAGE_EVT,gx,"wmp");gx.observe_run(function(){return gx.isInteractive},gx.INTERACTIVE_EVT,gx,"wi");gx.observe_run(function(){return gx.pO},gx.PARENT_OBJECT_EVT,gx,"wpo");gx.isabsoluteurl=function(n){return n.search("://")!==-1};gx.isRelativeToHost=function(n){return n.substr(0,1)=="/"};gx.absoluteurl=function(n){return gx.isabsoluteurl(n)?n:n.charAt(0)!=="/"?gx.util.resourceUrl(n,!0):location.protocol+"//"+location.host+n};gx.timeoutActions={ignore:0,warn:1};gx.uc=function(n){return{PostRenderScripts:{},gxCssClass:"gx_usercontrol",getNew:function(t,i,r,u,f,e,o,s,h,c){var l,a;try{a=eval(u);gx.lang.inherits(a,gx.uc.UserControl,!0);l=new a(n)}catch(v){gx.dbg.logEx(v,"gxfrmutl.js","getNew UserControl "+u);l=new gx.uc.UserControl}return l.ContainerName=f,l.DesignContainerName=f,l.LabelForAttValue=t.CmpContext+e.toUpperCase()+(h?"_"+c:""),l.setupControl(t,e,o,i,r,s,h,c),l},fromChild:function(n){var t=gx.pO.getUsercontrolFromChild(n),r,i;if(t!=null||gx.pO.hasMasterPage()&&(t=gx.pO.MasterPage.getUsercontrolFromChild(n),t!=null))return t;for(r=gx.pO.WebComponents.length,i=0;i<r;i++)if(t=gx.pO.WebComponents[i].getUsercontrolFromChild(n),t!=null)return t;return null},getUserControlObj:function(n){var t=gx.O.getUserControl(n),r,i;if(gx.lang.emptyObject(t)){if(gx.pO.hasMasterPage()&&(t=gx.pO.MasterPage.getUserControl(n),!gx.lang.emptyObject(t)))return t;for(r=gx.pO.WebComponents.length,i=0;i<r;i++)if(t=gx.pO.WebComponents[i].getUserControl(n),!gx.lang.emptyObject(t))return t}return t},CtrlId:function(n){return n.replace(/Container$/,"")},userControlContainerId:function(n){var t=n.lastIndexOf("_"),i;return t!=-1&&(i=n.substring(0,t)+"Container"+n.substring(t),gx.dom.byId(i)!=null)?i:n.indexOf("ContainerDiv")>=0?n:n+"Container"},setProperties:function(n,t){var f=gx.uc.getUserControlObj(gx.uc.userControlContainerId(n)),e,r,i,u;if(f!=null)if(t.length!=undefined)for(e=t.length,r=0;r<e;r++)for(i in t[r])u=t[r][i],f[i]=u;else for(i in t)u=t[i],f[i]=u},isUserControl:function(n,t){t=t||gx.O;var i;return gx.lang.emptyObj(t.UserControls)?!1:n instanceof gx.uc.UserControl?!0:(i=gx.dom.byId(gx.uc.userControlContainerId(n)),i&&i.tagName==="DIV"&&gx.dom.hasClass(i,gx.uc.gxCssClass))?!0:!1},StartRender:function(){PostRenderScripts={}},pushPostRenderScripts:function(t){n.each(t&&t.Scripts||[],function(n,t){PostRenderScripts[t]=t})},EndRender:function(){var t=gx.lang.objToArray(PostRenderScripts),i=n.map(t,function(n){return gx.util.resourceUrl(gx.util.resolveUrl(n),!1)});gx.http.loadScripts(i,gx.emptyFn,0,!0)},UserControl:function(){this.ParentObject=null;this.GridId="";this.GridRow="";this.ControlId=0;this.ControlLvl=0;this.ContainerName="";this.ControlName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null;this.RealControl=null;this.IsPostBack=null;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(n){var r=this.GridRow!=""?"_"+this.GridRow:"",t=this.DesignContainerName+this.ControlName+"_"+n+r,i=gx.dom.byId(t);return i||(t=this.DesignContainerName+n+r,i=gx.dom.byId(t)),i};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(n,t,i,r,u,f,e,o){this.ParentObject=n;this.ControlName=t;this.ControlId=r;this.LastIdBefore=u;this.ControlLvl=f!=undefined?f:0;this.GridId=e!=undefined?e:0;this.GridRow=o!=undefined?o:"";gx.util.pushOnceSorted(this.ControlId,this.ParentObject.GXCtrlIds);var h=o||"_norow",s=this.ParentObject.GXValidFnc[this.ControlId];s||(this.ParentObject.GXValidFnc[this.ControlId]={id:this.ControlId,lvl:this.ControlLvl,fld:i,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl},s=this.ParentObject.GXValidFnc[this.ControlId]);s=this.ParentObject.GXValidFnc[this.ControlId];s.ucInstances=s.ucInstances||{};s.ucInstances[h]=this;s.getUCInstance=function(n){var n=n||h;return s.ucInstances[n]}};this.addValidFunction=function(n,t,i){this.ValidFunctions.push(n);var r=this.GridRow==""?"":"_"+this.GridRow;this.ParentObject.addUsercontrolBinding(t,i+r,this)};this.validateControl=function(){var i,t,n,r;for(gx.csv.validatingUC=this,i=this.ValidFunctions.length,n=0;n<i;n++)if(t=this.ValidFunctions[n],t&&(r=t.call(gx.O),!r))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;return gx.csv.validatingUC=null,!0};this.attachEvents=function(){var t,r,n,i;try{if(t=this.getContainerControl(),gx.lang.emptyObject(document.frames))t.onfocus=this.onfocus,this.RealControl=t;else if(r=document.frames.length,r>0)for(n=0,n=0;n<r;n++)if(i=document.frames[n],gx.dom.isChildNode(i,t)==!0){i.frameElement.onfocus=this.onfocus;this.RealControl=i.frameElement;return}}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.oninput=function(){this.autoRefreshFn&&this.autoRefreshFn()};this.onchange=function(){this.GridId>0&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){typeof this.setFocus=="function"&&this.setFocus()};this.setHtml=function(n){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=n};this.createWebComponent=function(n,t,i,r,u){this.ParentObject.createWebComponent(n,t,i,this.GridRow,r,u)};this.deleteWebComponent=function(n){var t=gx.fn.cmpContextFromCtrl(n);this.ParentObject.deleteComponent(t)};this.notifyContext=function(n,t){gx.fx.ctx.notify(null,n,t)};this.addV2CFunction=function(){var n,t,r,i;typeof arguments[0]=="function"?(t=arguments[1],this.V2CFunctions.push(arguments[0]),n=gx.fn.getVarControlMap(this.ParentObject,t),n!==undefined&&this.ParentObject.addUsercontrolBinding(n,t,this)):(n=arguments[0],t=arguments[1],r=arguments[2],i=arguments[3],this.ParentObject.addUsercontrolBinding(n,t,this),this.V2CFunctions.push(function(u,f,e){var s=t,o,h;e&&(f&&(s=t+"_"+f),i?u.ParentObject[n][i]=gx.fn.getControlValue(s):u.ParentObject[n]=gx.fn.getControlValue(s));o=u.ParentObject[n];u.useGxDateForBindings&&(h=gx.fn.getVarControlMapForVar(n),(h.type==="date"||h.type==="dtime")&&typeof o=="string"&&(o=u.IsPostBack?new gx.date.gxdate(o):new gx.date.gxdate(o,"Y4MD")));u[r](o)}))};this.addC2VFunction=function(n){this.C2VFunctions.push(n)};this.setC2ShowFunction=function(n){this.C2ShowFunction=n};this.execV2CFunctions=function(n){var r=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var t=0,i=this.V2CFunctions,u=i.length,t=0;t<u;t++)try{i[t](this,this.GridRow,n)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=r};this.execC2VFunctions=function(){var i=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var n=0,t=this.C2VFunctions,r=t.length,n=0;n<r;n++)try{t[n](this,this.GridRow)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=i};this.sdtV2c=function(n,t,i,r,u){var f;t!==null?(f=parseInt(t,10)-1,this.ParentObject[n][f]!==undefined&&this[u](this.ParentObject[n][f][i])):(this.ParentObject[n]=gx.fn.getControlValue(r,null,this.ParentObject),this[u](this.ParentObject[n][i]))};this.sdtC2v=function(n,t,i,r,u){var f;t!==null?(f=parseInt(t,10)-1,this.ParentObject[n][f][i]=this[u]()):this.ParentObject[n][i]=this[u]();gx.fn.setControlValue(r,this.ParentObject[n])};this.execShowFunction=function(){var t,i;this.IsPostBack===!1&&(this.IsPostBack=!0);this.IsPostBack===null&&(this.IsPostBack=!1);t=this.getContainerControl();try{this.C2ShowFunction!=null&&t&&this.C2ShowFunction(this)}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","execShowFunction")}t&&(this.autoToggleVisibility&&(i=n(t).add("label[for='"+this.LabelForAttValue+"']"),gx.lang.gxBoolean(this.Visible)?i.show():i.hide()),gx.plugdesign.applyTemplateObject({selector:"#"+t.id,templateSelector:function(n){return n.onDemandInvoke===!0}}));gx.uc.pushPostRenderScripts(this)};this.updateAndShow=function(n){try{this.execV2CFunctions(n)}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","updateAndShow")}n&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.isServerEvent=function(n){var t=this.ParentObject,i=t.IsMasterPage?"_MPAGE":"",u=this.ControlName.toUpperCase()+i+"."+n.toUpperCase()+i,r=t.getClientEventName(u);return r?t.isServerEvent(r):(gx.dbg.logDebug("Client event name couldn't be resolved."),!1)};this.eventHandler=function(n,t,i){var f,e,u;if(gx.evt.setReady(!1,"eventHandler"),f=gx.O,e=function(n){gx.setGxO(n);gx.evt.setReady(!0,"eventHandler")},gx.setGxO(this.ParentObject),n>0){var o=this.DesignContainerName,s=new RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$"),r=s.exec(this.DesignContainerName);r&&r[1]&&(o=r[1]);this.ParentObject[o]=this;u=this.ParentObject.getGridById(n);u&&u.instanciateRow(t)}this.execC2VFunctions();i.call(this.ParentObject,this.getEventRow()).always(e.closure(this,[f]));gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(n,t){this[n]=function(i){var r=this.isServerEvent(n);r&&typeof i=="function"&&gx.fx.obs.addObserver("gx.onafterevent",this,i,{single:!0});this.eventHandler(this.GridId,this.GridRow,t);r||typeof i!="function"||i.call(this)}.closure(this)};this.addProperty=function(n,t){this.Properties[n]=t};this.setProp=function(n,t,i,r){this.addProperty(n,t);this.PropTypes[n]=r;gx.lang.isBooleanType(r)?this[n]=gx.lang.gxBoolean(i):r=="color"?gx.lang.emptyObject(i)||(this[n]=typeof i=="number"||typeof i=="string"?gx.color.html(i):i):gx.lang.isNumericType(r)?gx.lang.emptyObject(i)||(this[n]=gx.num.parseFloat(i)):this[n]=i};this.setDynProp=function(n,t,i,r,u){var f,e;this.addProperty(n,t);this.DynProperties.push(n);this.PropTypes[n]=r;f=function(){var u=this.getDynPropertyValueFromHidden(n,t);u===undefined&&(u=i);this.setProp(n,t,u,r)};u?f.call(this):this.ParentObject.CmpContext?(e=function(n){n===this.ParentObject&&f.call(this)},gx.fx.obs.addObserver("webcom.render",this,e)):gx.wr(f,this)};this.refreshDynProperties=function(){for(var t,r,n=0,i=this.DynProperties.length;n<i;n++)t=this.DynProperties[n],r=this.Properties[t],this[t]=this.getDynPropertyValueFromHidden(t,r)};this.getDynPropertyValueFromHidden=function(n,t){var i=gx.fn.getHidden(this.getHiddenName(t));return i===undefined&&(i=gx.fn.getHidden(this.getHiddenName(n))),i};this.setGridProperties=function(){for(var i,u=this.ParentObject.getGridUCProperties(this.ControlName),f=u.length,r=0;r<f;r++){var n=u[r],t=n.v,e=this.getHiddenName(n.h);i=gx.fn.getHidden(e);(t===undefined||i!==undefined)&&(t=i,n.t=="color"&&(t=gx.color.html(t)));this.setProp(n.p,n.h,t,n.t)}};this.setGridEventHandlers=function(){for(var t,i=this.ParentObject.getGridUCEventHandlers(this.ControlName),r=i.length,n=0;n<r;n++)t=i[n],this.addEventHandler(t.e,t.h)};this.getHiddenName=function(n){var t="",i=this.ControlName.toUpperCase();return this.GridRow!=""&&(t="_"+this.GridRow,this.ownerGrid&&(i=this.ownerGrid.realGridName.toUpperCase())),this.ParentObject.CmpContext+i+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+n+t};this.saveProperties=function(){var t,n;for(t in this.Properties)this.hasOwnProperty(t)&&(n=this[t],typeof this.Properties[t]!="function"&&(typeof n!="undefined"&&typeof n.R!="undefined"&&typeof n.G!="undefined"&&typeof n.B!="undefined"&&(n=gx.color.rgb(n.R,n.G,n.B)),gx.lang.isBooleanType(this.PropTypes[t])&&(n=n?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[t]),n)))}}}}(gx.$);gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));window.$.fn&&window.$.fn.jquery?gx.dbg.write("global $ is jquery"+window.$.fn.jquery):gx.dbg.write("Warning: $ is not a jQuery object instance");
/*! modernizr 3.6.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-csstransitions-flexbox-history-domprefixes-setclasses-testallprops-testprop !*/
!function(n,t,i){function o(n,t){return typeof n===t}function nt(){var i,n,u,f,e,s,t;for(var c in h)if(h.hasOwnProperty(c)){if(i=[],n=h[c],n.name&&(i.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(u=0;u<n.options.aliases.length;u++)i.push(n.options.aliases[u].toLowerCase());for(f=o(n.fn,"function")?n.fn():n.fn,e=0;e<i.length;e++)s=i[e],t=s.split("."),1===t.length?r[t[0]]=f:(!r[t[0]]||r[t[0]]instanceof Boolean||(r[t[0]]=new Boolean(r[t[0]])),r[t[0]][t[1]]=f),k.push((f?"":"no-")+t.join("-"))}}function tt(n){var t=e.className,i=r._config.classPrefix||"",u;(c&&(t=t.baseVal),r._config.enableJSClass)&&(u=new RegExp("(^|\\s)"+i+"no-js(\\s|$)"),t=t.replace(u,"$1"+i+"js$2"));r._config.enableClasses&&(t+=" "+i+n.join(" "+i),c?e.className.baseVal=t:e.className=t)}function it(n,t){return!!~(""+n).indexOf(t)}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):c?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function rt(n){return n.replace(/([a-z])-([a-z])/g,function(n,t,i){return t+i.toUpperCase()}).replace(/^-/,"")}function ut(n,t){return function(){return n.apply(t,arguments)}}function ft(n,t,i){var r;for(var u in n)if(n[u]in t)return i===!1?n[u]:(r=t[n[u]],o(r,"function")?ut(r,i||t):r);return!1}function p(n){return n.replace(/([A-Z])/g,function(n,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function et(t,i,r){var u,f,e;return"getComputedStyle"in n?(u=getComputedStyle.call(n,t,i),f=n.console,null!==u?r&&(u=u.getPropertyValue(r)):f&&(e=f.error?"error":"log",f[e].call(f,"getComputedStyle returning null, its possible modernizr test results are inaccurate"))):u=!i&&t.currentStyle&&t.currentStyle[r],u}function ot(){var n=t.body;return n||(n=s(c?"svg":"body"),n.fake=!0),n}function st(n,i,r,u){var o,a,c,v,l="modernizr",h=s("div"),f=ot();if(parseInt(r,10))for(;r--;)c=s("div"),c.id=u?u[r]:l+(r+1),h.appendChild(c);return o=s("style"),o.type="text/css",o.id="s"+l,(f.fake?f:h).appendChild(o),f.appendChild(h),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(t.createTextNode(n)),h.id=l,f.fake&&(f.style.background="",f.style.overflow="hidden",v=e.style.overflow,e.style.overflow="hidden",e.appendChild(f)),a=i(h,n),f.fake?(f.parentNode.removeChild(f),e.style.overflow=v,e.offsetHeight):h.parentNode.removeChild(h),!!a}function ht(t,r){var f=t.length,u;if("CSS"in n&&"supports"in n.CSS){for(;f--;)if(n.CSS.supports(p(t[f]),r))return!0;return!1}if("CSSSupportsRule"in n){for(u=[];f--;)u.push("("+p(t[f])+":"+r+")");return u=u.join(" or "),st("@supports ("+u+") { #modernizr { position: absolute; } }",function(n){return"absolute"==et(n,null,"position")})}return i}function w(n,t,r,f){function c(){v&&(delete u.style,delete u.modElem)}var l,v,h,y,e,p,a;if((f=o(f,"undefined")?!1:f,!o(r,"undefined"))&&(l=ht(n,r),!o(l,"undefined")))return l;for(a=["modernizr","tspan","samp"];!u.style&&a.length;)v=!0,u.modElem=s(a.shift()),u.style=u.modElem.style;for(y=n.length,h=0;y>h;h++)if(e=n[h],p=u.style[e],it(e,"-")&&(e=rt(e)),u.style[e]!==i){if(f||o(r,"undefined"))return c(),"pfx"==t?e:!0;try{u.style[e]=r}catch(w){}if(u.style[e]!=p)return c(),"pfx"==t?e:!0}return c(),!1}function b(n,t,i,r,u){var f=n.charAt(0).toUpperCase()+n.slice(1),e=(n+" "+v.join(f+" ")+f).split(" ");return o(t,"string")||o(t,"undefined")?w(e,t,r,u):(e=(n+" "+g.join(f+" ")+f).split(" "),ft(e,t,i))}function a(n,t,r){return b(n,i,i,t,r)}var k=[],h=[],f={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(n,t){var i=this;setTimeout(function(){t(i[n])},0)},addTest:function(n,t,i){h.push({name:n,fn:t,options:i})},addAsyncTest:function(n){h.push({name:null,fn:n})}},r=function(){},v,y,u,l;r.prototype=f;r=new r;r.addTest("history",function(){var t=navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")||"file:"===location.protocol?n.history&&"pushState"in n.history:!1});var e=t.documentElement,c="svg"===e.nodeName.toLowerCase(),d="Moz O ms Webkit",g=f._config.usePrefixes?d.toLowerCase().split(" "):[];for(f._domPrefixes=g,v=f._config.usePrefixes?d.split(" "):[],f._cssomPrefixes=v,y={elem:s("modernizr")},r._q.push(function(){delete y.elem}),u={style:y.elem.style},r._q.unshift(function(){delete u.style}),f.testProp=function(n,t,r){return w([n],i,t,r)},f.testAllProps=b,f.testAllProps=a,r.addTest("csstransitions",a("transition","all",!0)),r.addTest("flexbox",a("flexBasis","1px",!0)),nt(),tt(k),delete f.addTest,delete f.addAsyncTest,l=0;l<r._q.length;l++)r._q[l]();n.Modernizr=r}(window,document);gx.spa=function(n){var o="gx-content-placeholder",s="X-SPA-REQUEST",h="X-SPA-MP",c="X-GXOBJECT",b="X-SPA-REDIRECT-URL",k="X-SPA-RETURN",d="X-SPA-RETURN-MD",g=800,nt=530,l="entering",a="leaving",v="enter-fx-duration",y="leave-fx-duration",tt=new RegExp("<head[^>]*>([\\s\\S]*?)<\/head>","i"),it=new RegExp("(<body[^>]*>[\\s\\S]*?<\/body>)","i"),rt=new RegExp("<title[^>]*>([\\s\\S]*?)<\/title>","i"),p=/#.*/,ut=/#/,t=!1,i=!1,ft=window.location.href,w=!0,r={},u,f,e;return"state"in window.history&&(w=!1),gx.wpo(function(){gx.pO.fullAjax&&(gx.cache.exceptionsRegEx=/messages\..+\.js/)},this),e=function(){t||i||this.notify("onnavigatecomplete")},{timeout:-1,setTimeout:function(n){this.timeout=n},isSameApp:function(n,t){var i=n.port===t.port;return i=i||n.port===""&&n.protocol==="http:"&&t.port==="80",i=i||n.port===""&&n.protocol==="https:"&&t.port==="443",n.protocol===t.protocol&&n.hostname===t.hostname&&i},handleClick:function(t){var i=this.getTarget(t),f,o,u,e;if(i&&i.tagName.toUpperCase()==="A"&&i.getAttribute("href")!==null&&i.getAttribute("href")!==undefined&&(!i.target||i.target!="_blank"&&(i.target!="_parent"||window.parent==window)&&(i.target!="_top"||window.top==window)&&(i.target.substr(0,1)=="_"||window.name==i.target))&&!(t.which>1)&&!t.metaKey&&!t.ctrlKey&&(u=this.parseUrl(i.href),this.isSameApp(location,u))&&(e=u.pathname.charAt(0)=="/"?u.pathname:"/"+u.pathname,location.pathname.substring(0,location.pathname.lastIndexOf("/"))===e.substring(0,e.lastIndexOf("/")))&&(!(u.href.search(ut)>=0)||u.href.replace(p,"")!==location.href.replace(p,""))&&i.getAttribute("href")!==""&&i.href.indexOf("javascript:")!==0){if(this.ignoreClick){this.ignoreClick=!1;return}o=n(i);for(f in r)if(r.hasOwnProperty(f)&&o.is(f))return;this.navigate({url:i.href,push:!0,scrollTo:!0,direction:"forward"});t.preventDefault()}},redirect:function(n,t){delete gx.referrer;t=t===undefined||t;var i=this.parseUrl(n),r=i.pathname.charAt(0)=="/"?i.pathname:"/"+i.pathname;this.isSameApp(location,i)?location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==r.substring(0,r.lastIndexOf("/"))?window.location=n:(gx.referrer=location.href,this.navigate({url:n,push:t,scrollTo:!0,direction:"forward"})):window.location=n},setLocation:function(n){this.setStopNavigating(n);window.location=n},canNavigate:function(){return!t&&!i},isNavigating:function(){return!this.canNavigate()},isNavigatingRaw:function(){return t},setStopNavigating:function(n){t=!1;this.notify("onnavigate",[n])},navigate:function(n){var u,i,r=n.url,f=!1;if(!this.canNavigate()){this.setLocation(r);return}t=!0;this.notify("onbeforenavigate",[r]);i=this.request;i&&i.readyState<4&&(i.onreadystatechange=gx.emptyFn,gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+i.readyState),i.abort());i=gx.http.doCall({method:"GET",url:r,handler:function(t,e,o){var s=o.getResponseHeader(b),h=o.getResponseHeader(c);if(!f){if(u&&clearTimeout(u),o.status==nt){this.setLocation(r);return}if(s){this.setStopNavigating(s);setTimeout(gx.spa.redirect.closure(gx.spa,[s]),100);return}n.push&&i.readyState>0&&h&&(this.updateState(),this.state=this.createState(n),window.history.pushState(null,"",i.responseURL||r));this.processResponse.call(this,e,o,n)}},beforeSend:function(n){this.notify("onbeforesend",[this.createEvent(n,r),s,h]);this.timeout>0&&(u=setTimeout(this.timeoutHandler.closure(this,[n,r]),this.timeout));n.setRequestHeader(s,"1")},offline:function(){u&&clearTimeout(u);f=!0;t=!1},error:function(n){var t=this.createEvent(n,r);t.cancel=!0;this.notify("onerror",[t]);t.cancel&&this.setLocation(r)},ajaxHeader:!1,avoidCache:!1,handleAllStatusCodes:!0,obj:this});this.request=i;this.notify("onnavigatestart",[r])},processResponse:function(n,t,r){var u;try{u=r.url;var ot=this.parseUrl(u),rt=ot.hash,b=r.direction,ut=t.status,w=t.getResponseHeader(c),ft=t.getResponseHeader(k),st=t.getResponseHeader(d),et=this.createEvent(t,u),nt=gx.pO.MasterPage,o=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",s=t.getResponseHeader(h)||"",f=!(o===""||o.toLowerCase()!=s.toLowerCase()),tt=this.getContentPlaceholder();if(ft!==null){gx.fn.closeWindowServerScript(ft,st,!0);return}if(ut===500){window.history.pushState(null,"",u);gx.dom.writeError(t.responseText,gx.getMessage("GXM_runtimeappsrv"),ut);return}if(!w){this.setLocation(u);return}this.notify("onbeforeprocessresponse",[et,n,w,o,s,f]);var e=this.extractContents(t,!f),it=f?tt.firstChild:document.body,p=e.body;if(!e.body){this.setLocation(u);return}this.state=this.createState(r);r.push&&window.history.replaceState(this.state,"",t.responseURL||u);e.title&&(document.title=e.title);this.notify("onbeforecontentreplace",[t,u,e]);gx.cache.removeRemoteFile(gx.getThemeElement().href);gx.dom.replaceWithFx(it,p,{domRemove:!1,domAdd:f,enteringClass:b=="forward"?l:a,leavingClass:b=="forward"?a:l,enterDurationClass:b=="forward"?v:y,leaveDurationClass:b=="forward"?y:v,transitionTimeout:g,transitionEndCallback:function(){return p=this.replaceContentCallback(t,u,rt,n,tt,e,it,p,r,w,nt,o,s,f),f||gx.html.processCode(e.head.innerHTML+e.body.innerHTML,!1,this.processCodeCallback.closure(this,[t,u,rt,n,tt,e,it,p,r,w,nt,o,s,f]),null,null,!1,!0),i=!1,this.notify("ontransitionend",[et,nt,o,s,f]),this.recoverScrollPosition(r),p}.closure(this),beforeTransitionStart:function(h){return i=!0,f?(gx.html.processCode(n,!1,function(){h&&h();this.processCodeCallback(t,u,rt,n,tt,e,it,p,r,w,nt,o,s,f)}.closure(this),null,null,!1),!0):void 0}.closure(this)})}catch(ht){gx.dbg.logEx(ht,"gxspa.js","processResponse");this.setLocation(u)}},replaceContentCallback:function(t,i,r,u,f,e,o,s,h,c,l,a,v,y){if(y)o.parentNode&&(this.dettachContent(o),o.parentNode.removeChild(o));else{if(gx.util.browser.isWebkit()||gx.util.browser.isFirefox()){this.dettachContent(document.body);n(document.body).remove();var p=document.createElement("body"),w=n(s).prop("attributes");n.each(w,function(){n(p).attr(this.name,this.value)});document.documentElement.appendChild(p);p.innerHTML=s.innerHTML;s=p}else document.body=s,s=document.body;document.head=e.head}return s},processCodeCallback:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){var b=this.createEvent(n,t),y,p,w;try{this.notify("oncontentreplace",[b,r,f,h,c,l,a,v])}catch(k){gx.dbg.logEx(k,"gxspa.js","processCodeCallback");this.setLocation(t)}y=!0;s.scrollTo&&(window.scrollTo(0,0),y=!1);s.push&&window._gaq&&_gaq.push(["_trackPageview"]);s.push&&window.ga&&window.ga("send","pageview",location.pathname);i!==""&&(p=this.parseUrl(t),p.hash=i,window.history.replaceState(this.state,"",p.href),w=gx.dom.el(p.hash),w&&(w.scrollIntoView(!0),y=!1));this.setStopNavigating(t);y&&this.recoverScrollPosition(s)},timeoutHandler:function(n,t){var i=this.createEvent(n,t);i.cancel=!0;this.notify("ontimeout",[i]);i.cancel&&(n.abort(),gx.dbg.logMsg("Request cancelled - timeout expired: "+n.readyState),this.setLocation(t))},getContentPlaceholder:function(){return gx.dom.byClass(o)[0]},extractContents:function(t,i){var h=document.createElement("div"),f={},e,c,l,r,s,u;if(i)r=document.createElement("iframe"),r.src="about:blank",r.style.display="none",document.body.appendChild(r),u=t.responseText.match(tt),u.length>1&&(c=u[1]),u=t.responseText.match(it),u.length>0&&(l=u[0]),u=t.responseText.match(rt),u.length>1&&(f.title=u[1]),r.contentDocument&&r.contentDocument.body==null&&r.contentDocument.write("<body><\/body>"),r.contentDocument.body.outerHTML=l,s=r.contentDocument.head,s.innerHTML=c,n("head script").each(function(t,i){n(s).find("script").each(function(t,r){i.getAttribute("data-gx-external-script")===null?i.src==r.src&&s.removeChild(r):n(i).remove()})}),f.body=r.contentDocument.body,f.head=s;else{if(gx.html.setInnerHtml(h,t.responseText,!1,!1,!1),e=gx.dom.byClass(o,"div",h),e.length===0)return f;f.body=e[0].firstChild;e=gx.dom.byTag("title",h);e.length>0&&(f.title=e[0].innerText||e[0].textContent)}return f},handlePopState:function(n){var t=n.state,i=this.getContentPlaceholder(),r;if(t&&t.source=="gx-spa"){if(w&&ft==t.url)return;if(this.state.url===t.url)return;r=this.state.id<t.id?"forward":"back";this.navigate({id:t.id,url:t.url,push:!1,scrollPosition:t.scrollPosition,direction:r});i&&void i.offsetHeight}gx.popup.ispopup()&&gx.fn.cancelWindow()},parseUrl:function(n){var t=document.createElement("a");return t.href=n,t},createEvent:function(n,t){return{req:n,url:t,cancel:!1}},addIgnoredSelector:function(n){r[n]=!0},removeIgnoredSelector:function(n){delete r[n]},recoverScrollPosition:function(n){var t=n.scrollPosition;this.canNavigate()&&!n.scrollTo&&t&&window.scrollTo(t.x,t.y)},dettachContent:function(t){var i=gx.dom.getActiveElement();i&&n.contains(t,i)&&gx.dom.purgeElement(i)},updateState:function(){var n=this.state;n.url=location.href;n.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(n,"",n.url)},createState:function(n){return n=n||{},{id:n.id||(new Date).getTime(),source:"gx-spa",url:n.url}},getTarget:function(n){return n.target&&n.target.tagName=="A"?n.target:gx.dom.findParentByTagName(n.target,"A")},applyConfig:function(n){var t,i;if(n&&n.listeners)for(t in n.listeners)i=n.listeners[t],typeof i=="function"&&this.addObserver(t,n.listeners.scope||this,i)},setBodyClass:function(){var t="Form",n=document.body;n.className&&(t=n.className.split(" ")[0]);gx.dom.hasClass(n,t+"-fx")||gx.dom.addClass(n,t+"-fx")},isSupported:function(){return gx.util.browser.isIE()&&!gx.util.browser.isEdge()?!1:gx.pO&&gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(n){this.isSupported()&&!this.started&&(this.applyConfig(n),u=this.handleClick.closure(this),f=this.handlePopState.closure(this),document.addEventListener("click",u,!1),window.addEventListener("popstate",f,!1),this.state=this.createState({url:location.href}),window.history.replaceState(this.state,document.title),this.setBodyClass(),this.started=!0,this.addObserver("onnavigate",this,e),this.addObserver("ontransitionend",this,e))},stop:function(){this.started&&(document.removeEventListener("click",u,!1),window.removeEventListener("popstate",f,!1),this.started=!1)}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);gx.core={};gx.core.analytics=function(){var n=typeof ga!="undefined";return{supported:function(){return typeof ga=="undefined"?(console.log("Google Analytics - GA not enabled on this webpage"),!1):!0},trackView:function(n){this.supported()&&window.ga("send","pageview",n)},trackEvent:function(n,t,i,r){this.supported()&&window.ga("send",{hitType:"event",eventCategory:n,eventAction:t,eventLabel:i,eventValue:r})},trackPurchase:function(n){var t=function(n,t,i,r,u){return r&&gx.lang.emptyObject(i)&&u==null?(console.log("Google Analytics ECommerce - Warning: Property value must be assigned: ",t),!1):(gx.lang.emptyObject(i)&&r&&(i=u),!gx.lang.emptyObject(i))?(n[t]=i,!0):!1},r,f,u,i;if(this.supported()&&(window.ga("require","ecommerce"),r={},f=0,t(r,"id",n.TransactionId,!0))){for(t(r,"affiliation",n.Affiliation),t(r,"revenue",n.Revenue),t(r,"shipping",n.Shipping),t(r,"tax",n.Tax),t(r,"currency",n.CurrencyCode),window.ga("ecommerce:addTransaction",r),f=0;f<n.Items.length;f++)u=n.Items[f],i={},t(i,"id",n.TransactionId,!0)&&t(i,"name",u.Name,!0)&&(t(i,"sku",u.Id),t(i,"category",u.Category),t(i,"price",u.Price),t(i,"quantity",u.Quantity),t(i,"currency",u.CurrencyCode),window.ga("ecommerce:addItem",i));window.ga("ecommerce:send")}},setUserId:function(n){this.supported()&&window.ga("set","userId",n)}}}(gx.$);gx.core.audio=function(n){var u,f=[],e=[],i=3,t=2,r=1;return{supported:function(){return!(gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=8)},getSoundVar:function(n){return n==t?e:f[n]},playBackground:function(n){this.play(n,r)},play:function(n,f){u=!0;f!=t&&this.stop(f);f==i&&(this.stop(t),this.pauseSound(this.getSoundVar(r)));f==t&&this.stop(i);this.playSound(f,n).always(function(){f==i&&this.resumeSound(this.getSoundVar(r))}.closure(this,[]))},playSound:function(i,r){var o=n.Deferred(),u;return this.supported()?(u=new Howl({src:[r],html5:!0,onplay:function(){},onend:function(){o.resolve()},onstop:function(){o.resolve()},onpause:function(){o.resolve()}}),u.play()):(u=n("<bgsound/>").attr({id:"gxIE7AudioSound_"+i,loop:"0",src:r}),n("body").append(u)),f[i]=u,i==t&&e.push(u),o.promise()},stop:function(n){if(!n){this.stopSound(this.getSoundVar(i));this.stopSound(this.getSoundVar(t));this.stopSound(this.getSoundVar(r));return}var u=this.getSoundVar(n);this.stopSound(u);f[n]=null},stopSound:function(t){var i=this.supported();t=gx.lang.isArray(t)?t:[t];n.map(t,function(r,u){r=t[u];!i&&r&&(n(r).attr("src",""),n(r).remove(),r=undefined);r&&r.stop&&r.stop()})},pauseSound:function(n){this.supported()&&n&&n.pause&&n.pause()},resumeSound:function(n){this.supported()&&n&&n.play&&n.play()},isPlaying:function(n){if(this.supported())return n?this.isPlaying_impl(this.getSoundVar(n)):this.isPlaying_impl(this.getSoundVar(i))||this.isPlaying_impl(this.getSoundVar(t))||this.isPlaying_impl(this.getSoundVar(r))},isPlaying_impl:function(n){var i,r=!1,t;for(n=gx.lang.isArray(n)?n:[n],t=0;t<n.length;t++)i=n[t],i&&(r=r||i.playing())},_deinit:function(){u&&(this.stop(i),this.stop(t));u=!1}}}(gx.$);gx.core.pwa=function(){function t(){n&&n.prompt()}var n;return window.addEventListener("beforeinstallprompt",function(t){n=t;n.userChoice.then(function(t){gx.fx.obs.notify("gx.pwa.onpromptchoice",[t.outcome]);n=null});gx.fx.obs.notify("gx.pwa.onbeforeinstallprompt")}),{showPrompt:t}}(gx.$);gx.core.ds=function(){function n(){return document.documentElement}return{setOption:function(t,i){n().setAttribute("gx-data-"+t,i)},clearOption:function(t){n().removeAttribute("gx-data-"+t)}}}(gx.$),function(n){var u="gx-label",a="control-label",v="Label",f="form-control",e="navbar-text",g=/(gx-form-item|col-(?:xs|sm|md|lg)-\d{1,2})/g,t=function(n){gx.plugdesign.registerTemplate(new gx.plugdesign.Template(n))},y=function(t,i){var r=n(t).parent().find("span"),u;gx.lang.gxBoolean(i)?r.parent("p").hide():(r.removeClass(f),u=r.parent("p"),u.length===0?gx.plugdesign.applyTemplateOnElement("readonly-atts-vars",r[0],{checkInclusion:!0}):u.show())},i=function(t,i){var r=n(".gx-form-group[data-gx-for='"+gx.dom.id(t)+"']");r.length===0&&(r=n(t).parents("div.gx-attribute").first());gx.lang.gxBoolean(i)?r.show():r.hide()},p=function(n,t){var i,e,o,r,f;(t=t.trim(),i=gx.html.getFieldLabel(n),e=t.split(" ").join(v+" ")+(t?v:""),i)&&(f=i.className.match(g),o=f?f.join(" ")||"":"",r=[u,o,e,a].join(" "),i.className!==r&&(i.className=r))},w,o,h,c,r,l;t({name:"labels",selector:"div.gx-form-group:has(label."+u+":not([data-gx-sr-only]))",excluded:"div:has(.gx_usercontrol)",setContext:function(t,i){var r=n(i).find("label."+u).addClass(a);return t.labelEl=r[0],t},listeners:{control:function(t){return n(t.labelEl).attr("for")},after:{Class:p}}});t({name:"atts-vars",selector:".gx-attribute > input, .gx-attribute > select, .gx-attribute > textarea, .gx-attribute > img:first-child",initialize:function(t){var i=n("#"+t.id)[0];i&&p(i,i.className.replace(f,""))},listeners:{control:function(n){return n.id},after:{Enabled:y,Visible:i}}});w=function(t,r){var u=n(t).parent("p");gx.lang.gxBoolean(r)?u.show():u.hide();i(t,r)};t({name:"readonly-atts-vars",selector:'.gx-attribute span[class^="Readonly"]:not(:has(input[type="radio"], input[type="checkbox"]))',template:'<p class="form-control-static">{{{outerHTML}}}<\/p>',outerHTML:!0,listeners:{control:function(n){return n.id},after:{Visible:w}}});var nt=function(t,r){var u=n(t).parent().closest(".gx-checkbox-wrapper");gx.lang.gxBoolean(r)?(u.show(),u.children().show()):u.hide();i(t,r)},tt=function(t,r){gx.lang.gxBoolean(r)&&gx.fn.isVisible(t,0)?n(t).next().show():n(t).next().hide();i(t,r)},it=function(t,i){gx.lang.gxBoolean(i)?n(t).next().children().first().prop("disabled",!1):n(t).next().children().first().prop("disabled",!0)},rt=function(t,i){var r=n("button",n(t).next());r.attr("title",gx.getMessage(gx.lang.gxBoolean(i)?"GXM_revealpassword":"GXM_hidepassword")).children().first().toggleClass("glyphicon-eye-open").toggleClass("glyphicon-eye-close")};t({name:"password-atts-vars",selector:'.gx-attribute input[type="password"][data-gx-password-reveal]',template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn gx-pwd-reveal-btn"><button class="btn btn-default" type="button" title="'+gx.getMessage("GXM_revealpassword")+'"><span class="glyphicon glyphicon-eye-open"><\/span><\/button><\/span><\/div>',setContext:function(n,t){return n.inputEl=t,n},initialize:function(t){var r=n("#"+t.id),i=n("#"+t.id)[0];r.next().on("click",function(){gx.fn.setCtrlProperty(i.id,"Ispassword",i.type!="password")})},listeners:{control:function(n){return n.id},after:{Visible:tt,Enabled:it,Ispassword:rt}}});t({name:"checkbox",selector:'.gx-attribute > input[type="checkbox"], .gx-attribute span > input[type="checkbox"]',setContext:function(t,i){return t.id=n(i)[0].id,t},initialize:function(t){var i=n("#"+t.id),r=i.get(0),u=n(r).closest("span");u.addClass("gx-checkbox-wrapper")},listeners:{control:function(n){return n.id},after:{Visible:nt}}});t({name:"usercontrol",onDemandInvoke:!0,selector:".gx_usercontrol",setContext:function(t,i){return t.id=n(i)[0].id,t},listeners:{control:function(n){return n.id},after:{Visible:i}}});o=function(t,r,u){t.visible=r;var f=n(t).parent().find(".input-group-btn");gx.lang.gxBoolean(r)&&gx.fn.isVisible(t,0)?(this.enabled||this.enabled===undefined)&&f.show():f.hide();u||i(t,r)};t({name:"datepicker",selector:".dp_container:has(img):has(input)",template:'<div class="dp_container {{alignClass}}" id="{{datePickerCt.id}}"><div class="input-group">{{$inputEl$}}{{$spaneEl$}}<span class="input-group-btn"><a class="btn btn-default">{{$imgEl$}}<\/a><\/span><\/div><\/div>',outerHTML:!0,setContext:function(t,i){var u=n(i),e=u.attr("data-align"),f,r;return t.datePickerCt=i,t.inputEl=u.find("input")[0],t.imgEl=u.find("img")[0],t.inputElId=t.inputEl.id,t.alignClass=e?"pull-"+e:"",t.nativeEl=u.find("#"+t.inputEl.id+"-picker")[0],f=n("#span_"+t.inputEl.id),f.length>0&&(r=f.parent("p")[0],t.spaneEl=r?r:f,r&&n(r).remove()),t},initialize:function(t){var r=n("#"+t.inputElId),u=r.parent().closest(".dp_container"),i,f;t.nativeEl&&u.append(t.nativeEl);u.find("a").on("click",function(n){try{if(n.target.nodeName!="IMG")return u.find("img")[0].click(),!1}catch(t){return!1}});i=gx.fn.isVisible(r[0],0);f=n("#span_"+t.inputEl.id);f.length>0&&(i=i||gx.fn.isVisible(f[0],0));o.call(this,r[0],i,!0)},listeners:{control:function(n){return n.inputEl.id},after:{Enabled:function(t,i){var r,u;t.enabled=gx.lang.gxBoolean(i);r=n(t).parent().find(".input-group-btn");gx.lang.gxBoolean(i)?(u=this.visible||gx.fn.isVisible(t),(u||u===undefined)&&r.show()):r.hide();y(t,i)},Visible:o}}});var s=function(t){return n(t).parent().closest("span")},b=function(n){n.find(":checked").parent("label").button("toggle")},ut=function(n){b(s(n))},k=function(n,t){var i=n.find("label");t?(i.prop("disabled",!1),i.removeClass("disabled"),n.find("input, label").css("pointer-events","")):(i.prop("disabled",!0),n.find("input, label").css("pointer-events","none"),i.addClass("disabled"))},ft=function(n,t){k(s(n),t)},d=function(t){return n(t).prop("initialized")};t({name:"radio-button",selector:".gx-radio-button:not(.gx-tpl-ignore) label",setContext:function(t,i){var r=s(i),u,f;return t.name=n(i).children("input").attr("name"),t.spanEl=r,d(r)||(r.children("label").addClass("gx-radio-label btn btn-default"),u=n(i).children().prop("disabled"),b(r),k(r,!(u===!0||u==="disabled")),r.find("script").remove(),r.attr("data-toggle","buttons"),f=r.hasClass("gx-radio-button-vertical")?"-vertical":"",r.addClass("btn-group"+f).removeClass("gx-radio-button-vertical").css("vertical-align","baseline")),t},initialize:function(t){if(!d(t.spanEl)){t.spanEl.prop("initialized",!0);t.spanEl.children("label").on("click",function(){var t=n(this).children("input");t.trigger("focus");t.attr("checked","");t.prop("checked",!0);gx.evt.onchange(t.get(0))})}},listeners:{control:function(n){return n.name},after:{Visible:i,Enabled:ft,Value:ut}}});t({name:"prompt",selector:function(t){return n('a:has(img[id*="PROMPT"])',t).prevUntil("","input, select")},template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn">{{$promptEl$}}<\/span><\/div>',setContext:function(t,i){return t.inputEl=i,t.promptEl=n(i).nextUntil("",'a:has(img[id*="PROMPT"])').addClass("btn btn-default"),t},listeners:{control:function(n){return n.inputEl.id},before:{Visible:function(t,i){var r=n(t).parent();gx.lang.gxBoolean(i)?r.show():r.hide()},Enabled:function(t,i){var r=n(t).parent().find(".input-group-btn");gx.lang.gxBoolean(i)?r.show():r.hide()}}}});t({name:"prompt-trigger",selector:'img[id*="PROMPT"].gx-prompt',setContext:function(n,t){return n.imgEl=t,n},listeners:{control:function(n){return n.imgEl.id},before:{Enabled:function(t,i){var r=n(t).closest(".input-group-btn");gx.lang.gxBoolean(i)?r.show():r.hide()}}}});h=function(t,i){var r=n(t).parent();r=r.add(r.find("img"));gx.lang.gxBoolean(i)?r.show():r.hide()};t({name:"geolocation",selector:"input + img.GeoLocOption",template:'<div class="input-group"><div id="{{inputEl.id}}_hook"><\/div><span class="input-group-btn"><a class="btn btn-default"><div id="{{inputEl.id}}_trigger_hook"><\/div><\/a><\/span><\/div>',setContext:function(t,i){return t.inputEl=n(i).prev()[0],t.triggerEl=n(i)[0],t},initialize:function(t){gx.evt.attach(t.el,"click",function(){gx.geolocation.getMyPosition(this)});n("#"+t.inputEl.id+"_hook").replaceWith(t.inputEl);n("#"+t.inputEl.id+"_trigger_hook").replaceWith(t.triggerEl);h.call(this,t.inputEl,gx.fn.isVisible(t.inputEl,0))},listeners:{control:function(n){return n.inputEl.id},before:{Visible:h,Enabled:function(t,i){var r=n(t).parent().find(".input-group-btn");gx.lang.gxBoolean(i)?r.show():r.hide()}}}});t({name:"multimedia-upload",selector:".gx-multimedia-upload .fields-ct",template:'<div class="row"><div class="col-sm-4"><div class="row"><div class="col-sm-12">{{$fileOptionLbl$}}<\/div><div class="col-sm-12">{{$uriOptionLbl$}}<\/div><\/div><\/div><div class="col-sm-8">{{$uriField$}}{{$fileField$}}<\/div><\/div><div class="row"><div class="col-sm-12">{{$button$}}<\/div><\/div>',applyTo:"inner",setContext:function(t,i){var u=n(i).parent().closest(".gx-multimedia-upload")[0],r=gx.html.multimediaUpload.getElements(u);return r.fileOptionLbl=r.fileOption.parentNode,r.uriOptionLbl=r.uriOption.parentNode,gx.lang.apply(t,r),t.container=u,t},initialize:function(t){n(t.button).addClass("btn btn-default Button");n(t.uriField).addClass(f)},listeners:{control:function(n){return gx.html.multimediaUpload.CtrlId(n.container.id)},after:{Visible:function(n,t){i(n,t,7)}}}});t({name:"navbar",selector:".gx-navbar",setContext:function(t,i){return t.toggleBtn=n(i).find(".gx-navbar-toggle"),t.navBarInner=n(i).find(".gx-navbar-inner"),t},initialize:function(n){n.toggleBtn.attr("data-target","#"+n.navBarInner.attr("id"))}});gx.spa.addObserver("onnavigatecomplete",window,function(){var t=n(".navbar-collapse");t.collapse&&t.collapse("hide")});c=function(n){n.anchor.get(0).href==location.href?n.anchor.parent().addClass("active"):n.anchor.parent().removeClass("active")};t({name:"navbar-textblock-link",selector:"a.gx-navbar-textblock, .gx-navbar-textblock:has(a)",template:"{{$anchor$}}",setContext:function(t,i){var f=["id","class","style",gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,"title"],u=n(i),r;for(t.anchor=u.children("a"),t.anchor.length===0&&u.is("a")&&(t.anchor=u),r=0;r<f.length;r++)t.anchor.attr(f[r],u.attr(f[r]));return t},reDraw:c,initialize:c,listeners:{control:function(n){return n.id},before:{Caption:function(t,i){return n(t).text(i),!0},Link:function(t,i){return n(t).attr("href",i),!0}}}});t({name:"navbar-textblock-text",selector:"span.gx-navbar-textblock:not(:has(a))",initialize:function(t){n(t.el).addClass(e)},listeners:{control:function(n){return n.id},after:{Link:function(t,i){var r=n(t);i&&r.hasClass(e)&&(r.removeClass(e),gx.plugdesign.applyTemplateOnElement("navbar-textblock-link",t))}}}});t({name:"errorviewer",selector:".gx_ev div",initialize:function(t){var r=n(t.el),i=r.parent(".gx_ev"),u=i.css("position"),f=u==="fixed"||u==="absolute";f&&(i[0].effect&&i[0].effect.end(),r.addClass("alert alert-dismissible fade in").attr("style","").attr("role","alert").prepend(n('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button>')))}});t({name:"textarea-auto-expand",selector:".gx-attribute > textarea[data-gx-text-maxlines]",setContext:function(t,i){return t.el=n(i),t},initialize:function(t){var i=t.el,r=i[0],e=n(window),o=parseInt(i.attr("rows"),10),s=parseInt(i.attr("data-gx-text-maxlines"),10),u,f;i.css("overflow-x","hidden");u=function(n,t,i){return t=t+i,n.attr("rows",t),t};f=function(){for(var r=e.scrollTop(),t=parseInt(n(this).attr("rows"),10),i=n(this);t>o&&this.scrollHeight>=this.clientHeight;)t=u(i,t,-1);while(n(this).val()!==""&&t<s&&this.scrollHeight>this.clientHeight)t=u(i,t,1);e.scrollTop(r)};gx.evt.attach(r,["input","keyup"],f.closure(r,[]));gx.evt.on_ready(r,f.closure(r,[]))}});r=function(n){var t=n.get(0),i=gx.dom.getComputedStyle(t),r=i.getPropertyValue("--gx-image-scaling");return r.trim()==="on"};l=function(n){var t=n;r(n)&&(n.parent("a").length>0&&(t=n.parent("a")),t.parent("div[data-align-inner]").parent().parent().attr("data-align-image",""))};t({name:"image",selector:"img[data-gx-image]",setContext:function(t,i){return t.el=n(i),t},initialize:function(n){var t=n.el,i=t.get(0).currentSrc||t.attr("src");i&&r(t)&&t.css("background-image","url("+i+")");l(t)},listeners:{control:function(n){return n.id},after:{Bitmap:function(t,i){var u=n(t);i&&r(u)?u.css("background-image","url("+i+")"):u.css("background-image","none")},Class:function(t){var i=n(t);t.src&&r(i)?i.css("background-image","url("+t.src+")"):i.css("background-image","none");l(i)}}}})}(gx.$);gx.ui=function(n){return{grid:function(){this.gridContainer=null;this.firstTime=!0;this.autoRefreshing=!1;this.loadingCollection=!1;this.properties=[];this.setContainerDelayed=function(n){this.gridContainer=n;this.ContainerName=gx.dom.id(n);this.DesignContainerName=this.ContainerName;this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(n,t,i,r){var f,o,e;for(this.clearFunctions(),this.refreshDynProperties(),this.properties=[],f=0;f<this.rows.length;f++)for(this.properties[f]=[],o=this.rows[f],e=0;e<this.columns.length;e++){var s=this.columns[e],h=o.gxProps[s.index],u=s.gxControl;u.grid=this.ownerGrid;u.row=o;u.gridId=this.gxId;u.gridRow=o.gxId;i?u.value=h[0]:u.setProperties.apply(u,h);this.setRenderProperties(o.gxRenderProps[e],u);!u.enabled&&u.type<=gx.html.controls.types.checkBox&&(u.cssClass=gx.fn.prefixROClass(u.cssClass));this.properties[f][e]=gx.lang.clone(u);this.addC2V(s,this.properties[f][e])}this.firstTime=n;this.autoRefreshing=t?!0:!1;this.loadingCollection=i?!0:!1;this.show&&(this.setC2ShowFunction(function(n){n.show();r()}),this.autoRefreshing&&(this.show(),r()));this.autoRefreshing=!1};this.addC2V=function(n,t){this.addC2VFunction(function(i){if(n.gxAttName!==""){var r=i.ParentObject.getValidStruct(n.gxId);r&&(i.ParentObject[r.gxvar]=t.value);gx.fn.setHidden(t.id,t.value)}})};this.setRenderProperties=function(n,t){if(n)for(var i in n)t[i]=n[i]};this.selectRow=function(n){var t=this.rows[n];t&&(this.instanciateSelectionVars(t.gxId),this.instanciateSelectedRow(t))};this.getEventRow=function(){return gx.lang.emptyObject(this.GridRow)?"0001":this.GridRow};this.executeEvent=function(n,t){var i,r,u,f,e;n<this.columns.length&&t<this.rows.length&&(i=this.properties[t][n],r=gx.html.controls.eventJSCode(i.jsScrCode,i.eventName,i.jsDynCode,i.grid,i.row),r!==""?(gx.lang.emptyObject(i.usrOnclick)||(r="if("+i.usrOnclick+") { "+r+" }"),u=new Function(r),typeof u=="function"&&u()):i.clickEvent&&(f=this.parentGxObject,e=i.row.gxId,this.ownerGrid.instanciateRow(e),f[i.clickEvent].call(f,e)))};this.executeIsValid=function(n,t){if(n<this.columns.length&&t<this.rows.length){var i=this.parentGxObject,r=this.properties[t][n],u=r.vStruct||i.GXValidFnc[r.column.gxId],f=r.row.gxId;u&&u.isvalid&&(this.ownerGrid.instanciateRow(f),i[u.isvalid].call(i))}};this.addEventHandler=function(n,t){this[n]=function(i){var r=this.isServerEvent(n),u;r&&i&&gx.fx.obs.addObserver("gx.onafterevent",this,i,{single:!0});u=gx.fn.currentGridRow(this.GridId);this.eventHandler(this.GridId,u,t);!r&&i&&i.call(this)}.closure(this)};var t={};this.requestSuggest=function(i,r,u){var o=n.Deferred();if(i<this.columns.length&&r<this.rows.length){var c=this.parentGxObject,s=this.properties[r][i],f=s.vStruct||c.GXValidFnc[s.column.gxId],h=s.row.gxId,e=t[h+"_"+f.id];e||f&&f.gxsgprm&&(this.ownerGrid.instanciateRow(h),e=new gx.fx.suggestProvider(c,f.gxsgprm[1],null,f.gxsgprm[0]),t[h+"_"+f.id]=e);e?(gx.fx.updateSuggestParms(f.gxsgprm[2]),e.requestSuggestions([],function(){o.resolve(e.values)},function(){o.reject()},u)):o.reject()}else o.reject();return o.promise()};this.executeValidate=function(n,t){if(n<this.columns.length&&t<this.rows.length){var u=this.parentGxObject,i=this.properties[t][n],r=i.vStruct||u.GXValidFnc[i.column.gxId],f=i.row.gxId;r&&r.fnc&&(this.ownerGrid.instanciateRow(f),r.fnc.call(u))}}}}}(gx.$);gx.ui.controls=function(n){var t=function(){var n=["render","selectTabPageByIndex","hideTabPageByIndex","showTabPageByIndex","getTabPageIndexByControlName","getTabPageControlNameByIndex"],i=function(){for(var t=0;t<n.length;t++)this[n[t]]||console.error("Missing required method",n[t],this)},t=function(n,t,i){this.selectTabPageByIndex(n);this.tabPageSelected(n,t,i)};return{show:function(){var n=this.ActivePage;i.call(this);this.IsPostBack?this.update&&this.update():(this.beforeRender&&this.beforeRender(),this.render(),this.ActivePageControlName&&(n=parseInt(this.getTabPageIndexByControlName(this.ActivePageControlName),10)),n||(n=1),t.call(this,n,!0,!1),this.HistoryManagement&&HistoryManager.Initialize(this),this.afterRender&&this.afterRender());this.allways&&this.allways()},destroy:function(){HistoryManager.RemoveListener(this)},tabPageSelected:function(n,t,i){this.ActivePage!==n&&(this.ActivePage=n||1,this.ActivePageControlName=this.getTabPageControlNameByIndex(n)||"",this.HistoryManagement&&i!==!1&&HistoryManager.AddHistoryPoint(this.ActivePageControlName,!0,null,!1),!t&&this.TabChanged&&this.TabChanged())},getId:function(){return(this.ParentObject?this.ParentObject.CmpContext||"-"+this.ParentObject.ServerClass||"":"")+"-"+this.ControlName},urlListener:function(){var n;gx.grid.drawAtServer||(n=document.location.hash.length>0?document.location.hash.substr(1):"",t.call(this,n?this.getTabPageIndexByControlName(n):1,!1,!1))},SelectTab:function(n){t.call(this,n,!1)},HideTab:function(n){this.hideTabPageByIndex(n)},ShowTab:function(n){this.showTabPageByIndex(n)}}}();return{datePicker:function(t){this.$input=n("#"+t.inputId);this.$trigger=n("#"+t.triggerId);this.showInLine=t.inline;this.inputType=t.inputType;this.format=t.format;this.datePartLength=t.datePartLength;this.timePartLength=t.timePartLength;this.nativeSupport=gx.HTML5&&(gx.util.browser.isIPhone()||gx.util.browser.isIPad()||gx.util.browser.isAndroid()&&gx.util.browser.isChrome());this.afterChange=t.afterChange;this.opts=t;this.getInputType=function(){return this.timePartLength>0&&this.datePartLength===0?"time":this.datePartLength>0&&this.timePartLength===0?"date":"datetime-local"};this.getTimeStep=function(){return this.timePartLength>6?1:60};this.resolveValue=function(n,t){var i,r,u;return gx.date.isNullDate(t)&&n!=="time"&&(t=new Date),n=="date"?(t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),i=t.toISOString().slice(0,10)):(t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),r=0,u=19,n=="time"&&(r=11,u=this.getTimeStep()==60?16:19),i=new gx.date.gxdate(t).Value.toISOString().slice(r,u)),i};this.render=function(){var e,i,f;if(!this.nativeSupport){e=this.opts.inputType!=="date";gx.html.onTypeAvailable("Calendar",this.installCalendar,[this.opts.inputId,this.opts.inline,e,this.opts.weeksNumbers,this.opts.mondayFirst,this.opts.format]);return}var r=this.$input,u=this.getInputType(),t=n("<input>");t.attr("type",u);(u==="time"||u==="datetime-local")&&t.attr("step",this.getTimeStep());t.css("position","absolute");t.css("top","0");t.css("left","0");t.css("opacity","0");t.attr("id",r.attr("id")+"-picker");this.dtPicker=t;r.parent().append(t);t.bind("touchstart touchend mousedown mouseup",function(){return r.prop("disabled")!==!0});i=this;f=function(n){var t=n.val(),u=new gx.date.gxdate(t,"Y4MD"),f=t!==""?u.Value:gx.date.nullDate();i.afterChange&&i.afterChange(null,f,r[0],i.opts.vStruct,i.opts.gxO)};this.$trigger.on("click",function(){var n=gx.date.dateObject(r.val()),o=gx.date.isNullDate(n),e;o||(e=i.resolveValue(u,n),t.val(e),f(t));t.trigger("click").trigger("focus")});gx.evt.attach(t[0],"change",function(){var t=n(this);f(t)})};this.installCalendar=function(t,i,r,u,f,e){var s=gx.dom.byId(t),o=n(s),h,c,l,a;(gx.lang.emptyObject(s)||s.nodeName!="SELECT")&&(i===0?(h=t+"_dp_trigger",c=gx.dom.byId(h),(c&&o.css("display")!=="none"&&o.css("visibility")!=="hidden"&&o.css("display")==="none"||o.css("visibility")==="hidden"||!c)&&(h=t),l=o.parent().closest(".dp_container")[0],a=!1,Calendar.setup({inputField:t,parentNode:l,showsTime:r,weekNumbers:u,mondayFirst:f,ifFormat:e,button:h,onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:!0,displayRight:a})):(gx.lang.emptyObject(s)||o.css("display","none"),Calendar.setup({inputField:t,showsTime:r,weekNumbers:u,mondayFirst:f,ifFormat:e,flat:t+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0})))}},actionGroup:function(){return{init:function(){n("[data-gx-base-lib='none']").length>0&&gx.fx.obs.addObserver("gx.onclick",this,function(t){var u=t.event,i=u.target,f,r;n(i).is(".gx-navbar .dropdown>a")&&(u.preventDefault(),f=i.getAttribute("aria-expanded"),r=function(t){var f=n(i).next(".gx-dropdown-menu"),u=t.event.target;n(u).closest(f).length||u==i||i.getAttribute("aria-expanded")==="true"&&(i.setAttribute("aria-expanded","false"),gx.fx.obs.deleteObserver("gx.onclick",this,r))},f==="false"?(gx.fx.obs.addObserver("gx.onclick",this,r),i.setAttribute("aria-expanded","true")):(gx.fx.obs.deleteObserver("gx.onclick",this,r),i.setAttribute("aria-expanded","false")))})},dynamicItems:function(){var n="data-gx-actiongroup-type",i='<li class="dropdown" data-gx-dynitem-source="{{containerName}}"><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle" title="{{TooltipText}}">{{Caption}}<span class="caret"><\/span><\/a><ul class="gx-dropdown-menu dropdown-menu {{Class}}">{{#Children}}{{> navbarItemTemplate}}{{/Children}}<\/ul><\/li>',r='<li data-gx-dynitem-source="{{containerName}}">{{#Link}}<a href="{{Link}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}<\/a>{{/Link}}{{^Link}}{{#Children.length}}{{> navbarDropDowntemplate}}{{/Children.length}}{{^Children.length}}<span class="gx-navbar-textblock {{Class}} navbar-text" data-gx-tpl-applied-navbar-textblock-text title="{{TooltipText}}">{{Caption}}<\/a>{{/Children.length}}{{/Link}}<\/li>',u="{{#Children}}{{> navbarItemTemplate}}{{/Children}}",t='{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}<\/a><\/span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}<\/div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{Caption}}<\/span>{{/Children.length}}{{/Link}}{{/Children}}';return function(f){this.preProcessItems=function(n){for(var t=0,i=n.length;t<i;t++)n[t].Children?this.preProcessItems(n[t].Children):n[t].Children=[]};this.getItems=function(){return this.items};this.setItems=function(n){this.preProcessItems(n);this.items=n||[]};this.getType=function(t){var i;return function(){return i||(i=f(t.getContainerControl()).closest("["+n+"]").attr(n)),i}}(this);this.renderMenu=function(n){var t="";this.IsPostBack?f('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove():f(this.getContainerControl()).after('<li data-gx-dynitem-hook="'+this.ContainerName+'"><\/li>').css("display","none").appendTo(gx.dom.form());n.length&&(t=Mustache.render(u,{containerName:this.ContainerName,Children:n},{navbarItemTemplate:r,navbarDropDowntemplate:i}),f('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(t))};this.renderToolbar=function(n){var i="";n.length&&(i=Mustache.render(t,{containerName:this.ContainerName,Children:n},{toolbarItemTemplate:t}));f(this.getContainerControl()).attr("data-gx-dynitem-container","").html(i)};this.show=function(){var n=this.getType(),t=gx.lang.isArray(this.items)?this.items:[this.items];n=="menu"?this.renderMenu(t):n=="toolbar"&&this.renderToolbar(t)};this.destroy=function(){var n=this.getType();n=="menu"?(f('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove(),f('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(this.getContainerControl()).remove()):n=="toolbar"&&f(this.getContainerControl()).html("")}}}()}}(),defineTabControl:function(n){return gx.lang.apply(n.prototype,t),n}}}(gx.$)